var d_=Object.defineProperty;var m_=(i,e,o)=>e in i?d_(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o;var x=(i,e,o)=>m_(i,typeof e!="symbol"?e+"":e,o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=o(a);fetch(a.href,u)}})();function h_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wu={exports:{}},xs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh;function p_(){if(jh)return xs;jh=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function o(s,a,u){var d=null;if(u!==void 0&&(d=""+u),a.key!==void 0&&(d=""+a.key),"key"in a){u={};for(var h in a)h!=="key"&&(u[h]=a[h])}else u=a;return a=u.ref,{$$typeof:i,type:s,key:d,ref:a!==void 0?a:null,props:u}}return xs.Fragment=e,xs.jsx=o,xs.jsxs=o,xs}var ep;function g_(){return ep||(ep=1,Wu.exports=p_()),Wu.exports}var _=g_(),ju={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function y_(){if(tp)return pe;tp=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),E=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,B={};function Y(M,$,ne){this.props=M,this.context=$,this.refs=B,this.updater=ne||R}Y.prototype.isReactComponent={},Y.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},Y.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function K(){}K.prototype=Y.prototype;function L(M,$,ne){this.props=M,this.context=$,this.refs=B,this.updater=ne||R}var O=L.prototype=new K;O.constructor=L,w(O,Y.prototype),O.isPureReactComponent=!0;var Z=Array.isArray;function j(){}var V={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function F(M,$,ne){var re=ne.ref;return{$$typeof:i,type:M,key:$,ref:re!==void 0?re:null,props:ne}}function ee(M,$){return F(M.type,$,M.props)}function ce(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function ae(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ne){return $[ne]})}var se=/\/+/g;function Te(M,$){return typeof M=="object"&&M!==null&&M.key!=null?ae(""+M.key):$.toString(36)}function Ie(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(j,j):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function H(M,$,ne,re,ge){var Ee=typeof M;(Ee==="undefined"||Ee==="boolean")&&(M=null);var De=!1;if(M===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(M.$$typeof){case i:case e:De=!0;break;case v:return De=M._init,H(De(M._payload),$,ne,re,ge)}}if(De)return ge=ge(M),De=re===""?"."+Te(M,0):re,Z(ge)?(ne="",De!=null&&(ne=De.replace(se,"$&/")+"/"),H(ge,$,ne,"",function(Lo){return Lo})):ge!=null&&(ce(ge)&&(ge=ee(ge,ne+(ge.key==null||M&&M.key===ge.key?"":(""+ge.key).replace(se,"$&/")+"/")+De)),$.push(ge)),1;De=0;var ht=re===""?".":re+":";if(Z(M))for(var Ye=0;Ye<M.length;Ye++)re=M[Ye],Ee=ht+Te(re,Ye),De+=H(re,$,ne,Ee,ge);else if(Ye=A(M),typeof Ye=="function")for(M=Ye.call(M),Ye=0;!(re=M.next()).done;)re=re.value,Ee=ht+Te(re,Ye++),De+=H(re,$,ne,Ee,ge);else if(Ee==="object"){if(typeof M.then=="function")return H(Ie(M),$,ne,re,ge);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return De}function te(M,$,ne){if(M==null)return M;var re=[],ge=0;return H(M,re,"","",function(Ee){return $.call(ne,Ee,ge++)}),re}function he(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(ne){(M._status===0||M._status===-1)&&(M._status=1,M._result=ne)},function(ne){(M._status===0||M._status===-1)&&(M._status=2,M._result=ne)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:te,forEach:function(M,$,ne){te(M,function(){$.apply(this,arguments)},ne)},count:function(M){var $=0;return te(M,function(){$++}),$},toArray:function(M){return te(M,function($){return $})||[]},only:function(M){if(!ce(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return pe.Activity=S,pe.Children=Ge,pe.Component=Y,pe.Fragment=o,pe.Profiler=a,pe.PureComponent=L,pe.StrictMode=s,pe.Suspense=y,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,pe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return V.H.useMemoCache(M)}},pe.cache=function(M){return function(){return M.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(M,$,ne){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var re=w({},M.props),ge=M.key;if($!=null)for(Ee in $.key!==void 0&&(ge=""+$.key),$)!z.call($,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&$.ref===void 0||(re[Ee]=$[Ee]);var Ee=arguments.length-2;if(Ee===1)re.children=ne;else if(1<Ee){for(var De=Array(Ee),ht=0;ht<Ee;ht++)De[ht]=arguments[ht+2];re.children=De}return F(M.type,ge,re)},pe.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},pe.createElement=function(M,$,ne){var re,ge={},Ee=null;if($!=null)for(re in $.key!==void 0&&(Ee=""+$.key),$)z.call($,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ge[re]=$[re]);var De=arguments.length-2;if(De===1)ge.children=ne;else if(1<De){for(var ht=Array(De),Ye=0;Ye<De;Ye++)ht[Ye]=arguments[Ye+2];ge.children=ht}if(M&&M.defaultProps)for(re in De=M.defaultProps,De)ge[re]===void 0&&(ge[re]=De[re]);return F(M,Ee,ge)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(M){return{$$typeof:h,render:M}},pe.isValidElement=ce,pe.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:he}},pe.memo=function(M,$){return{$$typeof:g,type:M,compare:$===void 0?null:$}},pe.startTransition=function(M){var $=V.T,ne={};V.T=ne;try{var re=M(),ge=V.S;ge!==null&&ge(ne,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(j,qe)}catch(Ee){qe(Ee)}finally{$!==null&&ne.types!==null&&($.types=ne.types),V.T=$}},pe.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},pe.use=function(M){return V.H.use(M)},pe.useActionState=function(M,$,ne){return V.H.useActionState(M,$,ne)},pe.useCallback=function(M,$){return V.H.useCallback(M,$)},pe.useContext=function(M){return V.H.useContext(M)},pe.useDebugValue=function(){},pe.useDeferredValue=function(M,$){return V.H.useDeferredValue(M,$)},pe.useEffect=function(M,$){return V.H.useEffect(M,$)},pe.useEffectEvent=function(M){return V.H.useEffectEvent(M)},pe.useId=function(){return V.H.useId()},pe.useImperativeHandle=function(M,$,ne){return V.H.useImperativeHandle(M,$,ne)},pe.useInsertionEffect=function(M,$){return V.H.useInsertionEffect(M,$)},pe.useLayoutEffect=function(M,$){return V.H.useLayoutEffect(M,$)},pe.useMemo=function(M,$){return V.H.useMemo(M,$)},pe.useOptimistic=function(M,$){return V.H.useOptimistic(M,$)},pe.useReducer=function(M,$,ne){return V.H.useReducer(M,$,ne)},pe.useRef=function(M){return V.H.useRef(M)},pe.useState=function(M){return V.H.useState(M)},pe.useSyncExternalStore=function(M,$,ne){return V.H.useSyncExternalStore(M,$,ne)},pe.useTransition=function(){return V.H.useTransition()},pe.version="19.2.0",pe}var np;function Ic(){return np||(np=1,ju.exports=y_()),ju.exports}var ve=Ic();const Eo=h_(ve);var ec={exports:{}},Ns={},tc={exports:{}},nc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function v_(){return ip||(ip=1,(function(i){function e(H,te){var he=H.length;H.push(te);e:for(;0<he;){var qe=he-1>>>1,Ge=H[qe];if(0<a(Ge,te))H[qe]=te,H[he]=Ge,he=qe;else break e}}function o(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var te=H[0],he=H.pop();if(he!==te){H[0]=he;e:for(var qe=0,Ge=H.length,M=Ge>>>1;qe<M;){var $=2*(qe+1)-1,ne=H[$],re=$+1,ge=H[re];if(0>a(ne,he))re<Ge&&0>a(ge,ne)?(H[qe]=ge,H[re]=he,qe=re):(H[qe]=ne,H[$]=he,qe=$);else if(re<Ge&&0>a(ge,he))H[qe]=ge,H[re]=he,qe=re;else break e}}return te}function a(H,te){var he=H.sortIndex-te.sortIndex;return he!==0?he:H.id-te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var y=[],g=[],v=1,S=null,E=3,A=!1,R=!1,w=!1,B=!1,Y=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(H){for(var te=o(g);te!==null;){if(te.callback===null)s(g);else if(te.startTime<=H)s(g),te.sortIndex=te.expirationTime,e(y,te);else break;te=o(g)}}function Z(H){if(w=!1,O(H),!R)if(o(y)!==null)R=!0,j||(j=!0,ae());else{var te=o(g);te!==null&&Ie(Z,te.startTime-H)}}var j=!1,V=-1,z=5,F=-1;function ee(){return B?!0:!(i.unstable_now()-F<z)}function ce(){if(B=!1,j){var H=i.unstable_now();F=H;var te=!0;try{e:{R=!1,w&&(w=!1,K(V),V=-1),A=!0;var he=E;try{t:{for(O(H),S=o(y);S!==null&&!(S.expirationTime>H&&ee());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,E=S.priorityLevel;var Ge=qe(S.expirationTime<=H);if(H=i.unstable_now(),typeof Ge=="function"){S.callback=Ge,O(H),te=!0;break t}S===o(y)&&s(y),O(H)}else s(y);S=o(y)}if(S!==null)te=!0;else{var M=o(g);M!==null&&Ie(Z,M.startTime-H),te=!1}}break e}finally{S=null,E=he,A=!1}te=void 0}}finally{te?ae():j=!1}}}var ae;if(typeof L=="function")ae=function(){L(ce)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Te=se.port2;se.port1.onmessage=ce,ae=function(){Te.postMessage(null)}}else ae=function(){Y(ce,0)};function Ie(H,te){V=Y(function(){H(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(H){switch(E){case 1:case 2:case 3:var te=3;break;default:te=E}var he=E;E=te;try{return H()}finally{E=he}},i.unstable_requestPaint=function(){B=!0},i.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var he=E;E=H;try{return te()}finally{E=he}},i.unstable_scheduleCallback=function(H,te,he){var qe=i.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?qe+he:qe):he=qe,H){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=he+Ge,H={id:v++,callback:te,priorityLevel:H,startTime:he,expirationTime:Ge,sortIndex:-1},he>qe?(H.sortIndex=he,e(g,H),o(y)===null&&H===o(g)&&(w?(K(V),V=-1):w=!0,Ie(Z,he-qe))):(H.sortIndex=Ge,e(y,H),R||A||(R=!0,j||(j=!0,ae()))),H},i.unstable_shouldYield=ee,i.unstable_wrapCallback=function(H){var te=E;return function(){var he=E;E=te;try{return H.apply(this,arguments)}finally{E=he}}}})(nc)),nc}var op;function S_(){return op||(op=1,tc.exports=v_()),tc.exports}var ic={exports:{}},ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function T_(){if(sp)return ft;sp=1;var i=Ic();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(e(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(y,g,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:S==null?null:""+S,children:y,containerInfo:g,implementation:v}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ft.createPortal=function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(y,g,null,v)},ft.flushSync=function(y){var g=d.T,v=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=g,s.p=v,s.d.f()}},ft.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(y,g))},ft.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},ft.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var v=g.as,S=h(v,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:A}):v==="script"&&s.d.X(y,{crossOrigin:S,integrity:E,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ft.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=h(g.as,g.crossOrigin);s.d.M(y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(y)},ft.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,S=h(v,g.crossOrigin);s.d.L(y,v,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ft.preloadModule=function(y,g){if(typeof y=="string")if(g){var v=h(g.as,g.crossOrigin);s.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(y)},ft.requestFormReset=function(y){s.d.r(y)},ft.unstable_batchedUpdates=function(y,g){return y(g)},ft.useFormState=function(y,g,v){return d.H.useFormState(y,g,v)},ft.useFormStatus=function(){return d.H.useHostTransitionStatus()},ft.version="19.2.0",ft}var lp;function E_(){if(lp)return ic.exports;lp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ic.exports=T_(),ic.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function C_(){if(ap)return Ns;ap=1;var i=S_(),e=Ic(),o=E_();function s(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,l=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(l=n.return),t=n.return;while(t)}return n.tag===3?l:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(s(188))}function g(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(s(188));return n!==t?null:t}for(var l=t,r=n;;){var m=l.return;if(m===null)break;var p=m.alternate;if(p===null){if(r=m.return,r!==null){l=r;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===l)return y(m),t;if(p===r)return y(m),n;p=p.sibling}throw Error(s(188))}if(l.return!==r.return)l=m,r=p;else{for(var T=!1,C=m.child;C;){if(C===l){T=!0,l=m,r=p;break}if(C===r){T=!0,r=m,l=p;break}C=C.sibling}if(!T){for(C=p.child;C;){if(C===l){T=!0,l=p,r=m;break}if(C===r){T=!0,r=p,l=m;break}C=C.sibling}if(!T)throw Error(s(189))}}if(l.alternate!==r)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function ae(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var se=Symbol.for("react.client.reference");function Te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case Y:return"Profiler";case B:return"StrictMode";case Z:return"Suspense";case j:return"SuspenseList";case F:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case R:return"Portal";case L:return t.displayName||"Context";case K:return(t._context.displayName||"Context")+".Consumer";case O:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return n=t.displayName||null,n!==null?n:Te(t.type)||"Memo";case z:n=t._payload,t=t._init;try{return Te(t(n))}catch{}}return null}var Ie=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},qe=[],Ge=-1;function M(t){return{current:t}}function $(t){0>Ge||(t.current=qe[Ge],qe[Ge]=null,Ge--)}function ne(t,n){Ge++,qe[Ge]=t.current,t.current=n}var re=M(null),ge=M(null),Ee=M(null),De=M(null);function ht(t,n){switch(ne(Ee,n),ne(ge,t),ne(re,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ch(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ch(n),t=_h(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(re),ne(re,t)}function Ye(){$(re),$(ge),$(Ee)}function Lo(t){t.memoizedState!==null&&ne(De,t);var n=re.current,l=_h(n,t.type);n!==l&&(ne(ge,t),ne(re,l))}function Hs(t){ge.current===t&&($(re),$(ge)),De.current===t&&($(De),Cs._currentValue=he)}var Ua,Zc;function ui(t){if(Ua===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);Ua=n&&n[1]||"",Zc=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ua+t+Zc}var qa=!1;function Pa(t,n){if(!t||qa)return"";qa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var P=G}Reflect.construct(t,[],J)}else{try{J.call()}catch(G){P=G}t.call(J.prototype)}}else{try{throw Error()}catch(G){P=G}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&P&&typeof G.stack=="string")return[G.stack,P.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=r.DetermineComponentFrameRoot(),T=p[0],C=p[1];if(T&&C){var N=T.split(`
`),q=C.split(`
`);for(m=r=0;r<N.length&&!N[r].includes("DetermineComponentFrameRoot");)r++;for(;m<q.length&&!q[m].includes("DetermineComponentFrameRoot");)m++;if(r===N.length||m===q.length)for(r=N.length-1,m=q.length-1;1<=r&&0<=m&&N[r]!==q[m];)m--;for(;1<=r&&0<=m;r--,m--)if(N[r]!==q[m]){if(r!==1||m!==1)do if(r--,m--,0>m||N[r]!==q[m]){var k=`
`+N[r].replace(" at new "," at ");return t.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",t.displayName)),k}while(1<=r&&0<=m);break}}}finally{qa=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?ui(l):""}function kT(t,n){switch(t.tag){case 26:case 27:case 5:return ui(t.type);case 16:return ui("Lazy");case 13:return t.child!==n&&n!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return Pa(t.type,!1);case 11:return Pa(t.type.render,!1);case 1:return Pa(t.type,!0);case 31:return ui("Activity");default:return""}}function Wc(t){try{var n="",l=null;do n+=kT(t,l),l=t,t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Ba=Object.prototype.hasOwnProperty,za=i.unstable_scheduleCallback,Ga=i.unstable_cancelCallback,FT=i.unstable_shouldYield,QT=i.unstable_requestPaint,Nt=i.unstable_now,JT=i.unstable_getCurrentPriorityLevel,jc=i.unstable_ImmediatePriority,ef=i.unstable_UserBlockingPriority,Vs=i.unstable_NormalPriority,YT=i.unstable_LowPriority,tf=i.unstable_IdlePriority,$T=i.log,KT=i.unstable_setDisableYieldValue,Uo=null,bt=null;function Ln(t){if(typeof $T=="function"&&KT(t),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Uo,t)}catch{}}var Rt=Math.clz32?Math.clz32:WT,XT=Math.log,ZT=Math.LN2;function WT(t){return t>>>=0,t===0?32:31-(XT(t)/ZT|0)|0}var Os=256,ks=262144,Fs=4194304;function ci(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qs(t,n,l){var r=t.pendingLanes;if(r===0)return 0;var m=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var C=r&134217727;return C!==0?(r=C&~p,r!==0?m=ci(r):(T&=C,T!==0?m=ci(T):l||(l=C&~t,l!==0&&(m=ci(l))))):(C=r&~p,C!==0?m=ci(C):T!==0?m=ci(T):l||(l=r&~t,l!==0&&(m=ci(l)))),m===0?0:n!==0&&n!==m&&(n&p)===0&&(p=m&-m,l=n&-n,p>=l||p===32&&(l&4194048)!==0)?n:m}function qo(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function jT(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nf(){var t=Fs;return Fs<<=1,(Fs&62914560)===0&&(Fs=4194304),t}function Ha(t){for(var n=[],l=0;31>l;l++)n.push(t);return n}function Po(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function eE(t,n,l,r,m,p){var T=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var C=t.entanglements,N=t.expirationTimes,q=t.hiddenUpdates;for(l=T&~l;0<l;){var k=31-Rt(l),J=1<<k;C[k]=0,N[k]=-1;var P=q[k];if(P!==null)for(q[k]=null,k=0;k<P.length;k++){var G=P[k];G!==null&&(G.lane&=-536870913)}l&=~J}r!==0&&of(t,r,0),p!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~n))}function of(t,n,l){t.pendingLanes|=n,t.suspendedLanes&=~n;var r=31-Rt(n);t.entangledLanes|=n,t.entanglements[r]=t.entanglements[r]|1073741824|l&261930}function sf(t,n){var l=t.entangledLanes|=n;for(t=t.entanglements;l;){var r=31-Rt(l),m=1<<r;m&n|t[r]&n&&(t[r]|=n),l&=~m}}function lf(t,n){var l=n&-n;return l=(l&42)!==0?1:Va(l),(l&(t.suspendedLanes|n))!==0?0:l}function Va(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Oa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function af(){var t=te.p;return t!==0?t:(t=window.event,t===void 0?32:Jh(t.type))}function rf(t,n){var l=te.p;try{return te.p=t,n()}finally{te.p=l}}var Un=Math.random().toString(36).slice(2),lt="__reactFiber$"+Un,St="__reactProps$"+Un,qi="__reactContainer$"+Un,ka="__reactEvents$"+Un,tE="__reactListeners$"+Un,nE="__reactHandles$"+Un,uf="__reactResources$"+Un,Bo="__reactMarker$"+Un;function Fa(t){delete t[lt],delete t[St],delete t[ka],delete t[tE],delete t[nE]}function Pi(t){var n=t[lt];if(n)return n;for(var l=t.parentNode;l;){if(n=l[qi]||l[lt]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(t=Mh(t);t!==null;){if(l=t[lt])return l;t=Mh(t)}return n}t=l,l=t.parentNode}return null}function Bi(t){if(t=t[lt]||t[qi]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function zo(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(s(33))}function zi(t){var n=t[uf];return n||(n=t[uf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function it(t){t[Bo]=!0}var cf=new Set,ff={};function fi(t,n){Gi(t,n),Gi(t+"Capture",n)}function Gi(t,n){for(ff[t]=n,t=0;t<n.length;t++)cf.add(n[t])}var iE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),df={},mf={};function oE(t){return Ba.call(mf,t)?!0:Ba.call(df,t)?!1:iE.test(t)?mf[t]=!0:(df[t]=!0,!1)}function Js(t,n,l){if(oE(n))if(l===null)t.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var r=n.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+l)}}function Ys(t,n,l){if(l===null)t.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+l)}}function un(t,n,l,r){if(r===null)t.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(n,l,""+r)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hf(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function sE(t,n,l){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var m=r.get,p=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return m.call(this)},set:function(T){l=""+T,p.call(this,T)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Qa(t){if(!t._valueTracker){var n=hf(t)?"checked":"value";t._valueTracker=sE(t,n,""+t[n])}}function pf(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var l=n.getValue(),r="";return t&&(r=hf(t)?t.checked?"true":"false":t.value),t=r,t!==l?(n.setValue(t),!0):!1}function $s(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var lE=/[\n"\\]/g;function Ht(t){return t.replace(lE,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ja(t,n,l,r,m,p,T,C){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),n!=null?T==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Gt(n)):t.value!==""+Gt(n)&&(t.value=""+Gt(n)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),n!=null?Ya(t,T,Gt(n)):l!=null?Ya(t,T,Gt(l)):r!=null&&t.removeAttribute("value"),m==null&&p!=null&&(t.defaultChecked=!!p),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+Gt(C):t.removeAttribute("name")}function gf(t,n,l,r,m,p,T,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),n!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){Qa(t);return}l=l!=null?""+Gt(l):"",n=n!=null?""+Gt(n):l,C||n===t.value||(t.value=n),t.defaultValue=n}r=r??m,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=C?t.checked:!!r,t.defaultChecked=!!r,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Qa(t)}function Ya(t,n,l){n==="number"&&$s(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Hi(t,n,l,r){if(t=t.options,n){n={};for(var m=0;m<l.length;m++)n["$"+l[m]]=!0;for(l=0;l<t.length;l++)m=n.hasOwnProperty("$"+t[l].value),t[l].selected!==m&&(t[l].selected=m),m&&r&&(t[l].defaultSelected=!0)}else{for(l=""+Gt(l),n=null,m=0;m<t.length;m++){if(t[m].value===l){t[m].selected=!0,r&&(t[m].defaultSelected=!0);return}n!==null||t[m].disabled||(n=t[m])}n!==null&&(n.selected=!0)}}function yf(t,n,l){if(n!=null&&(n=""+Gt(n),n!==t.value&&(t.value=n),l==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=l!=null?""+Gt(l):""}function vf(t,n,l,r){if(n==null){if(r!=null){if(l!=null)throw Error(s(92));if(Ie(r)){if(1<r.length)throw Error(s(93));r=r[0]}l=r}l==null&&(l=""),n=l}l=Gt(n),t.defaultValue=l,r=t.textContent,r===l&&r!==""&&r!==null&&(t.value=r),Qa(t)}function Vi(t,n){if(n){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=n;return}}t.textContent=n}var aE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sf(t,n,l){var r=n.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?r?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":r?t.setProperty(n,l):typeof l!="number"||l===0||aE.has(n)?n==="float"?t.cssFloat=l:t[n]=(""+l).trim():t[n]=l+"px"}function Tf(t,n,l){if(n!=null&&typeof n!="object")throw Error(s(62));if(t=t.style,l!=null){for(var r in l)!l.hasOwnProperty(r)||n!=null&&n.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var m in n)r=n[m],n.hasOwnProperty(m)&&l[m]!==r&&Sf(t,m,r)}else for(var p in n)n.hasOwnProperty(p)&&Sf(t,p,n[p])}function $a(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ks(t){return uE.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function cn(){}var Ka=null;function Xa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oi=null,ki=null;function Ef(t){var n=Bi(t);if(n&&(t=n.stateNode)){var l=t[St]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ja(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),n=l.name,l.type==="radio"&&n!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ht(""+n)+'"][type="radio"]'),n=0;n<l.length;n++){var r=l[n];if(r!==t&&r.form===t.form){var m=r[St]||null;if(!m)throw Error(s(90));Ja(r,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<l.length;n++)r=l[n],r.form===t.form&&pf(r)}break e;case"textarea":yf(t,l.value,l.defaultValue);break e;case"select":n=l.value,n!=null&&Hi(t,!!l.multiple,n,!1)}}}var Za=!1;function Cf(t,n,l){if(Za)return t(n,l);Za=!0;try{var r=t(n);return r}finally{if(Za=!1,(Oi!==null||ki!==null)&&(Pl(),Oi&&(n=Oi,t=ki,ki=Oi=null,Ef(n),t)))for(n=0;n<t.length;n++)Ef(t[n])}}function Go(t,n){var l=t.stateNode;if(l===null)return null;var r=l[St]||null;if(r===null)return null;l=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,n,typeof l));return l}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(fn)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{Wa=!1}var qn=null,ja=null,Xs=null;function _f(){if(Xs)return Xs;var t,n=ja,l=n.length,r,m="value"in qn?qn.value:qn.textContent,p=m.length;for(t=0;t<l&&n[t]===m[t];t++);var T=l-t;for(r=1;r<=T&&n[l-r]===m[p-r];r++);return Xs=m.slice(t,1<r?1-r:void 0)}function Zs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function Af(){return!1}function Tt(t){function n(l,r,m,p,T){this._reactName=l,this._targetInst=m,this.type=r,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(l=t[C],this[C]=l?l(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ws:Af,this.isPropagationStopped=Af,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),n}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=Tt(di),Vo=S({},di,{view:0,detail:0}),cE=Tt(Vo),er,tr,Oo,el=S({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ir,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(er=t.screenX-Oo.screenX,tr=t.screenY-Oo.screenY):tr=er=0,Oo=t),er)},movementY:function(t){return"movementY"in t?t.movementY:tr}}),wf=Tt(el),fE=S({},el,{dataTransfer:0}),dE=Tt(fE),mE=S({},Vo,{relatedTarget:0}),nr=Tt(mE),hE=S({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),pE=Tt(hE),gE=S({},di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yE=Tt(gE),vE=S({},di,{data:0}),xf=Tt(vE),SE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CE(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=EE[t])?!!n[t]:!1}function ir(){return CE}var _E=S({},Vo,{key:function(t){if(t.key){var n=SE[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Zs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ir,charCode:function(t){return t.type==="keypress"?Zs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AE=Tt(_E),wE=S({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=Tt(wE),xE=S({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ir}),NE=Tt(xE),bE=S({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),RE=Tt(bE),ME=S({},el,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DE=Tt(ME),IE=S({},di,{newState:0,oldState:0}),LE=Tt(IE),UE=[9,13,27,32],or=fn&&"CompositionEvent"in window,ko=null;fn&&"documentMode"in document&&(ko=document.documentMode);var qE=fn&&"TextEvent"in window&&!ko,bf=fn&&(!or||ko&&8<ko&&11>=ko),Rf=" ",Mf=!1;function Df(t,n){switch(t){case"keyup":return UE.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function If(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function PE(t,n){switch(t){case"compositionend":return If(n);case"keypress":return n.which!==32?null:(Mf=!0,Rf);case"textInput":return t=n.data,t===Rf&&Mf?null:t;default:return null}}function BE(t,n){if(Fi)return t==="compositionend"||!or&&Df(t,n)?(t=_f(),Xs=ja=qn=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return bf&&n.locale!=="ko"?null:n.data;default:return null}}var zE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!zE[t.type]:n==="textarea"}function Uf(t,n,l,r){Oi?ki?ki.push(r):ki=[r]:Oi=r,n=kl(n,"onChange"),0<n.length&&(l=new js("onChange","change",null,l,r),t.push({event:l,listeners:n}))}var Fo=null,Qo=null;function GE(t){gh(t,0)}function tl(t){var n=zo(t);if(pf(n))return t}function qf(t,n){if(t==="change")return n}var Pf=!1;if(fn){var sr;if(fn){var lr="oninput"in document;if(!lr){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),lr=typeof Bf.oninput=="function"}sr=lr}else sr=!1;Pf=sr&&(!document.documentMode||9<document.documentMode)}function zf(){Fo&&(Fo.detachEvent("onpropertychange",Gf),Qo=Fo=null)}function Gf(t){if(t.propertyName==="value"&&tl(Qo)){var n=[];Uf(n,Qo,t,Xa(t)),Cf(GE,n)}}function HE(t,n,l){t==="focusin"?(zf(),Fo=n,Qo=l,Fo.attachEvent("onpropertychange",Gf)):t==="focusout"&&zf()}function VE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Qo)}function OE(t,n){if(t==="click")return tl(n)}function kE(t,n){if(t==="input"||t==="change")return tl(n)}function FE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Mt=typeof Object.is=="function"?Object.is:FE;function Jo(t,n){if(Mt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var l=Object.keys(t),r=Object.keys(n);if(l.length!==r.length)return!1;for(r=0;r<l.length;r++){var m=l[r];if(!Ba.call(n,m)||!Mt(t[m],n[m]))return!1}return!0}function Hf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vf(t,n){var l=Hf(t);t=0;for(var r;l;){if(l.nodeType===3){if(r=t+l.textContent.length,t<=n&&r>=n)return{node:l,offset:n-t};t=r}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hf(l)}}function Of(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Of(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function kf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=$s(t.document);n instanceof t.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)t=n.contentWindow;else break;n=$s(t.document)}return n}function ar(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var QE=fn&&"documentMode"in document&&11>=document.documentMode,Qi=null,rr=null,Yo=null,ur=!1;function Ff(t,n,l){var r=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ur||Qi==null||Qi!==$s(r)||(r=Qi,"selectionStart"in r&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yo&&Jo(Yo,r)||(Yo=r,r=kl(rr,"onSelect"),0<r.length&&(n=new js("onSelect","select",null,n,l),t.push({event:n,listeners:r}),n.target=Qi)))}function mi(t,n){var l={};return l[t.toLowerCase()]=n.toLowerCase(),l["Webkit"+t]="webkit"+n,l["Moz"+t]="moz"+n,l}var Ji={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionrun:mi("Transition","TransitionRun"),transitionstart:mi("Transition","TransitionStart"),transitioncancel:mi("Transition","TransitionCancel"),transitionend:mi("Transition","TransitionEnd")},cr={},Qf={};fn&&(Qf=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function hi(t){if(cr[t])return cr[t];if(!Ji[t])return t;var n=Ji[t],l;for(l in n)if(n.hasOwnProperty(l)&&l in Qf)return cr[t]=n[l];return t}var Jf=hi("animationend"),Yf=hi("animationiteration"),$f=hi("animationstart"),JE=hi("transitionrun"),YE=hi("transitionstart"),$E=hi("transitioncancel"),Kf=hi("transitionend"),Xf=new Map,fr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fr.push("scrollEnd");function Zt(t,n){Xf.set(t,n),fi(n,[t])}var nl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Vt=[],Yi=0,dr=0;function il(){for(var t=Yi,n=dr=Yi=0;n<t;){var l=Vt[n];Vt[n++]=null;var r=Vt[n];Vt[n++]=null;var m=Vt[n];Vt[n++]=null;var p=Vt[n];if(Vt[n++]=null,r!==null&&m!==null){var T=r.pending;T===null?m.next=m:(m.next=T.next,T.next=m),r.pending=m}p!==0&&Zf(l,m,p)}}function ol(t,n,l,r){Vt[Yi++]=t,Vt[Yi++]=n,Vt[Yi++]=l,Vt[Yi++]=r,dr|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function mr(t,n,l,r){return ol(t,n,l,r),sl(t)}function pi(t,n){return ol(t,null,null,n),sl(t)}function Zf(t,n,l){t.lanes|=l;var r=t.alternate;r!==null&&(r.lanes|=l);for(var m=!1,p=t.return;p!==null;)p.childLanes|=l,r=p.alternate,r!==null&&(r.childLanes|=l),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(m=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,m&&n!==null&&(m=31-Rt(l),t=p.hiddenUpdates,r=t[m],r===null?t[m]=[n]:r.push(n),n.lane=l|536870912),p):null}function sl(t){if(50<ps)throw ps=0,Cu=null,Error(s(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var $i={};function KE(t,n,l,r){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,n,l,r){return new KE(t,n,l,r)}function hr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dn(t,n){var l=t.alternate;return l===null?(l=Dt(t.tag,n,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=n,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,n=t.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Wf(t,n){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,n=l.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function ll(t,n,l,r,m,p){var T=0;if(r=t,typeof t=="function")hr(t)&&(T=1);else if(typeof t=="string")T=e_(t,l,re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case F:return t=Dt(31,l,n,m),t.elementType=F,t.lanes=p,t;case w:return gi(l.children,m,p,n);case B:T=8,m|=24;break;case Y:return t=Dt(12,l,n,m|2),t.elementType=Y,t.lanes=p,t;case Z:return t=Dt(13,l,n,m),t.elementType=Z,t.lanes=p,t;case j:return t=Dt(19,l,n,m),t.elementType=j,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L:T=10;break e;case K:T=9;break e;case O:T=11;break e;case V:T=14;break e;case z:T=16,r=null;break e}T=29,l=Error(s(130,t===null?"null":typeof t,"")),r=null}return n=Dt(T,l,n,m),n.elementType=t,n.type=r,n.lanes=p,n}function gi(t,n,l,r){return t=Dt(7,t,r,n),t.lanes=l,t}function pr(t,n,l){return t=Dt(6,t,null,n),t.lanes=l,t}function jf(t){var n=Dt(18,null,null,0);return n.stateNode=t,n}function gr(t,n,l){return n=Dt(4,t.children!==null?t.children:[],t.key,n),n.lanes=l,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ed=new WeakMap;function Ot(t,n){if(typeof t=="object"&&t!==null){var l=ed.get(t);return l!==void 0?l:(n={value:t,source:n,stack:Wc(n)},ed.set(t,n),n)}return{value:t,source:n,stack:Wc(n)}}var Ki=[],Xi=0,al=null,$o=0,kt=[],Ft=0,Pn=null,nn=1,on="";function mn(t,n){Ki[Xi++]=$o,Ki[Xi++]=al,al=t,$o=n}function td(t,n,l){kt[Ft++]=nn,kt[Ft++]=on,kt[Ft++]=Pn,Pn=t;var r=nn;t=on;var m=32-Rt(r)-1;r&=~(1<<m),l+=1;var p=32-Rt(n)+m;if(30<p){var T=m-m%5;p=(r&(1<<T)-1).toString(32),r>>=T,m-=T,nn=1<<32-Rt(n)+m|l<<m|r,on=p+t}else nn=1<<p|l<<m|r,on=t}function yr(t){t.return!==null&&(mn(t,1),td(t,1,0))}function vr(t){for(;t===al;)al=Ki[--Xi],Ki[Xi]=null,$o=Ki[--Xi],Ki[Xi]=null;for(;t===Pn;)Pn=kt[--Ft],kt[Ft]=null,on=kt[--Ft],kt[Ft]=null,nn=kt[--Ft],kt[Ft]=null}function nd(t,n){kt[Ft++]=nn,kt[Ft++]=on,kt[Ft++]=Pn,nn=n.id,on=n.overflow,Pn=t}var at=null,Ve=null,xe=!1,Bn=null,Qt=!1,Sr=Error(s(519));function zn(t){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ko(Ot(n,t)),Sr}function id(t){var n=t.stateNode,l=t.type,r=t.memoizedProps;switch(n[lt]=t,n[St]=r,l){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(l=0;l<ys.length;l++)_e(ys[l],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":_e("invalid",n),gf(n,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":_e("invalid",n);break;case"textarea":_e("invalid",n),vf(n,r.value,r.defaultValue,r.children)}l=r.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||n.textContent===""+l||r.suppressHydrationWarning===!0||Th(n.textContent,l)?(r.popover!=null&&(_e("beforetoggle",n),_e("toggle",n)),r.onScroll!=null&&_e("scroll",n),r.onScrollEnd!=null&&_e("scrollend",n),r.onClick!=null&&(n.onclick=cn),n=!0):n=!1,n||zn(t,!0)}function od(t){for(at=t.return;at;)switch(at.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:at=at.return}}function Zi(t){if(t!==at)return!1;if(!xe)return od(t),xe=!0,!1;var n=t.tag,l;if((l=n!==3&&n!==27)&&((l=n===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Bu(t.type,t.memoizedProps)),l=!l),l&&Ve&&zn(t),od(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ve=Rh(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ve=Rh(t)}else n===27?(n=Ve,Wn(t.type)?(t=Ou,Ou=null,Ve=t):Ve=n):Ve=at?Yt(t.stateNode.nextSibling):null;return!0}function yi(){Ve=at=null,xe=!1}function Tr(){var t=Bn;return t!==null&&(At===null?At=t:At.push.apply(At,t),Bn=null),t}function Ko(t){Bn===null?Bn=[t]:Bn.push(t)}var Er=M(null),vi=null,hn=null;function Gn(t,n,l){ne(Er,n._currentValue),n._currentValue=l}function pn(t){t._currentValue=Er.current,$(Er)}function Cr(t,n,l){for(;t!==null;){var r=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),t===l)break;t=t.return}}function _r(t,n,l,r){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var p=m.dependencies;if(p!==null){var T=m.child;p=p.firstContext;e:for(;p!==null;){var C=p;p=m;for(var N=0;N<n.length;N++)if(C.context===n[N]){p.lanes|=l,C=p.alternate,C!==null&&(C.lanes|=l),Cr(p.return,l,t),r||(T=null);break e}p=C.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=l,p=T.alternate,p!==null&&(p.lanes|=l),Cr(T,l,t),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===t){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Wi(t,n,l,r){t=null;for(var m=n,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var C=m.type;Mt(m.pendingProps.value,T.value)||(t!==null?t.push(C):t=[C])}}else if(m===De.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Cs):t=[Cs])}m=m.return}t!==null&&_r(n,t,l,r),n.flags|=262144}function rl(t){for(t=t.firstContext;t!==null;){if(!Mt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Si(t){vi=t,hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rt(t){return sd(vi,t)}function ul(t,n){return vi===null&&Si(t),sd(t,n)}function sd(t,n){var l=n._currentValue;if(n={context:n,memoizedValue:l,next:null},hn===null){if(t===null)throw Error(s(308));hn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else hn=hn.next=n;return l}var XE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(l,r){t.push(r)}};this.abort=function(){n.aborted=!0,t.forEach(function(l){return l()})}},ZE=i.unstable_scheduleCallback,WE=i.unstable_NormalPriority,Ze={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ar(){return{controller:new XE,data:new Map,refCount:0}}function Xo(t){t.refCount--,t.refCount===0&&ZE(WE,function(){t.controller.abort()})}var Zo=null,wr=0,ji=0,eo=null;function jE(t,n){if(Zo===null){var l=Zo=[];wr=0,ji=bu(),eo={status:"pending",value:void 0,then:function(r){l.push(r)}}}return wr++,n.then(ld,ld),n}function ld(){if(--wr===0&&Zo!==null){eo!==null&&(eo.status="fulfilled");var t=Zo;Zo=null,ji=0,eo=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function eC(t,n){var l=[],r={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return t.then(function(){r.status="fulfilled",r.value=n;for(var m=0;m<l.length;m++)(0,l[m])(n)},function(m){for(r.status="rejected",r.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),r}var ad=H.S;H.S=function(t,n){Fm=Nt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&jE(t,n),ad!==null&&ad(t,n)};var Ti=M(null);function xr(){var t=Ti.current;return t!==null?t:He.pooledCache}function cl(t,n){n===null?ne(Ti,Ti.current):ne(Ti,n.pool)}function rd(){var t=xr();return t===null?null:{parent:Ze._currentValue,pool:t}}var to=Error(s(460)),Nr=Error(s(474)),fl=Error(s(542)),dl={then:function(){}};function ud(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cd(t,n,l){switch(l=t[l],l===void 0?t.push(n):l!==n&&(n.then(cn,cn),n=l),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,dd(t),t;default:if(typeof n.status=="string")n.then(cn,cn);else{if(t=He,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=n,t.status="pending",t.then(function(r){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=r}},function(r){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=r}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,dd(t),t}throw Ci=n,to}}function Ei(t){try{var n=t._init;return n(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ci=l,to):l}}var Ci=null;function fd(){if(Ci===null)throw Error(s(459));var t=Ci;return Ci=null,t}function dd(t){if(t===to||t===fl)throw Error(s(483))}var no=null,Wo=0;function ml(t){var n=Wo;return Wo+=1,no===null&&(no=[]),cd(no,t,n)}function jo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function hl(t,n){throw n.$$typeof===E?Error(s(525)):(t=Object.prototype.toString.call(n),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function md(t){function n(D,b){if(t){var U=D.deletions;U===null?(D.deletions=[b],D.flags|=16):U.push(b)}}function l(D,b){if(!t)return null;for(;b!==null;)n(D,b),b=b.sibling;return null}function r(D){for(var b=new Map;D!==null;)D.key!==null?b.set(D.key,D):b.set(D.index,D),D=D.sibling;return b}function m(D,b){return D=dn(D,b),D.index=0,D.sibling=null,D}function p(D,b,U){return D.index=U,t?(U=D.alternate,U!==null?(U=U.index,U<b?(D.flags|=67108866,b):U):(D.flags|=67108866,b)):(D.flags|=1048576,b)}function T(D){return t&&D.alternate===null&&(D.flags|=67108866),D}function C(D,b,U,Q){return b===null||b.tag!==6?(b=pr(U,D.mode,Q),b.return=D,b):(b=m(b,U),b.return=D,b)}function N(D,b,U,Q){var fe=U.type;return fe===w?k(D,b,U.props.children,Q,U.key):b!==null&&(b.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===z&&Ei(fe)===b.type)?(b=m(b,U.props),jo(b,U),b.return=D,b):(b=ll(U.type,U.key,U.props,null,D.mode,Q),jo(b,U),b.return=D,b)}function q(D,b,U,Q){return b===null||b.tag!==4||b.stateNode.containerInfo!==U.containerInfo||b.stateNode.implementation!==U.implementation?(b=gr(U,D.mode,Q),b.return=D,b):(b=m(b,U.children||[]),b.return=D,b)}function k(D,b,U,Q,fe){return b===null||b.tag!==7?(b=gi(U,D.mode,Q,fe),b.return=D,b):(b=m(b,U),b.return=D,b)}function J(D,b,U){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=pr(""+b,D.mode,U),b.return=D,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case A:return U=ll(b.type,b.key,b.props,null,D.mode,U),jo(U,b),U.return=D,U;case R:return b=gr(b,D.mode,U),b.return=D,b;case z:return b=Ei(b),J(D,b,U)}if(Ie(b)||ae(b))return b=gi(b,D.mode,U,null),b.return=D,b;if(typeof b.then=="function")return J(D,ml(b),U);if(b.$$typeof===L)return J(D,ul(D,b),U);hl(D,b)}return null}function P(D,b,U,Q){var fe=b!==null?b.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return fe!==null?null:C(D,b,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===fe?N(D,b,U,Q):null;case R:return U.key===fe?q(D,b,U,Q):null;case z:return U=Ei(U),P(D,b,U,Q)}if(Ie(U)||ae(U))return fe!==null?null:k(D,b,U,Q,null);if(typeof U.then=="function")return P(D,b,ml(U),Q);if(U.$$typeof===L)return P(D,b,ul(D,U),Q);hl(D,U)}return null}function G(D,b,U,Q,fe){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return D=D.get(U)||null,C(b,D,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return D=D.get(Q.key===null?U:Q.key)||null,N(b,D,Q,fe);case R:return D=D.get(Q.key===null?U:Q.key)||null,q(b,D,Q,fe);case z:return Q=Ei(Q),G(D,b,U,Q,fe)}if(Ie(Q)||ae(Q))return D=D.get(U)||null,k(b,D,Q,fe,null);if(typeof Q.then=="function")return G(D,b,U,ml(Q),fe);if(Q.$$typeof===L)return G(D,b,U,ul(b,Q),fe);hl(b,Q)}return null}function le(D,b,U,Q){for(var fe=null,Ne=null,ue=b,Se=b=0,we=null;ue!==null&&Se<U.length;Se++){ue.index>Se?(we=ue,ue=null):we=ue.sibling;var be=P(D,ue,U[Se],Q);if(be===null){ue===null&&(ue=we);break}t&&ue&&be.alternate===null&&n(D,ue),b=p(be,b,Se),Ne===null?fe=be:Ne.sibling=be,Ne=be,ue=we}if(Se===U.length)return l(D,ue),xe&&mn(D,Se),fe;if(ue===null){for(;Se<U.length;Se++)ue=J(D,U[Se],Q),ue!==null&&(b=p(ue,b,Se),Ne===null?fe=ue:Ne.sibling=ue,Ne=ue);return xe&&mn(D,Se),fe}for(ue=r(ue);Se<U.length;Se++)we=G(ue,D,Se,U[Se],Q),we!==null&&(t&&we.alternate!==null&&ue.delete(we.key===null?Se:we.key),b=p(we,b,Se),Ne===null?fe=we:Ne.sibling=we,Ne=we);return t&&ue.forEach(function(ii){return n(D,ii)}),xe&&mn(D,Se),fe}function me(D,b,U,Q){if(U==null)throw Error(s(151));for(var fe=null,Ne=null,ue=b,Se=b=0,we=null,be=U.next();ue!==null&&!be.done;Se++,be=U.next()){ue.index>Se?(we=ue,ue=null):we=ue.sibling;var ii=P(D,ue,be.value,Q);if(ii===null){ue===null&&(ue=we);break}t&&ue&&ii.alternate===null&&n(D,ue),b=p(ii,b,Se),Ne===null?fe=ii:Ne.sibling=ii,Ne=ii,ue=we}if(be.done)return l(D,ue),xe&&mn(D,Se),fe;if(ue===null){for(;!be.done;Se++,be=U.next())be=J(D,be.value,Q),be!==null&&(b=p(be,b,Se),Ne===null?fe=be:Ne.sibling=be,Ne=be);return xe&&mn(D,Se),fe}for(ue=r(ue);!be.done;Se++,be=U.next())be=G(ue,D,Se,be.value,Q),be!==null&&(t&&be.alternate!==null&&ue.delete(be.key===null?Se:be.key),b=p(be,b,Se),Ne===null?fe=be:Ne.sibling=be,Ne=be);return t&&ue.forEach(function(f_){return n(D,f_)}),xe&&mn(D,Se),fe}function ze(D,b,U,Q){if(typeof U=="object"&&U!==null&&U.type===w&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:e:{for(var fe=U.key;b!==null;){if(b.key===fe){if(fe=U.type,fe===w){if(b.tag===7){l(D,b.sibling),Q=m(b,U.props.children),Q.return=D,D=Q;break e}}else if(b.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===z&&Ei(fe)===b.type){l(D,b.sibling),Q=m(b,U.props),jo(Q,U),Q.return=D,D=Q;break e}l(D,b);break}else n(D,b);b=b.sibling}U.type===w?(Q=gi(U.props.children,D.mode,Q,U.key),Q.return=D,D=Q):(Q=ll(U.type,U.key,U.props,null,D.mode,Q),jo(Q,U),Q.return=D,D=Q)}return T(D);case R:e:{for(fe=U.key;b!==null;){if(b.key===fe)if(b.tag===4&&b.stateNode.containerInfo===U.containerInfo&&b.stateNode.implementation===U.implementation){l(D,b.sibling),Q=m(b,U.children||[]),Q.return=D,D=Q;break e}else{l(D,b);break}else n(D,b);b=b.sibling}Q=gr(U,D.mode,Q),Q.return=D,D=Q}return T(D);case z:return U=Ei(U),ze(D,b,U,Q)}if(Ie(U))return le(D,b,U,Q);if(ae(U)){if(fe=ae(U),typeof fe!="function")throw Error(s(150));return U=fe.call(U),me(D,b,U,Q)}if(typeof U.then=="function")return ze(D,b,ml(U),Q);if(U.$$typeof===L)return ze(D,b,ul(D,U),Q);hl(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,b!==null&&b.tag===6?(l(D,b.sibling),Q=m(b,U),Q.return=D,D=Q):(l(D,b),Q=pr(U,D.mode,Q),Q.return=D,D=Q),T(D)):l(D,b)}return function(D,b,U,Q){try{Wo=0;var fe=ze(D,b,U,Q);return no=null,fe}catch(ue){if(ue===to||ue===fl)throw ue;var Ne=Dt(29,ue,null,D.mode);return Ne.lanes=Q,Ne.return=D,Ne}finally{}}}var _i=md(!0),hd=md(!1),Hn=!1;function br(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rr(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function On(t,n,l){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Me&2)!==0){var m=r.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),r.pending=n,n=sl(t),Zf(t,null,l),n}return ol(t,r,n,l),sl(t)}function es(t,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194048)!==0)){var r=n.lanes;r&=t.pendingLanes,l|=r,n.lanes=l,sf(t,l)}}function Mr(t,n){var l=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,l===r)){var m=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?m=p=T:p=p.next=T,l=l.next}while(l!==null);p===null?m=p=n:p=p.next=n}else m=p=n;l={baseState:r.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:r.shared,callbacks:r.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=n:t.next=n,l.lastBaseUpdate=n}var Dr=!1;function ts(){if(Dr){var t=eo;if(t!==null)throw t}}function ns(t,n,l,r){Dr=!1;var m=t.updateQueue;Hn=!1;var p=m.firstBaseUpdate,T=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var N=C,q=N.next;N.next=null,T===null?p=q:T.next=q,T=N;var k=t.alternate;k!==null&&(k=k.updateQueue,C=k.lastBaseUpdate,C!==T&&(C===null?k.firstBaseUpdate=q:C.next=q,k.lastBaseUpdate=N))}if(p!==null){var J=m.baseState;T=0,k=q=N=null,C=p;do{var P=C.lane&-536870913,G=P!==C.lane;if(G?(Ae&P)===P:(r&P)===P){P!==0&&P===ji&&(Dr=!0),k!==null&&(k=k.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var le=t,me=C;P=n;var ze=l;switch(me.tag){case 1:if(le=me.payload,typeof le=="function"){J=le.call(ze,J,P);break e}J=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=me.payload,P=typeof le=="function"?le.call(ze,J,P):le,P==null)break e;J=S({},J,P);break e;case 2:Hn=!0}}P=C.callback,P!==null&&(t.flags|=64,G&&(t.flags|=8192),G=m.callbacks,G===null?m.callbacks=[P]:G.push(P))}else G={lane:P,tag:C.tag,payload:C.payload,callback:C.callback,next:null},k===null?(q=k=G,N=J):k=k.next=G,T|=P;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;G=C,C=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);k===null&&(N=J),m.baseState=N,m.firstBaseUpdate=q,m.lastBaseUpdate=k,p===null&&(m.shared.lanes=0),Yn|=T,t.lanes=T,t.memoizedState=J}}function pd(t,n){if(typeof t!="function")throw Error(s(191,t));t.call(n)}function gd(t,n){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)pd(l[t],n)}var io=M(null),pl=M(0);function yd(t,n){t=An,ne(pl,t),ne(io,n),An=t|n.baseLanes}function Ir(){ne(pl,An),ne(io,io.current)}function Lr(){An=pl.current,$(io),$(pl)}var It=M(null),Jt=null;function kn(t){var n=t.alternate;ne($e,$e.current&1),ne(It,t),Jt===null&&(n===null||io.current!==null||n.memoizedState!==null)&&(Jt=t)}function Ur(t){ne($e,$e.current),ne(It,t),Jt===null&&(Jt=t)}function vd(t){t.tag===22?(ne($e,$e.current),ne(It,t),Jt===null&&(Jt=t)):Fn()}function Fn(){ne($e,$e.current),ne(It,It.current)}function Lt(t){$(It),Jt===t&&(Jt=null),$($e)}var $e=M(0);function gl(t){for(var n=t;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Hu(l)||Vu(l)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var gn=0,ye=null,Pe=null,We=null,yl=!1,oo=!1,Ai=!1,vl=0,is=0,so=null,tC=0;function Qe(){throw Error(s(321))}function qr(t,n){if(n===null)return!1;for(var l=0;l<n.length&&l<t.length;l++)if(!Mt(t[l],n[l]))return!1;return!0}function Pr(t,n,l,r,m,p){return gn=p,ye=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=t===null||t.memoizedState===null?tm:Zr,Ai=!1,p=l(r,m),Ai=!1,oo&&(p=Td(n,l,r,m)),Sd(t),p}function Sd(t){H.H=ls;var n=Pe!==null&&Pe.next!==null;if(gn=0,We=Pe=ye=null,yl=!1,is=0,so=null,n)throw Error(s(300));t===null||je||(t=t.dependencies,t!==null&&rl(t)&&(je=!0))}function Td(t,n,l,r){ye=t;var m=0;do{if(oo&&(so=null),is=0,oo=!1,25<=m)throw Error(s(301));if(m+=1,We=Pe=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}H.H=nm,p=n(l,r)}while(oo);return p}function nC(){var t=H.H,n=t.useState()[0];return n=typeof n.then=="function"?os(n):n,t=t.useState()[0],(Pe!==null?Pe.memoizedState:null)!==t&&(ye.flags|=1024),n}function Br(){var t=vl!==0;return vl=0,t}function zr(t,n,l){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~l}function Gr(t){if(yl){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}yl=!1}gn=0,We=Pe=ye=null,oo=!1,is=vl=0,so=null}function pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?ye.memoizedState=We=t:We=We.next=t,We}function Ke(){if(Pe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var n=We===null?ye.memoizedState:We.next;if(n!==null)We=n,Pe=t;else{if(t===null)throw ye.alternate===null?Error(s(467)):Error(s(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},We===null?ye.memoizedState=We=t:We=We.next=t}return We}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function os(t){var n=is;return is+=1,so===null&&(so=[]),t=cd(so,t,n),n=ye,(We===null?n.memoizedState:We.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?tm:Zr),t}function Tl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return os(t);if(t.$$typeof===L)return rt(t)}throw Error(s(438,String(t)))}function Hr(t){var n=null,l=ye.updateQueue;if(l!==null&&(n=l.memoCache),n==null){var r=ye.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(n={data:r.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),l===null&&(l=Sl(),ye.updateQueue=l),l.memoCache=n,l=n.data[n.index],l===void 0)for(l=n.data[n.index]=Array(t),r=0;r<t;r++)l[r]=ee;return n.index++,l}function yn(t,n){return typeof n=="function"?n(t):n}function El(t){var n=Ke();return Vr(n,Pe,t)}function Vr(t,n,l){var r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=l;var m=t.baseQueue,p=r.pending;if(p!==null){if(m!==null){var T=m.next;m.next=p.next,p.next=T}n.baseQueue=m=p,r.pending=null}if(p=t.baseState,m===null)t.memoizedState=p;else{n=m.next;var C=T=null,N=null,q=n,k=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(Ae&J)===J:(gn&J)===J){var P=q.revertLane;if(P===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===ji&&(k=!0);else if((gn&P)===P){q=q.next,P===ji&&(k=!0);continue}else J={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(C=N=J,T=p):N=N.next=J,ye.lanes|=P,Yn|=P;J=q.action,Ai&&l(p,J),p=q.hasEagerState?q.eagerState:l(p,J)}else P={lane:J,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(C=N=P,T=p):N=N.next=P,ye.lanes|=J,Yn|=J;q=q.next}while(q!==null&&q!==n);if(N===null?T=p:N.next=C,!Mt(p,t.memoizedState)&&(je=!0,k&&(l=eo,l!==null)))throw l;t.memoizedState=p,t.baseState=T,t.baseQueue=N,r.lastRenderedState=p}return m===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Or(t){var n=Ke(),l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var r=l.dispatch,m=l.pending,p=n.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do p=t(p,T.action),T=T.next;while(T!==m);Mt(p,n.memoizedState)||(je=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),l.lastRenderedState=p}return[p,r]}function Ed(t,n,l){var r=ye,m=Ke(),p=xe;if(p){if(l===void 0)throw Error(s(407));l=l()}else l=n();var T=!Mt((Pe||m).memoizedState,l);if(T&&(m.memoizedState=l,je=!0),m=m.queue,Qr(Ad.bind(null,r,m,t),[t]),m.getSnapshot!==n||T||We!==null&&We.memoizedState.tag&1){if(r.flags|=2048,lo(9,{destroy:void 0},_d.bind(null,r,m,l,n),null),He===null)throw Error(s(349));p||(gn&127)!==0||Cd(r,n,l)}return l}function Cd(t,n,l){t.flags|=16384,t={getSnapshot:n,value:l},n=ye.updateQueue,n===null?(n=Sl(),ye.updateQueue=n,n.stores=[t]):(l=n.stores,l===null?n.stores=[t]:l.push(t))}function _d(t,n,l,r){n.value=l,n.getSnapshot=r,wd(n)&&xd(t)}function Ad(t,n,l){return l(function(){wd(n)&&xd(t)})}function wd(t){var n=t.getSnapshot;t=t.value;try{var l=n();return!Mt(t,l)}catch{return!0}}function xd(t){var n=pi(t,2);n!==null&&wt(n,t,2)}function kr(t){var n=pt();if(typeof t=="function"){var l=t;if(t=l(),Ai){Ln(!0);try{l()}finally{Ln(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:t},n}function Nd(t,n,l,r){return t.baseState=l,Vr(t,Pe,typeof r=="function"?r:yn)}function iC(t,n,l,r,m){if(Al(t))throw Error(s(485));if(t=n.action,t!==null){var p={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};H.T!==null?l(!0):p.isTransition=!1,r(p),l=n.pending,l===null?(p.next=n.pending=p,bd(n,p)):(p.next=l.next,n.pending=l.next=p)}}function bd(t,n){var l=n.action,r=n.payload,m=t.state;if(n.isTransition){var p=H.T,T={};H.T=T;try{var C=l(m,r),N=H.S;N!==null&&N(T,C),Rd(t,n,C)}catch(q){Fr(t,n,q)}finally{p!==null&&T.types!==null&&(p.types=T.types),H.T=p}}else try{p=l(m,r),Rd(t,n,p)}catch(q){Fr(t,n,q)}}function Rd(t,n,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(r){Md(t,n,r)},function(r){return Fr(t,n,r)}):Md(t,n,l)}function Md(t,n,l){n.status="fulfilled",n.value=l,Dd(n),t.state=l,n=t.pending,n!==null&&(l=n.next,l===n?t.pending=null:(l=l.next,n.next=l,bd(t,l)))}function Fr(t,n,l){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do n.status="rejected",n.reason=l,Dd(n),n=n.next;while(n!==r)}t.action=null}function Dd(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Id(t,n){return n}function Ld(t,n){if(xe){var l=He.formState;if(l!==null){e:{var r=ye;if(xe){if(Ve){t:{for(var m=Ve,p=Qt;m.nodeType!==8;){if(!p){m=null;break t}if(m=Yt(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){Ve=Yt(m.nextSibling),r=m.data==="F!";break e}}zn(r)}r=!1}r&&(n=l[0])}}return l=pt(),l.memoizedState=l.baseState=n,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:n},l.queue=r,l=Wd.bind(null,ye,r),r.dispatch=l,r=kr(!1),p=Xr.bind(null,ye,!1,r.queue),r=pt(),m={state:n,dispatch:null,action:t,pending:null},r.queue=m,l=iC.bind(null,ye,m,p,l),m.dispatch=l,r.memoizedState=t,[n,l,!1]}function Ud(t){var n=Ke();return qd(n,Pe,t)}function qd(t,n,l){if(n=Vr(t,n,Id)[0],t=El(yn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var r=os(n)}catch(T){throw T===to?fl:T}else r=n;n=Ke();var m=n.queue,p=m.dispatch;return l!==n.memoizedState&&(ye.flags|=2048,lo(9,{destroy:void 0},oC.bind(null,m,l),null)),[r,p,t]}function oC(t,n){t.action=n}function Pd(t){var n=Ke(),l=Pe;if(l!==null)return qd(n,l,t);Ke(),n=n.memoizedState,l=Ke();var r=l.queue.dispatch;return l.memoizedState=t,[n,r,!1]}function lo(t,n,l,r){return t={tag:t,create:l,deps:r,inst:n,next:null},n=ye.updateQueue,n===null&&(n=Sl(),ye.updateQueue=n),l=n.lastEffect,l===null?n.lastEffect=t.next=t:(r=l.next,l.next=t,t.next=r,n.lastEffect=t),t}function Bd(){return Ke().memoizedState}function Cl(t,n,l,r){var m=pt();ye.flags|=t,m.memoizedState=lo(1|n,{destroy:void 0},l,r===void 0?null:r)}function _l(t,n,l,r){var m=Ke();r=r===void 0?null:r;var p=m.memoizedState.inst;Pe!==null&&r!==null&&qr(r,Pe.memoizedState.deps)?m.memoizedState=lo(n,p,l,r):(ye.flags|=t,m.memoizedState=lo(1|n,p,l,r))}function zd(t,n){Cl(8390656,8,t,n)}function Qr(t,n){_l(2048,8,t,n)}function sC(t){ye.flags|=4;var n=ye.updateQueue;if(n===null)n=Sl(),ye.updateQueue=n,n.events=[t];else{var l=n.events;l===null?n.events=[t]:l.push(t)}}function Gd(t){var n=Ke().memoizedState;return sC({ref:n,nextImpl:t}),function(){if((Me&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Hd(t,n){return _l(4,2,t,n)}function Vd(t,n){return _l(4,4,t,n)}function Od(t,n){if(typeof n=="function"){t=t();var l=n(t);return function(){typeof l=="function"?l():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function kd(t,n,l){l=l!=null?l.concat([t]):null,_l(4,4,Od.bind(null,n,t),l)}function Jr(){}function Fd(t,n){var l=Ke();n=n===void 0?null:n;var r=l.memoizedState;return n!==null&&qr(n,r[1])?r[0]:(l.memoizedState=[t,n],t)}function Qd(t,n){var l=Ke();n=n===void 0?null:n;var r=l.memoizedState;if(n!==null&&qr(n,r[1]))return r[0];if(r=t(),Ai){Ln(!0);try{t()}finally{Ln(!1)}}return l.memoizedState=[r,n],r}function Yr(t,n,l){return l===void 0||(gn&1073741824)!==0&&(Ae&261930)===0?t.memoizedState=n:(t.memoizedState=l,t=Jm(),ye.lanes|=t,Yn|=t,l)}function Jd(t,n,l,r){return Mt(l,n)?l:io.current!==null?(t=Yr(t,l,r),Mt(t,n)||(je=!0),t):(gn&42)===0||(gn&1073741824)!==0&&(Ae&261930)===0?(je=!0,t.memoizedState=l):(t=Jm(),ye.lanes|=t,Yn|=t,n)}function Yd(t,n,l,r,m){var p=te.p;te.p=p!==0&&8>p?p:8;var T=H.T,C={};H.T=C,Xr(t,!1,n,l);try{var N=m(),q=H.S;if(q!==null&&q(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var k=eC(N,r);ss(t,n,k,Pt(t))}else ss(t,n,r,Pt(t))}catch(J){ss(t,n,{then:function(){},status:"rejected",reason:J},Pt())}finally{te.p=p,T!==null&&C.types!==null&&(T.types=C.types),H.T=T}}function lC(){}function $r(t,n,l,r){if(t.tag!==5)throw Error(s(476));var m=$d(t).queue;Yd(t,m,n,he,l===null?lC:function(){return Kd(t),l(r)})}function $d(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:he},next:null};var l={};return n.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:l},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Kd(t){var n=$d(t);n.next===null&&(n=t.alternate.memoizedState),ss(t,n.next.queue,{},Pt())}function Kr(){return rt(Cs)}function Xd(){return Ke().memoizedState}function Zd(){return Ke().memoizedState}function aC(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var l=Pt();t=Vn(l);var r=On(n,t,l);r!==null&&(wt(r,n,l),es(r,n,l)),n={cache:Ar()},t.payload=n;return}n=n.return}}function rC(t,n,l){var r=Pt();l={lane:r,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Al(t)?jd(n,l):(l=mr(t,n,l,r),l!==null&&(wt(l,t,r),em(l,n,r)))}function Wd(t,n,l){var r=Pt();ss(t,n,l,r)}function ss(t,n,l,r){var m={lane:r,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Al(t))jd(n,m);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var T=n.lastRenderedState,C=p(T,l);if(m.hasEagerState=!0,m.eagerState=C,Mt(C,T))return ol(t,n,m,0),He===null&&il(),!1}catch{}finally{}if(l=mr(t,n,m,r),l!==null)return wt(l,t,r),em(l,n,r),!0}return!1}function Xr(t,n,l,r){if(r={lane:2,revertLane:bu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Al(t)){if(n)throw Error(s(479))}else n=mr(t,l,r,2),n!==null&&wt(n,t,2)}function Al(t){var n=t.alternate;return t===ye||n!==null&&n===ye}function jd(t,n){oo=yl=!0;var l=t.pending;l===null?n.next=n:(n.next=l.next,l.next=n),t.pending=n}function em(t,n,l){if((l&4194048)!==0){var r=n.lanes;r&=t.pendingLanes,l|=r,n.lanes=l,sf(t,l)}}var ls={readContext:rt,use:Tl,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};ls.useEffectEvent=Qe;var tm={readContext:rt,use:Tl,useCallback:function(t,n){return pt().memoizedState=[t,n===void 0?null:n],t},useContext:rt,useEffect:zd,useImperativeHandle:function(t,n,l){l=l!=null?l.concat([t]):null,Cl(4194308,4,Od.bind(null,n,t),l)},useLayoutEffect:function(t,n){return Cl(4194308,4,t,n)},useInsertionEffect:function(t,n){Cl(4,2,t,n)},useMemo:function(t,n){var l=pt();n=n===void 0?null:n;var r=t();if(Ai){Ln(!0);try{t()}finally{Ln(!1)}}return l.memoizedState=[r,n],r},useReducer:function(t,n,l){var r=pt();if(l!==void 0){var m=l(n);if(Ai){Ln(!0);try{l(n)}finally{Ln(!1)}}}else m=n;return r.memoizedState=r.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},r.queue=t,t=t.dispatch=rC.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var n=pt();return t={current:t},n.memoizedState=t},useState:function(t){t=kr(t);var n=t.queue,l=Wd.bind(null,ye,n);return n.dispatch=l,[t.memoizedState,l]},useDebugValue:Jr,useDeferredValue:function(t,n){var l=pt();return Yr(l,t,n)},useTransition:function(){var t=kr(!1);return t=Yd.bind(null,ye,t.queue,!0,!1),pt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,l){var r=ye,m=pt();if(xe){if(l===void 0)throw Error(s(407));l=l()}else{if(l=n(),He===null)throw Error(s(349));(Ae&127)!==0||Cd(r,n,l)}m.memoizedState=l;var p={value:l,getSnapshot:n};return m.queue=p,zd(Ad.bind(null,r,p,t),[t]),r.flags|=2048,lo(9,{destroy:void 0},_d.bind(null,r,p,l,n),null),l},useId:function(){var t=pt(),n=He.identifierPrefix;if(xe){var l=on,r=nn;l=(r&~(1<<32-Rt(r)-1)).toString(32)+l,n="_"+n+"R_"+l,l=vl++,0<l&&(n+="H"+l.toString(32)),n+="_"}else l=tC++,n="_"+n+"r_"+l.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Kr,useFormState:Ld,useActionState:Ld,useOptimistic:function(t){var n=pt();n.memoizedState=n.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=l,n=Xr.bind(null,ye,!0,l),l.dispatch=n,[t,n]},useMemoCache:Hr,useCacheRefresh:function(){return pt().memoizedState=aC.bind(null,ye)},useEffectEvent:function(t){var n=pt(),l={impl:t};return n.memoizedState=l,function(){if((Me&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Zr={readContext:rt,use:Tl,useCallback:Fd,useContext:rt,useEffect:Qr,useImperativeHandle:kd,useInsertionEffect:Hd,useLayoutEffect:Vd,useMemo:Qd,useReducer:El,useRef:Bd,useState:function(){return El(yn)},useDebugValue:Jr,useDeferredValue:function(t,n){var l=Ke();return Jd(l,Pe.memoizedState,t,n)},useTransition:function(){var t=El(yn)[0],n=Ke().memoizedState;return[typeof t=="boolean"?t:os(t),n]},useSyncExternalStore:Ed,useId:Xd,useHostTransitionStatus:Kr,useFormState:Ud,useActionState:Ud,useOptimistic:function(t,n){var l=Ke();return Nd(l,Pe,t,n)},useMemoCache:Hr,useCacheRefresh:Zd};Zr.useEffectEvent=Gd;var nm={readContext:rt,use:Tl,useCallback:Fd,useContext:rt,useEffect:Qr,useImperativeHandle:kd,useInsertionEffect:Hd,useLayoutEffect:Vd,useMemo:Qd,useReducer:Or,useRef:Bd,useState:function(){return Or(yn)},useDebugValue:Jr,useDeferredValue:function(t,n){var l=Ke();return Pe===null?Yr(l,t,n):Jd(l,Pe.memoizedState,t,n)},useTransition:function(){var t=Or(yn)[0],n=Ke().memoizedState;return[typeof t=="boolean"?t:os(t),n]},useSyncExternalStore:Ed,useId:Xd,useHostTransitionStatus:Kr,useFormState:Pd,useActionState:Pd,useOptimistic:function(t,n){var l=Ke();return Pe!==null?Nd(l,Pe,t,n):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Hr,useCacheRefresh:Zd};nm.useEffectEvent=Gd;function Wr(t,n,l,r){n=t.memoizedState,l=l(r,n),l=l==null?n:S({},n,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var jr={enqueueSetState:function(t,n,l){t=t._reactInternals;var r=Pt(),m=Vn(r);m.payload=n,l!=null&&(m.callback=l),n=On(t,m,r),n!==null&&(wt(n,t,r),es(n,t,r))},enqueueReplaceState:function(t,n,l){t=t._reactInternals;var r=Pt(),m=Vn(r);m.tag=1,m.payload=n,l!=null&&(m.callback=l),n=On(t,m,r),n!==null&&(wt(n,t,r),es(n,t,r))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var l=Pt(),r=Vn(l);r.tag=2,n!=null&&(r.callback=n),n=On(t,r,l),n!==null&&(wt(n,t,l),es(n,t,l))}};function im(t,n,l,r,m,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,p,T):n.prototype&&n.prototype.isPureReactComponent?!Jo(l,r)||!Jo(m,p):!0}function om(t,n,l,r){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,r),n.state!==t&&jr.enqueueReplaceState(n,n.state,null)}function wi(t,n){var l=n;if("ref"in n){l={};for(var r in n)r!=="ref"&&(l[r]=n[r])}if(t=t.defaultProps){l===n&&(l=S({},l));for(var m in t)l[m]===void 0&&(l[m]=t[m])}return l}function sm(t){nl(t)}function lm(t){console.error(t)}function am(t){nl(t)}function wl(t,n){try{var l=t.onUncaughtError;l(n.value,{componentStack:n.stack})}catch(r){setTimeout(function(){throw r})}}function rm(t,n,l){try{var r=t.onCaughtError;r(l.value,{componentStack:l.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function eu(t,n,l){return l=Vn(l),l.tag=3,l.payload={element:null},l.callback=function(){wl(t,n)},l}function um(t){return t=Vn(t),t.tag=3,t}function cm(t,n,l,r){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var p=r.value;t.payload=function(){return m(p)},t.callback=function(){rm(n,l,r)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){rm(n,l,r),typeof m!="function"&&($n===null?$n=new Set([this]):$n.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})})}function uC(t,n,l,r,m){if(l.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(n=l.alternate,n!==null&&Wi(n,l,m,!0),l=It.current,l!==null){switch(l.tag){case 31:case 13:return Jt===null?Bl():l.alternate===null&&Je===0&&(Je=3),l.flags&=-257,l.flags|=65536,l.lanes=m,r===dl?l.flags|=16384:(n=l.updateQueue,n===null?l.updateQueue=new Set([r]):n.add(r),wu(t,r,m)),!1;case 22:return l.flags|=65536,r===dl?l.flags|=16384:(n=l.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([r])},l.updateQueue=n):(l=n.retryQueue,l===null?n.retryQueue=new Set([r]):l.add(r)),wu(t,r,m)),!1}throw Error(s(435,l.tag))}return wu(t,r,m),Bl(),!1}if(xe)return n=It.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,r!==Sr&&(t=Error(s(422),{cause:r}),Ko(Ot(t,l)))):(r!==Sr&&(n=Error(s(423),{cause:r}),Ko(Ot(n,l))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,r=Ot(r,l),m=eu(t.stateNode,r,m),Mr(t,m),Je!==4&&(Je=2)),!1;var p=Error(s(520),{cause:r});if(p=Ot(p,l),hs===null?hs=[p]:hs.push(p),Je!==4&&(Je=2),n===null)return!0;r=Ot(r,l),l=n;do{switch(l.tag){case 3:return l.flags|=65536,t=m&-m,l.lanes|=t,t=eu(l.stateNode,r,t),Mr(l,t),!1;case 1:if(n=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&($n===null||!$n.has(p))))return l.flags|=65536,m&=-m,l.lanes|=m,m=um(m),cm(m,t,l,r),Mr(l,m),!1}l=l.return}while(l!==null);return!1}var tu=Error(s(461)),je=!1;function ut(t,n,l,r){n.child=t===null?hd(n,null,l,r):_i(n,t.child,l,r)}function fm(t,n,l,r,m){l=l.render;var p=n.ref;if("ref"in r){var T={};for(var C in r)C!=="ref"&&(T[C]=r[C])}else T=r;return Si(n),r=Pr(t,n,l,T,p,m),C=Br(),t!==null&&!je?(zr(t,n,m),vn(t,n,m)):(xe&&C&&yr(n),n.flags|=1,ut(t,n,r,m),n.child)}function dm(t,n,l,r,m){if(t===null){var p=l.type;return typeof p=="function"&&!hr(p)&&p.defaultProps===void 0&&l.compare===null?(n.tag=15,n.type=p,mm(t,n,p,r,m)):(t=ll(l.type,null,r,n,n.mode,m),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,!uu(t,m)){var T=p.memoizedProps;if(l=l.compare,l=l!==null?l:Jo,l(T,r)&&t.ref===n.ref)return vn(t,n,m)}return n.flags|=1,t=dn(p,r),t.ref=n.ref,t.return=n,n.child=t}function mm(t,n,l,r,m){if(t!==null){var p=t.memoizedProps;if(Jo(p,r)&&t.ref===n.ref)if(je=!1,n.pendingProps=r=p,uu(t,m))(t.flags&131072)!==0&&(je=!0);else return n.lanes=t.lanes,vn(t,n,m)}return nu(t,n,l,r,m)}function hm(t,n,l,r){var m=r.children,p=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|l:l,t!==null){for(r=n.child=t.child,m=0;r!==null;)m=m|r.lanes|r.childLanes,r=r.sibling;r=m&~p}else r=0,n.child=null;return pm(t,n,p,l,r)}if((l&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&cl(n,p!==null?p.cachePool:null),p!==null?yd(n,p):Ir(),vd(n);else return r=n.lanes=536870912,pm(t,n,p!==null?p.baseLanes|l:l,l,r)}else p!==null?(cl(n,p.cachePool),yd(n,p),Fn(),n.memoizedState=null):(t!==null&&cl(n,null),Ir(),Fn());return ut(t,n,m,l),n.child}function as(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function pm(t,n,l,r,m){var p=xr();return p=p===null?null:{parent:Ze._currentValue,pool:p},n.memoizedState={baseLanes:l,cachePool:p},t!==null&&cl(n,null),Ir(),vd(n),t!==null&&Wi(t,n,r,!0),n.childLanes=m,null}function xl(t,n){return n=bl({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function gm(t,n,l){return _i(n,t.child,null,l),t=xl(n,n.pendingProps),t.flags|=2,Lt(n),n.memoizedState=null,t}function cC(t,n,l){var r=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(xe){if(r.mode==="hidden")return t=xl(n,r),n.lanes=536870912,as(null,t);if(Ur(n),(t=Ve)?(t=bh(t,Qt),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Pn!==null?{id:nn,overflow:on}:null,retryLane:536870912,hydrationErrors:null},l=jf(t),l.return=n,n.child=l,at=n,Ve=null)):t=null,t===null)throw zn(n);return n.lanes=536870912,null}return xl(n,r)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(Ur(n),m)if(n.flags&256)n.flags&=-257,n=gm(t,n,l);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(s(558));else if(je||Wi(t,n,l,!1),m=(l&t.childLanes)!==0,je||m){if(r=He,r!==null&&(T=lf(r,l),T!==0&&T!==p.retryLane))throw p.retryLane=T,pi(t,T),wt(r,t,T),tu;Bl(),n=gm(t,n,l)}else t=p.treeContext,Ve=Yt(T.nextSibling),at=n,xe=!0,Bn=null,Qt=!1,t!==null&&nd(n,t),n=xl(n,r),n.flags|=4096;return n}return t=dn(t.child,{mode:r.mode,children:r.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Nl(t,n){var l=n.ref;if(l===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(t===null||t.ref!==l)&&(n.flags|=4194816)}}function nu(t,n,l,r,m){return Si(n),l=Pr(t,n,l,r,void 0,m),r=Br(),t!==null&&!je?(zr(t,n,m),vn(t,n,m)):(xe&&r&&yr(n),n.flags|=1,ut(t,n,l,m),n.child)}function ym(t,n,l,r,m,p){return Si(n),n.updateQueue=null,l=Td(n,r,l,m),Sd(t),r=Br(),t!==null&&!je?(zr(t,n,p),vn(t,n,p)):(xe&&r&&yr(n),n.flags|=1,ut(t,n,l,p),n.child)}function vm(t,n,l,r,m){if(Si(n),n.stateNode===null){var p=$i,T=l.contextType;typeof T=="object"&&T!==null&&(p=rt(T)),p=new l(r,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=jr,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=r,p.state=n.memoizedState,p.refs={},br(n),T=l.contextType,p.context=typeof T=="object"&&T!==null?rt(T):$i,p.state=n.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Wr(n,l,T,r),p.state=n.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&jr.enqueueReplaceState(p,p.state,null),ns(n,r,p,m),ts(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),r=!0}else if(t===null){p=n.stateNode;var C=n.memoizedProps,N=wi(l,C);p.props=N;var q=p.context,k=l.contextType;T=$i,typeof k=="object"&&k!==null&&(T=rt(k));var J=l.getDerivedStateFromProps;k=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,k||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||q!==T)&&om(n,p,r,T),Hn=!1;var P=n.memoizedState;p.state=P,ns(n,r,p,m),ts(),q=n.memoizedState,C||P!==q||Hn?(typeof J=="function"&&(Wr(n,l,J,r),q=n.memoizedState),(N=Hn||im(n,l,N,r,P,q,T))?(k||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=q),p.props=r,p.state=q,p.context=T,r=N):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{p=n.stateNode,Rr(t,n),T=n.memoizedProps,k=wi(l,T),p.props=k,J=n.pendingProps,P=p.context,q=l.contextType,N=$i,typeof q=="object"&&q!==null&&(N=rt(q)),C=l.getDerivedStateFromProps,(q=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==J||P!==N)&&om(n,p,r,N),Hn=!1,P=n.memoizedState,p.state=P,ns(n,r,p,m),ts();var G=n.memoizedState;T!==J||P!==G||Hn||t!==null&&t.dependencies!==null&&rl(t.dependencies)?(typeof C=="function"&&(Wr(n,l,C,r),G=n.memoizedState),(k=Hn||im(n,l,k,r,P,G,N)||t!==null&&t.dependencies!==null&&rl(t.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,G,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,G,N)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&P===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&P===t.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=G),p.props=r,p.state=G,p.context=N,r=k):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&P===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&P===t.memoizedState||(n.flags|=1024),r=!1)}return p=r,Nl(t,n),r=(n.flags&128)!==0,p||r?(p=n.stateNode,l=r&&typeof l.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,t!==null&&r?(n.child=_i(n,t.child,null,m),n.child=_i(n,null,l,m)):ut(t,n,l,m),n.memoizedState=p.state,t=n.child):t=vn(t,n,m),t}function Sm(t,n,l,r){return yi(),n.flags|=256,ut(t,n,l,r),n.child}var iu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ou(t){return{baseLanes:t,cachePool:rd()}}function su(t,n,l){return t=t!==null?t.childLanes&~l:0,n&&(t|=qt),t}function Tm(t,n,l){var r=n.pendingProps,m=!1,p=(n.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:($e.current&2)!==0),T&&(m=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,t===null){if(xe){if(m?kn(n):Fn(),(t=Ve)?(t=bh(t,Qt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Pn!==null?{id:nn,overflow:on}:null,retryLane:536870912,hydrationErrors:null},l=jf(t),l.return=n,n.child=l,at=n,Ve=null)):t=null,t===null)throw zn(n);return Vu(t)?n.lanes=32:n.lanes=536870912,null}var C=r.children;return r=r.fallback,m?(Fn(),m=n.mode,C=bl({mode:"hidden",children:C},m),r=gi(r,m,l,null),C.return=n,r.return=n,C.sibling=r,n.child=C,r=n.child,r.memoizedState=ou(l),r.childLanes=su(t,T,l),n.memoizedState=iu,as(null,r)):(kn(n),lu(n,C))}var N=t.memoizedState;if(N!==null&&(C=N.dehydrated,C!==null)){if(p)n.flags&256?(kn(n),n.flags&=-257,n=au(t,n,l)):n.memoizedState!==null?(Fn(),n.child=t.child,n.flags|=128,n=null):(Fn(),C=r.fallback,m=n.mode,r=bl({mode:"visible",children:r.children},m),C=gi(C,m,l,null),C.flags|=2,r.return=n,C.return=n,r.sibling=C,n.child=r,_i(n,t.child,null,l),r=n.child,r.memoizedState=ou(l),r.childLanes=su(t,T,l),n.memoizedState=iu,n=as(null,r));else if(kn(n),Vu(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var q=T.dgst;T=q,r=Error(s(419)),r.stack="",r.digest=T,Ko({value:r,source:null,stack:null}),n=au(t,n,l)}else if(je||Wi(t,n,l,!1),T=(l&t.childLanes)!==0,je||T){if(T=He,T!==null&&(r=lf(T,l),r!==0&&r!==N.retryLane))throw N.retryLane=r,pi(t,r),wt(T,t,r),tu;Hu(C)||Bl(),n=au(t,n,l)}else Hu(C)?(n.flags|=192,n.child=t.child,n=null):(t=N.treeContext,Ve=Yt(C.nextSibling),at=n,xe=!0,Bn=null,Qt=!1,t!==null&&nd(n,t),n=lu(n,r.children),n.flags|=4096);return n}return m?(Fn(),C=r.fallback,m=n.mode,N=t.child,q=N.sibling,r=dn(N,{mode:"hidden",children:r.children}),r.subtreeFlags=N.subtreeFlags&65011712,q!==null?C=dn(q,C):(C=gi(C,m,l,null),C.flags|=2),C.return=n,r.return=n,r.sibling=C,n.child=r,as(null,r),r=n.child,C=t.child.memoizedState,C===null?C=ou(l):(m=C.cachePool,m!==null?(N=Ze._currentValue,m=m.parent!==N?{parent:N,pool:N}:m):m=rd(),C={baseLanes:C.baseLanes|l,cachePool:m}),r.memoizedState=C,r.childLanes=su(t,T,l),n.memoizedState=iu,as(t.child,r)):(kn(n),l=t.child,t=l.sibling,l=dn(l,{mode:"visible",children:r.children}),l.return=n,l.sibling=null,t!==null&&(T=n.deletions,T===null?(n.deletions=[t],n.flags|=16):T.push(t)),n.child=l,n.memoizedState=null,l)}function lu(t,n){return n=bl({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function bl(t,n){return t=Dt(22,t,null,n),t.lanes=0,t}function au(t,n,l){return _i(n,t.child,null,l),t=lu(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Em(t,n,l){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n),Cr(t.return,n,l)}function ru(t,n,l,r,m,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:l,tailMode:m,treeForkCount:p}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=r,T.tail=l,T.tailMode=m,T.treeForkCount=p)}function Cm(t,n,l){var r=n.pendingProps,m=r.revealOrder,p=r.tail;r=r.children;var T=$e.current,C=(T&2)!==0;if(C?(T=T&1|2,n.flags|=128):T&=1,ne($e,T),ut(t,n,r,l),r=xe?$o:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Em(t,l,n);else if(t.tag===19)Em(t,l,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(l=n.child,m=null;l!==null;)t=l.alternate,t!==null&&gl(t)===null&&(m=l),l=l.sibling;l=m,l===null?(m=n.child,n.child=null):(m=l.sibling,l.sibling=null),ru(n,!1,m,l,p,r);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=n.child,n.child=null;m!==null;){if(t=m.alternate,t!==null&&gl(t)===null){n.child=m;break}t=m.sibling,m.sibling=l,l=m,m=t}ru(n,!0,l,null,p,r);break;case"together":ru(n,!1,null,null,void 0,r);break;default:n.memoizedState=null}return n.child}function vn(t,n,l){if(t!==null&&(n.dependencies=t.dependencies),Yn|=n.lanes,(l&n.childLanes)===0)if(t!==null){if(Wi(t,n,l,!1),(l&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(s(153));if(n.child!==null){for(t=n.child,l=dn(t,t.pendingProps),n.child=l,l.return=n;t.sibling!==null;)t=t.sibling,l=l.sibling=dn(t,t.pendingProps),l.return=n;l.sibling=null}return n.child}function uu(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&rl(t)))}function fC(t,n,l){switch(n.tag){case 3:ht(n,n.stateNode.containerInfo),Gn(n,Ze,t.memoizedState.cache),yi();break;case 27:case 5:Lo(n);break;case 4:ht(n,n.stateNode.containerInfo);break;case 10:Gn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ur(n),null;break;case 13:var r=n.memoizedState;if(r!==null)return r.dehydrated!==null?(kn(n),n.flags|=128,null):(l&n.child.childLanes)!==0?Tm(t,n,l):(kn(n),t=vn(t,n,l),t!==null?t.sibling:null);kn(n);break;case 19:var m=(t.flags&128)!==0;if(r=(l&n.childLanes)!==0,r||(Wi(t,n,l,!1),r=(l&n.childLanes)!==0),m){if(r)return Cm(t,n,l);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ne($e,$e.current),r)break;return null;case 22:return n.lanes=0,hm(t,n,l,n.pendingProps);case 24:Gn(n,Ze,t.memoizedState.cache)}return vn(t,n,l)}function _m(t,n,l){if(t!==null)if(t.memoizedProps!==n.pendingProps)je=!0;else{if(!uu(t,l)&&(n.flags&128)===0)return je=!1,fC(t,n,l);je=(t.flags&131072)!==0}else je=!1,xe&&(n.flags&1048576)!==0&&td(n,$o,n.index);switch(n.lanes=0,n.tag){case 16:e:{var r=n.pendingProps;if(t=Ei(n.elementType),n.type=t,typeof t=="function")hr(t)?(r=wi(t,r),n.tag=1,n=vm(null,n,t,r,l)):(n.tag=0,n=nu(null,n,t,r,l));else{if(t!=null){var m=t.$$typeof;if(m===O){n.tag=11,n=fm(null,n,t,r,l);break e}else if(m===V){n.tag=14,n=dm(null,n,t,r,l);break e}}throw n=Te(t)||t,Error(s(306,n,""))}}return n;case 0:return nu(t,n,n.type,n.pendingProps,l);case 1:return r=n.type,m=wi(r,n.pendingProps),vm(t,n,r,m,l);case 3:e:{if(ht(n,n.stateNode.containerInfo),t===null)throw Error(s(387));r=n.pendingProps;var p=n.memoizedState;m=p.element,Rr(t,n),ns(n,r,null,l);var T=n.memoizedState;if(r=T.cache,Gn(n,Ze,r),r!==p.cache&&_r(n,[Ze],l,!0),ts(),r=T.element,p.isDehydrated)if(p={element:r,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=Sm(t,n,r,l);break e}else if(r!==m){m=Ot(Error(s(424)),n),Ko(m),n=Sm(t,n,r,l);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ve=Yt(t.firstChild),at=n,xe=!0,Bn=null,Qt=!0,l=hd(n,null,r,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(yi(),r===m){n=vn(t,n,l);break e}ut(t,n,r,l)}n=n.child}return n;case 26:return Nl(t,n),t===null?(l=Uh(n.type,null,n.pendingProps,null))?n.memoizedState=l:xe||(l=n.type,t=n.pendingProps,r=Fl(Ee.current).createElement(l),r[lt]=n,r[St]=t,ct(r,l,t),it(r),n.stateNode=r):n.memoizedState=Uh(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Lo(n),t===null&&xe&&(r=n.stateNode=Dh(n.type,n.pendingProps,Ee.current),at=n,Qt=!0,m=Ve,Wn(n.type)?(Ou=m,Ve=Yt(r.firstChild)):Ve=m),ut(t,n,n.pendingProps.children,l),Nl(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&xe&&((m=r=Ve)&&(r=VC(r,n.type,n.pendingProps,Qt),r!==null?(n.stateNode=r,at=n,Ve=Yt(r.firstChild),Qt=!1,m=!0):m=!1),m||zn(n)),Lo(n),m=n.type,p=n.pendingProps,T=t!==null?t.memoizedProps:null,r=p.children,Bu(m,p)?r=null:T!==null&&Bu(m,T)&&(n.flags|=32),n.memoizedState!==null&&(m=Pr(t,n,nC,null,null,l),Cs._currentValue=m),Nl(t,n),ut(t,n,r,l),n.child;case 6:return t===null&&xe&&((t=l=Ve)&&(l=OC(l,n.pendingProps,Qt),l!==null?(n.stateNode=l,at=n,Ve=null,t=!0):t=!1),t||zn(n)),null;case 13:return Tm(t,n,l);case 4:return ht(n,n.stateNode.containerInfo),r=n.pendingProps,t===null?n.child=_i(n,null,r,l):ut(t,n,r,l),n.child;case 11:return fm(t,n,n.type,n.pendingProps,l);case 7:return ut(t,n,n.pendingProps,l),n.child;case 8:return ut(t,n,n.pendingProps.children,l),n.child;case 12:return ut(t,n,n.pendingProps.children,l),n.child;case 10:return r=n.pendingProps,Gn(n,n.type,r.value),ut(t,n,r.children,l),n.child;case 9:return m=n.type._context,r=n.pendingProps.children,Si(n),m=rt(m),r=r(m),n.flags|=1,ut(t,n,r,l),n.child;case 14:return dm(t,n,n.type,n.pendingProps,l);case 15:return mm(t,n,n.type,n.pendingProps,l);case 19:return Cm(t,n,l);case 31:return cC(t,n,l);case 22:return hm(t,n,l,n.pendingProps);case 24:return Si(n),r=rt(Ze),t===null?(m=xr(),m===null&&(m=He,p=Ar(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=l),m=p),n.memoizedState={parent:r,cache:m},br(n),Gn(n,Ze,m)):((t.lanes&l)!==0&&(Rr(t,n),ns(n,null,null,l),ts()),m=t.memoizedState,p=n.memoizedState,m.parent!==r?(m={parent:r,cache:r},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),Gn(n,Ze,r)):(r=p.cache,Gn(n,Ze,r),r!==m.cache&&_r(n,[Ze],l,!0))),ut(t,n,n.pendingProps.children,l),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Sn(t){t.flags|=4}function cu(t,n,l,r,m){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(Xm())t.flags|=8192;else throw Ci=dl,Nr}else t.flags&=-16777217}function Am(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Gh(n))if(Xm())t.flags|=8192;else throw Ci=dl,Nr}function Rl(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?nf():536870912,t.lanes|=n,co|=n)}function rs(t,n){if(!xe)switch(t.tailMode){case"hidden":n=t.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var r=null;l!==null;)l.alternate!==null&&(r=l),l=l.sibling;r===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Oe(t){var n=t.alternate!==null&&t.alternate.child===t.child,l=0,r=0;if(n)for(var m=t.child;m!==null;)l|=m.lanes|m.childLanes,r|=m.subtreeFlags&65011712,r|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)l|=m.lanes|m.childLanes,r|=m.subtreeFlags,r|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=r,t.childLanes=l,n}function dC(t,n,l){var r=n.pendingProps;switch(vr(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(n),null;case 1:return Oe(n),null;case 3:return l=n.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),pn(Ze),Ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Zi(n)?Sn(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Tr())),Oe(n),null;case 26:var m=n.type,p=n.memoizedState;return t===null?(Sn(n),p!==null?(Oe(n),Am(n,p)):(Oe(n),cu(n,m,null,r,l))):p?p!==t.memoizedState?(Sn(n),Oe(n),Am(n,p)):(Oe(n),n.flags&=-16777217):(t=t.memoizedProps,t!==r&&Sn(n),Oe(n),cu(n,m,t,r,l)),null;case 27:if(Hs(n),l=Ee.current,m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==r&&Sn(n);else{if(!r){if(n.stateNode===null)throw Error(s(166));return Oe(n),null}t=re.current,Zi(n)?id(n):(t=Dh(m,r,l),n.stateNode=t,Sn(n))}return Oe(n),null;case 5:if(Hs(n),m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==r&&Sn(n);else{if(!r){if(n.stateNode===null)throw Error(s(166));return Oe(n),null}if(p=re.current,Zi(n))id(n);else{var T=Fl(Ee.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof r.is=="string"?T.createElement("select",{is:r.is}):T.createElement("select"),r.multiple?p.multiple=!0:r.size&&(p.size=r.size);break;default:p=typeof r.is=="string"?T.createElement(m,{is:r.is}):T.createElement(m)}}p[lt]=n,p[St]=r;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=p;e:switch(ct(p,m,r),m){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Sn(n)}}return Oe(n),cu(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,l),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==r&&Sn(n);else{if(typeof r!="string"&&n.stateNode===null)throw Error(s(166));if(t=Ee.current,Zi(n)){if(t=n.stateNode,l=n.memoizedProps,r=null,m=at,m!==null)switch(m.tag){case 27:case 5:r=m.memoizedProps}t[lt]=n,t=!!(t.nodeValue===l||r!==null&&r.suppressHydrationWarning===!0||Th(t.nodeValue,l)),t||zn(n,!0)}else t=Fl(t).createTextNode(r),t[lt]=n,n.stateNode=t}return Oe(n),null;case 31:if(l=n.memoizedState,t===null||t.memoizedState!==null){if(r=Zi(n),l!==null){if(t===null){if(!r)throw Error(s(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[lt]=n}else yi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Oe(n),t=!1}else l=Tr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return n.flags&256?(Lt(n),n):(Lt(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Oe(n),null;case 13:if(r=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=Zi(n),r!==null&&r.dehydrated!==null){if(t===null){if(!m)throw Error(s(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[lt]=n}else yi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Oe(n),m=!1}else m=Tr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(Lt(n),n):(Lt(n),null)}return Lt(n),(n.flags&128)!==0?(n.lanes=l,n):(l=r!==null,t=t!==null&&t.memoizedState!==null,l&&(r=n.child,m=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(m=r.alternate.memoizedState.cachePool.pool),p=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==m&&(r.flags|=2048)),l!==t&&l&&(n.child.flags|=8192),Rl(n,n.updateQueue),Oe(n),null);case 4:return Ye(),t===null&&Iu(n.stateNode.containerInfo),Oe(n),null;case 10:return pn(n.type),Oe(n),null;case 19:if($($e),r=n.memoizedState,r===null)return Oe(n),null;if(m=(n.flags&128)!==0,p=r.rendering,p===null)if(m)rs(r,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(p=gl(t),p!==null){for(n.flags|=128,rs(r,!1),t=p.updateQueue,n.updateQueue=t,Rl(n,t),n.subtreeFlags=0,t=l,l=n.child;l!==null;)Wf(l,t),l=l.sibling;return ne($e,$e.current&1|2),xe&&mn(n,r.treeForkCount),n.child}t=t.sibling}r.tail!==null&&Nt()>Ul&&(n.flags|=128,m=!0,rs(r,!1),n.lanes=4194304)}else{if(!m)if(t=gl(p),t!==null){if(n.flags|=128,m=!0,t=t.updateQueue,n.updateQueue=t,Rl(n,t),rs(r,!0),r.tail===null&&r.tailMode==="hidden"&&!p.alternate&&!xe)return Oe(n),null}else 2*Nt()-r.renderingStartTime>Ul&&l!==536870912&&(n.flags|=128,m=!0,rs(r,!1),n.lanes=4194304);r.isBackwards?(p.sibling=n.child,n.child=p):(t=r.last,t!==null?t.sibling=p:n.child=p,r.last=p)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Nt(),t.sibling=null,l=$e.current,ne($e,m?l&1|2:l&1),xe&&mn(n,r.treeForkCount),t):(Oe(n),null);case 22:case 23:return Lt(n),Lr(),r=n.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(n.flags|=8192):r&&(n.flags|=8192),r?(l&536870912)!==0&&(n.flags&128)===0&&(Oe(n),n.subtreeFlags&6&&(n.flags|=8192)):Oe(n),l=n.updateQueue,l!==null&&Rl(n,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==l&&(n.flags|=2048),t!==null&&$(Ti),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),pn(Ze),Oe(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function mC(t,n){switch(vr(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return pn(Ze),Ye(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Hs(n),null;case 31:if(n.memoizedState!==null){if(Lt(n),n.alternate===null)throw Error(s(340));yi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Lt(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(s(340));yi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return $($e),null;case 4:return Ye(),null;case 10:return pn(n.type),null;case 22:case 23:return Lt(n),Lr(),t!==null&&$(Ti),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return pn(Ze),null;case 25:return null;default:return null}}function wm(t,n){switch(vr(n),n.tag){case 3:pn(Ze),Ye();break;case 26:case 27:case 5:Hs(n);break;case 4:Ye();break;case 31:n.memoizedState!==null&&Lt(n);break;case 13:Lt(n);break;case 19:$($e);break;case 10:pn(n.type);break;case 22:case 23:Lt(n),Lr(),t!==null&&$(Ti);break;case 24:pn(Ze)}}function us(t,n){try{var l=n.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var m=r.next;l=m;do{if((l.tag&t)===t){r=void 0;var p=l.create,T=l.inst;r=p(),T.destroy=r}l=l.next}while(l!==m)}}catch(C){Ue(n,n.return,C)}}function Qn(t,n,l){try{var r=n.updateQueue,m=r!==null?r.lastEffect:null;if(m!==null){var p=m.next;r=p;do{if((r.tag&t)===t){var T=r.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,m=n;var N=l,q=C;try{q()}catch(k){Ue(m,N,k)}}}r=r.next}while(r!==p)}}catch(k){Ue(n,n.return,k)}}function xm(t){var n=t.updateQueue;if(n!==null){var l=t.stateNode;try{gd(n,l)}catch(r){Ue(t,t.return,r)}}}function Nm(t,n,l){l.props=wi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(r){Ue(t,n,r)}}function cs(t,n){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof l=="function"?t.refCleanup=l(r):l.current=r}}catch(m){Ue(t,n,m)}}function sn(t,n){var l=t.ref,r=t.refCleanup;if(l!==null)if(typeof r=="function")try{r()}catch(m){Ue(t,n,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ue(t,n,m)}else l.current=null}function bm(t){var n=t.type,l=t.memoizedProps,r=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break e;case"img":l.src?r.src=l.src:l.srcSet&&(r.srcset=l.srcSet)}}catch(m){Ue(t,t.return,m)}}function fu(t,n,l){try{var r=t.stateNode;qC(r,t.type,l,n),r[St]=n}catch(m){Ue(t,t.return,m)}}function Rm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Wn(t.type)||t.tag===4}function du(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Wn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mu(t,n,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,n):(n=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,n.appendChild(t),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=cn));else if(r!==4&&(r===27&&Wn(t.type)&&(l=t.stateNode,n=null),t=t.child,t!==null))for(mu(t,n,l),t=t.sibling;t!==null;)mu(t,n,l),t=t.sibling}function Ml(t,n,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?l.insertBefore(t,n):l.appendChild(t);else if(r!==4&&(r===27&&Wn(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Ml(t,n,l),t=t.sibling;t!==null;)Ml(t,n,l),t=t.sibling}function Mm(t){var n=t.stateNode,l=t.memoizedProps;try{for(var r=t.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);ct(n,r,l),n[lt]=t,n[St]=l}catch(p){Ue(t,t.return,p)}}var Tn=!1,et=!1,hu=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,ot=null;function hC(t,n){if(t=t.containerInfo,qu=Zl,t=kf(t),ar(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var r=l.getSelection&&l.getSelection();if(r&&r.rangeCount!==0){l=r.anchorNode;var m=r.anchorOffset,p=r.focusNode;r=r.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break e}var T=0,C=-1,N=-1,q=0,k=0,J=t,P=null;t:for(;;){for(var G;J!==l||m!==0&&J.nodeType!==3||(C=T+m),J!==p||r!==0&&J.nodeType!==3||(N=T+r),J.nodeType===3&&(T+=J.nodeValue.length),(G=J.firstChild)!==null;)P=J,J=G;for(;;){if(J===t)break t;if(P===l&&++q===m&&(C=T),P===p&&++k===r&&(N=T),(G=J.nextSibling)!==null)break;J=P,P=J.parentNode}J=G}l=C===-1||N===-1?null:{start:C,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Pu={focusedElem:t,selectionRange:l},Zl=!1,ot=n;ot!==null;)if(n=ot,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ot=t;else for(;ot!==null;){switch(n=ot,p=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)m=t[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,l=n,m=p.memoizedProps,p=p.memoizedState,r=l.stateNode;try{var le=wi(l.type,m);t=r.getSnapshotBeforeUpdate(le,p),r.__reactInternalSnapshotBeforeUpdate=t}catch(me){Ue(l,l.return,me)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,l=t.nodeType,l===9)Gu(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=n.sibling,t!==null){t.return=n.return,ot=t;break}ot=n.return}}function Im(t,n,l){var r=l.flags;switch(l.tag){case 0:case 11:case 15:Cn(t,l),r&4&&us(5,l);break;case 1:if(Cn(t,l),r&4)if(t=l.stateNode,n===null)try{t.componentDidMount()}catch(T){Ue(l,l.return,T)}else{var m=wi(l.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(m,n,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Ue(l,l.return,T)}}r&64&&xm(l),r&512&&cs(l,l.return);break;case 3:if(Cn(t,l),r&64&&(t=l.updateQueue,t!==null)){if(n=null,l.child!==null)switch(l.child.tag){case 27:case 5:n=l.child.stateNode;break;case 1:n=l.child.stateNode}try{gd(t,n)}catch(T){Ue(l,l.return,T)}}break;case 27:n===null&&r&4&&Mm(l);case 26:case 5:Cn(t,l),n===null&&r&4&&bm(l),r&512&&cs(l,l.return);break;case 12:Cn(t,l);break;case 31:Cn(t,l),r&4&&qm(t,l);break;case 13:Cn(t,l),r&4&&Pm(t,l),r&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=_C.bind(null,l),kC(t,l))));break;case 22:if(r=l.memoizedState!==null||Tn,!r){n=n!==null&&n.memoizedState!==null||et,m=Tn;var p=et;Tn=r,(et=n)&&!p?_n(t,l,(l.subtreeFlags&8772)!==0):Cn(t,l),Tn=m,et=p}break;case 30:break;default:Cn(t,l)}}function Lm(t){var n=t.alternate;n!==null&&(t.alternate=null,Lm(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Fa(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fe=null,Et=!1;function En(t,n,l){for(l=l.child;l!==null;)Um(t,n,l),l=l.sibling}function Um(t,n,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Uo,l)}catch{}switch(l.tag){case 26:et||sn(l,n),En(t,n,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:et||sn(l,n);var r=Fe,m=Et;Wn(l.type)&&(Fe=l.stateNode,Et=!1),En(t,n,l),Ss(l.stateNode),Fe=r,Et=m;break;case 5:et||sn(l,n);case 6:if(r=Fe,m=Et,Fe=null,En(t,n,l),Fe=r,Et=m,Fe!==null)if(Et)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(l.stateNode)}catch(p){Ue(l,n,p)}else try{Fe.removeChild(l.stateNode)}catch(p){Ue(l,n,p)}break;case 18:Fe!==null&&(Et?(t=Fe,xh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),So(t)):xh(Fe,l.stateNode));break;case 4:r=Fe,m=Et,Fe=l.stateNode.containerInfo,Et=!0,En(t,n,l),Fe=r,Et=m;break;case 0:case 11:case 14:case 15:Qn(2,l,n),et||Qn(4,l,n),En(t,n,l);break;case 1:et||(sn(l,n),r=l.stateNode,typeof r.componentWillUnmount=="function"&&Nm(l,n,r)),En(t,n,l);break;case 21:En(t,n,l);break;case 22:et=(r=et)||l.memoizedState!==null,En(t,n,l),et=r;break;default:En(t,n,l)}}function qm(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{So(t)}catch(l){Ue(n,n.return,l)}}}function Pm(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{So(t)}catch(l){Ue(n,n.return,l)}}function pC(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Dm),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Dm),n;default:throw Error(s(435,t.tag))}}function Dl(t,n){var l=pC(t);n.forEach(function(r){if(!l.has(r)){l.add(r);var m=AC.bind(null,t,r);r.then(m,m)}})}function Ct(t,n){var l=n.deletions;if(l!==null)for(var r=0;r<l.length;r++){var m=l[r],p=t,T=n,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Wn(C.type)){Fe=C.stateNode,Et=!1;break e}break;case 5:Fe=C.stateNode,Et=!1;break e;case 3:case 4:Fe=C.stateNode.containerInfo,Et=!0;break e}C=C.return}if(Fe===null)throw Error(s(160));Um(p,T,m),Fe=null,Et=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Bm(n,t),n=n.sibling}var Wt=null;function Bm(t,n){var l=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ct(n,t),_t(t),r&4&&(Qn(3,t,t.return),us(3,t),Qn(5,t,t.return));break;case 1:Ct(n,t),_t(t),r&512&&(et||l===null||sn(l,l.return)),r&64&&Tn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?r:l.concat(r))));break;case 26:var m=Wt;if(Ct(n,t),_t(t),r&512&&(et||l===null||sn(l,l.return)),r&4){var p=l!==null?l.memoizedState:null;if(r=t.memoizedState,l===null)if(r===null)if(t.stateNode===null){e:{r=t.type,l=t.memoizedProps,m=m.ownerDocument||m;t:switch(r){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Bo]||p[lt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(r),m.head.insertBefore(p,m.querySelector("head > title"))),ct(p,r,l),p[lt]=t,it(p),r=p;break e;case"link":var T=Bh("link","href",m).get(r+(l.href||""));if(T){for(var C=0;C<T.length;C++)if(p=T[C],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(C,1);break t}}p=m.createElement(r),ct(p,r,l),m.head.appendChild(p);break;case"meta":if(T=Bh("meta","content",m).get(r+(l.content||""))){for(C=0;C<T.length;C++)if(p=T[C],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(C,1);break t}}p=m.createElement(r),ct(p,r,l),m.head.appendChild(p);break;default:throw Error(s(468,r))}p[lt]=t,it(p),r=p}t.stateNode=r}else zh(m,t.type,t.stateNode);else t.stateNode=Ph(m,r,t.memoizedProps);else p!==r?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,r===null?zh(m,t.type,t.stateNode):Ph(m,r,t.memoizedProps)):r===null&&t.stateNode!==null&&fu(t,t.memoizedProps,l.memoizedProps)}break;case 27:Ct(n,t),_t(t),r&512&&(et||l===null||sn(l,l.return)),l!==null&&r&4&&fu(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Ct(n,t),_t(t),r&512&&(et||l===null||sn(l,l.return)),t.flags&32){m=t.stateNode;try{Vi(m,"")}catch(le){Ue(t,t.return,le)}}r&4&&t.stateNode!=null&&(m=t.memoizedProps,fu(t,m,l!==null?l.memoizedProps:m)),r&1024&&(hu=!0);break;case 6:if(Ct(n,t),_t(t),r&4){if(t.stateNode===null)throw Error(s(162));r=t.memoizedProps,l=t.stateNode;try{l.nodeValue=r}catch(le){Ue(t,t.return,le)}}break;case 3:if(Yl=null,m=Wt,Wt=Ql(n.containerInfo),Ct(n,t),Wt=m,_t(t),r&4&&l!==null&&l.memoizedState.isDehydrated)try{So(n.containerInfo)}catch(le){Ue(t,t.return,le)}hu&&(hu=!1,zm(t));break;case 4:r=Wt,Wt=Ql(t.stateNode.containerInfo),Ct(n,t),_t(t),Wt=r;break;case 12:Ct(n,t),_t(t);break;case 31:Ct(n,t),_t(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Dl(t,r)));break;case 13:Ct(n,t),_t(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ll=Nt()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Dl(t,r)));break;case 22:m=t.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,q=Tn,k=et;if(Tn=q||m,et=k||N,Ct(n,t),et=k,Tn=q,_t(t),r&8192)e:for(n=t.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(l===null||N||Tn||et||xi(t)),l=null,n=t;;){if(n.tag===5||n.tag===26){if(l===null){N=l=n;try{if(p=N.stateNode,m)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=N.stateNode;var J=N.memoizedProps.style,P=J!=null&&J.hasOwnProperty("display")?J.display:null;C.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(le){Ue(N,N.return,le)}}}else if(n.tag===6){if(l===null){N=n;try{N.stateNode.nodeValue=m?"":N.memoizedProps}catch(le){Ue(N,N.return,le)}}}else if(n.tag===18){if(l===null){N=n;try{var G=N.stateNode;m?Nh(G,!0):Nh(N.stateNode,!1)}catch(le){Ue(N,N.return,le)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;l===n&&(l=null),n=n.return}l===n&&(l=null),n.sibling.return=n.return,n=n.sibling}r&4&&(r=t.updateQueue,r!==null&&(l=r.retryQueue,l!==null&&(r.retryQueue=null,Dl(t,l))));break;case 19:Ct(n,t),_t(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Dl(t,r)));break;case 30:break;case 21:break;default:Ct(n,t),_t(t)}}function _t(t){var n=t.flags;if(n&2){try{for(var l,r=t.return;r!==null;){if(Rm(r)){l=r;break}r=r.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var m=l.stateNode,p=du(t);Ml(t,p,m);break;case 5:var T=l.stateNode;l.flags&32&&(Vi(T,""),l.flags&=-33);var C=du(t);Ml(t,C,T);break;case 3:case 4:var N=l.stateNode.containerInfo,q=du(t);mu(t,q,N);break;default:throw Error(s(161))}}catch(k){Ue(t,t.return,k)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function zm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;zm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Cn(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Im(t,n.alternate,n),n=n.sibling}function xi(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Qn(4,n,n.return),xi(n);break;case 1:sn(n,n.return);var l=n.stateNode;typeof l.componentWillUnmount=="function"&&Nm(n,n.return,l),xi(n);break;case 27:Ss(n.stateNode);case 26:case 5:sn(n,n.return),xi(n);break;case 22:n.memoizedState===null&&xi(n);break;case 30:xi(n);break;default:xi(n)}t=t.sibling}}function _n(t,n,l){for(l=l&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var r=n.alternate,m=t,p=n,T=p.flags;switch(p.tag){case 0:case 11:case 15:_n(m,p,l),us(4,p);break;case 1:if(_n(m,p,l),r=p,m=r.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(q){Ue(r,r.return,q)}if(r=p,m=r.updateQueue,m!==null){var C=r.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)pd(N[m],C)}catch(q){Ue(r,r.return,q)}}l&&T&64&&xm(p),cs(p,p.return);break;case 27:Mm(p);case 26:case 5:_n(m,p,l),l&&r===null&&T&4&&bm(p),cs(p,p.return);break;case 12:_n(m,p,l);break;case 31:_n(m,p,l),l&&T&4&&qm(m,p);break;case 13:_n(m,p,l),l&&T&4&&Pm(m,p);break;case 22:p.memoizedState===null&&_n(m,p,l),cs(p,p.return);break;case 30:break;default:_n(m,p,l)}n=n.sibling}}function pu(t,n){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&Xo(l))}function gu(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Xo(t))}function jt(t,n,l,r){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gm(t,n,l,r),n=n.sibling}function Gm(t,n,l,r){var m=n.flags;switch(n.tag){case 0:case 11:case 15:jt(t,n,l,r),m&2048&&us(9,n);break;case 1:jt(t,n,l,r);break;case 3:jt(t,n,l,r),m&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Xo(t)));break;case 12:if(m&2048){jt(t,n,l,r),t=n.stateNode;try{var p=n.memoizedProps,T=p.id,C=p.onPostCommit;typeof C=="function"&&C(T,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Ue(n,n.return,N)}}else jt(t,n,l,r);break;case 31:jt(t,n,l,r);break;case 13:jt(t,n,l,r);break;case 23:break;case 22:p=n.stateNode,T=n.alternate,n.memoizedState!==null?p._visibility&2?jt(t,n,l,r):fs(t,n):p._visibility&2?jt(t,n,l,r):(p._visibility|=2,ao(t,n,l,r,(n.subtreeFlags&10256)!==0||!1)),m&2048&&pu(T,n);break;case 24:jt(t,n,l,r),m&2048&&gu(n.alternate,n);break;default:jt(t,n,l,r)}}function ao(t,n,l,r,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=t,T=n,C=l,N=r,q=T.flags;switch(T.tag){case 0:case 11:case 15:ao(p,T,C,N,m),us(8,T);break;case 23:break;case 22:var k=T.stateNode;T.memoizedState!==null?k._visibility&2?ao(p,T,C,N,m):fs(p,T):(k._visibility|=2,ao(p,T,C,N,m)),m&&q&2048&&pu(T.alternate,T);break;case 24:ao(p,T,C,N,m),m&&q&2048&&gu(T.alternate,T);break;default:ao(p,T,C,N,m)}n=n.sibling}}function fs(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var l=t,r=n,m=r.flags;switch(r.tag){case 22:fs(l,r),m&2048&&pu(r.alternate,r);break;case 24:fs(l,r),m&2048&&gu(r.alternate,r);break;default:fs(l,r)}n=n.sibling}}var ds=8192;function ro(t,n,l){if(t.subtreeFlags&ds)for(t=t.child;t!==null;)Hm(t,n,l),t=t.sibling}function Hm(t,n,l){switch(t.tag){case 26:ro(t,n,l),t.flags&ds&&t.memoizedState!==null&&t_(l,Wt,t.memoizedState,t.memoizedProps);break;case 5:ro(t,n,l);break;case 3:case 4:var r=Wt;Wt=Ql(t.stateNode.containerInfo),ro(t,n,l),Wt=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=ds,ds=16777216,ro(t,n,l),ds=r):ro(t,n,l));break;default:ro(t,n,l)}}function Vm(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function ms(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var r=n[l];ot=r,km(r,t)}Vm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Om(t),t=t.sibling}function Om(t){switch(t.tag){case 0:case 11:case 15:ms(t),t.flags&2048&&Qn(9,t,t.return);break;case 3:ms(t);break;case 12:ms(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Il(t)):ms(t);break;default:ms(t)}}function Il(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var r=n[l];ot=r,km(r,t)}Vm(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Qn(8,n,n.return),Il(n);break;case 22:l=n.stateNode,l._visibility&2&&(l._visibility&=-3,Il(n));break;default:Il(n)}t=t.sibling}}function km(t,n){for(;ot!==null;){var l=ot;switch(l.tag){case 0:case 11:case 15:Qn(8,l,n);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var r=l.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Xo(l.memoizedState.cache)}if(r=l.child,r!==null)r.return=l,ot=r;else e:for(l=t;ot!==null;){r=ot;var m=r.sibling,p=r.return;if(Lm(r),r===l){ot=null;break e}if(m!==null){m.return=p,ot=m;break e}ot=p}}}var gC={getCacheForType:function(t){var n=rt(Ze),l=n.data.get(t);return l===void 0&&(l=t(),n.data.set(t,l)),l},cacheSignal:function(){return rt(Ze).controller.signal}},yC=typeof WeakMap=="function"?WeakMap:Map,Me=0,He=null,Ce=null,Ae=0,Le=0,Ut=null,Jn=!1,uo=!1,yu=!1,An=0,Je=0,Yn=0,Ni=0,vu=0,qt=0,co=0,hs=null,At=null,Su=!1,Ll=0,Fm=0,Ul=1/0,ql=null,$n=null,nt=0,Kn=null,fo=null,wn=0,Tu=0,Eu=null,Qm=null,ps=0,Cu=null;function Pt(){return(Me&2)!==0&&Ae!==0?Ae&-Ae:H.T!==null?bu():af()}function Jm(){if(qt===0)if((Ae&536870912)===0||xe){var t=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),qt=t}else qt=536870912;return t=It.current,t!==null&&(t.flags|=32),qt}function wt(t,n,l){(t===He&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(mo(t,0),Xn(t,Ae,qt,!1)),Po(t,l),((Me&2)===0||t!==He)&&(t===He&&((Me&2)===0&&(Ni|=l),Je===4&&Xn(t,Ae,qt,!1)),ln(t))}function Ym(t,n,l){if((Me&6)!==0)throw Error(s(327));var r=!l&&(n&127)===0&&(n&t.expiredLanes)===0||qo(t,n),m=r?TC(t,n):Au(t,n,!0),p=r;do{if(m===0){uo&&!r&&Xn(t,n,0,!1);break}else{if(l=t.current.alternate,p&&!vC(l)){m=Au(t,n,!1),p=!1;continue}if(m===2){if(p=n,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var C=t;m=hs;var N=C.current.memoizedState.isDehydrated;if(N&&(mo(C,T).flags|=256),T=Au(C,T,!1),T!==2){if(yu&&!N){C.errorRecoveryDisabledLanes|=p,Ni|=p,m=4;break e}p=At,At=m,p!==null&&(At===null?At=p:At.push.apply(At,p))}m=T}if(p=!1,m!==2)continue}}if(m===1){mo(t,0),Xn(t,n,0,!0);break}e:{switch(r=t,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Xn(r,n,qt,!Jn);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(m=Ll+300-Nt(),10<m)){if(Xn(r,n,qt,!Jn),Qs(r,0,!0)!==0)break e;wn=n,r.timeoutHandle=Ah($m.bind(null,r,l,At,ql,Su,n,qt,Ni,co,Jn,p,"Throttled",-0,0),m);break e}$m(r,l,At,ql,Su,n,qt,Ni,co,Jn,p,null,-0,0)}}break}while(!0);ln(t)}function $m(t,n,l,r,m,p,T,C,N,q,k,J,P,G){if(t.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cn},Hm(n,p,J);var le=(p&62914560)===p?Ll-Nt():(p&4194048)===p?Fm-Nt():0;if(le=n_(J,le),le!==null){wn=p,t.cancelPendingCommit=le(nh.bind(null,t,n,p,l,r,m,T,C,N,k,J,null,P,G)),Xn(t,p,T,!q);return}}nh(t,n,p,l,r,m,T,C,N)}function vC(t){for(var n=t;;){var l=n.tag;if((l===0||l===11||l===15)&&n.flags&16384&&(l=n.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var r=0;r<l.length;r++){var m=l[r],p=m.getSnapshot;m=m.value;try{if(!Mt(p(),m))return!1}catch{return!1}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Xn(t,n,l,r){n&=~vu,n&=~Ni,t.suspendedLanes|=n,t.pingedLanes&=~n,r&&(t.warmLanes|=n),r=t.expirationTimes;for(var m=n;0<m;){var p=31-Rt(m),T=1<<p;r[p]=-1,m&=~T}l!==0&&of(t,l,n)}function Pl(){return(Me&6)===0?(gs(0),!1):!0}function _u(){if(Ce!==null){if(Le===0)var t=Ce.return;else t=Ce,hn=vi=null,Gr(t),no=null,Wo=0,t=Ce;for(;t!==null;)wm(t.alternate,t),t=t.return;Ce=null}}function mo(t,n){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,zC(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),wn=0,_u(),He=t,Ce=l=dn(t.current,null),Ae=n,Le=0,Ut=null,Jn=!1,uo=qo(t,n),yu=!1,co=qt=vu=Ni=Yn=Je=0,At=hs=null,Su=!1,(n&8)!==0&&(n|=n&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=n;0<r;){var m=31-Rt(r),p=1<<m;n|=t[m],r&=~p}return An=n,il(),l}function Km(t,n){ye=null,H.H=ls,n===to||n===fl?(n=fd(),Le=3):n===Nr?(n=fd(),Le=4):Le=n===tu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ut=n,Ce===null&&(Je=1,wl(t,Ot(n,t.current)))}function Xm(){var t=It.current;return t===null?!0:(Ae&4194048)===Ae?Jt===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?t===Jt:!1}function Zm(){var t=H.H;return H.H=ls,t===null?ls:t}function Wm(){var t=H.A;return H.A=gC,t}function Bl(){Je=4,Jn||(Ae&4194048)!==Ae&&It.current!==null||(uo=!0),(Yn&134217727)===0&&(Ni&134217727)===0||He===null||Xn(He,Ae,qt,!1)}function Au(t,n,l){var r=Me;Me|=2;var m=Zm(),p=Wm();(He!==t||Ae!==n)&&(ql=null,mo(t,n)),n=!1;var T=Je;e:do try{if(Le!==0&&Ce!==null){var C=Ce,N=Ut;switch(Le){case 8:_u(),T=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(n=!0);var q=Le;if(Le=0,Ut=null,ho(t,C,N,q),l&&uo){T=0;break e}break;default:q=Le,Le=0,Ut=null,ho(t,C,N,q)}}SC(),T=Je;break}catch(k){Km(t,k)}while(!0);return n&&t.shellSuspendCounter++,hn=vi=null,Me=r,H.H=m,H.A=p,Ce===null&&(He=null,Ae=0,il()),T}function SC(){for(;Ce!==null;)jm(Ce)}function TC(t,n){var l=Me;Me|=2;var r=Zm(),m=Wm();He!==t||Ae!==n?(ql=null,Ul=Nt()+500,mo(t,n)):uo=qo(t,n);e:do try{if(Le!==0&&Ce!==null){n=Ce;var p=Ut;t:switch(Le){case 1:Le=0,Ut=null,ho(t,n,p,1);break;case 2:case 9:if(ud(p)){Le=0,Ut=null,eh(n);break}n=function(){Le!==2&&Le!==9||He!==t||(Le=7),ln(t)},p.then(n,n);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:ud(p)?(Le=0,Ut=null,eh(n)):(Le=0,Ut=null,ho(t,n,p,7));break;case 5:var T=null;switch(Ce.tag){case 26:T=Ce.memoizedState;case 5:case 27:var C=Ce;if(T?Gh(T):C.stateNode.complete){Le=0,Ut=null;var N=C.sibling;if(N!==null)Ce=N;else{var q=C.return;q!==null?(Ce=q,zl(q)):Ce=null}break t}}Le=0,Ut=null,ho(t,n,p,5);break;case 6:Le=0,Ut=null,ho(t,n,p,6);break;case 8:_u(),Je=6;break e;default:throw Error(s(462))}}EC();break}catch(k){Km(t,k)}while(!0);return hn=vi=null,H.H=r,H.A=m,Me=l,Ce!==null?0:(He=null,Ae=0,il(),Je)}function EC(){for(;Ce!==null&&!FT();)jm(Ce)}function jm(t){var n=_m(t.alternate,t,An);t.memoizedProps=t.pendingProps,n===null?zl(t):Ce=n}function eh(t){var n=t,l=n.alternate;switch(n.tag){case 15:case 0:n=ym(l,n,n.pendingProps,n.type,void 0,Ae);break;case 11:n=ym(l,n,n.pendingProps,n.type.render,n.ref,Ae);break;case 5:Gr(n);default:wm(l,n),n=Ce=Wf(n,An),n=_m(l,n,An)}t.memoizedProps=t.pendingProps,n===null?zl(t):Ce=n}function ho(t,n,l,r){hn=vi=null,Gr(n),no=null,Wo=0;var m=n.return;try{if(uC(t,m,n,l,Ae)){Je=1,wl(t,Ot(l,t.current)),Ce=null;return}}catch(p){if(m!==null)throw Ce=m,p;Je=1,wl(t,Ot(l,t.current)),Ce=null;return}n.flags&32768?(xe||r===1?t=!0:uo||(Ae&536870912)!==0?t=!1:(Jn=t=!0,(r===2||r===9||r===3||r===6)&&(r=It.current,r!==null&&r.tag===13&&(r.flags|=16384))),th(n,t)):zl(n)}function zl(t){var n=t;do{if((n.flags&32768)!==0){th(n,Jn);return}t=n.return;var l=dC(n.alternate,n,An);if(l!==null){Ce=l;return}if(n=n.sibling,n!==null){Ce=n;return}Ce=n=t}while(n!==null);Je===0&&(Je=5)}function th(t,n){do{var l=mC(t.alternate,t);if(l!==null){l.flags&=32767,Ce=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!n&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=l}while(t!==null);Je=6,Ce=null}function nh(t,n,l,r,m,p,T,C,N){t.cancelPendingCommit=null;do Gl();while(nt!==0);if((Me&6)!==0)throw Error(s(327));if(n!==null){if(n===t.current)throw Error(s(177));if(p=n.lanes|n.childLanes,p|=dr,eE(t,l,p,T,C,N),t===He&&(Ce=He=null,Ae=0),fo=n,Kn=t,wn=l,Tu=p,Eu=m,Qm=r,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,wC(Vs,function(){return ah(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||r){r=H.T,H.T=null,m=te.p,te.p=2,T=Me,Me|=4;try{hC(t,n,l)}finally{Me=T,te.p=m,H.T=r}}nt=1,ih(),oh(),sh()}}function ih(){if(nt===1){nt=0;var t=Kn,n=fo,l=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var r=te.p;te.p=2;var m=Me;Me|=4;try{Bm(n,t);var p=Pu,T=kf(t.containerInfo),C=p.focusedElem,N=p.selectionRange;if(T!==C&&C&&C.ownerDocument&&Of(C.ownerDocument.documentElement,C)){if(N!==null&&ar(C)){var q=N.start,k=N.end;if(k===void 0&&(k=q),"selectionStart"in C)C.selectionStart=q,C.selectionEnd=Math.min(k,C.value.length);else{var J=C.ownerDocument||document,P=J&&J.defaultView||window;if(P.getSelection){var G=P.getSelection(),le=C.textContent.length,me=Math.min(N.start,le),ze=N.end===void 0?me:Math.min(N.end,le);!G.extend&&me>ze&&(T=ze,ze=me,me=T);var D=Vf(C,me),b=Vf(C,ze);if(D&&b&&(G.rangeCount!==1||G.anchorNode!==D.node||G.anchorOffset!==D.offset||G.focusNode!==b.node||G.focusOffset!==b.offset)){var U=J.createRange();U.setStart(D.node,D.offset),G.removeAllRanges(),me>ze?(G.addRange(U),G.extend(b.node,b.offset)):(U.setEnd(b.node,b.offset),G.addRange(U))}}}}for(J=[],G=C;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<J.length;C++){var Q=J[C];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Zl=!!qu,Pu=qu=null}finally{Me=m,te.p=r,H.T=l}}t.current=n,nt=2}}function oh(){if(nt===2){nt=0;var t=Kn,n=fo,l=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var r=te.p;te.p=2;var m=Me;Me|=4;try{Im(t,n.alternate,n)}finally{Me=m,te.p=r,H.T=l}}nt=3}}function sh(){if(nt===4||nt===3){nt=0,QT();var t=Kn,n=fo,l=wn,r=Qm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?nt=5:(nt=0,fo=Kn=null,lh(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&($n=null),Oa(l),n=n.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Uo,n,void 0,(n.current.flags&128)===128)}catch{}if(r!==null){n=H.T,m=te.p,te.p=2,H.T=null;try{for(var p=t.onRecoverableError,T=0;T<r.length;T++){var C=r[T];p(C.value,{componentStack:C.stack})}}finally{H.T=n,te.p=m}}(wn&3)!==0&&Gl(),ln(t),m=t.pendingLanes,(l&261930)!==0&&(m&42)!==0?t===Cu?ps++:(ps=0,Cu=t):ps=0,gs(0)}}function lh(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Xo(n)))}function Gl(){return ih(),oh(),sh(),ah()}function ah(){if(nt!==5)return!1;var t=Kn,n=Tu;Tu=0;var l=Oa(wn),r=H.T,m=te.p;try{te.p=32>l?32:l,H.T=null,l=Eu,Eu=null;var p=Kn,T=wn;if(nt=0,fo=Kn=null,wn=0,(Me&6)!==0)throw Error(s(331));var C=Me;if(Me|=4,Om(p.current),Gm(p,p.current,T,l),Me=C,gs(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Uo,p)}catch{}return!0}finally{te.p=m,H.T=r,lh(t,n)}}function rh(t,n,l){n=Ot(l,n),n=eu(t.stateNode,n,2),t=On(t,n,2),t!==null&&(Po(t,2),ln(t))}function Ue(t,n,l){if(t.tag===3)rh(t,t,l);else for(;n!==null;){if(n.tag===3){rh(n,t,l);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($n===null||!$n.has(r))){t=Ot(l,t),l=um(2),r=On(n,l,2),r!==null&&(cm(l,r,n,t),Po(r,2),ln(r));break}}n=n.return}}function wu(t,n,l){var r=t.pingCache;if(r===null){r=t.pingCache=new yC;var m=new Set;r.set(n,m)}else m=r.get(n),m===void 0&&(m=new Set,r.set(n,m));m.has(l)||(yu=!0,m.add(l),t=CC.bind(null,t,n,l),n.then(t,t))}function CC(t,n,l){var r=t.pingCache;r!==null&&r.delete(n),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,He===t&&(Ae&l)===l&&(Je===4||Je===3&&(Ae&62914560)===Ae&&300>Nt()-Ll?(Me&2)===0&&mo(t,0):vu|=l,co===Ae&&(co=0)),ln(t)}function uh(t,n){n===0&&(n=nf()),t=pi(t,n),t!==null&&(Po(t,n),ln(t))}function _C(t){var n=t.memoizedState,l=0;n!==null&&(l=n.retryLane),uh(t,l)}function AC(t,n){var l=0;switch(t.tag){case 31:case 13:var r=t.stateNode,m=t.memoizedState;m!==null&&(l=m.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(n),uh(t,l)}function wC(t,n){return za(t,n)}var Hl=null,po=null,xu=!1,Vl=!1,Nu=!1,Zn=0;function ln(t){t!==po&&t.next===null&&(po===null?Hl=po=t:po=po.next=t),Vl=!0,xu||(xu=!0,NC())}function gs(t,n){if(!Nu&&Vl){Nu=!0;do for(var l=!1,r=Hl;r!==null;){if(t!==0){var m=r.pendingLanes;if(m===0)var p=0;else{var T=r.suspendedLanes,C=r.pingedLanes;p=(1<<31-Rt(42|t)+1)-1,p&=m&~(T&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,mh(r,p))}else p=Ae,p=Qs(r,r===He?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(p&3)===0||qo(r,p)||(l=!0,mh(r,p));r=r.next}while(l);Nu=!1}}function xC(){ch()}function ch(){Vl=xu=!1;var t=0;Zn!==0&&BC()&&(t=Zn);for(var n=Nt(),l=null,r=Hl;r!==null;){var m=r.next,p=fh(r,n);p===0?(r.next=null,l===null?Hl=m:l.next=m,m===null&&(po=l)):(l=r,(t!==0||(p&3)!==0)&&(Vl=!0)),r=m}nt!==0&&nt!==5||gs(t),Zn!==0&&(Zn=0)}function fh(t,n){for(var l=t.suspendedLanes,r=t.pingedLanes,m=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-Rt(p),C=1<<T,N=m[T];N===-1?((C&l)===0||(C&r)!==0)&&(m[T]=jT(C,n)):N<=n&&(t.expiredLanes|=C),p&=~C}if(n=He,l=Ae,l=Qs(t,t===n?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,l===0||t===n&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Ga(r),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||qo(t,l)){if(n=l&-l,n===t.callbackPriority)return n;switch(r!==null&&Ga(r),Oa(l)){case 2:case 8:l=ef;break;case 32:l=Vs;break;case 268435456:l=tf;break;default:l=Vs}return r=dh.bind(null,t),l=za(l,r),t.callbackPriority=n,t.callbackNode=l,n}return r!==null&&r!==null&&Ga(r),t.callbackPriority=2,t.callbackNode=null,2}function dh(t,n){if(nt!==0&&nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Gl()&&t.callbackNode!==l)return null;var r=Ae;return r=Qs(t,t===He?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(Ym(t,r,n),fh(t,Nt()),t.callbackNode!=null&&t.callbackNode===l?dh.bind(null,t):null)}function mh(t,n){if(Gl())return null;Ym(t,n,!0)}function NC(){GC(function(){(Me&6)!==0?za(jc,xC):ch()})}function bu(){if(Zn===0){var t=ji;t===0&&(t=Os,Os<<=1,(Os&261888)===0&&(Os=256)),Zn=t}return Zn}function hh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ks(""+t)}function ph(t,n){var l=n.ownerDocument.createElement("input");return l.name=n.name,l.value=n.value,t.id&&l.setAttribute("form",t.id),n.parentNode.insertBefore(l,n),t=new FormData(t),l.parentNode.removeChild(l),t}function bC(t,n,l,r,m){if(n==="submit"&&l&&l.stateNode===m){var p=hh((m[St]||null).action),T=r.submitter;T&&(n=(n=T[St]||null)?hh(n.formAction):T.getAttribute("formAction"),n!==null&&(p=n,T=null));var C=new js("action","action",null,r,m);t.push({event:C,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Zn!==0){var N=T?ph(m,T):new FormData(m);$r(l,{pending:!0,data:N,method:m.method,action:p},null,N)}}else typeof p=="function"&&(C.preventDefault(),N=T?ph(m,T):new FormData(m),$r(l,{pending:!0,data:N,method:m.method,action:p},p,N))},currentTarget:m}]})}}for(var Ru=0;Ru<fr.length;Ru++){var Mu=fr[Ru],RC=Mu.toLowerCase(),MC=Mu[0].toUpperCase()+Mu.slice(1);Zt(RC,"on"+MC)}Zt(Jf,"onAnimationEnd"),Zt(Yf,"onAnimationIteration"),Zt($f,"onAnimationStart"),Zt("dblclick","onDoubleClick"),Zt("focusin","onFocus"),Zt("focusout","onBlur"),Zt(JE,"onTransitionRun"),Zt(YE,"onTransitionStart"),Zt($E,"onTransitionCancel"),Zt(Kf,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ys));function gh(t,n){n=(n&4)!==0;for(var l=0;l<t.length;l++){var r=t[l],m=r.event;r=r.listeners;e:{var p=void 0;if(n)for(var T=r.length-1;0<=T;T--){var C=r[T],N=C.instance,q=C.currentTarget;if(C=C.listener,N!==p&&m.isPropagationStopped())break e;p=C,m.currentTarget=q;try{p(m)}catch(k){nl(k)}m.currentTarget=null,p=N}else for(T=0;T<r.length;T++){if(C=r[T],N=C.instance,q=C.currentTarget,C=C.listener,N!==p&&m.isPropagationStopped())break e;p=C,m.currentTarget=q;try{p(m)}catch(k){nl(k)}m.currentTarget=null,p=N}}}}function _e(t,n){var l=n[ka];l===void 0&&(l=n[ka]=new Set);var r=t+"__bubble";l.has(r)||(yh(n,t,2,!1),l.add(r))}function Du(t,n,l){var r=0;n&&(r|=4),yh(l,t,r,n)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function Iu(t){if(!t[Ol]){t[Ol]=!0,cf.forEach(function(l){l!=="selectionchange"&&(DC.has(l)||Du(l,!1,t),Du(l,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ol]||(n[Ol]=!0,Du("selectionchange",!1,n))}}function yh(t,n,l,r){switch(Jh(n)){case 2:var m=s_;break;case 8:m=l_;break;default:m=Yu}l=m.bind(null,n,l,t),m=void 0,!Wa||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),r?m!==void 0?t.addEventListener(n,l,{capture:!0,passive:m}):t.addEventListener(n,l,!0):m!==void 0?t.addEventListener(n,l,{passive:m}):t.addEventListener(n,l,!1)}function Lu(t,n,l,r,m){var p=r;if((n&1)===0&&(n&2)===0&&r!==null)e:for(;;){if(r===null)return;var T=r.tag;if(T===3||T===4){var C=r.stateNode.containerInfo;if(C===m)break;if(T===4)for(T=r.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;C!==null;){if(T=Pi(C),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){r=p=T;continue e}C=C.parentNode}}r=r.return}Cf(function(){var q=p,k=Xa(l),J=[];e:{var P=Xf.get(t);if(P!==void 0){var G=js,le=t;switch(t){case"keypress":if(Zs(l)===0)break e;case"keydown":case"keyup":G=AE;break;case"focusin":le="focus",G=nr;break;case"focusout":le="blur",G=nr;break;case"beforeblur":case"afterblur":G=nr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=dE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=NE;break;case Jf:case Yf:case $f:G=pE;break;case Kf:G=RE;break;case"scroll":case"scrollend":G=cE;break;case"wheel":G=DE;break;case"copy":case"cut":case"paste":G=yE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Nf;break;case"toggle":case"beforetoggle":G=LE}var me=(n&4)!==0,ze=!me&&(t==="scroll"||t==="scrollend"),D=me?P!==null?P+"Capture":null:P;me=[];for(var b=q,U;b!==null;){var Q=b;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||D===null||(Q=Go(b,D),Q!=null&&me.push(vs(b,Q,U))),ze)break;b=b.return}0<me.length&&(P=new G(P,le,null,l,k),J.push({event:P,listeners:me}))}}if((n&7)===0){e:{if(P=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",P&&l!==Ka&&(le=l.relatedTarget||l.fromElement)&&(Pi(le)||le[qi]))break e;if((G||P)&&(P=k.window===k?k:(P=k.ownerDocument)?P.defaultView||P.parentWindow:window,G?(le=l.relatedTarget||l.toElement,G=q,le=le?Pi(le):null,le!==null&&(ze=u(le),me=le.tag,le!==ze||me!==5&&me!==27&&me!==6)&&(le=null)):(G=null,le=q),G!==le)){if(me=wf,Q="onMouseLeave",D="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(me=Nf,Q="onPointerLeave",D="onPointerEnter",b="pointer"),ze=G==null?P:zo(G),U=le==null?P:zo(le),P=new me(Q,b+"leave",G,l,k),P.target=ze,P.relatedTarget=U,Q=null,Pi(k)===q&&(me=new me(D,b+"enter",le,l,k),me.target=U,me.relatedTarget=ze,Q=me),ze=Q,G&&le)t:{for(me=IC,D=G,b=le,U=0,Q=D;Q;Q=me(Q))U++;Q=0;for(var fe=b;fe;fe=me(fe))Q++;for(;0<U-Q;)D=me(D),U--;for(;0<Q-U;)b=me(b),Q--;for(;U--;){if(D===b||b!==null&&D===b.alternate){me=D;break t}D=me(D),b=me(b)}me=null}else me=null;G!==null&&vh(J,P,G,me,!1),le!==null&&ze!==null&&vh(J,ze,le,me,!0)}}e:{if(P=q?zo(q):window,G=P.nodeName&&P.nodeName.toLowerCase(),G==="select"||G==="input"&&P.type==="file")var Ne=qf;else if(Lf(P))if(Pf)Ne=kE;else{Ne=VE;var ue=HE}else G=P.nodeName,!G||G.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?q&&$a(q.elementType)&&(Ne=qf):Ne=OE;if(Ne&&(Ne=Ne(t,q))){Uf(J,Ne,l,k);break e}ue&&ue(t,P,q),t==="focusout"&&q&&P.type==="number"&&q.memoizedProps.value!=null&&Ya(P,"number",P.value)}switch(ue=q?zo(q):window,t){case"focusin":(Lf(ue)||ue.contentEditable==="true")&&(Qi=ue,rr=q,Yo=null);break;case"focusout":Yo=rr=Qi=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,Ff(J,l,k);break;case"selectionchange":if(QE)break;case"keydown":case"keyup":Ff(J,l,k)}var Se;if(or)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Fi?Df(t,l)&&(we="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(bf&&l.locale!=="ko"&&(Fi||we!=="onCompositionStart"?we==="onCompositionEnd"&&Fi&&(Se=_f()):(qn=k,ja="value"in qn?qn.value:qn.textContent,Fi=!0)),ue=kl(q,we),0<ue.length&&(we=new xf(we,t,null,l,k),J.push({event:we,listeners:ue}),Se?we.data=Se:(Se=If(l),Se!==null&&(we.data=Se)))),(Se=qE?PE(t,l):BE(t,l))&&(we=kl(q,"onBeforeInput"),0<we.length&&(ue=new xf("onBeforeInput","beforeinput",null,l,k),J.push({event:ue,listeners:we}),ue.data=Se)),bC(J,t,q,l,k)}gh(J,n)})}function vs(t,n,l){return{instance:t,listener:n,currentTarget:l}}function kl(t,n){for(var l=n+"Capture",r=[];t!==null;){var m=t,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Go(t,l),m!=null&&r.unshift(vs(t,m,p)),m=Go(t,n),m!=null&&r.push(vs(t,m,p))),t.tag===3)return r;t=t.return}return[]}function IC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function vh(t,n,l,r,m){for(var p=n._reactName,T=[];l!==null&&l!==r;){var C=l,N=C.alternate,q=C.stateNode;if(C=C.tag,N!==null&&N===r)break;C!==5&&C!==26&&C!==27||q===null||(N=q,m?(q=Go(l,p),q!=null&&T.unshift(vs(l,q,N))):m||(q=Go(l,p),q!=null&&T.push(vs(l,q,N)))),l=l.return}T.length!==0&&t.push({event:n,listeners:T})}var LC=/\r\n?/g,UC=/\u0000|\uFFFD/g;function Sh(t){return(typeof t=="string"?t:""+t).replace(LC,`
`).replace(UC,"")}function Th(t,n){return n=Sh(n),Sh(t)===n}function Be(t,n,l,r,m,p){switch(l){case"children":typeof r=="string"?n==="body"||n==="textarea"&&r===""||Vi(t,r):(typeof r=="number"||typeof r=="bigint")&&n!=="body"&&Vi(t,""+r);break;case"className":Ys(t,"class",r);break;case"tabIndex":Ys(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ys(t,l,r);break;case"style":Tf(t,r,p);break;case"data":if(n!=="object"){Ys(t,"data",r);break}case"src":case"href":if(r===""&&(n!=="a"||l!=="href")){t.removeAttribute(l);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=Ks(""+r),t.setAttribute(l,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(n!=="input"&&Be(t,n,"name",m.name,m,null),Be(t,n,"formEncType",m.formEncType,m,null),Be(t,n,"formMethod",m.formMethod,m,null),Be(t,n,"formTarget",m.formTarget,m,null)):(Be(t,n,"encType",m.encType,m,null),Be(t,n,"method",m.method,m,null),Be(t,n,"target",m.target,m,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=Ks(""+r),t.setAttribute(l,r);break;case"onClick":r!=null&&(t.onclick=cn);break;case"onScroll":r!=null&&_e("scroll",t);break;case"onScrollEnd":r!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(l=r.__html,l!=null){if(m.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}l=Ks(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""+r):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":r===!0?t.setAttribute(l,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,r):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(l,r):t.removeAttribute(l);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(l):t.setAttribute(l,r);break;case"popover":_e("beforetoggle",t),_e("toggle",t),Js(t,"popover",r);break;case"xlinkActuate":un(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":un(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":un(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":un(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":un(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":un(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":un(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Js(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=rE.get(l)||l,Js(t,l,r))}}function Uu(t,n,l,r,m,p){switch(l){case"style":Tf(t,r,p);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(l=r.__html,l!=null){if(m.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"children":typeof r=="string"?Vi(t,r):(typeof r=="number"||typeof r=="bigint")&&Vi(t,""+r);break;case"onScroll":r!=null&&_e("scroll",t);break;case"onScrollEnd":r!=null&&_e("scrollend",t);break;case"onClick":r!=null&&(t.onclick=cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ff.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),n=l.slice(2,m?l.length-7:void 0),p=t[St]||null,p=p!=null?p[l]:null,typeof p=="function"&&t.removeEventListener(n,p,m),typeof r=="function")){typeof p!="function"&&p!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(n,r,m);break e}l in t?t[l]=r:r===!0?t.setAttribute(l,""):Js(t,l,r)}}}function ct(t,n,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var r=!1,m=!1,p;for(p in l)if(l.hasOwnProperty(p)){var T=l[p];if(T!=null)switch(p){case"src":r=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Be(t,n,p,T,l,null)}}m&&Be(t,n,"srcSet",l.srcSet,l,null),r&&Be(t,n,"src",l.src,l,null);return;case"input":_e("invalid",t);var C=p=T=m=null,N=null,q=null;for(r in l)if(l.hasOwnProperty(r)){var k=l[r];if(k!=null)switch(r){case"name":m=k;break;case"type":T=k;break;case"checked":N=k;break;case"defaultChecked":q=k;break;case"value":p=k;break;case"defaultValue":C=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(137,n));break;default:Be(t,n,r,k,l,null)}}gf(t,p,C,N,q,T,m,!1);return;case"select":_e("invalid",t),r=T=p=null;for(m in l)if(l.hasOwnProperty(m)&&(C=l[m],C!=null))switch(m){case"value":p=C;break;case"defaultValue":T=C;break;case"multiple":r=C;default:Be(t,n,m,C,l,null)}n=p,l=T,t.multiple=!!r,n!=null?Hi(t,!!r,n,!1):l!=null&&Hi(t,!!r,l,!0);return;case"textarea":_e("invalid",t),p=m=r=null;for(T in l)if(l.hasOwnProperty(T)&&(C=l[T],C!=null))switch(T){case"value":r=C;break;case"defaultValue":m=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Be(t,n,T,C,l,null)}vf(t,r,m,p);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(r=l[N],r!=null))switch(N){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Be(t,n,N,r,l,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(r=0;r<ys.length;r++)_e(ys[r],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(r=l[q],r!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Be(t,n,q,r,l,null)}return;default:if($a(n)){for(k in l)l.hasOwnProperty(k)&&(r=l[k],r!==void 0&&Uu(t,n,k,r,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(r=l[C],r!=null&&Be(t,n,C,r,l,null))}function qC(t,n,l,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,T=null,C=null,N=null,q=null,k=null;for(G in l){var J=l[G];if(l.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=J;default:r.hasOwnProperty(G)||Be(t,n,G,null,r,J)}}for(var P in r){var G=r[P];if(J=l[P],r.hasOwnProperty(P)&&(G!=null||J!=null))switch(P){case"type":p=G;break;case"name":m=G;break;case"checked":q=G;break;case"defaultChecked":k=G;break;case"value":T=G;break;case"defaultValue":C=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:G!==J&&Be(t,n,P,G,r,J)}}Ja(t,T,C,N,q,k,p,m);return;case"select":G=T=C=P=null;for(p in l)if(N=l[p],l.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":G=N;default:r.hasOwnProperty(p)||Be(t,n,p,null,r,N)}for(m in r)if(p=r[m],N=l[m],r.hasOwnProperty(m)&&(p!=null||N!=null))switch(m){case"value":P=p;break;case"defaultValue":C=p;break;case"multiple":T=p;default:p!==N&&Be(t,n,m,p,r,N)}n=C,l=T,r=G,P!=null?Hi(t,!!l,P,!1):!!r!=!!l&&(n!=null?Hi(t,!!l,n,!0):Hi(t,!!l,l?[]:"",!1));return;case"textarea":G=P=null;for(C in l)if(m=l[C],l.hasOwnProperty(C)&&m!=null&&!r.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Be(t,n,C,null,r,m)}for(T in r)if(m=r[T],p=l[T],r.hasOwnProperty(T)&&(m!=null||p!=null))switch(T){case"value":P=m;break;case"defaultValue":G=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&Be(t,n,T,m,r,p)}yf(t,P,G);return;case"option":for(var le in l)if(P=l[le],l.hasOwnProperty(le)&&P!=null&&!r.hasOwnProperty(le))switch(le){case"selected":t.selected=!1;break;default:Be(t,n,le,null,r,P)}for(N in r)if(P=r[N],G=l[N],r.hasOwnProperty(N)&&P!==G&&(P!=null||G!=null))switch(N){case"selected":t.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Be(t,n,N,P,r,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in l)P=l[me],l.hasOwnProperty(me)&&P!=null&&!r.hasOwnProperty(me)&&Be(t,n,me,null,r,P);for(q in r)if(P=r[q],G=l[q],r.hasOwnProperty(q)&&P!==G&&(P!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,n));break;default:Be(t,n,q,P,r,G)}return;default:if($a(n)){for(var ze in l)P=l[ze],l.hasOwnProperty(ze)&&P!==void 0&&!r.hasOwnProperty(ze)&&Uu(t,n,ze,void 0,r,P);for(k in r)P=r[k],G=l[k],!r.hasOwnProperty(k)||P===G||P===void 0&&G===void 0||Uu(t,n,k,P,r,G);return}}for(var D in l)P=l[D],l.hasOwnProperty(D)&&P!=null&&!r.hasOwnProperty(D)&&Be(t,n,D,null,r,P);for(J in r)P=r[J],G=l[J],!r.hasOwnProperty(J)||P===G||P==null&&G==null||Be(t,n,J,P,r,G)}function Eh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,l=performance.getEntriesByType("resource"),r=0;r<l.length;r++){var m=l[r],p=m.transferSize,T=m.initiatorType,C=m.duration;if(p&&C&&Eh(T)){for(T=0,C=m.responseEnd,r+=1;r<l.length;r++){var N=l[r],q=N.startTime;if(q>C)break;var k=N.transferSize,J=N.initiatorType;k&&Eh(J)&&(N=N.responseEnd,T+=k*(N<C?1:(C-q)/(N-q)))}if(--r,n+=8*(p+T)/(m.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qu=null,Pu=null;function Fl(t){return t.nodeType===9?t:t.ownerDocument}function Ch(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _h(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Bu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var zu=null;function BC(){var t=window.event;return t&&t.type==="popstate"?t===zu?!1:(zu=t,!0):(zu=null,!1)}var Ah=typeof setTimeout=="function"?setTimeout:void 0,zC=typeof clearTimeout=="function"?clearTimeout:void 0,wh=typeof Promise=="function"?Promise:void 0,GC=typeof queueMicrotask=="function"?queueMicrotask:typeof wh<"u"?function(t){return wh.resolve(null).then(t).catch(HC)}:Ah;function HC(t){setTimeout(function(){throw t})}function Wn(t){return t==="head"}function xh(t,n){var l=n,r=0;do{var m=l.nextSibling;if(t.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(r===0){t.removeChild(m),So(n);return}r--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")r++;else if(l==="html")Ss(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Ss(l);for(var p=l.firstChild;p;){var T=p.nextSibling,C=p.nodeName;p[Bo]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||l.removeChild(p),p=T}}else l==="body"&&Ss(t.ownerDocument.body);l=m}while(l);So(n)}function Nh(t,n){var l=t;t=0;do{var r=l.nextSibling;if(l.nodeType===1?n?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(n?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),r&&r.nodeType===8)if(l=r.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=r}while(l)}function Gu(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var l=n;switch(n=n.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Gu(l),Fa(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function VC(t,n,l,r){for(;t.nodeType===1;){var m=l;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Bo])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Yt(t.nextSibling),t===null)break}return null}function OC(t,n,l){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Yt(t.nextSibling),t===null))return null;return t}function bh(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Yt(t.nextSibling),t===null))return null;return t}function Hu(t){return t.data==="$?"||t.data==="$~"}function Vu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function kC(t,n){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||l.readyState!=="loading")n();else{var r=function(){n(),l.removeEventListener("DOMContentLoaded",r)};l.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Yt(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Ou=null;function Rh(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(n===0)return Yt(t.nextSibling);n--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||n++}t=t.nextSibling}return null}function Mh(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(n===0)return t;n--}else l!=="/$"&&l!=="/&"||n++}t=t.previousSibling}return null}function Dh(t,n,l){switch(n=Fl(l),t){case"html":if(t=n.documentElement,!t)throw Error(s(452));return t;case"head":if(t=n.head,!t)throw Error(s(453));return t;case"body":if(t=n.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ss(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Fa(t)}var $t=new Map,Ih=new Set;function Ql(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var xn=te.d;te.d={f:FC,r:QC,D:JC,C:YC,L:$C,m:KC,X:ZC,S:XC,M:WC};function FC(){var t=xn.f(),n=Pl();return t||n}function QC(t){var n=Bi(t);n!==null&&n.tag===5&&n.type==="form"?Kd(n):xn.r(t)}var go=typeof document>"u"?null:document;function Lh(t,n,l){var r=go;if(r&&typeof n=="string"&&n){var m=Ht(n);m='link[rel="'+t+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Ih.has(m)||(Ih.add(m),t={rel:t,crossOrigin:l,href:n},r.querySelector(m)===null&&(n=r.createElement("link"),ct(n,"link",t),it(n),r.head.appendChild(n)))}}function JC(t){xn.D(t),Lh("dns-prefetch",t,null)}function YC(t,n){xn.C(t,n),Lh("preconnect",t,n)}function $C(t,n,l){xn.L(t,n,l);var r=go;if(r&&t&&n){var m='link[rel="preload"][as="'+Ht(n)+'"]';n==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Ht(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Ht(l.imageSizes)+'"]')):m+='[href="'+Ht(t)+'"]';var p=m;switch(n){case"style":p=yo(t);break;case"script":p=vo(t)}$t.has(p)||(t=S({rel:"preload",href:n==="image"&&l&&l.imageSrcSet?void 0:t,as:n},l),$t.set(p,t),r.querySelector(m)!==null||n==="style"&&r.querySelector(Ts(p))||n==="script"&&r.querySelector(Es(p))||(n=r.createElement("link"),ct(n,"link",t),it(n),r.head.appendChild(n)))}}function KC(t,n){xn.m(t,n);var l=go;if(l&&t){var r=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+Ht(r)+'"][href="'+Ht(t)+'"]',p=m;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=vo(t)}if(!$t.has(p)&&(t=S({rel:"modulepreload",href:t},n),$t.set(p,t),l.querySelector(m)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Es(p)))return}r=l.createElement("link"),ct(r,"link",t),it(r),l.head.appendChild(r)}}}function XC(t,n,l){xn.S(t,n,l);var r=go;if(r&&t){var m=zi(r).hoistableStyles,p=yo(t);n=n||"default";var T=m.get(p);if(!T){var C={loading:0,preload:null};if(T=r.querySelector(Ts(p)))C.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},l),(l=$t.get(p))&&ku(t,l);var N=T=r.createElement("link");it(N),ct(N,"link",t),N._p=new Promise(function(q,k){N.onload=q,N.onerror=k}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Jl(T,n,r)}T={type:"stylesheet",instance:T,count:1,state:C},m.set(p,T)}}}function ZC(t,n){xn.X(t,n);var l=go;if(l&&t){var r=zi(l).hoistableScripts,m=vo(t),p=r.get(m);p||(p=l.querySelector(Es(m)),p||(t=S({src:t,async:!0},n),(n=$t.get(m))&&Fu(t,n),p=l.createElement("script"),it(p),ct(p,"link",t),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(m,p))}}function WC(t,n){xn.M(t,n);var l=go;if(l&&t){var r=zi(l).hoistableScripts,m=vo(t),p=r.get(m);p||(p=l.querySelector(Es(m)),p||(t=S({src:t,async:!0,type:"module"},n),(n=$t.get(m))&&Fu(t,n),p=l.createElement("script"),it(p),ct(p,"link",t),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(m,p))}}function Uh(t,n,l,r){var m=(m=Ee.current)?Ql(m):null;if(!m)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(n=yo(l.href),l=zi(m).hoistableStyles,r=l.get(n),r||(r={type:"style",instance:null,count:0,state:null},l.set(n,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=yo(l.href);var p=zi(m).hoistableStyles,T=p.get(t);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=m.querySelector(Ts(t)))&&!p._p&&(T.instance=p,T.state.loading=5),$t.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$t.set(t,l),p||jC(m,t,l,T.state))),n&&r===null)throw Error(s(528,""));return T}if(n&&r!==null)throw Error(s(529,""));return null;case"script":return n=l.async,l=l.src,typeof l=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=vo(l),l=zi(m).hoistableScripts,r=l.get(n),r||(r={type:"script",instance:null,count:0,state:null},l.set(n,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function yo(t){return'href="'+Ht(t)+'"'}function Ts(t){return'link[rel="stylesheet"]['+t+"]"}function qh(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function jC(t,n,l,r){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?r.loading=1:(n=t.createElement("link"),r.preload=n,n.addEventListener("load",function(){return r.loading|=1}),n.addEventListener("error",function(){return r.loading|=2}),ct(n,"link",l),it(n),t.head.appendChild(n))}function vo(t){return'[src="'+Ht(t)+'"]'}function Es(t){return"script[async]"+t}function Ph(t,n,l){if(n.count++,n.instance===null)switch(n.type){case"style":var r=t.querySelector('style[data-href~="'+Ht(l.href)+'"]');if(r)return n.instance=r,it(r),r;var m=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),it(r),ct(r,"style",m),Jl(r,l.precedence,t),n.instance=r;case"stylesheet":m=yo(l.href);var p=t.querySelector(Ts(m));if(p)return n.state.loading|=4,n.instance=p,it(p),p;r=qh(l),(m=$t.get(m))&&ku(r,m),p=(t.ownerDocument||t).createElement("link"),it(p);var T=p;return T._p=new Promise(function(C,N){T.onload=C,T.onerror=N}),ct(p,"link",r),n.state.loading|=4,Jl(p,l.precedence,t),n.instance=p;case"script":return p=vo(l.src),(m=t.querySelector(Es(p)))?(n.instance=m,it(m),m):(r=l,(m=$t.get(p))&&(r=S({},l),Fu(r,m)),t=t.ownerDocument||t,m=t.createElement("script"),it(m),ct(m,"link",r),t.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(r=n.instance,n.state.loading|=4,Jl(r,l.precedence,t));return n.instance}function Jl(t,n,l){for(var r=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=r.length?r[r.length-1]:null,p=m,T=0;T<r.length;T++){var C=r[T];if(C.dataset.precedence===n)p=C;else if(p!==m)break}p?p.parentNode.insertBefore(t,p.nextSibling):(n=l.nodeType===9?l.head:l,n.insertBefore(t,n.firstChild))}function ku(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Fu(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Yl=null;function Bh(t,n,l){if(Yl===null){var r=new Map,m=Yl=new Map;m.set(l,r)}else m=Yl,r=m.get(l),r||(r=new Map,m.set(l,r));if(r.has(t))return r;for(r.set(t,null),l=l.getElementsByTagName(t),m=0;m<l.length;m++){var p=l[m];if(!(p[Bo]||p[lt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(n)||"";T=t+T;var C=r.get(T);C?C.push(p):r.set(T,[p])}}return r}function zh(t,n,l){t=t.ownerDocument||t,t.head.insertBefore(l,n==="title"?t.querySelector("head > title"):null)}function e_(t,n,l){if(l===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Gh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function t_(t,n,l,r){if(l.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=yo(r.href),p=n.querySelector(Ts(m));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=$l.bind(t),n.then(t,t)),l.state.loading|=4,l.instance=p,it(p);return}p=n.ownerDocument||n,r=qh(r),(m=$t.get(m))&&ku(r,m),p=p.createElement("link"),it(p);var T=p;T._p=new Promise(function(C,N){T.onload=C,T.onerror=N}),ct(p,"link",r),l.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,n),(n=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=$l.bind(t),n.addEventListener("load",l),n.addEventListener("error",l))}}var Qu=0;function n_(t,n){return t.stylesheets&&t.count===0&&Xl(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var r=setTimeout(function(){if(t.stylesheets&&Xl(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+n);0<t.imgBytes&&Qu===0&&(Qu=62500*PC());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Xl(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Qu?50:800)+n);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(m)}}:null}function $l(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Kl=null;function Xl(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Kl=new Map,n.forEach(i_,t),Kl=null,$l.call(t))}function i_(t,n){if(!(n.state.loading&4)){var l=Kl.get(t);if(l)var r=l.get(null);else{l=new Map,Kl.set(t,l);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var T=m[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),r=T)}r&&l.set(null,r)}m=n.instance,T=m.getAttribute("data-precedence"),p=l.get(T)||r,p===r&&l.set(null,m),l.set(T,m),this.count++,r=$l.bind(this),m.addEventListener("load",r),m.addEventListener("error",r),p?p.parentNode.insertBefore(m,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),n.state.loading|=4}}var Cs={$$typeof:L,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function o_(t,n,l,r,m,p,T,C,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ha(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.hiddenUpdates=Ha(null),this.identifierPrefix=r,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Hh(t,n,l,r,m,p,T,C,N,q,k,J){return t=new o_(t,n,l,T,N,q,k,J,C),n=1,p===!0&&(n|=24),p=Dt(3,null,null,n),t.current=p,p.stateNode=t,n=Ar(),n.refCount++,t.pooledCache=n,n.refCount++,p.memoizedState={element:r,isDehydrated:l,cache:n},br(p),t}function Vh(t){return t?(t=$i,t):$i}function Oh(t,n,l,r,m,p){m=Vh(m),r.context===null?r.context=m:r.pendingContext=m,r=Vn(n),r.payload={element:l},p=p===void 0?null:p,p!==null&&(r.callback=p),l=On(t,r,n),l!==null&&(wt(l,t,n),es(l,t,n))}function kh(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<n?l:n}}function Ju(t,n){kh(t,n),(t=t.alternate)&&kh(t,n)}function Fh(t){if(t.tag===13||t.tag===31){var n=pi(t,67108864);n!==null&&wt(n,t,67108864),Ju(t,67108864)}}function Qh(t){if(t.tag===13||t.tag===31){var n=Pt();n=Va(n);var l=pi(t,n);l!==null&&wt(l,t,n),Ju(t,n)}}var Zl=!0;function s_(t,n,l,r){var m=H.T;H.T=null;var p=te.p;try{te.p=2,Yu(t,n,l,r)}finally{te.p=p,H.T=m}}function l_(t,n,l,r){var m=H.T;H.T=null;var p=te.p;try{te.p=8,Yu(t,n,l,r)}finally{te.p=p,H.T=m}}function Yu(t,n,l,r){if(Zl){var m=$u(r);if(m===null)Lu(t,n,r,Wl,l),Yh(t,r);else if(r_(m,t,n,l,r))r.stopPropagation();else if(Yh(t,r),n&4&&-1<a_.indexOf(t)){for(;m!==null;){var p=Bi(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=ci(p.pendingLanes);if(T!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var N=1<<31-Rt(T);C.entanglements[1]|=N,T&=~N}ln(p),(Me&6)===0&&(Ul=Nt()+500,gs(0))}}break;case 31:case 13:C=pi(p,2),C!==null&&wt(C,p,2),Pl(),Ju(p,2)}if(p=$u(r),p===null&&Lu(t,n,r,Wl,l),p===m)break;m=p}m!==null&&r.stopPropagation()}else Lu(t,n,r,null,l)}}function $u(t){return t=Xa(t),Ku(t)}var Wl=null;function Ku(t){if(Wl=null,t=Pi(t),t!==null){var n=u(t);if(n===null)t=null;else{var l=n.tag;if(l===13){if(t=d(n),t!==null)return t;t=null}else if(l===31){if(t=h(n),t!==null)return t;t=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Wl=t,null}function Jh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(JT()){case jc:return 2;case ef:return 8;case Vs:case YT:return 32;case tf:return 268435456;default:return 32}default:return 32}}var Xu=!1,jn=null,ei=null,ti=null,_s=new Map,As=new Map,ni=[],a_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yh(t,n){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":_s.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(n.pointerId)}}function ws(t,n,l,r,m,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:l,eventSystemFlags:r,nativeEvent:p,targetContainers:[m]},n!==null&&(n=Bi(n),n!==null&&Fh(n)),t):(t.eventSystemFlags|=r,n=t.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),t)}function r_(t,n,l,r,m){switch(n){case"focusin":return jn=ws(jn,t,n,l,r,m),!0;case"dragenter":return ei=ws(ei,t,n,l,r,m),!0;case"mouseover":return ti=ws(ti,t,n,l,r,m),!0;case"pointerover":var p=m.pointerId;return _s.set(p,ws(_s.get(p)||null,t,n,l,r,m)),!0;case"gotpointercapture":return p=m.pointerId,As.set(p,ws(As.get(p)||null,t,n,l,r,m)),!0}return!1}function $h(t){var n=Pi(t.target);if(n!==null){var l=u(n);if(l!==null){if(n=l.tag,n===13){if(n=d(l),n!==null){t.blockedOn=n,rf(t.priority,function(){Qh(l)});return}}else if(n===31){if(n=h(l),n!==null){t.blockedOn=n,rf(t.priority,function(){Qh(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var l=$u(t.nativeEvent);if(l===null){l=t.nativeEvent;var r=new l.constructor(l.type,l);Ka=r,l.target.dispatchEvent(r),Ka=null}else return n=Bi(l),n!==null&&Fh(n),t.blockedOn=l,!1;n.shift()}return!0}function Kh(t,n,l){jl(t)&&l.delete(n)}function u_(){Xu=!1,jn!==null&&jl(jn)&&(jn=null),ei!==null&&jl(ei)&&(ei=null),ti!==null&&jl(ti)&&(ti=null),_s.forEach(Kh),As.forEach(Kh)}function ea(t,n){t.blockedOn===n&&(t.blockedOn=null,Xu||(Xu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,u_)))}var ta=null;function Xh(t){ta!==t&&(ta=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ta===t&&(ta=null);for(var n=0;n<t.length;n+=3){var l=t[n],r=t[n+1],m=t[n+2];if(typeof r!="function"){if(Ku(r||l)===null)continue;break}var p=Bi(l);p!==null&&(t.splice(n,3),n-=3,$r(p,{pending:!0,data:m,method:l.method,action:r},r,m))}}))}function So(t){function n(N){return ea(N,t)}jn!==null&&ea(jn,t),ei!==null&&ea(ei,t),ti!==null&&ea(ti,t),_s.forEach(n),As.forEach(n);for(var l=0;l<ni.length;l++){var r=ni[l];r.blockedOn===t&&(r.blockedOn=null)}for(;0<ni.length&&(l=ni[0],l.blockedOn===null);)$h(l),l.blockedOn===null&&ni.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(r=0;r<l.length;r+=3){var m=l[r],p=l[r+1],T=m[St]||null;if(typeof p=="function")T||Xh(l);else if(T){var C=null;if(p&&p.hasAttribute("formAction")){if(m=p,T=p[St]||null)C=T.formAction;else if(Ku(m)!==null)continue}else C=T.action;typeof C=="function"?l[r+1]=C:(l.splice(r,3),r-=3),Xh(l)}}}function Zh(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),r||setTimeout(l,20)}function l(){if(!r&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(l,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function Zu(t){this._internalRoot=t}na.prototype.render=Zu.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(s(409));var l=n.current,r=Pt();Oh(l,r,t,n,null,null)},na.prototype.unmount=Zu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Oh(t.current,2,null,t,null,null),Pl(),n[qi]=null}};function na(t){this._internalRoot=t}na.prototype.unstable_scheduleHydration=function(t){if(t){var n=af();t={blockedOn:null,target:t,priority:n};for(var l=0;l<ni.length&&n!==0&&n<ni[l].priority;l++);ni.splice(l,0,t),l===0&&$h(t)}};var Wh=e.version;if(Wh!=="19.2.0")throw Error(s(527,Wh,"19.2.0"));te.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var c_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{Uo=ia.inject(c_),bt=ia}catch{}}return Ns.createRoot=function(t,n){if(!a(t))throw Error(s(299));var l=!1,r="",m=sm,p=lm,T=am;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=Hh(t,1,!1,null,null,l,r,null,m,p,T,Zh),t[qi]=n.current,Iu(t),new Zu(n)},Ns.hydrateRoot=function(t,n,l){if(!a(t))throw Error(s(299));var r=!1,m="",p=sm,T=lm,C=am,N=null;return l!=null&&(l.unstable_strictMode===!0&&(r=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(N=l.formState)),n=Hh(t,1,!0,n,l??null,r,m,N,p,T,C,Zh),n.context=Vh(null),l=n.current,r=Pt(),r=Va(r),m=Vn(r),m.callback=null,On(l,m,r),l=r,n.current.lanes=l,Po(n,l),ln(n),t[qi]=n.current,Iu(t),new na(n)},Ns.version="19.2.0",Ns}var rp;function __(){if(rp)return ec.exports;rp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ec.exports=C_(),ec.exports}var A_=__();const iS={en:{headerTitle:"Fragment to Diary",viewHistory:"View History",placeholder:"What's happening right now? (e.g., 'Had a great coffee with Sarah', 'Feeling stuck on the project')",addNote:"Add note",noNotes:"No notes yet today. Start capturing moments.",deleteNote:"Delete note",timeline:"Timeline",clearDay:"Clear Day",clearConfirm:"Are you sure you want to clear all notes for",weaveButton:"Weave into Diary",regenerateButton:"Regenerate Diary",cancelView:"Cancel and view existing diary",writingStory:"Writing your story...",analyzing:"Analyzing moments from",failedError:"Failed to create your diary. Please try again.",backToFragments:"Back to fragments",reflectionLabel:"Reflection",historyTitle:"Journal History",noEntries:"No entries yet.",diaryCreated:"Diary Created",draft:"Draft",fragment:"Fragment",fragments:"Fragments",today:"Today",yesterday:"Yesterday",edit:"Edit",save:"Save",cancel:"Cancel",titleLabel:"Title",moodLabel:"Mood",contentLabel:"Content",tagsLabel:"Tags (comma separated)",startRecording:"Record Audio",stopRecording:"Stop Recording",transcribing:"Transcribing...",transcriptionFailed:"Transcription failed",fragmentTagPlaceholder:"Tags (optional, comma separated)",deleteConfirmTitle:"Delete Note?",deleteConfirmMessage:"Are you sure you want to delete this fragment? This action cannot be undone.",confirmDelete:"Delete",filterAll:"All",unsavedDraft:"Found an unsaved draft",restore:"Restore",discard:"Discard",searchPlaceholder:"Search memories...",searchResults:"Search Results",noResultsFound:"No matches found for",matchFoundIn:"Found in",clearSearch:"Clear search",toneLabel:"Tone",tones:{default:"Natural (AI Decision)",happy:"Optimistic & Energetic",melancholic:"Melancholic & Deep",witty:"Witty & Sarcastic",formal:"Formal & Structured",poetic:"Poetic & Lyrical",grateful:"Grateful & Warm",stoic:"Stoic & Objective"},settings:"Settings",aiConfig:"AI Configuration",provider:"Provider",gemini:"Google Gemini (Default)",openai:"OpenAI Compatible",baseUrl:"Base URL",apiKey:"API Key",modelName:"Model Name",saveConfig:"Update Configuration",configSaved:"Configuration saved!",exportData:"Export Data",importData:"Import Data",exportJsonDesc:"Backup your raw data to transfer between devices.",exportMdDesc:"Download a readable text file of your diary entries.",importDesc:"Restore from a previously exported JSON file. This will merge with existing data.",importSuccess:"Data imported successfully!",importError:"Invalid data file.",importButton:"Select File",exportButton:"Export",json:"JSON (Backup)",markdown:"Markdown (Readable)",close:"Close"},zh:{headerTitle:"",viewHistory:"",placeholder:"('''')",addNote:"",noNotes:"",deleteNote:"",timeline:"",clearDay:"",clearConfirm:"",weaveButton:"",regenerateButton:"",cancelView:"",writingStory:"...",analyzing:"",failedError:"",backToFragments:"",reflectionLabel:"",historyTitle:"",noEntries:"",diaryCreated:"",draft:"",fragment:"",fragments:"",today:"",yesterday:"",edit:"",save:"",cancel:"",titleLabel:"",moodLabel:"",contentLabel:"",tagsLabel:" ()",startRecording:"",stopRecording:"",transcribing:"...",transcriptionFailed:"",fragmentTagPlaceholder:" ()",deleteConfirmTitle:"",deleteConfirmMessage:"",confirmDelete:"",filterAll:"",unsavedDraft:"",restore:"",discard:"",searchPlaceholder:"...",searchResults:"",noResultsFound:"",matchFoundIn:"",clearSearch:"",toneLabel:"",tones:{default:" (AI)",happy:" & ",melancholic:" & ",witty:" & ",formal:" & ",poetic:" & ",grateful:" & ",stoic:" &"},settings:"",aiConfig:"AI ",provider:"",gemini:"Google Gemini ()",openai:"OpenAI ",baseUrl:"Base URL",apiKey:"API Key",modelName:"",saveConfig:"",configSaved:"",exportData:"",importData:"",exportJsonDesc:"",exportMdDesc:"",importDesc:" JSON ",importSuccess:"",importError:"",importButton:"",exportButton:"",json:"JSON ()",markdown:"Markdown ()",close:""}},an=i=>iS[i],up=i=>{let e;const o=new Set,s=(g,v)=>{const S=typeof g=="function"?g(e):g;if(!Object.is(S,e)){const E=e;e=v??(typeof S!="object"||S===null)?S:Object.assign({},e,S),o.forEach(A=>A(e,E))}},a=()=>e,h={setState:s,getState:a,getInitialState:()=>y,subscribe:g=>(o.add(g),()=>o.delete(g))},y=e=i(s,a,h);return h},w_=(i=>i?up(i):up),x_=i=>i;function N_(i,e=x_){const o=Eo.useSyncExternalStore(i.subscribe,Eo.useCallback(()=>e(i.getState()),[i,e]),Eo.useCallback(()=>e(i.getInitialState()),[i,e]));return Eo.useDebugValue(o),o}const cp=i=>{const e=w_(i),o=s=>N_(e,s);return Object.assign(o,e),o},Lc=(i=>i?cp(i):cp);/*! Capacitor: https://capacitorjs.com/ - MIT License */var bo;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(bo||(bo={}));class oc extends Error{constructor(e,o,s){super(e),this.message=e,this.code=o,this.data=s}}const b_=i=>{var e,o;return i!=null&&i.androidBridge?"android":!((o=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},R_=i=>{const e=i.CapacitorCustomPlatform||null,o=i.Capacitor||{},s=o.Plugins=o.Plugins||{},a=()=>e!==null?e.name:b_(i),u=()=>a()!=="web",d=S=>{const E=g.get(S);return!!(E!=null&&E.platforms.has(a())||h(S))},h=S=>{var E;return(E=o.PluginHeaders)===null||E===void 0?void 0:E.find(A=>A.name===S)},y=S=>i.console.error(S),g=new Map,v=(S,E={})=>{const A=g.get(S);if(A)return console.warn(`Capacitor plugin "${S}" already registered. Cannot register plugins twice.`),A.proxy;const R=a(),w=h(S);let B;const Y=async()=>(!B&&R in E?B=typeof E[R]=="function"?B=await E[R]():B=E[R]:e!==null&&!B&&"web"in E&&(B=typeof E.web=="function"?B=await E.web():B=E.web),B),K=(z,F)=>{var ee,ce;if(w){const ae=w==null?void 0:w.methods.find(se=>F===se.name);if(ae)return ae.rtype==="promise"?se=>o.nativePromise(S,F.toString(),se):(se,Te)=>o.nativeCallback(S,F.toString(),se,Te);if(z)return(ee=z[F])===null||ee===void 0?void 0:ee.bind(z)}else{if(z)return(ce=z[F])===null||ce===void 0?void 0:ce.bind(z);throw new oc(`"${S}" plugin is not implemented on ${R}`,bo.Unimplemented)}},L=z=>{let F;const ee=(...ce)=>{const ae=Y().then(se=>{const Te=K(se,z);if(Te){const Ie=Te(...ce);return F=Ie==null?void 0:Ie.remove,Ie}else throw new oc(`"${S}.${z}()" is not implemented on ${R}`,bo.Unimplemented)});return z==="addListener"&&(ae.remove=async()=>F()),ae};return ee.toString=()=>`${z.toString()}() { [capacitor code] }`,Object.defineProperty(ee,"name",{value:z,writable:!1,configurable:!1}),ee},O=L("addListener"),Z=L("removeListener"),j=(z,F)=>{const ee=O({eventName:z},F),ce=async()=>{const se=await ee;Z({eventName:z,callbackId:se},F)},ae=new Promise(se=>ee.then(()=>se({remove:ce})));return ae.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ce()},ae},V=new Proxy({},{get(z,F){switch(F){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?j:O;case"removeListener":return Z;default:return L(F)}}});return s[S]=V,g.set(S,{name:S,proxy:V,platforms:new Set([...Object.keys(E),...w?[R]:[]])}),V};return o.convertFileSrc||(o.convertFileSrc=S=>S),o.getPlatform=a,o.handleError=y,o.isNativePlatform=u,o.isPluginAvailable=d,o.registerPlugin=v,o.Exception=oc,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o},M_=i=>i.Capacitor=R_(i),ca=M_(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Uc=ca.registerPlugin;class oS{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,o){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(o);const u=this.windowListeners[e];u&&!u.registered&&this.addWindowListener(u),s&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,o);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,o,s){const a=this.listeners[e];if(!a){if(s){let u=this.retainedEventArguments[e];u||(u=[]),u.push(o),this.retainedEventArguments[e]=u}return}a.forEach(u=>u(o))}hasListeners(e){var o;return!!(!((o=this.listeners[e])===null||o===void 0)&&o.length)}registerWindowListener(e,o){this.windowListeners[o]={registered:!1,windowEventName:e,pluginEventName:o,handler:s=>{this.notifyListeners(o,s)}}}unimplemented(e="not implemented"){return new ca.Exception(e,bo.Unimplemented)}unavailable(e="not available"){return new ca.Exception(e,bo.Unavailable)}async removeListener(e,o){const s=this.listeners[e];if(!s)return;const a=s.indexOf(o);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const o=this.retainedEventArguments[e];o&&(delete this.retainedEventArguments[e],o.forEach(s=>{this.notifyListeners(e,s)}))}}const fp=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),dp=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class D_ extends oS{async getCookies(){const e=document.cookie,o={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[a,u]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=dp(a).trim(),u=dp(u).trim(),o[a]=u}),o}async setCookie(e){try{const o=fp(e.key),s=fp(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,u=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${o}=${s||""}${a}; path=${u}; ${d};`}catch(o){return Promise.reject(o)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const o of e)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Uc("CapacitorCookies",{web:()=>new D_});const I_=async i=>new Promise((e,o)=>{const s=new FileReader;s.onload=()=>{const a=s.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},s.onerror=a=>o(a),s.readAsDataURL(i)}),L_=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(a=>a.toLocaleLowerCase()).reduce((a,u,d)=>(a[u]=i[e[d]],a),{})},U_=(i,e=!0)=>i?Object.entries(i).reduce((s,a)=>{const[u,d]=a;let h,y;return Array.isArray(d)?(y="",d.forEach(g=>{h=e?encodeURIComponent(g):g,y+=`${u}=${h}&`}),y.slice(0,-1)):(h=e?encodeURIComponent(d):d,y=`${u}=${h}`),`${s}&${y}`},"").substr(1):null,q_=(i,e={})=>{const o=Object.assign({method:i.method||"GET",headers:i.headers},e),a=L_(i.headers)["content-type"]||"";if(typeof i.data=="string")o.body=i.data;else if(a.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[d,h]of Object.entries(i.data||{}))u.set(d,h);o.body=u.toString()}else if(a.includes("multipart/form-data")||i.data instanceof FormData){const u=new FormData;if(i.data instanceof FormData)i.data.forEach((h,y)=>{u.append(y,h)});else for(const h of Object.keys(i.data))u.append(h,i.data[h]);o.body=u;const d=new Headers(o.headers);d.delete("content-type"),o.headers=d}else(a.includes("application/json")||typeof i.data=="object")&&(o.body=JSON.stringify(i.data));return o};class P_ extends oS{async request(e){const o=q_(e,e.webFetchExtra),s=U_(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,u=await fetch(a,o),d=u.headers.get("content-type")||"";let{responseType:h="text"}=u.ok?e:{};d.includes("application/json")&&(h="json");let y,g;switch(h){case"arraybuffer":case"blob":g=await u.blob(),y=await I_(g);break;case"json":y=await u.json();break;case"document":case"text":default:y=await u.text()}const v={};return u.headers.forEach((S,E)=>{v[E]=S}),{data:y,headers:v,status:u.status,url:u.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Uc("CapacitorHttp",{web:()=>new P_});const B_="modulepreload",z_=function(i,e){return new URL(i,e).href},mp={},G_=function(e,o,s){let a=Promise.resolve();if(o&&o.length>0){let d=function(v){return Promise.all(v.map(S=>Promise.resolve(S).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};const h=document.getElementsByTagName("link"),y=document.querySelector("meta[property=csp-nonce]"),g=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));a=d(o.map(v=>{if(v=z_(v,s),v in mp)return;mp[v]=!0;const S=v.endsWith(".css"),E=S?'[rel="stylesheet"]':"";if(!!s)for(let w=h.length-1;w>=0;w--){const B=h[w];if(B.href===v&&(!S||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${E}`))return;const R=document.createElement("link");if(R.rel=S?"stylesheet":B_,S||(R.as="script"),R.crossOrigin="",R.href=v,g&&R.setAttribute("nonce",g),document.head.appendChild(R),S)return new Promise((w,B)=>{R.addEventListener("load",w),R.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return a.then(d=>{for(const h of d||[])h.status==="rejected"&&u(h.reason);return e().catch(u)})};class H_{constructor(e){this.sqlite=e,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(e){return Promise.reject(e)}}async saveToStore(e){try{return await this.sqlite.saveToStore({database:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}async saveToLocalDisk(e){try{return await this.sqlite.saveToLocalDisk({database:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}async getFromLocalDiskToStore(e){const o=e??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async echo(e){try{const o=await this.sqlite.echo({value:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isSecretStored(){try{const e=await this.sqlite.isSecretStored();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async setEncryptionSecret(e){try{return await this.sqlite.setEncryptionSecret({passphrase:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}async changeEncryptionSecret(e,o){try{return await this.sqlite.changeEncryptionSecret({passphrase:e,oldpassphrase:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(e){return Promise.reject(e)}}async checkEncryptionSecret(e){try{const o=await this.sqlite.checkEncryptionSecret({passphrase:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async addUpgradeStatement(e,o){try{return e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:e,upgrade:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async createConnection(e,o,s,a,u){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.createConnection({database:e,encrypted:o,mode:s,version:a,readonly:u});const d=new hp(e,u,this.sqlite),h=u?`RO_${e}`:`RW_${e}`;return this._connectionDict.set(h,d),Promise.resolve(d)}catch(d){return Promise.reject(d)}}async closeConnection(e,o){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.closeConnection({database:e,readonly:o});const s=o?`RO_${e}`:`RW_${e}`;return this._connectionDict.delete(s),Promise.resolve()}catch(s){return Promise.reject(s)}}async isConnection(e,o){const s={};e.endsWith(".db")&&(e=e.slice(0,-3));const a=o?`RO_${e}`:`RW_${e}`;return s.result=this._connectionDict.has(a),Promise.resolve(s)}async retrieveConnection(e,o){e.endsWith(".db")&&(e=e.slice(0,-3));const s=o?`RO_${e}`:`RW_${e}`;if(this._connectionDict.has(s)){const a=this._connectionDict.get(s);return typeof a<"u"?Promise.resolve(a):Promise.reject(`Connection ${e} is undefined`)}else return Promise.reject(`Connection ${e} does not exist`)}async getNCDatabasePath(e,o){try{const s=await this.sqlite.getNCDatabasePath({path:e,database:o});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async createNCConnection(e,o){try{await this.sqlite.createNCConnection({databasePath:e,version:o});const s=new hp(e,!0,this.sqlite),a=`RO_${e})`;return this._connectionDict.set(a,s),Promise.resolve(s)}catch(s){return Promise.reject(s)}}async closeNCConnection(e){try{await this.sqlite.closeNCConnection({databasePath:e});const o=`RO_${e})`;return this._connectionDict.delete(o),Promise.resolve()}catch(o){return Promise.reject(o)}}async isNCConnection(e){const o={},s=`RO_${e})`;return o.result=this._connectionDict.has(s),Promise.resolve(o)}async retrieveNCConnection(e){if(this._connectionDict.has(e)){const o=`RO_${e})`,s=this._connectionDict.get(o);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${e} is undefined`)}else return Promise.reject(`Connection ${e} does not exist`)}async isNCDatabase(e){try{const o=await this.sqlite.isNCDatabase({databasePath:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const e=new Map;try{for(const o of this._connectionDict.keys()){const s=o.substring(3),a=o.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:s,readonly:a}),e.set(o,null)}for(const o of e.keys())this._connectionDict.delete(o);return Promise.resolve()}catch(o){return Promise.reject(o)}}async checkConnectionsConsistency(){try{const e=[...this._connectionDict.keys()],o=[],s=[];for(const u of e)o.push(u.substring(0,2)),s.push(u.substring(3));const a=await this.sqlite.checkConnectionsConsistency({dbNames:s,openModes:o});return a.result||(this._connectionDict=new Map),Promise.resolve(a)}catch(e){return this._connectionDict=new Map,Promise.reject(e)}}async importFromJson(e){try{const o=await this.sqlite.importFromJson({jsonstring:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isJsonValid(e){try{const o=await this.sqlite.isJsonValid({jsonstring:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async copyFromAssets(e){const o=e??!0;try{return await this.sqlite.copyFromAssets({overwrite:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async getFromHTTPRequest(e,o){const s=o??!0;try{return await this.sqlite.getFromHTTPRequest({url:e,overwrite:s}),Promise.resolve()}catch(a){return Promise.reject(a)}}async isDatabaseEncrypted(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const o=await this.sqlite.isDatabaseEncrypted({database:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isInConfigEncryption(){try{const e=await this.sqlite.isInConfigEncryption();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isInConfigBiometricAuth(){try{const e=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isDatabase(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const o=await this.sqlite.isDatabase({database:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async getDatabaseList(){try{const o=(await this.sqlite.getDatabaseList()).values;o.sort();const s={values:o};return Promise.resolve(s)}catch(e){return Promise.reject(e)}}async getMigratableDbList(e){const o=e||"default";try{const s=await this.sqlite.getMigratableDbList({folderPath:o});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async addSQLiteSuffix(e,o){const s=e||"default",a=o||[];try{const u=await this.sqlite.addSQLiteSuffix({folderPath:s,dbNameList:a});return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async deleteOldDatabases(e,o){const s=e||"default",a=o||[];try{const u=await this.sqlite.deleteOldDatabases({folderPath:s,dbNameList:a});return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async moveDatabasesAndAddSuffix(e,o){const s=e||"default",a=o||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:s,dbNameList:a})}}class hp{constructor(e,o,s){this.dbName=e,this.readonly=o,this.sqlite=s}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async beginTransaction(){try{const e=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async commitTransaction(){try{const e=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async rollbackTransaction(){try{const e=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTransactionActive(){try{const e=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async loadExtension(e){try{return await this.sqlite.loadExtension({database:this.dbName,path:e,readonly:this.readonly}),Promise.resolve()}catch(o){return Promise.reject(o)}}async enableLoadExtension(e){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:e,readonly:this.readonly}),Promise.resolve()}catch(o){return Promise.reject(o)}}async getUrl(){try{const e=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getVersion(){try{const e=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getTableList(){try{const e=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async execute(e,o=!0,s=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const a=await this.sqlite.execute({database:this.dbName,statements:e,transaction:o,readonly:!1,isSQL92:s});return Promise.resolve(a)}}catch(a){return Promise.reject(a)}}async query(e,o,s=!0){let a;try{return o&&o.length>0?a=await this.sqlite.query({database:this.dbName,statement:e,values:o,readonly:this.readonly,isSQL92:!0}):a=await this.sqlite.query({database:this.dbName,statement:e,values:[],readonly:this.readonly,isSQL92:s}),a=await this.reorderRows(a),Promise.resolve(a)}catch(u){return Promise.reject(u)}}async run(e,o,s=!0,a="no",u=!0){let d;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(o&&o.length>0?d=await this.sqlite.run({database:this.dbName,statement:e,values:o,transaction:s,readonly:!1,returnMode:a,isSQL92:!0}):d=await this.sqlite.run({database:this.dbName,statement:e,values:[],transaction:s,readonly:!1,returnMode:a,isSQL92:u}),d.changes=await this.reorderRows(d.changes),Promise.resolve(d))}catch(h){return Promise.reject(h)}}async executeSet(e,o=!0,s="no",a=!0){let u;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(u=await this.sqlite.executeSet({database:this.dbName,set:e,transaction:o,readonly:!1,returnMode:s,isSQL92:a}),u.changes=await this.reorderRows(u.changes),Promise.resolve(u))}catch(d){return Promise.reject(d)}}async isExists(){try{const e=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTable(e){try{const o=await this.sqlite.isTableExists({database:this.dbName,table:e,readonly:this.readonly});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isDBOpen(){try{const e=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const e=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(e)}}catch(e){return Promise.reject(e)}}async setSyncDate(e){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:e,readonly:!1}),Promise.resolve())}catch(o){return Promise.reject(o)}}async getSyncDate(){try{const e=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let o="";return e.syncDate>0&&(o=new Date(e.syncDate*1e3).toISOString()),Promise.resolve(o)}catch(e){return Promise.reject(e)}}async exportToJson(e,o=!1){try{const s=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:e,readonly:this.readonly,encrypted:o});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async executeTransaction(e,o=!0){let s=0,a=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),a=await this.sqlite.isTransactionActive({database:this.dbName}),!a)return Promise.reject("After Begin Transaction, no transaction active");try{for(const h of e){if(typeof h!="object"||!("statement"in h))throw new Error("Error a task.statement must be provided");if("values"in h&&h.values&&h.values.length>0){const y=h.statement.toUpperCase().includes("RETURNING")?"all":"no",g=await this.sqlite.run({database:this.dbName,statement:h.statement,values:h.values,transaction:!1,readonly:!1,returnMode:y,isSQL92:o});if(g.changes.changes<0)throw new Error("Error in transaction method run ");s+=g.changes.changes}else{const y=await this.sqlite.execute({database:this.dbName,statements:h.statement,transaction:!1,readonly:!1});if(y.changes.changes<0)throw new Error("Error in transaction method execute ");s+=y.changes.changes}}const u=await this.sqlite.commitTransaction({database:this.dbName});s+=u.changes.changes;const d={changes:{changes:s}};return Promise.resolve(d)}catch(u){const d=u.message?u.message:u;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(d)}}async reorderRows(e){const o=e;if(e!=null&&e.values&&typeof e.values[0]=="object"&&Object.keys(e.values[0]).includes("ios_columns")){const s=e.values[0].ios_columns,a=[];for(let u=1;u<e.values.length;u++){const d=e.values[u],h={};for(const y of s)h[y]=d[y];a.push(h)}o.values=a}return Promise.resolve(o)}}const V_=Uc("CapacitorSQLite",{web:()=>G_(()=>import("./web-C7bXAmDA.js"),[],import.meta.url).then(i=>new i.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),W=Symbol.for("drizzle:entityKind");function X(i,e){if(!i||typeof i!="object")return!1;if(i instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,W))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let o=Object.getPrototypeOf(i).constructor;if(o)for(;o;){if(W in o&&o[W]===e[W])return!0;o=Object.getPrototypeOf(o)}return!1}var Wg;Wg=W;class sS{write(e){console.log(e)}}x(sS,Wg,"ConsoleLogWriter");var jg;jg=W;class lS{constructor(e){x(this,"writer");this.writer=(e==null?void 0:e.writer)??new sS}logQuery(e,o){const s=o.map(u=>{try{return JSON.stringify(u)}catch{return String(u)}}),a=s.length?` -- params: [${s.join(", ")}]`:"";this.writer.write(`Query: ${e}${a}`)}}x(lS,jg,"DefaultLogger");var ey;ey=W;class aS{logQuery(){}}x(aS,ey,"NoopLogger");const si=Symbol.for("drizzle:Name"),la=Symbol.for("drizzle:Schema"),rc=Symbol.for("drizzle:Columns"),pp=Symbol.for("drizzle:ExtraConfigColumns"),sc=Symbol.for("drizzle:OriginalName"),lc=Symbol.for("drizzle:BaseName"),fa=Symbol.for("drizzle:IsAlias"),gp=Symbol.for("drizzle:ExtraConfigBuilder"),O_=Symbol.for("drizzle:IsDrizzleTable");var ty,ny,iy,oy,sy,ly,ay,ry,uy,cy;cy=W,uy=si,ry=sc,ay=la,ly=rc,sy=pp,oy=lc,iy=fa,ny=O_,ty=gp;class oe{constructor(e,o,s){x(this,uy);x(this,ry);x(this,ay);x(this,ly);x(this,sy);x(this,oy);x(this,iy,!1);x(this,ny,!0);x(this,ty);this[si]=this[sc]=e,this[la]=o,this[lc]=s}}x(oe,cy,"Table"),x(oe,"Symbol",{Name:si,Schema:la,OriginalName:sc,Columns:rc,ExtraConfigColumns:pp,BaseName:lc,IsAlias:fa,ExtraConfigBuilder:gp});function Co(i){return i[si]}function Us(i){return`${i[la]??"public"}.${i[si]}`}var fy;fy=W;class tt{constructor(e,o){x(this,"name");x(this,"keyAsName");x(this,"primary");x(this,"notNull");x(this,"default");x(this,"defaultFn");x(this,"onUpdateFn");x(this,"hasDefault");x(this,"isUnique");x(this,"uniqueName");x(this,"uniqueType");x(this,"dataType");x(this,"columnType");x(this,"enumValues");x(this,"generated");x(this,"generatedIdentity");x(this,"config");this.table=e,this.config=o,this.name=o.name,this.keyAsName=o.keyAsName,this.notNull=o.notNull,this.default=o.default,this.defaultFn=o.defaultFn,this.onUpdateFn=o.onUpdateFn,this.hasDefault=o.hasDefault,this.primary=o.primaryKey,this.isUnique=o.isUnique,this.uniqueName=o.uniqueName,this.uniqueType=o.uniqueType,this.dataType=o.dataType,this.columnType=o.columnType,this.generated=o.generated,this.generatedIdentity=o.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}x(tt,fy,"Column");var dy;dy=W;class rS{constructor(e,o,s){x(this,"config");x(this,"$default",this.$defaultFn);x(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:o,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}x(rS,dy,"ColumnBuilder");const yp=Symbol.for("drizzle:isPgEnum");function k_(i){return!!i&&typeof i=="function"&&yp in i&&i[yp]===!0}var my;my=W;class zt{constructor(e,o,s,a=!1,u=[]){this._={brand:"Subquery",sql:e,selectedFields:o,alias:s,isWith:a,usedTables:u}}}x(zt,my,"Subquery");var hy,py;class qc extends(py=zt,hy=W,py){}x(qc,hy,"WithSubquery");const F_={startActiveSpan(i,e){return e()}},dt=Symbol.for("drizzle:ViewBaseConfig");function uS(i){return i!=null&&typeof i.getSQL=="function"}function Q_(i){var o;const e={sql:"",params:[]};for(const s of i)e.sql+=s.sql,e.params.push(...s.params),(o=s.typings)!=null&&o.length&&(e.typings||(e.typings=[]),e.typings.push(...s.typings));return e}var gy;gy=W;class st{constructor(e){x(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new de([this])}}x(st,gy,"StringChunk");var yy;yy=W;const bi=class bi{constructor(e){x(this,"decoder",cS);x(this,"shouldInlineParams",!1);x(this,"usedTables",[]);this.queryChunks=e;for(const o of e)if(X(o,oe)){const s=o[oe.Symbol.Schema];this.usedTables.push(s===void 0?o[oe.Symbol.Name]:s+"."+o[oe.Symbol.Name])}}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return F_.startActiveSpan("drizzle.buildSQL",o=>{const s=this.buildQueryFromSourceParams(this.queryChunks,e);return o==null||o.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(e,o){const s=Object.assign({},o,{inlineParams:o.inlineParams||this.shouldInlineParams,paramStartIndex:o.paramStartIndex||{value:0}}),{casing:a,escapeName:u,escapeParam:d,prepareTyping:h,inlineParams:y,paramStartIndex:g}=s;return Q_(e.map(v=>{var S;if(X(v,st))return{sql:v.value.join(""),params:[]};if(X(v,da))return{sql:u(v.value),params:[]};if(v===void 0)return{sql:"",params:[]};if(Array.isArray(v)){const E=[new st("(")];for(const[A,R]of v.entries())E.push(R),A<v.length-1&&E.push(new st(", "));return E.push(new st(")")),this.buildQueryFromSourceParams(E,s)}if(X(v,bi))return this.buildQueryFromSourceParams(v.queryChunks,{...s,inlineParams:y||v.shouldInlineParams});if(X(v,oe)){const E=v[oe.Symbol.Schema],A=v[oe.Symbol.Name];return{sql:E===void 0||v[fa]?u(A):u(E)+"."+u(A),params:[]}}if(X(v,tt)){const E=a.getColumnCasing(v);if(o.invokeSource==="indexes")return{sql:u(E),params:[]};const A=v.table[oe.Symbol.Schema];return{sql:v.table[fa]||A===void 0?u(v.table[oe.Symbol.Name])+"."+u(E):u(A)+"."+u(v.table[oe.Symbol.Name])+"."+u(E),params:[]}}if(X(v,Li)){const E=v[dt].schema,A=v[dt].name;return{sql:E===void 0||v[dt].isAlias?u(A):u(E)+"."+u(A),params:[]}}if(X(v,Rn)){if(X(v.value,Mi))return{sql:d(g.value++,v),params:[v],typings:["none"]};const E=v.value===null?null:v.encoder.mapToDriverValue(v.value);if(X(E,bi))return this.buildQueryFromSourceParams([E],s);if(y)return{sql:this.mapInlineParam(E,s),params:[]};let A=["none"];return h&&(A=[h(v.encoder)]),{sql:d(g.value++,E),params:[E],typings:A}}return X(v,Mi)?{sql:d(g.value++,v),params:[v],typings:["none"]}:X(v,bi.Aliased)&&v.fieldAlias!==void 0?{sql:u(v.fieldAlias),params:[]}:X(v,zt)?v._.isWith?{sql:u(v._.alias),params:[]}:this.buildQueryFromSourceParams([new st("("),v._.sql,new st(") "),new da(v._.alias)],s):k_(v)?v.schema?{sql:u(v.schema)+"."+u(v.enumName),params:[]}:{sql:u(v.enumName),params:[]}:uS(v)?(S=v.shouldOmitSQLParens)!=null&&S.call(v)?this.buildQueryFromSourceParams([v.getSQL()],s):this.buildQueryFromSourceParams([new st("("),v.getSQL(),new st(")")],s):y?{sql:this.mapInlineParam(v,s),params:[]}:{sql:d(g.value++,v),params:[v],typings:["none"]}}))}mapInlineParam(e,{escapeString:o}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return o(e);if(typeof e=="object"){const s=e.toString();return o(s==="[object Object]"?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new bi.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};x(bi,yy,"SQL");let de=bi;var vy;vy=W;class da{constructor(e){x(this,"brand");this.value=e}getSQL(){return new de([this])}}x(da,vy,"Name");function J_(i){return typeof i=="object"&&i!==null&&"mapToDriverValue"in i&&typeof i.mapToDriverValue=="function"}const cS={mapFromDriverValue:i=>i},fS={mapToDriverValue:i=>i};({...cS,...fS});var Sy;Sy=W;class Rn{constructor(e,o=fS){x(this,"brand");this.value=e,this.encoder=o}getSQL(){return new de([this])}}x(Rn,Sy,"Param");function I(i,...e){const o=[];(e.length>0||i.length>0&&i[0]!=="")&&o.push(new st(i[0]));for(const[s,a]of e.entries())o.push(a,new st(i[s+1]));return new de(o)}(i=>{function e(){return new de([])}i.empty=e;function o(y){return new de(y)}i.fromList=o;function s(y){return new de([new st(y)])}i.raw=s;function a(y,g){const v=[];for(const[S,E]of y.entries())S>0&&g!==void 0&&v.push(g),v.push(E);return new de(v)}i.join=a;function u(y){return new da(y)}i.identifier=u;function d(y){return new Mi(y)}i.placeholder=d;function h(y,g){return new Rn(y,g)}i.param=h})(I||(I={}));(i=>{var o;o=W;const s=class s{constructor(u,d){x(this,"isSelectionField",!1);this.sql=u,this.fieldAlias=d}getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}};x(s,o,"SQL.Aliased");let e=s;i.Aliased=e})(de||(de={}));var Ty;Ty=W;class Mi{constructor(e){this.name=e}getSQL(){return new de([this])}}x(Mi,Ty,"Placeholder");function oa(i,e){return i.map(o=>{if(X(o,Mi)){if(!(o.name in e))throw new Error(`No value for placeholder "${o.name}" was provided`);return e[o.name]}if(X(o,Rn)&&X(o.value,Mi)){if(!(o.value.name in e))throw new Error(`No value for placeholder "${o.value.name}" was provided`);return o.encoder.mapToDriverValue(e[o.value.name])}return o})}const Y_=Symbol.for("drizzle:IsDrizzleView");var Ey,Cy,_y;_y=W,Cy=dt,Ey=Y_;class Li{constructor({name:e,schema:o,selectedFields:s,query:a}){x(this,Cy);x(this,Ey,!0);this[dt]={name:e,originalName:e,schema:o,selectedFields:s,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new de([this])}}x(Li,_y,"View");tt.prototype.getSQL=function(){return new de([this])};oe.prototype.getSQL=function(){return new de([this])};zt.prototype.getSQL=function(){return new de([this])};function vp(i,e,o){const s={},a=i.reduce((u,{path:d,field:h},y)=>{let g;X(h,tt)?g=h:X(h,de)?g=h.decoder:g=h.sql.decoder;let v=u;for(const[S,E]of d.entries())if(S<d.length-1)E in v||(v[E]={}),v=v[E];else{const A=e[y],R=v[E]=A===null?null:g.mapFromDriverValue(A);if(o&&X(h,tt)&&d.length===2){const w=d[0];w in s?typeof s[w]=="string"&&s[w]!==Co(h.table)&&(s[w]=!1):s[w]=R===null?Co(h.table):!1}}return u},{});if(o&&Object.keys(s).length>0)for(const[u,d]of Object.entries(s))typeof d=="string"&&!o[d]&&(a[u]=null);return a}function Di(i,e){return Object.entries(i).reduce((o,[s,a])=>{if(typeof s!="string")return o;const u=e?[...e,s]:[s];return X(a,tt)||X(a,de)||X(a,de.Aliased)?o.push({path:u,field:a}):X(a,oe)?o.push(...Di(a[oe.Symbol.Columns],u)):o.push(...Di(a,u)),o},[])}function Pc(i,e){const o=Object.keys(i),s=Object.keys(e);if(o.length!==s.length)return!1;for(const[a,u]of o.entries())if(u!==s[a])return!1;return!0}function dS(i,e){const o=Object.entries(e).filter(([,s])=>s!==void 0).map(([s,a])=>X(a,de)||X(a,tt)?[s,a]:[s,new Rn(a,i[oe.Symbol.Columns][s])]);if(o.length===0)throw new Error("No values to set");return Object.fromEntries(o)}function $_(i,e){for(const o of e)for(const s of Object.getOwnPropertyNames(o.prototype))s!=="constructor"&&Object.defineProperty(i.prototype,s,Object.getOwnPropertyDescriptor(o.prototype,s)||Object.create(null))}function K_(i){return i[oe.Symbol.Columns]}function uc(i){return X(i,zt)?i._.alias:X(i,Li)?i[dt].name:X(i,de)?void 0:i[oe.Symbol.IsAlias]?i[oe.Symbol.Name]:i[oe.Symbol.BaseName]}function Bs(i,e){return{name:typeof i=="string"&&i.length>0?i:"",config:typeof i=="object"?i:e}}const mS=typeof TextDecoder>"u"?null:new TextDecoder,Sp=Symbol.for("drizzle:PgInlineForeignKeys"),Tp=Symbol.for("drizzle:EnableRLS");var Ay,wy,xy,Ny,by,Ry;class cc extends(Ry=oe,by=W,Ny=Sp,xy=Tp,wy=oe.Symbol.ExtraConfigBuilder,Ay=oe.Symbol.ExtraConfigColumns,Ry){constructor(){super(...arguments);x(this,Ny,[]);x(this,xy,!1);x(this,wy);x(this,Ay,{})}}x(cc,by,"PgTable"),x(cc,"Symbol",Object.assign({},oe.Symbol,{InlineForeignKeys:Sp,EnableRLS:Tp}));var My;My=W;class hS{constructor(e,o){x(this,"columns");x(this,"name");this.columns=e,this.name=o}build(e){return new pS(e,this.columns,this.name)}}x(hS,My,"PgPrimaryKeyBuilder");var Dy;Dy=W;class pS{constructor(e,o,s){x(this,"columns");x(this,"name");this.table=e,this.columns=o,this.name=s}getName(){return this.name??`${this.table[cc.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}x(pS,Dy,"PgPrimaryKey");function xt(i,e){return J_(e)&&!uS(i)&&!X(i,Rn)&&!X(i,Mi)&&!X(i,tt)&&!X(i,oe)&&!X(i,Li)?new Rn(i,e):i}const gS=(i,e)=>I`${i} = ${xt(e,i)}`,X_=(i,e)=>I`${i} <> ${xt(e,i)}`;function fc(...i){const e=i.filter(o=>o!==void 0);if(e.length!==0)return e.length===1?new de(e):new de([new st("("),I.join(e,new st(" and ")),new st(")")])}function Z_(...i){const e=i.filter(o=>o!==void 0);if(e.length!==0)return e.length===1?new de(e):new de([new st("("),I.join(e,new st(" or ")),new st(")")])}function W_(i){return I`not ${i}`}const j_=(i,e)=>I`${i} > ${xt(e,i)}`,eA=(i,e)=>I`${i} >= ${xt(e,i)}`,tA=(i,e)=>I`${i} < ${xt(e,i)}`,nA=(i,e)=>I`${i} <= ${xt(e,i)}`;function iA(i,e){return Array.isArray(e)?e.length===0?I`false`:I`${i} in ${e.map(o=>xt(o,i))}`:I`${i} in ${xt(e,i)}`}function oA(i,e){return Array.isArray(e)?e.length===0?I`true`:I`${i} not in ${e.map(o=>xt(o,i))}`:I`${i} not in ${xt(e,i)}`}function sA(i){return I`${i} is null`}function lA(i){return I`${i} is not null`}function aA(i){return I`exists ${i}`}function rA(i){return I`not exists ${i}`}function uA(i,e,o){return I`${i} between ${xt(e,i)} and ${xt(o,i)}`}function cA(i,e,o){return I`${i} not between ${xt(e,i)} and ${xt(o,i)}`}function fA(i,e){return I`${i} like ${e}`}function dA(i,e){return I`${i} not like ${e}`}function mA(i,e){return I`${i} ilike ${e}`}function hA(i,e){return I`${i} not ilike ${e}`}function pA(i){return I`${i} asc`}function gA(i){return I`${i} desc`}var Iy;Iy=W;class Bc{constructor(e,o,s){x(this,"referencedTableName");x(this,"fieldName");this.sourceTable=e,this.referencedTable=o,this.relationName=s,this.referencedTableName=o[oe.Symbol.Name]}}x(Bc,Iy,"Relation");var Ly;Ly=W;class yS{constructor(e,o){this.table=e,this.config=o}}x(yS,Ly,"Relations");var Uy,qy;const Ta=class Ta extends(qy=Bc,Uy=W,qy){constructor(e,o,s,a){super(e,o,s==null?void 0:s.relationName),this.config=s,this.isNullable=a}withFieldName(e){const o=new Ta(this.sourceTable,this.referencedTable,this.config,this.isNullable);return o.fieldName=e,o}};x(Ta,Uy,"One");let Ii=Ta;var Py,By;const Ea=class Ea extends(By=Bc,Py=W,By){constructor(e,o,s){super(e,o,s==null?void 0:s.relationName),this.config=s}withFieldName(e){const o=new Ea(this.sourceTable,this.referencedTable,this.config);return o.fieldName=e,o}};x(Ea,Py,"Many");let ma=Ea;function yA(){return{and:fc,between:uA,eq:gS,exists:aA,gt:j_,gte:eA,ilike:mA,inArray:iA,isNull:sA,isNotNull:lA,like:fA,lt:tA,lte:nA,ne:X_,not:W_,notBetween:cA,notExists:rA,notLike:dA,notIlike:hA,notInArray:oA,or:Z_,sql:I}}function vA(){return{sql:I,asc:pA,desc:gA}}function SA(i,e){var u;Object.keys(i).length===1&&"default"in i&&!X(i.default,oe)&&(i=i.default);const o={},s={},a={};for(const[d,h]of Object.entries(i))if(X(h,oe)){const y=Us(h),g=s[y];o[y]=d,a[d]={tsName:d,dbName:h[oe.Symbol.Name],schema:h[oe.Symbol.Schema],columns:h[oe.Symbol.Columns],relations:(g==null?void 0:g.relations)??{},primaryKey:(g==null?void 0:g.primaryKey)??[]};for(const S of Object.values(h[oe.Symbol.Columns]))S.primary&&a[d].primaryKey.push(S);const v=(u=h[oe.Symbol.ExtraConfigBuilder])==null?void 0:u.call(h,h[oe.Symbol.ExtraConfigColumns]);if(v)for(const S of Object.values(v))X(S,hS)&&a[d].primaryKey.push(...S.columns)}else if(X(h,yS)){const y=Us(h.table),g=o[y],v=h.config(e(h.table));let S;for(const[E,A]of Object.entries(v))if(g){const R=a[g];R.relations[E]=A}else y in s||(s[y]={relations:{},primaryKey:S}),s[y].relations[E]=A}return{tables:a,tableNamesMap:o}}function TA(i){return function(o,s){return new Ii(i,o,s,(s==null?void 0:s.fields.reduce((a,u)=>a&&u.notNull,!0))??!1)}}function EA(i){return function(o,s){return new ma(i,o,s)}}function CA(i,e,o){if(X(o,Ii)&&o.config)return{fields:o.config.fields,references:o.config.references};const s=e[Us(o.referencedTable)];if(!s)throw new Error(`Table "${o.referencedTable[oe.Symbol.Name]}" not found in schema`);const a=i[s];if(!a)throw new Error(`Table "${s}" not found in schema`);const u=o.sourceTable,d=e[Us(u)];if(!d)throw new Error(`Table "${u[oe.Symbol.Name]}" not found in schema`);const h=[];for(const y of Object.values(a.relations))(o.relationName&&o!==y&&y.relationName===o.relationName||!o.relationName&&y.referencedTable===o.sourceTable)&&h.push(y);if(h.length>1)throw o.relationName?new Error(`There are multiple relations with name "${o.relationName}" in table "${s}"`):new Error(`There are multiple relations between "${s}" and "${o.sourceTable[oe.Symbol.Name]}". Please specify relation name`);if(h[0]&&X(h[0],Ii)&&h[0].config)return{fields:h[0].config.references,references:h[0].config.fields};throw new Error(`There is not enough information to infer relation "${d}.${o.fieldName}"`)}function _A(i){return{one:TA(i),many:EA(i)}}function dc(i,e,o,s,a=u=>u){const u={};for(const[d,h]of s.entries())if(h.isJson){const y=e.relations[h.tsKey],g=o[d],v=typeof g=="string"?JSON.parse(g):g;u[h.tsKey]=X(y,Ii)?v&&dc(i,i[h.relationTableTsKey],v,h.selection,a):v.map(S=>dc(i,i[h.relationTableTsKey],S,h.selection,a))}else{const y=a(o[d]),g=h.field;let v;X(g,tt)?v=g:X(g,de)?v=g.decoder:v=g.sql.decoder,u[h.tsKey]=y===null?null:v.mapFromDriverValue(y)}return u}var zy;zy=W;class qs{constructor(e){this.table=e}get(e,o){return o==="table"?this.table:e[o]}}x(qs,zy,"ColumnAliasProxyHandler");var Gy;Gy=W;class Aa{constructor(e,o){this.alias=e,this.replaceOriginalName=o}get(e,o){if(o===oe.Symbol.IsAlias)return!0;if(o===oe.Symbol.Name)return this.alias;if(this.replaceOriginalName&&o===oe.Symbol.OriginalName)return this.alias;if(o===dt)return{...e[dt],name:this.alias,isAlias:!0};if(o===oe.Symbol.Columns){const a=e[oe.Symbol.Columns];if(!a)return a;const u={};return Object.keys(a).map(d=>{u[d]=new Proxy(a[d],new qs(new Proxy(e,this)))}),u}const s=e[o];return X(s,tt)?new Proxy(s,new qs(new Proxy(e,this))):s}}x(Aa,Gy,"TableAliasProxyHandler");function ac(i,e){return new Proxy(i,new Aa(e,!1))}function Nn(i,e){return new Proxy(i,new qs(new Proxy(i.table,new Aa(e,!1))))}function vS(i,e){return new de.Aliased(ha(i.sql,e),i.fieldAlias)}function ha(i,e){return I.join(i.queryChunks.map(o=>X(o,tt)?Nn(o,e):X(o,de)?ha(o,e):X(o,de.Aliased)?vS(o,e):o))}var Hy;Hy=W;const Ca=class Ca{constructor(e){x(this,"config");this.config={...e}}get(e,o){if(o==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(o===dt)return{...e[dt],selectedFields:new Proxy(e[dt].selectedFields,this)};if(typeof o=="symbol")return e[o];const a=(X(e,zt)?e._.selectedFields:X(e,Li)?e[dt].selectedFields:e)[o];if(X(a,de.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!a.isSelectionField)return a.sql;const u=a.clone();return u.isSelectionField=!0,u}if(X(a,de)){if(this.config.sqlBehavior==="sql")return a;throw new Error(`You tried to reference "${o}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return X(a,tt)?this.config.alias?new Proxy(a,new qs(new Proxy(a.table,new Aa(this.config.alias,this.config.replaceOriginalName??!1)))):a:typeof a!="object"||a===null?a:new Proxy(a,new Ca(this.config))}};x(Ca,Hy,"SelectionProxyHandler");let gt=Ca;var Vy,Oy;Oy=W,Vy=Symbol.toStringTag;class li{constructor(){x(this,Vy,"QueryPromise")}catch(e){return this.then(void 0,e)}finally(e){return this.then(o=>(e==null||e(),o),o=>{throw e==null||e(),o})}then(e,o){return this.execute().then(e,o)}}x(li,Oy,"QueryPromise");var ky;ky=W;class SS{constructor(e,o){x(this,"reference");x(this,"_onUpdate");x(this,"_onDelete");this.reference=()=>{const{name:s,columns:a,foreignColumns:u}=e();return{name:s,columns:a,foreignTable:u[0].table,foreignColumns:u}},o&&(this._onUpdate=o.onUpdate,this._onDelete=o.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new TS(e,this)}}x(SS,ky,"SQLiteForeignKeyBuilder");var Fy;Fy=W;class TS{constructor(e,o){x(this,"reference");x(this,"onUpdate");x(this,"onDelete");this.table=e,this.reference=o.reference,this.onUpdate=o._onUpdate,this.onDelete=o._onDelete}getName(){const{name:e,columns:o,foreignColumns:s}=this.reference(),a=o.map(h=>h.name),u=s.map(h=>h.name),d=[this.table[si],...a,s[0].table[si],...u];return e??`${d.join("_")}_fk`}}x(TS,Fy,"SQLiteForeignKey");function AA(i,e){return`${i[si]}_${e.join("_")}_unique`}var Qy,Jy;class Xt extends(Jy=rS,Qy=W,Jy){constructor(){super(...arguments);x(this,"foreignKeyConfigs",[])}references(o,s={}){return this.foreignKeyConfigs.push({ref:o,actions:s}),this}unique(o){return this.config.isUnique=!0,this.config.uniqueName=o,this}generatedAlwaysAs(o,s){return this.config.generated={as:o,type:"always",mode:(s==null?void 0:s.mode)??"virtual"},this}buildForeignKeys(o,s){return this.foreignKeyConfigs.map(({ref:a,actions:u})=>((d,h)=>{const y=new SS(()=>{const g=d();return{columns:[o],foreignColumns:[g]}});return h.onUpdate&&y.onUpdate(h.onUpdate),h.onDelete&&y.onDelete(h.onDelete),y.build(s)})(a,u))}}x(Xt,Qy,"SQLiteColumnBuilder");var Yy,$y;class vt extends($y=tt,Yy=W,$y){constructor(e,o){o.uniqueName||(o.uniqueName=AA(e,[o.name])),super(e,o),this.table=e}}x(vt,Yy,"SQLiteColumn");var Ky,Xy;class ES extends(Xy=Xt,Ky=W,Xy){constructor(e){super(e,"bigint","SQLiteBigInt")}build(e){return new CS(e,this.config)}}x(ES,Ky,"SQLiteBigIntBuilder");var Zy,Wy;class CS extends(Wy=vt,Zy=W,Wy){getSQLType(){return"blob"}mapFromDriverValue(e){if(typeof Buffer<"u"&&Buffer.from){const o=Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?Buffer.from(e):e.buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e);return BigInt(o.toString("utf8"))}return BigInt(mS.decode(e))}mapToDriverValue(e){return Buffer.from(e.toString())}}x(CS,Zy,"SQLiteBigInt");var jy,e0;class _S extends(e0=Xt,jy=W,e0){constructor(e){super(e,"json","SQLiteBlobJson")}build(e){return new AS(e,this.config)}}x(_S,jy,"SQLiteBlobJsonBuilder");var t0,n0;class AS extends(n0=vt,t0=W,n0){getSQLType(){return"blob"}mapFromDriverValue(e){if(typeof Buffer<"u"&&Buffer.from){const o=Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?Buffer.from(e):e.buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e);return JSON.parse(o.toString("utf8"))}return JSON.parse(mS.decode(e))}mapToDriverValue(e){return Buffer.from(JSON.stringify(e))}}x(AS,t0,"SQLiteBlobJson");var i0,o0;class wS extends(o0=Xt,i0=W,o0){constructor(e){super(e,"buffer","SQLiteBlobBuffer")}build(e){return new xS(e,this.config)}}x(wS,i0,"SQLiteBlobBufferBuilder");var s0,l0;class xS extends(l0=vt,s0=W,l0){mapFromDriverValue(e){return Buffer.isBuffer(e)?e:Buffer.from(e)}getSQLType(){return"blob"}}x(xS,s0,"SQLiteBlobBuffer");function wA(i,e){const{name:o,config:s}=Bs(i,e);return(s==null?void 0:s.mode)==="json"?new _S(o):(s==null?void 0:s.mode)==="bigint"?new ES(o):new wS(o)}var a0,r0;class NS extends(r0=Xt,a0=W,r0){constructor(e,o,s){super(e,"custom","SQLiteCustomColumn"),this.config.fieldConfig=o,this.config.customTypeParams=s}build(e){return new bS(e,this.config)}}x(NS,a0,"SQLiteCustomColumnBuilder");var u0,c0;class bS extends(c0=vt,u0=W,c0){constructor(o,s){super(o,s);x(this,"sqlName");x(this,"mapTo");x(this,"mapFrom");this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(o){return typeof this.mapFrom=="function"?this.mapFrom(o):o}mapToDriverValue(o){return typeof this.mapTo=="function"?this.mapTo(o):o}}x(bS,u0,"SQLiteCustomColumn");function xA(i){return(e,o)=>{const{name:s,config:a}=Bs(e,o);return new NS(s,a,i)}}var f0,d0;class wa extends(d0=Xt,f0=W,d0){constructor(e,o,s){super(e,o,s),this.config.autoIncrement=!1}primaryKey(e){return e!=null&&e.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}x(wa,f0,"SQLiteBaseIntegerBuilder");var m0,h0;class xa extends(h0=vt,m0=W,h0){constructor(){super(...arguments);x(this,"autoIncrement",this.config.autoIncrement)}getSQLType(){return"integer"}}x(xa,m0,"SQLiteBaseInteger");var p0,g0;class RS extends(g0=wa,p0=W,g0){constructor(e){super(e,"number","SQLiteInteger")}build(e){return new MS(e,this.config)}}x(RS,p0,"SQLiteIntegerBuilder");var y0,v0;class MS extends(v0=xa,y0=W,v0){}x(MS,y0,"SQLiteInteger");var S0,T0;class DS extends(T0=wa,S0=W,T0){constructor(e,o){super(e,"date","SQLiteTimestamp"),this.config.mode=o}defaultNow(){return this.default(I`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(e){return new IS(e,this.config)}}x(DS,S0,"SQLiteTimestampBuilder");var E0,C0;class IS extends(C0=xa,E0=W,C0){constructor(){super(...arguments);x(this,"mode",this.config.mode)}mapFromDriverValue(o){return this.config.mode==="timestamp"?new Date(o*1e3):new Date(o)}mapToDriverValue(o){const s=o.getTime();return this.config.mode==="timestamp"?Math.floor(s/1e3):s}}x(IS,E0,"SQLiteTimestamp");var _0,A0;class LS extends(A0=wa,_0=W,A0){constructor(e,o){super(e,"boolean","SQLiteBoolean"),this.config.mode=o}build(e){return new US(e,this.config)}}x(LS,_0,"SQLiteBooleanBuilder");var w0,x0;class US extends(x0=xa,w0=W,x0){constructor(){super(...arguments);x(this,"mode",this.config.mode)}mapFromDriverValue(o){return Number(o)===1}mapToDriverValue(o){return o?1:0}}x(US,w0,"SQLiteBoolean");function zc(i,e){const{name:o,config:s}=Bs(i,e);return(s==null?void 0:s.mode)==="timestamp"||(s==null?void 0:s.mode)==="timestamp_ms"?new DS(o,s.mode):(s==null?void 0:s.mode)==="boolean"?new LS(o,s.mode):new RS(o)}var N0,b0;class qS extends(b0=Xt,N0=W,b0){constructor(e){super(e,"string","SQLiteNumeric")}build(e){return new PS(e,this.config)}}x(qS,N0,"SQLiteNumericBuilder");var R0,M0;class PS extends(M0=vt,R0=W,M0){mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return"numeric"}}x(PS,R0,"SQLiteNumeric");var D0,I0;class BS extends(I0=Xt,D0=W,I0){constructor(e){super(e,"number","SQLiteNumericNumber")}build(e){return new zS(e,this.config)}}x(BS,D0,"SQLiteNumericNumberBuilder");var L0,U0;class zS extends(U0=vt,L0=W,U0){constructor(){super(...arguments);x(this,"mapToDriverValue",String)}mapFromDriverValue(o){return typeof o=="number"?o:Number(o)}getSQLType(){return"numeric"}}x(zS,L0,"SQLiteNumericNumber");var q0,P0;class GS extends(P0=Xt,q0=W,P0){constructor(e){super(e,"bigint","SQLiteNumericBigInt")}build(e){return new HS(e,this.config)}}x(GS,q0,"SQLiteNumericBigIntBuilder");var B0,z0;class HS extends(z0=vt,B0=W,z0){constructor(){super(...arguments);x(this,"mapFromDriverValue",BigInt);x(this,"mapToDriverValue",String)}getSQLType(){return"numeric"}}x(HS,B0,"SQLiteNumericBigInt");function NA(i,e){const{name:o,config:s}=Bs(i,e),a=s==null?void 0:s.mode;return a==="number"?new BS(o):a==="bigint"?new GS(o):new qS(o)}var G0,H0;class VS extends(H0=Xt,G0=W,H0){constructor(e){super(e,"number","SQLiteReal")}build(e){return new OS(e,this.config)}}x(VS,G0,"SQLiteRealBuilder");var V0,O0;class OS extends(O0=vt,V0=W,O0){getSQLType(){return"real"}}x(OS,V0,"SQLiteReal");function bA(i){return new VS(i??"")}var k0,F0;class kS extends(F0=Xt,k0=W,F0){constructor(e,o){super(e,"string","SQLiteText"),this.config.enumValues=o.enum,this.config.length=o.length}build(e){return new FS(e,this.config)}}x(kS,k0,"SQLiteTextBuilder");var Q0,J0;class FS extends(J0=vt,Q0=W,J0){constructor(o,s){super(o,s);x(this,"enumValues",this.config.enumValues);x(this,"length",this.config.length)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}x(FS,Q0,"SQLiteText");var Y0,$0;class QS extends($0=Xt,Y0=W,$0){constructor(e){super(e,"json","SQLiteTextJson")}build(e){return new JS(e,this.config)}}x(QS,Y0,"SQLiteTextJsonBuilder");var K0,X0;class JS extends(X0=vt,K0=W,X0){getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}}x(JS,K0,"SQLiteTextJson");function en(i,e={}){const{name:o,config:s}=Bs(i,e);return s.mode==="json"?new QS(o):new kS(o,s)}function RA(){return{blob:wA,customType:xA,integer:zc,numeric:NA,real:bA,text:en}}const mc=Symbol.for("drizzle:SQLiteInlineForeignKeys");var Z0,W0,j0,ev,tv;class Bt extends(tv=oe,ev=W,j0=oe.Symbol.Columns,W0=mc,Z0=oe.Symbol.ExtraConfigBuilder,tv){constructor(){super(...arguments);x(this,j0);x(this,W0,[]);x(this,Z0)}}x(Bt,ev,"SQLiteTable"),x(Bt,"Symbol",Object.assign({},oe.Symbol,{InlineForeignKeys:mc}));function MA(i,e,o,s,a=i){const u=new Bt(i,s,a),d=typeof e=="function"?e(RA()):e,h=Object.fromEntries(Object.entries(d).map(([g,v])=>{const S=v;S.setName(g);const E=S.build(u);return u[mc].push(...S.buildForeignKeys(E,u)),[g,E]})),y=Object.assign(u,h);return y[oe.Symbol.Columns]=h,y[oe.Symbol.ExtraConfigColumns]=h,y}const YS=(i,e,o)=>MA(i,e);function Ri(i){return X(i,Bt)?[`${i[oe.Symbol.BaseName]}`]:X(i,zt)?i._.usedTables??[]:X(i,de)?i.usedTables??[]:[]}var nv,iv;class hc extends(iv=li,nv=W,iv){constructor(o,s,a,u){super();x(this,"config");x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o));this.table=o,this.session=s,this.dialect=a,this.config={table:o,withList:u}}where(o){return this.config.where=o,this}orderBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.table[oe.Symbol.Columns],new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),a=Array.isArray(s)?s:[s];this.config.orderBy=a}else{const s=o;this.config.orderBy=s}return this}limit(o){return this.config.limit=o,this}returning(o=this.table[Bt.Symbol.Columns]){return this.config.returning=Di(o),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(o=!0){return this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"delete",tables:Ri(this.config.table)})}prepare(){return this._prepare(!1)}async execute(o){return this._prepare().execute(o)}$dynamic(){return this}}x(hc,nv,"SQLiteDelete");function DA(i){return(i.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(o=>o.toLowerCase()).join("_")}function IA(i){return(i.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((o,s,a)=>{const u=a===0?s.toLowerCase():`${s[0].toUpperCase()}${s.slice(1)}`;return o+u},"")}function LA(i){return i}var ov;ov=W;class $S{constructor(e){x(this,"cache",{});x(this,"cachedTables",{});x(this,"convert");this.convert=e==="snake_case"?DA:e==="camelCase"?IA:LA}getColumnCasing(e){if(!e.keyAsName)return e.name;const o=e.table[oe.Symbol.Schema]??"public",s=e.table[oe.Symbol.OriginalName],a=`${o}.${s}.${e.name}`;return this.cache[a]||this.cacheTable(e.table),this.cache[a]}cacheTable(e){const o=e[oe.Symbol.Schema]??"public",s=e[oe.Symbol.OriginalName],a=`${o}.${s}`;if(!this.cachedTables[a]){for(const u of Object.values(e[oe.Symbol.Columns])){const d=`${a}.${u.name}`;this.cache[d]=this.convert(u.name)}this.cachedTables[a]=!0}}clearCache(){this.cache={},this.cachedTables={}}}x($S,ov,"CasingCache");var sv,lv;class Na extends(lv=Error,sv=W,lv){constructor({message:e,cause:o}){super(e),this.name="DrizzleError",this.cause=o}}x(Na,sv,"DrizzleError");class oi extends Error{constructor(e,o,s){super(`Failed query: ${e}
params: ${o}`),this.query=e,this.params=o,this.cause=s,Error.captureStackTrace(this,oi),s&&(this.cause=s)}}var av,rv;class KS extends(rv=Na,av=W,rv){constructor(){super({message:"Rollback"})}}x(KS,av,"TransactionRollbackError");var uv,cv;class ba extends(cv=Li,uv=W,cv){}x(ba,uv,"SQLiteViewBase");var fv;fv=W;class Ps{constructor(e){x(this,"casing");this.casing=new $S(e==null?void 0:e.casing)}escapeName(e){return`"${e}"`}escapeParam(e){return"?"}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!(e!=null&&e.length))return;const o=[I`with `];for(const[s,a]of e.entries())o.push(I`${I.identifier(a._.alias)} as (${a._.sql})`),s<e.length-1&&o.push(I`, `);return o.push(I` `),I.join(o)}buildDeleteQuery({table:e,where:o,returning:s,withList:a,limit:u,orderBy:d}){const h=this.buildWithCTE(a),y=s?I` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,g=o?I` where ${o}`:void 0,v=this.buildOrderBy(d),S=this.buildLimit(u);return I`${h}delete from ${e}${g}${y}${v}${S}`}buildUpdateSet(e,o){const s=e[oe.Symbol.Columns],a=Object.keys(s).filter(d=>{var h;return o[d]!==void 0||((h=s[d])==null?void 0:h.onUpdateFn)!==void 0}),u=a.length;return I.join(a.flatMap((d,h)=>{const y=s[d],g=o[d]??I.param(y.onUpdateFn(),y),v=I`${I.identifier(this.casing.getColumnCasing(y))} = ${g}`;return h<u-1?[v,I.raw(", ")]:[v]}))}buildUpdateQuery({table:e,set:o,where:s,returning:a,withList:u,joins:d,from:h,limit:y,orderBy:g}){const v=this.buildWithCTE(u),S=this.buildUpdateSet(e,o),E=h&&I.join([I.raw(" from "),this.buildFromTable(h)]),A=this.buildJoins(d),R=a?I` returning ${this.buildSelection(a,{isSingleTable:!0})}`:void 0,w=s?I` where ${s}`:void 0,B=this.buildOrderBy(g),Y=this.buildLimit(y);return I`${v}update ${e} set ${S}${E}${A}${w}${R}${B}${Y}`}buildSelection(e,{isSingleTable:o=!1}={}){const s=e.length,a=e.flatMap(({field:u},d)=>{const h=[];if(X(u,de.Aliased)&&u.isSelectionField)h.push(I.identifier(u.fieldAlias));else if(X(u,de.Aliased)||X(u,de)){const y=X(u,de.Aliased)?u.sql:u;o?h.push(new de(y.queryChunks.map(g=>X(g,tt)?I.identifier(this.casing.getColumnCasing(g)):g))):h.push(y),X(u,de.Aliased)&&h.push(I` as ${I.identifier(u.fieldAlias)}`)}else if(X(u,tt)){const y=u.table[oe.Symbol.Name];u.columnType==="SQLiteNumericBigInt"?o?h.push(I`cast(${I.identifier(this.casing.getColumnCasing(u))} as text)`):h.push(I`cast(${I.identifier(y)}.${I.identifier(this.casing.getColumnCasing(u))} as text)`):o?h.push(I.identifier(this.casing.getColumnCasing(u))):h.push(I`${I.identifier(y)}.${I.identifier(this.casing.getColumnCasing(u))}`)}return d<s-1&&h.push(I`, `),h});return I.join(a)}buildJoins(e){if(!e||e.length===0)return;const o=[];if(e)for(const[s,a]of e.entries()){s===0&&o.push(I` `);const u=a.table,d=a.on?I` on ${a.on}`:void 0;if(X(u,Bt)){const h=u[Bt.Symbol.Name],y=u[Bt.Symbol.Schema],g=u[Bt.Symbol.OriginalName],v=h===g?void 0:a.alias;o.push(I`${I.raw(a.joinType)} join ${y?I`${I.identifier(y)}.`:void 0}${I.identifier(g)}${v&&I` ${I.identifier(v)}`}${d}`)}else o.push(I`${I.raw(a.joinType)} join ${u}${d}`);s<e.length-1&&o.push(I` `)}return I.join(o)}buildLimit(e){return typeof e=="object"||typeof e=="number"&&e>=0?I` limit ${e}`:void 0}buildOrderBy(e){const o=[];if(e)for(const[s,a]of e.entries())o.push(a),s<e.length-1&&o.push(I`, `);return o.length>0?I` order by ${I.join(o)}`:void 0}buildFromTable(e){return X(e,oe)&&e[oe.Symbol.IsAlias]?I`${I`${I.identifier(e[oe.Symbol.Schema]??"")}.`.if(e[oe.Symbol.Schema])}${I.identifier(e[oe.Symbol.OriginalName])} ${I.identifier(e[oe.Symbol.Name])}`:e}buildSelectQuery({withList:e,fields:o,fieldsFlat:s,where:a,having:u,table:d,joins:h,orderBy:y,groupBy:g,limit:v,offset:S,distinct:E,setOperators:A}){const R=s??Di(o);for(const se of R)if(X(se.field,tt)&&Co(se.field.table)!==(X(d,zt)?d._.alias:X(d,ba)?d[dt].name:X(d,de)?void 0:Co(d))&&!(Te=>h==null?void 0:h.some(({alias:Ie})=>Ie===(Te[oe.Symbol.IsAlias]?Co(Te):Te[oe.Symbol.BaseName])))(se.field.table)){const Te=Co(se.field.table);throw new Error(`Your "${se.path.join("->")}" field references a column "${Te}"."${se.field.name}", but the table "${Te}" is not part of the query! Did you forget to join it?`)}const w=!h||h.length===0,B=this.buildWithCTE(e),Y=E?I` distinct`:void 0,K=this.buildSelection(R,{isSingleTable:w}),L=this.buildFromTable(d),O=this.buildJoins(h),Z=a?I` where ${a}`:void 0,j=u?I` having ${u}`:void 0,V=[];if(g)for(const[se,Te]of g.entries())V.push(Te),se<g.length-1&&V.push(I`, `);const z=V.length>0?I` group by ${I.join(V)}`:void 0,F=this.buildOrderBy(y),ee=this.buildLimit(v),ce=S?I` offset ${S}`:void 0,ae=I`${B}select${Y} ${K} from ${L}${O}${Z}${z}${j}${F}${ee}${ce}`;return A.length>0?this.buildSetOperations(ae,A):ae}buildSetOperations(e,o){const[s,...a]=o;if(!s)throw new Error("Cannot pass undefined values to any set operator");return a.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:s}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:s}),a)}buildSetOperationQuery({leftSelect:e,setOperator:{type:o,isAll:s,rightSelect:a,limit:u,orderBy:d,offset:h}}){const y=I`${e.getSQL()} `,g=I`${a.getSQL()}`;let v;if(d&&d.length>0){const R=[];for(const w of d)if(X(w,vt))R.push(I.identifier(w.name));else if(X(w,de)){for(let B=0;B<w.queryChunks.length;B++){const Y=w.queryChunks[B];X(Y,vt)&&(w.queryChunks[B]=I.identifier(this.casing.getColumnCasing(Y)))}R.push(I`${w}`)}else R.push(I`${w}`);v=I` order by ${I.join(R,I`, `)}`}const S=typeof u=="object"||typeof u=="number"&&u>=0?I` limit ${u}`:void 0,E=I.raw(`${o} ${s?"all ":""}`),A=h?I` offset ${h}`:void 0;return I`${y}${E}${g}${v}${S}${A}`}buildInsertQuery({table:e,values:o,onConflict:s,returning:a,withList:u,select:d}){const h=[],y=e[oe.Symbol.Columns],g=Object.entries(y).filter(([w,B])=>!B.shouldDisableInsert()),v=g.map(([,w])=>I.identifier(this.casing.getColumnCasing(w)));if(d){const w=o;X(w,de)?h.push(w):h.push(w.getSQL())}else{const w=o;h.push(I.raw("values "));for(const[B,Y]of w.entries()){const K=[];for(const[L,O]of g){const Z=Y[L];if(Z===void 0||X(Z,Rn)&&Z.value===void 0){let j;if(O.default!==null&&O.default!==void 0)j=X(O.default,de)?O.default:I.param(O.default,O);else if(O.defaultFn!==void 0){const V=O.defaultFn();j=X(V,de)?V:I.param(V,O)}else if(!O.default&&O.onUpdateFn!==void 0){const V=O.onUpdateFn();j=X(V,de)?V:I.param(V,O)}else j=I`null`;K.push(j)}else K.push(Z)}h.push(K),B<w.length-1&&h.push(I`, `)}}const S=this.buildWithCTE(u),E=I.join(h),A=a?I` returning ${this.buildSelection(a,{isSingleTable:!0})}`:void 0,R=s!=null&&s.length?I.join(s):void 0;return I`${S}insert into ${e} ${v} ${E}${R}${A}`}sqlToQuery(e,o){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:o})}buildRelationalQuery({fullSchema:e,schema:o,tableNamesMap:s,table:a,tableConfig:u,queryConfig:d,tableAlias:h,nestedQueryRelation:y,joinOn:g}){let v=[],S,E,A=[],R;const w=[];if(d===!0)v=Object.entries(u.columns).map(([K,L])=>({dbKey:L.name,tsKey:K,field:Nn(L,h),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{const Y=Object.fromEntries(Object.entries(u.columns).map(([V,z])=>[V,Nn(z,h)]));if(d.where){const V=typeof d.where=="function"?d.where(Y,yA()):d.where;R=V&&ha(V,h)}const K=[];let L=[];if(d.columns){let V=!1;for(const[z,F]of Object.entries(d.columns))F!==void 0&&z in u.columns&&(!V&&F===!0&&(V=!0),L.push(z));L.length>0&&(L=V?L.filter(z=>{var F;return((F=d.columns)==null?void 0:F[z])===!0}):Object.keys(u.columns).filter(z=>!L.includes(z)))}else L=Object.keys(u.columns);for(const V of L){const z=u.columns[V];K.push({tsKey:V,value:z})}let O=[];d.with&&(O=Object.entries(d.with).filter(V=>!!V[1]).map(([V,z])=>({tsKey:V,queryConfig:z,relation:u.relations[V]})));let Z;if(d.extras){Z=typeof d.extras=="function"?d.extras(Y,{sql:I}):d.extras;for(const[V,z]of Object.entries(Z))K.push({tsKey:V,value:vS(z,h)})}for(const{tsKey:V,value:z}of K)v.push({dbKey:X(z,de.Aliased)?z.fieldAlias:u.columns[V].name,tsKey:V,field:X(z,tt)?Nn(z,h):z,relationTableTsKey:void 0,isJson:!1,selection:[]});let j=typeof d.orderBy=="function"?d.orderBy(Y,vA()):d.orderBy??[];Array.isArray(j)||(j=[j]),A=j.map(V=>X(V,tt)?Nn(V,h):ha(V,h)),S=d.limit,E=d.offset;for(const{tsKey:V,queryConfig:z,relation:F}of O){const ee=CA(o,s,F),ce=Us(F.referencedTable),ae=s[ce],se=`${h}_${V}`,Te=fc(...ee.fields.map((te,he)=>gS(Nn(ee.references[he],se),Nn(te,h)))),Ie=this.buildRelationalQuery({fullSchema:e,schema:o,tableNamesMap:s,table:e[ae],tableConfig:o[ae],queryConfig:X(F,Ii)?z===!0?{limit:1}:{...z,limit:1}:z,tableAlias:se,joinOn:Te,nestedQueryRelation:F}),H=I`(${Ie.sql})`.as(V);v.push({dbKey:V,tsKey:V,field:H,relationTableTsKey:ae,isJson:!0,selection:Ie.selection})}}if(v.length===0)throw new Na({message:`No fields selected for table "${u.tsName}" ("${h}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});let B;if(R=fc(g,R),y){let Y=I`json_array(${I.join(v.map(({field:O})=>X(O,vt)?I.identifier(this.casing.getColumnCasing(O)):X(O,de.Aliased)?O.sql:O),I`, `)})`;X(y,ma)&&(Y=I`coalesce(json_group_array(${Y}), json_array())`);const K=[{dbKey:"data",tsKey:"data",field:Y.as("data"),isJson:!0,relationTableTsKey:u.tsName,selection:v}];S!==void 0||E!==void 0||A.length>0?(B=this.buildSelectQuery({table:ac(a,h),fields:{},fieldsFlat:[{path:[],field:I.raw("*")}],where:R,limit:S,offset:E,orderBy:A,setOperators:[]}),R=void 0,S=void 0,E=void 0,A=void 0):B=ac(a,h),B=this.buildSelectQuery({table:X(B,Bt)?B:new zt(B,{},h),fields:{},fieldsFlat:K.map(({field:O})=>({path:[],field:X(O,tt)?Nn(O,h):O})),joins:w,where:R,limit:S,offset:E,orderBy:A,setOperators:[]})}else B=this.buildSelectQuery({table:ac(a,h),fields:{},fieldsFlat:v.map(({field:Y})=>({path:[],field:X(Y,tt)?Nn(Y,h):Y})),joins:w,where:R,limit:S,offset:E,orderBy:A,setOperators:[]});return{tableTsKey:u.tsName,sql:B,selection:v}}}x(Ps,fv,"SQLiteDialect");var dv,mv;class XS extends(mv=Ps,dv=W,mv){migrate(e,o,s){const a=s===void 0||typeof s=="string"?"__drizzle_migrations":s.migrationsTable??"__drizzle_migrations",u=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(a)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;o.run(u);const h=o.values(I`SELECT id, hash, created_at FROM ${I.identifier(a)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;o.run(I`BEGIN`);try{for(const y of e)if(!h||Number(h[2])<y.folderMillis){for(const g of y.sql)o.run(I.raw(g));o.run(I`INSERT INTO ${I.identifier(a)} ("hash", "created_at") VALUES(${y.hash}, ${y.folderMillis})`)}o.run(I`COMMIT`)}catch(y){throw o.run(I`ROLLBACK`),y}}}x(XS,dv,"SQLiteSyncDialect");var hv,pv;class ZS extends(pv=Ps,hv=W,pv){async migrate(e,o,s){const a=s===void 0||typeof s=="string"?"__drizzle_migrations":s.migrationsTable??"__drizzle_migrations",u=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(a)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await o.run(u);const h=(await o.values(I`SELECT id, hash, created_at FROM ${I.identifier(a)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await o.transaction(async y=>{for(const g of e)if(!h||Number(h[2])<g.folderMillis){for(const v of g.sql)await y.run(I.raw(v));await y.run(I`INSERT INTO ${I.identifier(a)} ("hash", "created_at") VALUES(${g.hash}, ${g.folderMillis})`)}})}}x(ZS,hv,"SQLiteAsyncDialect");var gv;gv=W;class WS{getSelectedFields(){return this._.selectedFields}}x(WS,gv,"TypedQueryBuilder");var yv;yv=W;class bn{constructor(e){x(this,"fields");x(this,"session");x(this,"dialect");x(this,"withList");x(this,"distinct");this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,this.withList=e.withList,this.distinct=e.distinct}from(e){const o=!!this.fields;let s;return this.fields?s=this.fields:X(e,zt)?s=Object.fromEntries(Object.keys(e._.selectedFields).map(a=>[a,e[a]])):X(e,ba)?s=e[dt].selectedFields:X(e,de)?s={}:s=K_(e),new Gc({table:e,fields:s,isPartialSelect:o,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}x(bn,yv,"SQLiteSelectBuilder");var vv,Sv;class jS extends(Sv=WS,vv=W,Sv){constructor({table:o,fields:s,isPartialSelect:a,session:u,dialect:d,withList:h,distinct:y}){super();x(this,"_");x(this,"config");x(this,"joinsNotNullableMap");x(this,"tableName");x(this,"isPartialSelect");x(this,"session");x(this,"dialect");x(this,"cacheConfig");x(this,"usedTables",new Set);x(this,"leftJoin",this.createJoin("left"));x(this,"rightJoin",this.createJoin("right"));x(this,"innerJoin",this.createJoin("inner"));x(this,"fullJoin",this.createJoin("full"));x(this,"crossJoin",this.createJoin("cross"));x(this,"union",this.createSetOperator("union",!1));x(this,"unionAll",this.createSetOperator("union",!0));x(this,"intersect",this.createSetOperator("intersect",!1));x(this,"except",this.createSetOperator("except",!1));this.config={withList:h,table:o,fields:{...s},distinct:y,setOperators:[]},this.isPartialSelect=a,this.session=u,this.dialect=d,this._={selectedFields:s,config:this.config},this.tableName=uc(o),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(const g of Ri(o))this.usedTables.add(g)}getUsedTables(){return[...this.usedTables]}createJoin(o){return(s,a)=>{var h;const u=this.tableName,d=uc(s);for(const y of Ri(s))this.usedTables.add(y);if(typeof d=="string"&&((h=this.config.joins)!=null&&h.some(y=>y.alias===d)))throw new Error(`Alias "${d}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof u=="string"&&(this.config.fields={[u]:this.config.fields}),typeof d=="string"&&!X(s,de))){const y=X(s,zt)?s._.selectedFields:X(s,Li)?s[dt].selectedFields:s[oe.Symbol.Columns];this.config.fields[d]=y}if(typeof a=="function"&&(a=a(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:a,table:s,joinType:o,alias:d}),typeof d=="string")switch(o){case"left":{this.joinsNotNullableMap[d]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([y])=>[y,!1])),this.joinsNotNullableMap[d]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[d]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([y])=>[y,!1])),this.joinsNotNullableMap[d]=!1;break}}return this}}createSetOperator(o,s){return a=>{const u=typeof a=="function"?a(UA()):a;if(!Pc(this.getSelectedFields(),u.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:o,isAll:s,rightSelect:u}),this}}addSetOperators(o){return this.config.setOperators.push(...o),this}where(o){return typeof o=="function"&&(o=o(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=o,this}having(o){return typeof o=="function"&&(o=o(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=o,this}groupBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(s)?s:[s]}else this.config.groupBy=o;return this}orderBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),a=Array.isArray(s)?s:[s];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a}else{const s=o;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=s:this.config.orderBy=s}return this}limit(o){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=o:this.config.limit=o,this}offset(o){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=o:this.config.offset=o,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}as(o){const s=[];if(s.push(...Ri(this.config.table)),this.config.joins)for(const a of this.config.joins)s.push(...Ri(a.table));return new Proxy(new zt(this.getSQL(),this.config.fields,o,!1,[...new Set(s)]),new gt({alias:o,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new gt({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}x(jS,vv,"SQLiteSelectQueryBuilder");var Tv,Ev;class Gc extends(Ev=jS,Tv=W,Ev){constructor(){super(...arguments);x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o))}_prepare(o=!0){if(!this.session)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");const s=Di(this.config.fields),a=this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),s,"all",!0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return a.joinsNotNullableMap=this.joinsNotNullableMap,a}$withCache(o){return this.cacheConfig=o===void 0?{config:{},enable:!0,autoInvalidate:!0}:o===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...o},this}prepare(){return this._prepare(!1)}async execute(){return this.all()}}x(Gc,Tv,"SQLiteSelect");$_(Gc,[li]);function Ra(i,e){return(o,s,...a)=>{const u=[s,...a].map(d=>({type:i,isAll:e,rightSelect:d}));for(const d of u)if(!Pc(o.getSelectedFields(),d.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return o.addSetOperators(u)}}const UA=()=>({union:qA,unionAll:PA,intersect:BA,except:zA}),qA=Ra("union",!1),PA=Ra("union",!0),BA=Ra("intersect",!1),zA=Ra("except",!1);var Cv;Cv=W;class Hc{constructor(e){x(this,"dialect");x(this,"dialectConfig");x(this,"$with",(e,o)=>{const s=this;return{as:u=>(typeof u=="function"&&(u=u(s)),new Proxy(new qc(u.getSQL(),o??("getSelectedFields"in u?u.getSelectedFields()??{}:{}),e,!0),new gt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}});this.dialect=X(e,Ps)?e:void 0,this.dialectConfig=X(e,Ps)?void 0:e}with(...e){const o=this;function s(u){return new bn({fields:u??void 0,session:void 0,dialect:o.getDialect(),withList:e})}function a(u){return new bn({fields:u??void 0,session:void 0,dialect:o.getDialect(),withList:e,distinct:!0})}return{select:s,selectDistinct:a}}select(e){return new bn({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new bn({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new XS(this.dialectConfig)),this.dialect}}x(Hc,Cv,"SQLiteQueryBuilder");var _v;_v=W;class pc{constructor(e,o,s,a){this.table=e,this.session=o,this.dialect=s,this.withList=a}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");const o=e.map(s=>{const a={},u=this.table[oe.Symbol.Columns];for(const d of Object.keys(s)){const h=s[d];a[d]=X(h,de)?h:new Rn(h,u[d])}return a});return new gc(this.table,o,this.session,this.dialect,this.withList)}select(e){const o=typeof e=="function"?e(new Hc):e;if(!X(o,de)&&!Pc(this.table[rc],o._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new gc(this.table,o,this.session,this.dialect,this.withList,!0)}}x(pc,_v,"SQLiteInsertBuilder");var Av,wv;class gc extends(wv=li,Av=W,wv){constructor(o,s,a,u,d,h){super();x(this,"config");x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o));this.session=a,this.dialect=u,this.config={table:o,values:s,withList:d,select:h}}returning(o=this.config.table[Bt.Symbol.Columns]){return this.config.returning=Di(o),this}onConflictDoNothing(o={}){if(this.config.onConflict||(this.config.onConflict=[]),o.target===void 0)this.config.onConflict.push(I` on conflict do nothing`);else{const s=Array.isArray(o.target)?I`${o.target}`:I`${[o.target]}`,a=o.where?I` where ${o.where}`:I``;this.config.onConflict.push(I` on conflict ${s} do nothing${a}`)}return this}onConflictDoUpdate(o){if(o.where&&(o.targetWhere||o.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');this.config.onConflict||(this.config.onConflict=[]);const s=o.where?I` where ${o.where}`:void 0,a=o.targetWhere?I` where ${o.targetWhere}`:void 0,u=o.setWhere?I` where ${o.setWhere}`:void 0,d=Array.isArray(o.target)?I`${o.target}`:I`${[o.target]}`,h=this.dialect.buildUpdateSet(this.config.table,dS(this.config.table,o.set));return this.config.onConflict.push(I` on conflict ${d}${a} do update set ${h}${s}${u}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(o=!0){return this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:Ri(this.config.table)})}prepare(){return this._prepare(!1)}async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}x(gc,Av,"SQLiteInsert");var xv;xv=W;class yc{constructor(e,o,s,a){this.table=e,this.session=o,this.dialect=s,this.withList=a}set(e){return new eT(this.table,dS(this.table,e),this.session,this.dialect,this.withList)}}x(yc,xv,"SQLiteUpdateBuilder");var Nv,bv;class eT extends(bv=li,Nv=W,bv){constructor(o,s,a,u,d){super();x(this,"config");x(this,"leftJoin",this.createJoin("left"));x(this,"rightJoin",this.createJoin("right"));x(this,"innerJoin",this.createJoin("inner"));x(this,"fullJoin",this.createJoin("full"));x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o));this.session=a,this.dialect=u,this.config={set:s,table:o,withList:d,joins:[]}}from(o){return this.config.from=o,this}createJoin(o){return(s,a)=>{const u=uc(s);if(typeof u=="string"&&this.config.joins.some(d=>d.alias===u))throw new Error(`Alias "${u}" is already used in this query`);if(typeof a=="function"){const d=this.config.from?X(s,Bt)?s[oe.Symbol.Columns]:X(s,zt)?s._.selectedFields:X(s,ba)?s[dt].selectedFields:void 0:void 0;a=a(new Proxy(this.config.table[oe.Symbol.Columns],new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),d&&new Proxy(d,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:a,table:s,joinType:o,alias:u}),this}}where(o){return this.config.where=o,this}orderBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.table[oe.Symbol.Columns],new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),a=Array.isArray(s)?s:[s];this.config.orderBy=a}else{const s=o;this.config.orderBy=s}return this}limit(o){return this.config.limit=o,this}returning(o=this.config.table[Bt.Symbol.Columns]){return this.config.returning=Di(o),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(o=!0){return this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:Ri(this.config.table)})}prepare(){return this._prepare(!1)}async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}x(eT,Nv,"SQLiteUpdate");var Rv,Mv,Dv;const Ls=class Ls extends(Dv=de,Mv=W,Rv=Symbol.toStringTag,Dv){constructor(o){super(Ls.buildEmbeddedCount(o.source,o.filters).queryChunks);x(this,"sql");x(this,Rv,"SQLiteCountBuilderAsync");x(this,"session");this.params=o,this.session=o.session,this.sql=Ls.buildCount(o.source,o.filters)}static buildEmbeddedCount(o,s){return I`(select count(*) from ${o}${I.raw(" where ").if(s)}${s})`}static buildCount(o,s){return I`select count(*) from ${o}${I.raw(" where ").if(s)}${s}`}then(o,s){return Promise.resolve(this.session.count(this.sql)).then(o,s)}catch(o){return this.then(void 0,o)}finally(o){return this.then(s=>(o==null||o(),s),s=>{throw o==null||o(),s})}};x(Ls,Mv,"SQLiteCountBuilderAsync");let vc=Ls;var Iv;Iv=W;class tT{constructor(e,o,s,a,u,d,h,y){this.mode=e,this.fullSchema=o,this.schema=s,this.tableNamesMap=a,this.table=u,this.tableConfig=d,this.dialect=h,this.session=y}findMany(e){return this.mode==="sync"?new Sc(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many"):new pa(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return this.mode==="sync"?new Sc(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first"):new pa(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}x(tT,Iv,"SQLiteAsyncRelationalQueryBuilder");var Lv,Uv;class pa extends(Uv=li,Lv=W,Uv){constructor(o,s,a,u,d,h,y,g,v){super();x(this,"mode");this.fullSchema=o,this.schema=s,this.tableNamesMap=a,this.table=u,this.tableConfig=d,this.dialect=h,this.session=y,this.config=g,this.mode=v}getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(o=!1){const{query:s,builtQuery:a}=this._toSQL();return this.session[o?"prepareOneTimeQuery":"prepareQuery"](a,void 0,this.mode==="first"?"get":"all",!0,(u,d)=>{const h=u.map(y=>dc(this.schema,this.tableConfig,y,s.selection,d));return this.mode==="first"?h[0]:h})}prepare(){return this._prepare(!1)}_toSQL(){const o=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),s=this.dialect.sqlToQuery(o.sql);return{query:o,builtQuery:s}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return this.mode==="first"?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}x(pa,Lv,"SQLiteAsyncRelationalQuery");var qv,Pv;class Sc extends(Pv=pa,qv=W,Pv){sync(){return this.executeRaw()}}x(Sc,qv,"SQLiteSyncRelationalQuery");var Bv,zv;class Ms extends(zv=li,Bv=W,zv){constructor(o,s,a,u,d){super();x(this,"config");this.execute=o,this.getSQL=s,this.dialect=u,this.mapBatchResult=d,this.config={action:a}}getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(o,s){return s?this.mapBatchResult(o):o}_prepare(){return this}isResponseInArrayMode(){return!1}}x(Ms,Bv,"SQLiteRaw");var Gv;Gv=W;class Vc{constructor(e,o,s,a){x(this,"query");x(this,"$with",(e,o)=>{const s=this;return{as:u=>(typeof u=="function"&&(u=u(new Hc(s.dialect))),new Proxy(new qc(u.getSQL(),o??("getSelectedFields"in u?u.getSelectedFields()??{}:{}),e,!0),new gt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}});x(this,"$cache");this.resultKind=e,this.dialect=o,this.session=s,this._=a?{schema:a.schema,fullSchema:a.fullSchema,tableNamesMap:a.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};const u=this.query;if(this._.schema)for(const[d,h]of Object.entries(this._.schema))u[d]=new tT(e,a.fullSchema,this._.schema,this._.tableNamesMap,a.fullSchema[d],h,o,s);this.$cache={invalidate:async d=>{}}}$count(e,o){return new vc({source:e,filters:o,session:this.session})}with(...e){const o=this;function s(y){return new bn({fields:y??void 0,session:o.session,dialect:o.dialect,withList:e})}function a(y){return new bn({fields:y??void 0,session:o.session,dialect:o.dialect,withList:e,distinct:!0})}function u(y){return new yc(y,o.session,o.dialect,e)}function d(y){return new pc(y,o.session,o.dialect,e)}function h(y){return new hc(y,o.session,o.dialect,e)}return{select:s,selectDistinct:a,update:u,insert:d,delete:h}}select(e){return new bn({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new bn({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(e){return new yc(e,this.session,this.dialect)}insert(e){return new pc(e,this.session,this.dialect)}delete(e){return new hc(e,this.session,this.dialect)}run(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.run(o),()=>o,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(o)}all(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.all(o),()=>o,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(o)}get(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.get(o),()=>o,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(o)}values(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.values(o),()=>o,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(o)}transaction(e,o){return this.session.transaction(e,o)}}x(Vc,Gv,"BaseSQLiteDatabase");var Hv;Hv=W;class nT{}x(nT,Hv,"Cache");var Vv,Ov;class Oc extends(Ov=nT,Vv=W,Ov){strategy(){return"all"}async get(e){}async put(e,o,s,a){}async onMutate(e){}}x(Oc,Vv,"NoopCache");async function Ep(i,e){const o=`${i}-${JSON.stringify(e)}`,a=new TextEncoder().encode(o),u=await crypto.subtle.digest("SHA-256",a);return[...new Uint8Array(u)].map(y=>y.toString(16).padStart(2,"0")).join("")}var kv,Fv;class iT extends(Fv=li,kv=W,Fv){constructor(e){super(),this.resultCb=e}async execute(){return this.resultCb()}sync(){return this.resultCb()}}x(iT,kv,"ExecuteResultSync");var Qv;Qv=W;class oT{constructor(e,o,s,a,u,d){x(this,"joinsNotNullableMap");var h;this.mode=e,this.executeMethod=o,this.query=s,this.cache=a,this.queryMetadata=u,this.cacheConfig=d,a&&a.strategy()==="all"&&d===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),(h=this.cacheConfig)!=null&&h.enable||(this.cacheConfig=void 0)}async queryWithCache(e,o,s){if(this.cache===void 0||X(this.cache,Oc)||this.queryMetadata===void 0)try{return await s()}catch(a){throw new oi(e,o,a)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await s()}catch(a){throw new oi(e,o,a)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{const[a]=await Promise.all([s(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return a}catch(a){throw new oi(e,o,a)}if(!this.cacheConfig)try{return await s()}catch(a){throw new oi(e,o,a)}if(this.queryMetadata.type==="select"){const a=await this.cache.get(this.cacheConfig.tag??await Ep(e,o),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(a===void 0){let u;try{u=await s()}catch(d){throw new oi(e,o,d)}return await this.cache.put(this.cacheConfig.tag??await Ep(e,o),u,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),u}return a}try{return await s()}catch(a){throw new oi(e,o,a)}}getQuery(){return this.query}mapRunResult(e,o){return e}mapAllResult(e,o){throw new Error("Not implemented")}mapGetResult(e,o){throw new Error("Not implemented")}execute(e){return this.mode==="async"?this[this.executeMethod](e):new iT(()=>this[this.executeMethod](e))}mapResult(e,o){switch(this.executeMethod){case"run":return this.mapRunResult(e,o);case"all":return this.mapAllResult(e,o);case"get":return this.mapGetResult(e,o)}}}x(oT,Qv,"PreparedQuery");var Jv;Jv=W;class sT{constructor(e){this.dialect=e}prepareOneTimeQuery(e,o,s,a,u,d,h){return this.prepareQuery(e,o,s,a,u,d,h)}run(e){const o=this.dialect.sqlToQuery(e);try{return this.prepareOneTimeQuery(o,void 0,"run",!1).run()}catch(s){throw new Na({cause:s,message:`Failed to run the query '${o.sql}'`})}}extractRawRunValueFromBatchResult(e){return e}all(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).all()}extractRawAllValueFromBatchResult(e){throw new Error("Not implemented")}get(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).get()}extractRawGetValueFromBatchResult(e){throw new Error("Not implemented")}values(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).values()}async count(e){return(await this.values(e))[0][0]}extractRawValuesValueFromBatchResult(e){throw new Error("Not implemented")}}x(sT,Jv,"SQLiteSession");var Yv,$v;class lT extends($v=Vc,Yv=W,$v){constructor(e,o,s,a,u=0){super(e,o,s,a),this.schema=a,this.nestedIndex=u}rollback(){throw new KS}}x(lT,Yv,"SQLiteTransaction");var Kv,Xv;class aT extends(Xv=sT,Kv=W,Xv){constructor(o,s,a,u,d={}){super(s);x(this,"logger");x(this,"cache");this.client=o,this.schema=a,this.batchCLient=u,this.logger=d.logger??new aS,this.cache=d.cache??new Oc}prepareQuery(o,s,a,u,d,h,y){return new rT(this.client,o,this.logger,this.cache,h,y,s,a,u,d)}async batch(o){const s=[],a=[];for(const d of o){const h=d._prepare(),y=h.getQuery();s.push(h),a.push({sql:y.sql,params:y.params,method:y.method})}return(await this.batchCLient(a)).map((d,h)=>s[h].mapResult(d,!0))}async transaction(o,s){const a=new Tc("async",this.dialect,this,this.schema);await this.run(I.raw(`begin${s!=null&&s.behavior?" "+s.behavior:""}`));try{const u=await o(a);return await this.run(I`commit`),u}catch(u){throw await this.run(I`rollback`),u}}extractRawAllValueFromBatchResult(o){return o.rows}extractRawGetValueFromBatchResult(o){return o.rows[0]}extractRawValuesValueFromBatchResult(o){return o.rows}}x(aT,Kv,"SQLiteRemoteSession");var Zv,Wv;const _a=class _a extends(Wv=lT,Zv=W,Wv){async transaction(e){const o=`sp${this.nestedIndex}`,s=new _a("async",this.dialect,this.session,this.schema,this.nestedIndex+1);await this.session.run(I.raw(`savepoint ${o}`));try{const a=await e(s);return await this.session.run(I.raw(`release savepoint ${o}`)),a}catch(a){throw await this.session.run(I.raw(`rollback to savepoint ${o}`)),a}}};x(_a,Zv,"SQLiteProxyTransaction");let Tc=_a;var jv,eS;class rT extends(eS=oT,jv=W,eS){constructor(o,s,a,u,d,h,y,g,v,S){super("async",g,s,u,d,h);x(this,"method");this.client=o,this.logger=a,this.fields=y,this._isResponseInArrayMode=v,this.customResultMapper=S,this.customResultMapper=S,this.method=g}getQuery(){return{...this.query,method:this.method}}async run(o){const s=oa(this.query.params,o??{});return this.logger.logQuery(this.query.sql,s),await this.queryWithCache(this.query.sql,s,async()=>await this.client(this.query.sql,s,"run"))}mapAllResult(o,s){return s&&(o=o.rows),!this.fields&&!this.customResultMapper?o:this.customResultMapper?this.customResultMapper(o):o.map(a=>vp(this.fields,a,this.joinsNotNullableMap))}async all(o){const{query:s,logger:a,client:u}=this,d=oa(s.params,o??{});a.logQuery(s.sql,d);const{rows:h}=await this.queryWithCache(s.sql,d,async()=>await u(s.sql,d,"all"));return this.mapAllResult(h)}async get(o){const{query:s,logger:a,client:u}=this,d=oa(s.params,o??{});a.logQuery(s.sql,d);const h=await this.queryWithCache(s.sql,d,async()=>await u(s.sql,d,"get"));return this.mapGetResult(h.rows)}mapGetResult(o,s){s&&(o=o.rows);const a=o;if(!this.fields&&!this.customResultMapper)return a;if(a)return this.customResultMapper?this.customResultMapper([o]):vp(this.fields,a,this.joinsNotNullableMap)}async values(o){const s=oa(this.query.params,o??{});return this.logger.logQuery(this.query.sql,s),(await this.queryWithCache(this.query.sql,s,async()=>await this.client(this.query.sql,s,"values"))).rows}isResponseInArrayMode(){return this._isResponseInArrayMode}}x(rT,jv,"SQLiteProxyPreparedQuery");var tS,nS;class uT extends(nS=Vc,tS=W,nS){async batch(e){return this.session.batch(e)}}x(uT,tS,"SqliteRemoteDatabase");function Cp(i,e,o){const s=new ZS({casing:o==null?void 0:o.casing});let a,u,d,h={};e&&(typeof e=="function"?(d=e,h={}):(d=void 0,h=e),h.logger===!0?a=new lS:h.logger!==!1&&(a=h.logger,u=h.cache));let y;if(h.schema){const S=SA(h.schema,_A);y={fullSchema:h.schema,schema:S.tables,tableNamesMap:S.tableNamesMap}}const g=new aT(i,s,y,d,{logger:a,cache:u}),v=new uT("async",s,g,y);return v.$cache=u,v.$cache&&(v.$cache.invalidate=u==null?void 0:u.onMutate),v}const GA=YS("fragments",{id:en("id").primaryKey(),date:en("date").notNull(),content:en("content").notNull(),timestamp:zc("timestamp").notNull(),tags:en("tags")}),HA=YS("diary_entries",{date:en("date").primaryKey(),title:en("title").notNull(),content:en("content").notNull(),mood:en("mood").notNull(),reflection:en("reflection").notNull(),tags:en("tags").notNull(),createdAt:zc("created_at").$defaultFn(()=>Date.now())}),_p=Object.freeze(Object.defineProperty({__proto__:null,diaryEntries:HA,fragments:GA},Symbol.toStringTag,{value:"Module"})),VA=`
CREATE TABLE IF NOT EXISTS fragments (
  id TEXT PRIMARY KEY,
  date TEXT NOT NULL,
  content TEXT NOT NULL,
  timestamp INTEGER NOT NULL,
  tags TEXT
);

CREATE TABLE IF NOT EXISTS diary_entries (
  date TEXT PRIMARY KEY,
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  mood TEXT NOT NULL,
  reflection TEXT NOT NULL,
  tags TEXT NOT NULL,
  created_at INTEGER
);

CREATE INDEX IF NOT EXISTS idx_fragments_date ON fragments(date);
CREATE INDEX IF NOT EXISTS idx_fragments_timestamp ON fragments(timestamp);
`;let sa=null,bs=null;const Ap=()=>{const i=globalThis.crypto;if(i&&typeof i.randomUUID=="function")return i.randomUUID();const e=new Uint8Array(16),o=i&&typeof i.getRandomValues=="function"?i.getRandomValues.bind(i):null;if(o)o(e);else for(let a=0;a<e.length;a++)e[a]=Math.random()*256|0;e[6]=e[6]&15|64,e[8]=e[8]&63|128;const s=Array.from(e,a=>a.toString(16).padStart(2,"0"));return`${s.slice(0,4).join("")}-${s.slice(4,6).join("")}-${s.slice(6,8).join("")}-${s.slice(8,10).join("")}-${s.slice(10).join("")}`},cT=async()=>{if(sa)return sa;if(bs)return bs;bs=(async()=>{if(ca.isNativePlatform()){console.log("Initializing Native SQLite Database...");const u=await new H_(V_).createConnection("nimo_db",!1,"no-encryption",1,!1);await u.open();const d=VA.split(";").map(y=>y.trim()).filter(Boolean);for(const y of d)await u.run(y,[]);const h=Cp(async(y,g,v)=>{try{return v==="run"?(await u.run(y,g),{rows:[]}):{rows:(await u.query(y,g)).values||[]}}catch(S){throw console.error("Native DB Error:",S),S}},{schema:_p});return h.backendType="Native SQLite",h}console.log("Initializing Web SQLite Database (Worker with OPFS)...");const i=new Worker(new URL(""+new URL("worker-2Amkwll4.js",import.meta.url).href,import.meta.url),{type:"module"}),e=await new Promise((a,u)=>{const d=Ap(),h=setTimeout(()=>{u(new Error("Worker initialization timeout"))},3e4),y=g=>{g.data.id===d&&g.data.type==="init_result"&&(clearTimeout(h),i.removeEventListener("message",y),g.data.success?a(g.data.backend||"Unknown"):u(new Error(g.data.error)))};i.addEventListener("message",y),i.postMessage({id:d,type:"init"})});console.log("Worker initialized with backend:",e);const o=async(a,u,d)=>{const h=Ap();return new Promise((y,g)=>{const v=setTimeout(()=>{g(new Error("Query timeout"))},3e4),S=E=>{E.data.id===h&&(clearTimeout(v),i.removeEventListener("message",S),E.data.success?y(E.data.data):g(new Error(E.data.error)))};i.addEventListener("message",S),i.postMessage({id:h,sql:a,params:u,method:d})})},s=Cp(async(a,u,d)=>{try{const h=await o(a,u,d);return console.log("[drizzleProxy] Worker returned:",h),Array.isArray(h)&&h.length>0&&console.log("[drizzleProxy] First row:",h[0]),{rows:Array.isArray(h)?h:h?[h]:[]}}catch(h){return console.error("Error from worker:",h),{rows:[]}}},{schema:_p});return s.execute=async({sql:a,args:u})=>{const d=await o(a,u||[],"all");return{rows:Array.isArray(d)?d:[]}},s.backendType=e,s})();try{return sa=await bs,sa}catch(i){throw bs=null,i}};let Ao=null;const OA=async()=>(Ao||(Ao=await cT()),Ao),rn=async()=>(Ao||(Ao=await cT()),Ao),kA=async i=>{const o=await(await rn()).execute({sql:"SELECT id, date, content, timestamp, tags FROM fragments WHERE date = ? ORDER BY timestamp",args:[i]});return console.log("[getFragmentsByDate] Raw results from DB:",o),o.rows&&o.rows.length>0&&console.log("[getFragmentsByDate] First row:",o.rows[0]),(o.rows||[]).map(s=>({id:s.id,content:s.content,timestamp:s.timestamp,tags:s.tags?JSON.parse(s.tags):[]}))},Ec=async(i,e)=>{await(await rn()).execute({sql:"INSERT INTO fragments (id, date, content, timestamp, tags) VALUES (?, ?, ?, ?, ?)",args:[e.id,i,e.content,e.timestamp,e.tags?JSON.stringify(e.tags):null]})},FA=async(i,e,o)=>{await(await rn()).execute({sql:"UPDATE fragments SET content = ?, tags = ? WHERE id = ?",args:[e,JSON.stringify(o),i]})},QA=async i=>{await(await rn()).execute({sql:"DELETE FROM fragments WHERE id = ?",args:[i]})},JA=async i=>{const o=await(await rn()).execute({sql:"SELECT title, content, mood, reflection, tags FROM diary_entries WHERE date = ?",args:[i]});if(!o.rows||o.rows.length===0)return null;const s=o.rows[0];return{title:s.title,content:s.content,mood:s.mood,reflection:s.reflection,tags:JSON.parse(s.tags)}},Ds=async(i,e)=>{await(await rn()).execute({sql:`INSERT OR REPLACE INTO diary_entries (date, title, content, mood, reflection, tags, created_at) 
              VALUES (?, ?, ?, ?, ?, ?, ?)`,args:[i,e.title,e.content,e.mood,e.reflection,JSON.stringify(e.tags),Date.now()]})},YA=async()=>{const i=await rn(),e=await i.execute({sql:"SELECT DISTINCT date FROM fragments"}),o=await i.execute({sql:"SELECT date FROM diary_entries"}),s=new Set([...(e.rows||[]).map(a=>a.date),...(o.rows||[]).map(a=>a.date)]);return Array.from(s).sort().reverse()},$A=async i=>{const e=await rn();await e.execute({sql:"DELETE FROM fragments WHERE date = ?",args:[i]}),await e.execute({sql:"DELETE FROM diary_entries WHERE date = ?",args:[i]})},KA=async i=>{const e=await rn(),o=`%${i.toLowerCase()}%`;return((await e.execute({sql:`SELECT id, date, content, timestamp, tags FROM fragments 
              WHERE LOWER(content) LIKE ? OR LOWER(tags) LIKE ? 
              ORDER BY timestamp DESC`,args:[o,o]})).rows||[]).map(a=>({date:a.date,fragment:{id:a.id,content:a.content,timestamp:a.timestamp,tags:a.tags?JSON.parse(a.tags):[]}}))},XA=async i=>{const e=await rn(),o=`%${i.toLowerCase()}%`;return((await e.execute({sql:`SELECT date, title, content, mood, reflection, tags FROM diary_entries 
              WHERE LOWER(title) LIKE ? OR LOWER(content) LIKE ? OR LOWER(mood) LIKE ? 
                 OR LOWER(reflection) LIKE ? OR LOWER(tags) LIKE ? 
              ORDER BY date DESC`,args:[o,o,o,o,o]})).rows||[]).map(a=>({date:a.date,entry:{title:a.title,content:a.content,mood:a.mood,reflection:a.reflection,tags:JSON.parse(a.tags)}}))};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZA,WA;function jA(){return{geminiUrl:ZA,vertexUrl:WA}}function ew(i,e,o,s){var a,u;if(!(i!=null&&i.baseUrl)){const d=jA();return e?(a=d.vertexUrl)!==null&&a!==void 0?a:o:(u=d.geminiUrl)!==null&&u!==void 0?u:s}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dn{}function ie(i,e){const o=/\{([^}]+)\}/g;return i.replace(o,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const u=e[a];return u!=null?String(u):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(i,e,o){for(let u=0;u<e.length-1;u++){const d=e[u];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in i))if(Array.isArray(o))i[h]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(i[h])){const y=i[h];if(Array.isArray(o))for(let g=0;g<y.length;g++){const v=y[g];f(v,e.slice(u+1),o[g])}else for(const g of y)f(g,e.slice(u+1),o)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in i||(i[h]=[{}]);const y=i[h];f(y[0],e.slice(u+1),o);return}(!i[d]||typeof i[d]!="object")&&(i[d]={}),i=i[d]}const s=e[e.length-1],a=i[s];if(a!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===a)return;if(typeof a=="object"&&typeof o=="object"&&a!==null&&o!==null)Object.assign(a,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(i,o):i[s]=o}function c(i,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let s=0;s<e.length;s++){if(typeof i!="object"||i===null)return o;const a=e[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(u in i){const d=i[u];return Array.isArray(d)?d.map(h=>c(h,e.slice(s+1),o)):o}else return o}else i=i[a]}return i}catch(s){if(s instanceof TypeError)return o;throw s}}function tw(i,e){for(const[o,s]of Object.entries(e)){const a=o.split("."),u=s.split("."),d=new Set;let h=-1;for(let y=0;y<a.length;y++)if(a[y]==="*"){h=y;break}if(h!==-1&&u.length>h)for(let y=h;y<u.length;y++){const g=u[y];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&d.add(g)}Cc(i,a,u,0,d)}}function Cc(i,e,o,s,a){if(s>=e.length||typeof i!="object"||i===null)return;const u=e[s];if(u.endsWith("[]")){const d=u.slice(0,-2),h=i;if(d in h&&Array.isArray(h[d]))for(const y of h[d])Cc(y,e,o,s+1,a)}else if(u==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const d=i,h=Object.keys(d).filter(g=>!g.startsWith("_")&&!a.has(g)),y={};for(const g of h)y[g]=d[g];for(const[g,v]of Object.entries(y)){const S=[];for(const E of o.slice(s))E==="*"?S.push(g):S.push(E);f(d,S,v)}for(const g of h)delete d[g]}}else{const d=i;u in d&&Cc(d[u],e,o,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kc(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nw(i){const e={},o=c(i,["operationName"]);o!=null&&f(e,["operationName"],o);const s=c(i,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function iw(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response","generateVideoResponse"]);return d!=null&&f(e,["response"],sw(d)),e}function ow(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],lw(d)),e}function sw(i){const e={},o=c(i,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>aw(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function lw(i){const e={},o=c(i,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>rw(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function aw(i){const e={},o=c(i,["video"]);return o!=null&&f(e,["video"],hw(o)),e}function rw(i){const e={},o=c(i,["_self"]);return o!=null&&f(e,["video"],pw(o)),e}function uw(i){const e={},o=c(i,["operationName"]);return o!=null&&f(e,["_url","operationName"],o),e}function cw(i){const e={},o=c(i,["operationName"]);return o!=null&&f(e,["_url","operationName"],o),e}function fw(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],dw(d)),e}function dw(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["parent"]);s!=null&&f(e,["parent"],s);const a=c(i,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function fT(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],mw(d)),e}function mw(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["parent"]);s!=null&&f(e,["parent"],s);const a=c(i,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function hw(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["uri"],o);const s=c(i,["encodedVideo"]);s!=null&&f(e,["videoBytes"],kc(s));const a=c(i,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function pw(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["uri"],o);const s=c(i,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],kc(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wp;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wp||(wp={}));var xp;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(xp||(xp={}));var Np;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Np||(Np={}));var yt;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(yt||(yt={}));var bp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(bp||(bp={}));var Rp;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Rp||(Rp={}));var Mp;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Mp||(Mp={}));var Dp;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Dp||(Dp={}));var Ip;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ip||(Ip={}));var Lp;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.HIGH="HIGH"})(Lp||(Lp={}));var Up;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Up||(Up={}));var qp;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(qp||(qp={}));var Pp;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Pp||(Pp={}));var Bp;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(Bp||(Bp={}));var zp;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(zp||(zp={}));var Gp;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gp||(Gp={}));var Hp;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Hp||(Hp={}));var Vp;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Vp||(Vp={}));var Op;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Op||(Op={}));var ga;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(ga||(ga={}));var kp;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kp||(kp={}));var Fp;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Fp||(Fp={}));var Qp;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qp||(Qp={}));var _c;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_c||(_c={}));var Jp;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Jp||(Jp={}));var Yp;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Yp||(Yp={}));var $p;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})($p||($p={}));var Kp;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Kp||(Kp={}));var Xp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Xp||(Xp={}));var Zp;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Zp||(Zp={}));var Wp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Wp||(Wp={}));var jp;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(jp||(jp={}));var eg;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(eg||(eg={}));var tg;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(tg||(tg={}));var ng;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ng||(ng={}));var ig;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ig||(ig={}));var og;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(og||(og={}));var sg;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sg||(sg={}));var lg;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(lg||(lg={}));var ag;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(ag||(ag={}));var rg;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(rg||(rg={}));var ug;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(ug||(ug={}));var cg;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cg||(cg={}));var fg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(fg||(fg={}));var dg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(dg||(dg={}));var mg;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(mg||(mg={}));var hg;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hg||(hg={}));var pg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(pg||(pg={}));var gg;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gg||(gg={}));var yg;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yg||(yg={}));var vg;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(vg||(vg={}));var Sg;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sg||(Sg={}));var Tg;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Tg||(Tg={}));var Eg;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Eg||(Eg={}));var _o;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(_o||(_o={}));class Ac{constructor(e){const o={};for(const s of e.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rs{get text(){var e,o,s,a,u,d,h,y;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",v=!1;const S=[];for(const E of(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[A,R]of Object.entries(E))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(R!==null||R!==void 0)&&S.push(A);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,g+=E.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?g:void 0}get data(){var e,o,s,a,u,d,h,y;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const v=[];for(const S of(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[E,A]of Object.entries(S))E!=="inlineData"&&(A!==null||A!==void 0)&&v.push(E);S.inlineData&&typeof S.inlineData.data=="string"&&(g+=atob(S.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,o,s,a,u,d,h,y;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,o,s,a,u,d,h,y,g;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,o,s,a,u,d,h,y,g;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.output}}class Cg{}class _g{}class gw{}class yw{}class vw{}class Sw{}class Ag{}class wg{}class xg{}class Tw{}class ya{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new ya;let a;const u=e;return o?a=ow(u):a=iw(u),Object.assign(s,a),s}}class Ng{}class bg{}class Rg{}class Ew{}class Cw{}class _w{}class Fc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Fc,u=fw(e);return Object.assign(s,u),s}}class Aw{}class ww{}class xw{}class Mg{}class Nw{get text(){var e,o,s;let a="",u=!1;const d=[];for(const h of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,g]of Object.entries(h))y!=="text"&&y!=="thought"&&g!==null&&d.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;u=!0,a+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?a:void 0}get data(){var e,o,s;let a="";const u=[];for(const d of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[h,y]of Object.entries(d))h!=="inlineData"&&y!==null&&u.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(a+=atob(d.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class bw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Qc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Qc,u=fT(e);return Object.assign(s,u),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Re(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function dT(i,e){const o=Re(i,e);return o?o.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}`:o.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${o}`:o:""}function mT(i){return Array.isArray(i)?i.map(e=>va(e)):[va(i)]}function va(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function hT(i){const e=va(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pT(i){const e=va(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dg(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function gT(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>Dg(e)):[Dg(i)]}function wc(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Ig(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Lg(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function mt(i){if(i==null)throw new Error("ContentUnion is required");return wc(i)?i:{role:"user",parts:gT(i)}}function Jc(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const s=mt(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(i.isVertexAI()){const o=mt(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>mt(o)):[mt(e)]}function Kt(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Ig(i)||Lg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mt(i)]}const e=[],o=[],s=wc(i[0]);for(const a of i){const u=wc(a);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(a);else{if(Ig(a)||Lg(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(a)}}return s||e.push({role:"user",parts:gT(o)}),e}function Rw(i,e){i.includes("null")&&(e.nullable=!0);const o=i.filter(s=>s!=="null");if(o.length===1)e.type=Object.values(yt).includes(o[0].toUpperCase())?o[0].toUpperCase():yt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of o)e.anyOf.push({type:Object.values(yt).includes(s.toUpperCase())?s.toUpperCase():yt.TYPE_UNSPECIFIED})}}function wo(i){const e={},o=["items"],s=["anyOf"],a=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=i.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,i=u[1]):u[1].type==="null"&&(e.nullable=!0,i=u[0])),i.type instanceof Array&&Rw(i.type,e);for(const[d,h]of Object.entries(i))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(yt).includes(h.toUpperCase())?h.toUpperCase():yt.TYPE_UNSPECIFIED}else if(o.includes(d))e[d]=wo(h);else if(s.includes(d)){const y=[];for(const g of h){if(g.type=="null"){e.nullable=!0;continue}y.push(wo(g))}e[d]=y}else if(a.includes(d)){const y={};for(const[g,v]of Object.entries(h))y[g]=wo(v);e[d]=y}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Yc(i){return wo(i)}function $c(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Kc(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Ro(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=wo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=wo(e.response));return i}function Mo(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of i)e.push(o);return e}function Mw(i,e,o,s=1){const a=!e.startsWith(`${o}/`)&&e.split("/").length===s;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:a?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}/${e}`:e:a?`${o}/${e}`:e}function In(i,e){if(typeof e!="string")throw new Error("name must be a string");return Mw(i,e,"cachedContents")}function yT(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function ai(i){return kc(i)}function Dw(i){return i!=null&&typeof i=="object"&&"name"in i}function Iw(i){return i!=null&&typeof i=="object"&&"video"in i}function Lw(i){return i!=null&&typeof i=="object"&&"uri"in i}function vT(i){var e;let o;if(Dw(i)&&(o=i.name),!(Lw(i)&&(o=i.uri,o===void 0))&&!(Iw(i)&&(o=(e=i.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof i=="string"&&(o=i),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const a=o.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${o}`);o=a[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function ST(i,e){let o;return i.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function TT(i){for(const e of["models","tunedModels","publisherModels"])if(Uw(i,e))return i[e];return[]}function Uw(i,e){return i!==null&&typeof i=="object"&&e in i}function qw(i,e={}){const o=i,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Pw(i,e={}){const o=[],s=new Set;for(const a of i){const u=a.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const d=qw(a,e);d.functionDeclarations&&o.push(...d.functionDeclarations)}return{functionDeclarations:o}}function ET(i,e){let o;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,a=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(i.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function Bw(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function CT(i){if(typeof i!="object"||i===null)return{};const e=i,o=e.inlinedResponses;if(typeof o!="object"||o===null)return i;const a=o.inlinedResponses;if(!Array.isArray(a)||a.length===0)return i;let u=!1;for(const d of a){if(typeof d!="object"||d===null)continue;const y=d.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function Do(i,e){const o=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function _T(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zw(i){const e={},o=c(i,["responsesFile"]);o!=null&&f(e,["fileName"],o);const s=c(i,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>vx(d))),f(e,["inlinedResponses"],u)}const a=c(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["inlinedEmbedContentResponses"],u)}return e}function Gw(i){const e={},o=c(i,["predictionsFormat"]);o!=null&&f(e,["format"],o);const s=c(i,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const a=c(i,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function Hw(i){const e={},o=c(i,["format"]);o!=null&&f(e,["predictionsFormat"],o);const s=c(i,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const a=c(i,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function aa(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["metadata","state"]);a!=null&&f(e,["state"],_T(a));const u=c(i,["metadata","createTime"]);u!=null&&f(e,["createTime"],u);const d=c(i,["metadata","endTime"]);d!=null&&f(e,["endTime"],d);const h=c(i,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const y=c(i,["metadata","model"]);y!=null&&f(e,["model"],y);const g=c(i,["metadata","output"]);return g!=null&&f(e,["dest"],zw(CT(g))),e}function xc(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["state"]);a!=null&&f(e,["state"],_T(a));const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["createTime"]);d!=null&&f(e,["createTime"],d);const h=c(i,["startTime"]);h!=null&&f(e,["startTime"],h);const y=c(i,["endTime"]);y!=null&&f(e,["endTime"],y);const g=c(i,["updateTime"]);g!=null&&f(e,["updateTime"],g);const v=c(i,["model"]);v!=null&&f(e,["model"],v);const S=c(i,["inputConfig"]);S!=null&&f(e,["src"],Vw(S));const E=c(i,["outputConfig"]);E!=null&&f(e,["dest"],Gw(CT(E)));const A=c(i,["completionStats"]);return A!=null&&f(e,["completionStats"],A),e}function Vw(i){const e={},o=c(i,["instancesFormat"]);o!=null&&f(e,["format"],o);const s=c(i,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const a=c(i,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function Ow(i,e){const o={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(e,["fileName"]);s!=null&&f(o,["fileName"],s);const a=c(e,["inlinedRequests"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>yx(i,d))),f(o,["requests","requests"],u)}return o}function kw(i){const e={},o=c(i,["format"]);o!=null&&f(e,["instancesFormat"],o);const s=c(i,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const a=c(i,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Fw(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Qw(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function Jw(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function Yw(i){const e={},o=c(i,["content"]);o!=null&&f(e,["content"],o);const s=c(i,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],$w(s));const a=c(i,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const u=c(i,["finishReason"]);u!=null&&f(e,["finishReason"],u);const d=c(i,["avgLogprobs"]);d!=null&&f(e,["avgLogprobs"],d);const h=c(i,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const y=c(i,["index"]);y!=null&&f(e,["index"],y);const g=c(i,["logprobsResult"]);g!=null&&f(e,["logprobsResult"],g);const v=c(i,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["safetyRatings"],E)}const S=c(i,["urlContextMetadata"]);return S!=null&&f(e,["urlContextMetadata"],S),e}function $w(i){const e={},o=c(i,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function AT(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>wx(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function Kw(i,e){const o={},s=c(i,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),c(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function Xw(i,e){const o={},s=c(i,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=c(i,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],Hw(Bw(a))),o}function Ug(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["src"]);a!=null&&f(o,["batch","inputConfig"],Ow(i,ET(i,a)));const u=c(e,["config"]);return u!=null&&Kw(u,o),o}function Zw(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["model"],Re(i,s));const a=c(e,["src"]);a!=null&&f(o,["inputConfig"],kw(ET(i,a)));const u=c(e,["config"]);return u!=null&&Xw(u,o),o}function Ww(i,e){const o={},s=c(i,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),o}function jw(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["src"]);a!=null&&f(o,["batch","inputConfig"],lx(i,a));const u=c(e,["config"]);return u!=null&&Ww(u,o),o}function ex(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function tx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function nx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);return u!=null&&f(e,["error"],u),e}function ix(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);return u!=null&&f(e,["error"],u),e}function ox(i,e){const o={},s=c(e,["contents"]);if(s!=null){let u=Jc(i,s);Array.isArray(u)&&(u=u.map(d=>d)),f(o,["requests[]","request","content"],u)}const a=c(e,["config"]);return a!=null&&(f(o,["_self"],sx(a,o)),tw(o,{"requests[].*":"requests[].request.*"})),o}function sx(i,e){const o={},s=c(i,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=c(i,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const u=c(i,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function lx(i,e){const o={},s=c(e,["fileName"]);s!=null&&f(o,["file_name"],s);const a=c(e,["inlinedRequests"]);return a!=null&&f(o,["requests"],ox(i,a)),o}function ax(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function rx(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ux(i){const e={},o=c(i,["mode"]);o!=null&&f(e,["mode"],o);const s=c(i,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cx(i,e,o){const s={},a=c(e,["systemInstruction"]);o!==void 0&&a!=null&&f(o,["systemInstruction"],AT(mt(a)));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const h=c(e,["topK"]);h!=null&&f(s,["topK"],h);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const g=c(e,["maxOutputTokens"]);g!=null&&f(s,["maxOutputTokens"],g);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const S=c(e,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const E=c(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const R=c(e,["frequencyPenalty"]);R!=null&&f(s,["frequencyPenalty"],R);const w=c(e,["seed"]);w!=null&&f(s,["seed"],w);const B=c(e,["responseMimeType"]);B!=null&&f(s,["responseMimeType"],B);const Y=c(e,["responseSchema"]);Y!=null&&f(s,["responseSchema"],Yc(Y));const K=c(e,["responseJsonSchema"]);if(K!=null&&f(s,["responseJsonSchema"],K),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=c(e,["safetySettings"]);if(o!==void 0&&L!=null){let ae=L;Array.isArray(ae)&&(ae=ae.map(se=>xx(se))),f(o,["safetySettings"],ae)}const O=c(e,["tools"]);if(o!==void 0&&O!=null){let ae=Mo(O);Array.isArray(ae)&&(ae=ae.map(se=>bx(Ro(se)))),f(o,["tools"],ae)}const Z=c(e,["toolConfig"]);if(o!==void 0&&Z!=null&&f(o,["toolConfig"],Nx(Z)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=c(e,["cachedContent"]);o!==void 0&&j!=null&&f(o,["cachedContent"],In(i,j));const V=c(e,["responseModalities"]);V!=null&&f(s,["responseModalities"],V);const z=c(e,["mediaResolution"]);z!=null&&f(s,["mediaResolution"],z);const F=c(e,["speechConfig"]);if(F!=null&&f(s,["speechConfig"],$c(F)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=c(e,["thinkingConfig"]);ee!=null&&f(s,["thinkingConfig"],ee);const ce=c(e,["imageConfig"]);return ce!=null&&f(s,["imageConfig"],gx(ce)),s}function fx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(g=>Yw(g))),f(e,["candidates"],y)}const a=c(i,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const u=c(i,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const d=c(i,["responseId"]);d!=null&&f(e,["responseId"],d);const h=c(i,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function dx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function mx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function hx(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function px(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function gx(i){const e={},o=c(i,["aspectRatio"]);o!=null&&f(e,["aspectRatio"],o);const s=c(i,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yx(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["request","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let h=Kt(a);Array.isArray(h)&&(h=h.map(y=>AT(y))),f(o,["request","contents"],h)}const u=c(e,["metadata"]);u!=null&&f(o,["metadata"],u);const d=c(e,["config"]);return d!=null&&f(o,["request","generationConfig"],cx(i,d,c(o,["request"],{}))),o}function vx(i){const e={},o=c(i,["response"]);o!=null&&f(e,["response"],fx(o));const s=c(i,["error"]);return s!=null&&f(e,["error"],s),e}function Sx(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),c(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function Tx(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const u=c(i,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),o}function Ex(i){const e={},o=c(i,["config"]);return o!=null&&Sx(o,e),e}function Cx(i){const e={},o=c(i,["config"]);return o!=null&&Tx(o,e),e}function _x(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["operations"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>aa(d))),f(e,["batchJobs"],u)}return e}function Ax(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["batchPredictionJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>xc(d))),f(e,["batchJobs"],u)}return e}function wx(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],ax(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],rx(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],Fw(y));const g=c(i,["text"]);g!=null&&f(e,["text"],g);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function xx(i){const e={},o=c(i,["category"]);if(o!=null&&f(e,["category"],o),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(i,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function Nx(i){const e={},o=c(i,["functionCallingConfig"]);o!=null&&f(e,["functionCallingConfig"],ux(o));const s=c(i,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function bx(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],hx(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],px(y));const g=c(i,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mn;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Mn||(Mn={}));class Ui{constructor(e,o,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,s,a)}init(e,o,s){var a,u;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!s||Object.keys(s).length===0?d={config:{}}:typeof s=="object"?d=Object.assign({},s):d=s,d.config&&(d.config.pageToken=o.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(u=(a=d.config)===null||a===void 0?void 0:a.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rx extends Dn{constructor(e){super(),this.apiClient=e,this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)},this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o)}createInlinedGenerateContentRequest(e){const o=Ug(this.apiClient,e),s=o._url,a=ie("{model}:batchGenerateContent",s),h=o.batch.inputConfig.requests,y=h.requests,g=[];for(const v of y){const S=Object.assign({},v);if(S.systemInstruction){const E=S.systemInstruction;delete S.systemInstruction;const A=S.request;A.systemInstruction=E,S.request=A}g.push(S)}return h.requests=g,delete o.config,delete o._url,delete o._query,{path:a,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const s=o?Object.assign({},o):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const u=this.getGcsUri(e),d=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${a}`;else if(d)s.dest=`${d}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Zw(this.apiClient,e);return h=ie("batchPredictionJobs",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>xc(v))}else{const g=Ug(this.apiClient,e);return h=ie("{model}:batchGenerateContent",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>aa(v))}}async createEmbeddingsInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jw(this.apiClient,e);return u=ie("{model}:asyncBatchEmbedContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>aa(y))}}async get(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=mx(this.apiClient,e);return h=ie("batchPredictionJobs/{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>xc(v))}else{const g=dx(this.apiClient,e);return h=ie("batches/{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>aa(v))}}async cancel(e){var o,s,a,u;let d="",h={};if(this.apiClient.isVertexAI()){const y=Jw(this.apiClient,e);d=ie("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=Qw(this.apiClient,e);d=ie("batches/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Cx(e);return h=ie("batchPredictionJobs",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Ax(v),E=new Mg;return Object.assign(E,S),E})}else{const g=Ex(e);return h=ie("batches",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=_x(v),E=new Mg;return Object.assign(E,S),E})}}async delete(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=tx(this.apiClient,e);return h=ie("batchPredictionJobs/{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>ix(v))}else{const g=ex(this.apiClient,e);return h=ie("batches/{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>nx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mx(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function qg(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>jx(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function Dx(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const u=c(i,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(i,["contents"]);if(e!==void 0&&d!=null){let v=Kt(d);Array.isArray(v)&&(v=v.map(S=>qg(S))),f(e,["contents"],v)}const h=c(i,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],qg(mt(h)));const y=c(i,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>tN(S))),f(e,["tools"],v)}const g=c(i,["toolConfig"]);if(e!==void 0&&g!=null&&f(e,["toolConfig"],eN(g)),c(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function Ix(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const u=c(i,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(i,["contents"]);if(e!==void 0&&d!=null){let S=Kt(d);Array.isArray(S)&&(S=S.map(E=>E)),f(e,["contents"],S)}const h=c(i,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],mt(h));const y=c(i,["tools"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>nN(E))),f(e,["tools"],S)}const g=c(i,["toolConfig"]);e!==void 0&&g!=null&&f(e,["toolConfig"],g);const v=c(i,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),o}function Lx(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["model"],dT(i,s));const a=c(e,["config"]);return a!=null&&Dx(a,o),o}function Ux(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["model"],dT(i,s));const a=c(e,["config"]);return a!=null&&Ix(a,o),o}function qx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function Px(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function Bx(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function zx(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function Gx(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Hx(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Vx(i){const e={},o=c(i,["mode"]);o!=null&&f(e,["mode"],o);const s=c(i,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ox(i){const e={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(i,["description"]);o!=null&&f(e,["description"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const h=c(i,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function kx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function Fx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function Qx(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function Jx(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function Yx(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function $x(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function Kx(i){const e={},o=c(i,["config"]);return o!=null&&Yx(o,e),e}function Xx(i){const e={},o=c(i,["config"]);return o!=null&&$x(o,e),e}function Zx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["cachedContents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function Wx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["cachedContents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function jx(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],Gx(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],Hx(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],Mx(y));const g=c(i,["text"]);g!=null&&f(e,["text"],g);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function eN(i){const e={},o=c(i,["functionCallingConfig"]);o!=null&&f(e,["functionCallingConfig"],Vx(o));const s=c(i,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function tN(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],Qx(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],Jx(y));const g=c(i,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function nN(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(E=>Ox(E))),f(e,["functionDeclarations"],S)}const s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=c(i,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const u=c(i,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=c(i,["codeExecution"]);d!=null&&f(e,["codeExecution"],d);const h=c(i,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const y=c(i,["googleMaps"]);y!=null&&f(e,["googleMaps"],y);const g=c(i,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const v=c(i,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function iN(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),o}function oN(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),o}function sN(i,e){const o={},s=c(e,["name"]);s!=null&&f(o,["_url","name"],In(i,s));const a=c(e,["config"]);return a!=null&&iN(a,o),o}function lN(i,e){const o={},s=c(e,["name"]);s!=null&&f(o,["_url","name"],In(i,s));const a=c(e,["config"]);return a!=null&&oN(a,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aN extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Ux(this.apiClient,e);return h=ie("cachedContents",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const g=Lx(this.apiClient,e);return h=ie("cachedContents",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async get(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Fx(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const g=kx(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async delete(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Px(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=zx(v),E=new bg;return Object.assign(E,S),E})}else{const g=qx(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Bx(v),E=new bg;return Object.assign(E,S),E})}}async update(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=lN(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const g=sN(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Xx(e);return h=ie("cachedContents",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Wx(v),E=new Rg;return Object.assign(E,S),E})}else{const g=Kx(e);return h=ie("cachedContents",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Zx(v),E=new Rg;return Object.assign(E,S),E})}}}function Pg(i){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&i[e],s=0;if(o)return o.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(i){return this instanceof ke?(this.v=i,this):new ke(i)}function xo(i,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(i,e||[]),a,u=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(A){return function(R){return Promise.resolve(R).then(A,S)}}function h(A,R){s[A]&&(a[A]=function(w){return new Promise(function(B,Y){u.push([A,w,B,Y])>1||y(A,w)})},R&&(a[A]=R(a[A])))}function y(A,R){try{g(s[A](R))}catch(w){E(u[0][3],w)}}function g(A){A.value instanceof ke?Promise.resolve(A.value.v).then(v,S):E(u[0][2],A)}function v(A){y("next",A)}function S(A){y("throw",A)}function E(A,R){A(R),u.shift(),u.length&&y(u[0][0],u[0][1])}}function Is(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],o;return e?e.call(i):(i=typeof Pg=="function"?Pg(i):i[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(u){o[u]=i[u]&&function(d){return new Promise(function(h,y){d=i[u](d),a(h,y,d.done,d.value)})}}function a(u,d,h,y){Promise.resolve(y).then(function(g){u({value:g,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rN(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const o=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:wT(o)}function wT(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function uN(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bg(i){if(i===void 0||i.length===0)return[];const e=[],o=i.length;let s=0;for(;s<o;)if(i[s].role==="user")e.push(i[s]),s++;else{const a=[];let u=!0;for(;s<o&&i[s].role==="model";)a.push(i[s]),u&&!wT(i[s])&&(u=!1),s++;u?e.push(...a):e.pop()}return e}class cN{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new fN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class fN{constructor(e,o,s,a={},u=[]){this.apiClient=e,this.modelsModule=o,this.model=s,this.config=a,this.history=u,this.sendPromise=Promise.resolve(),uN(u)}async sendMessage(e){var o;await this.sendPromise;const s=mt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,d,h;const y=await a,g=(d=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content,v=y.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let E=[];v!=null&&(E=(h=v.slice(S))!==null&&h!==void 0?h:[]);const A=g?[g]:[];this.recordHistory(s,A,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var o;await this.sendPromise;const s=mt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const u=await a;return this.processStreamResponse(u,s)}getHistory(e=!1){const o=e?Bg(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){var s,a;return xo(this,arguments,function*(){var d,h,y,g;const v=[];try{for(var S=!0,E=Is(e),A;A=yield ke(E.next()),d=A.done,!d;S=!0){g=A.value,S=!1;const R=g;if(rN(R)){const w=(a=(s=R.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content;w!==void 0&&v.push(w)}yield yield ke(R)}}catch(R){h={error:R}}finally{try{!S&&!d&&(y=E.return)&&(yield ke(y.call(E)))}finally{if(h)throw h.error}}this.recordHistory(o,v)})}recordHistory(e,o,s){let a=[];o.length>0&&o.every(u=>u.role!==void 0)?a=o:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Bg(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ma extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ma.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dN(i){const e={},o=c(i,["file"]);return o!=null&&f(e,["file"],o),e}function mN(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function hN(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","file"],vT(o)),e}function pN(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function gN(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","file"],vT(o)),e}function yN(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function vN(i){const e={},o=c(i,["config"]);return o!=null&&yN(o,e),e}function SN(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["files"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["files"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TN extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vN(e);return u=ie("files",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const g=SN(y),v=new Aw;return Object.assign(v,g),v})}}async createInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dN(e);return u=ie("upload/v1beta/files",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const g=mN(y),v=new ww;return Object.assign(v,g),v})}}async get(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gN(e);return u=ie("files/{file}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hN(e);return u=ie("files/{file}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const g=pN(y),v=new xw;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ra(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function EN(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>BN(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function CN(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function _N(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AN(i){const e={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(i,["description"]);o!=null&&f(e,["description"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const h=c(i,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function wN(i){const e={},o=c(i,["modelSelectionConfig"]);o!=null&&f(e,["modelConfig"],o);const s=c(i,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=c(i,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const u=c(i,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const d=c(i,["enableAffectiveDialog"]);d!=null&&f(e,["enableAffectiveDialog"],d);const h=c(i,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const y=c(i,["logprobs"]);y!=null&&f(e,["logprobs"],y);const g=c(i,["maxOutputTokens"]);g!=null&&f(e,["maxOutputTokens"],g);const v=c(i,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const S=c(i,["presencePenalty"]);S!=null&&f(e,["presencePenalty"],S);const E=c(i,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const A=c(i,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const R=c(i,["responseModalities"]);R!=null&&f(e,["responseModalities"],R);const w=c(i,["responseSchema"]);w!=null&&f(e,["responseSchema"],w);const B=c(i,["routingConfig"]);B!=null&&f(e,["routingConfig"],B);const Y=c(i,["seed"]);Y!=null&&f(e,["seed"],Y);const K=c(i,["speechConfig"]);K!=null&&f(e,["speechConfig"],xT(K));const L=c(i,["stopSequences"]);L!=null&&f(e,["stopSequences"],L);const O=c(i,["temperature"]);O!=null&&f(e,["temperature"],O);const Z=c(i,["thinkingConfig"]);Z!=null&&f(e,["thinkingConfig"],Z);const j=c(i,["topK"]);j!=null&&f(e,["topK"],j);const V=c(i,["topP"]);if(V!=null&&f(e,["topP"],V),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function xN(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function NN(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function bN(i,e){const o={},s=c(i,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=c(i,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const h=c(i,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const g=c(i,["mediaResolution"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","mediaResolution"],g);const v=c(i,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","speechConfig"],Kc(S));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=c(i,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const R=c(i,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],EN(mt(R)));const w=c(i,["tools"]);if(e!==void 0&&w!=null){let j=Mo(w);Array.isArray(j)&&(j=j.map(V=>GN(Ro(V)))),f(e,["setup","tools"],j)}const B=c(i,["sessionResumption"]);e!==void 0&&B!=null&&f(e,["setup","sessionResumption"],zN(B));const Y=c(i,["inputAudioTranscription"]);e!==void 0&&Y!=null&&f(e,["setup","inputAudioTranscription"],Y);const K=c(i,["outputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","outputAudioTranscription"],K);const L=c(i,["realtimeInputConfig"]);e!==void 0&&L!=null&&f(e,["setup","realtimeInputConfig"],L);const O=c(i,["contextWindowCompression"]);e!==void 0&&O!=null&&f(e,["setup","contextWindowCompression"],O);const Z=c(i,["proactivity"]);return e!==void 0&&Z!=null&&f(e,["setup","proactivity"],Z),o}function RN(i,e){const o={},s=c(i,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],wN(s));const a=c(i,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const h=c(i,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const g=c(i,["mediaResolution"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","mediaResolution"],g);const v=c(i,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","speechConfig"],xT(Kc(S)));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=c(i,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const R=c(i,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],mt(R));const w=c(i,["tools"]);if(e!==void 0&&w!=null){let j=Mo(w);Array.isArray(j)&&(j=j.map(V=>HN(Ro(V)))),f(e,["setup","tools"],j)}const B=c(i,["sessionResumption"]);e!==void 0&&B!=null&&f(e,["setup","sessionResumption"],B);const Y=c(i,["inputAudioTranscription"]);e!==void 0&&Y!=null&&f(e,["setup","inputAudioTranscription"],Y);const K=c(i,["outputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","outputAudioTranscription"],K);const L=c(i,["realtimeInputConfig"]);e!==void 0&&L!=null&&f(e,["setup","realtimeInputConfig"],L);const O=c(i,["contextWindowCompression"]);e!==void 0&&O!=null&&f(e,["setup","contextWindowCompression"],O);const Z=c(i,["proactivity"]);return e!==void 0&&Z!=null&&f(e,["setup","proactivity"],Z),o}function MN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["setup","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&f(o,["config"],bN(a,o)),o}function DN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["setup","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&f(o,["config"],RN(a,o)),o}function IN(i){const e={},o=c(i,["musicGenerationConfig"]);return o!=null&&f(e,["musicGenerationConfig"],o),e}function LN(i){const e={},o=c(i,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["weightedPrompts"],s)}return e}function UN(i){const e={},o=c(i,["media"]);if(o!=null){let g=mT(o);Array.isArray(g)&&(g=g.map(v=>ra(v))),f(e,["mediaChunks"],g)}const s=c(i,["audio"]);s!=null&&f(e,["audio"],ra(pT(s)));const a=c(i,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const u=c(i,["video"]);u!=null&&f(e,["video"],ra(hT(u)));const d=c(i,["text"]);d!=null&&f(e,["text"],d);const h=c(i,["activityStart"]);h!=null&&f(e,["activityStart"],h);const y=c(i,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function qN(i){const e={},o=c(i,["media"]);if(o!=null){let g=mT(o);Array.isArray(g)&&(g=g.map(v=>v)),f(e,["mediaChunks"],g)}const s=c(i,["audio"]);s!=null&&f(e,["audio"],pT(s));const a=c(i,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const u=c(i,["video"]);u!=null&&f(e,["video"],hT(u));const d=c(i,["text"]);d!=null&&f(e,["text"],d);const h=c(i,["activityStart"]);h!=null&&f(e,["activityStart"],h);const y=c(i,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function PN(i){const e={},o=c(i,["setupComplete"]);o!=null&&f(e,["setupComplete"],o);const s=c(i,["serverContent"]);s!=null&&f(e,["serverContent"],s);const a=c(i,["toolCall"]);a!=null&&f(e,["toolCall"],a);const u=c(i,["toolCallCancellation"]);u!=null&&f(e,["toolCallCancellation"],u);const d=c(i,["usageMetadata"]);d!=null&&f(e,["usageMetadata"],VN(d));const h=c(i,["goAway"]);h!=null&&f(e,["goAway"],h);const y=c(i,["sessionResumptionUpdate"]);return y!=null&&f(e,["sessionResumptionUpdate"],y),e}function BN(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],CN(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],_N(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],ra(y));const g=c(i,["text"]);g!=null&&f(e,["text"],g);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function zN(i){const e={},o=c(i,["handle"]);if(o!=null&&f(e,["handle"],o),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xT(i){const e={},o=c(i,["languageCode"]);o!=null&&f(e,["languageCode"],o);const s=c(i,["voiceConfig"]);if(s!=null&&f(e,["voiceConfig"],s),c(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function GN(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],xN(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],NN(y));const g=c(i,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function HN(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(E=>AN(E))),f(e,["functionDeclarations"],S)}const s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=c(i,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const u=c(i,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=c(i,["codeExecution"]);d!=null&&f(e,["codeExecution"],d);const h=c(i,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const y=c(i,["googleMaps"]);y!=null&&f(e,["googleMaps"],y);const g=c(i,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const v=c(i,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function VN(i){const e={},o=c(i,["promptTokenCount"]);o!=null&&f(e,["promptTokenCount"],o);const s=c(i,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const a=c(i,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const u=c(i,["toolUsePromptTokenCount"]);u!=null&&f(e,["toolUsePromptTokenCount"],u);const d=c(i,["thoughtsTokenCount"]);d!=null&&f(e,["thoughtsTokenCount"],d);const h=c(i,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const y=c(i,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(R=>R)),f(e,["promptTokensDetails"],A)}const g=c(i,["cacheTokensDetails"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(R=>R)),f(e,["cacheTokensDetails"],A)}const v=c(i,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(R=>R)),f(e,["responseTokensDetails"],A)}const S=c(i,["toolUsePromptTokensDetails"]);if(S!=null){let A=S;Array.isArray(A)&&(A=A.map(R=>R)),f(e,["toolUsePromptTokensDetails"],A)}const E=c(i,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ON(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function kN(i){const e={},o=c(i,["content"]);o!=null&&f(e,["content"],o);const s=c(i,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],FN(s));const a=c(i,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const u=c(i,["finishReason"]);u!=null&&f(e,["finishReason"],u);const d=c(i,["avgLogprobs"]);d!=null&&f(e,["avgLogprobs"],d);const h=c(i,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const y=c(i,["index"]);y!=null&&f(e,["index"],y);const g=c(i,["logprobsResult"]);g!=null&&f(e,["logprobsResult"],g);const v=c(i,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["safetyRatings"],E)}const S=c(i,["urlContextMetadata"]);return S!=null&&f(e,["urlContextMetadata"],S),e}function FN(i){const e={},o=c(i,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function QN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let u=Kt(a);Array.isArray(u)&&(u=u.map(d=>d)),f(o,["contents"],u)}return o}function JN(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(e,["tokensInfo"],a)}return e}function YN(i){const e={},o=c(i,["values"]);o!=null&&f(e,["values"],o);const s=c(i,["statistics"]);return s!=null&&f(e,["statistics"],$N(s)),e}function $N(i){const e={},o=c(i,["truncated"]);o!=null&&f(e,["truncated"],o);const s=c(i,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function Da(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>iR(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function KN(i){const e={},o=c(i,["controlType"]);o!=null&&f(e,["controlType"],o);const s=c(i,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function XN(i){const e={};if(c(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ZN(i,e){const o={},s=c(i,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],mt(s));const a=c(i,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>DT(h))),f(e,["tools"],d)}const u=c(i,["generationConfig"]);return e!==void 0&&u!=null&&f(e,["generationConfig"],Ob(u)),o}function WN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Kt(a);Array.isArray(d)&&(d=d.map(h=>Da(h))),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&XN(u),o}function jN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Kt(a);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&ZN(u,o),o}function eb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const a=c(i,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function tb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function nb(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function ib(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function ob(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function sb(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function lb(i,e){const o={},s=c(i,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=c(i,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const u=c(i,["numberOfImages"]);e!==void 0&&u!=null&&f(e,["parameters","sampleCount"],u);const d=c(i,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const h=c(i,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const y=c(i,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const g=c(i,["safetyFilterLevel"]);e!==void 0&&g!=null&&f(e,["parameters","safetySetting"],g);const v=c(i,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const S=c(i,["includeSafetyAttributes"]);e!==void 0&&S!=null&&f(e,["parameters","includeSafetyAttributes"],S);const E=c(i,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=c(i,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const R=c(i,["outputMimeType"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","mimeType"],R);const w=c(i,["outputCompressionQuality"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","compressionQuality"],w);const B=c(i,["addWatermark"]);e!==void 0&&B!=null&&f(e,["parameters","addWatermark"],B);const Y=c(i,["labels"]);e!==void 0&&Y!=null&&f(e,["labels"],Y);const K=c(i,["editMode"]);e!==void 0&&K!=null&&f(e,["parameters","editMode"],K);const L=c(i,["baseSteps"]);return e!==void 0&&L!=null&&f(e,["parameters","editConfig","baseSteps"],L),o}function ab(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>uR(y))),f(o,["instances[0]","referenceImages"],h)}const d=c(e,["config"]);return d!=null&&lb(d,o),o}function rb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Ia(u))),f(e,["generatedImages"],a)}return e}function ub(i,e){const o={},s=c(i,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=c(i,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const u=c(i,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function cb(i,e){const o={},s=c(i,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const a=c(i,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const u=c(i,["outputDimensionality"]);e!==void 0&&u!=null&&f(e,["parameters","outputDimensionality"],u);const d=c(i,["mimeType"]);e!==void 0&&d!=null&&f(e,["instances[]","mimeType"],d);const h=c(i,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),o}function fb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let h=Jc(i,a);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["requests[]","content"],h)}const u=c(e,["config"]);u!=null&&ub(u,o);const d=c(e,["model"]);return d!==void 0&&f(o,["requests[]","model"],Re(i,d)),o}function db(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Jc(i,a);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["instances[]","content"],d)}const u=c(e,["config"]);return u!=null&&cb(u,o),o}function mb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["embeddings"],u)}const a=c(i,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function hb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>YN(d))),f(e,["embeddings"],u)}const a=c(i,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function pb(i){const e={},o=c(i,["endpoint"]);o!=null&&f(e,["name"],o);const s=c(i,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function gb(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function yb(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vb(i){const e={},o=c(i,["mode"]);o!=null&&f(e,["mode"],o);const s=c(i,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Sb(i){const e={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(i,["description"]);o!=null&&f(e,["description"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const h=c(i,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Tb(i,e,o){const s={},a=c(e,["systemInstruction"]);o!==void 0&&a!=null&&f(o,["systemInstruction"],Da(mt(a)));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const h=c(e,["topK"]);h!=null&&f(s,["topK"],h);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const g=c(e,["maxOutputTokens"]);g!=null&&f(s,["maxOutputTokens"],g);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const S=c(e,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const E=c(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const R=c(e,["frequencyPenalty"]);R!=null&&f(s,["frequencyPenalty"],R);const w=c(e,["seed"]);w!=null&&f(s,["seed"],w);const B=c(e,["responseMimeType"]);B!=null&&f(s,["responseMimeType"],B);const Y=c(e,["responseSchema"]);Y!=null&&f(s,["responseSchema"],Yc(Y));const K=c(e,["responseJsonSchema"]);if(K!=null&&f(s,["responseJsonSchema"],K),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=c(e,["safetySettings"]);if(o!==void 0&&L!=null){let ae=L;Array.isArray(ae)&&(ae=ae.map(se=>cR(se))),f(o,["safetySettings"],ae)}const O=c(e,["tools"]);if(o!==void 0&&O!=null){let ae=Mo(O);Array.isArray(ae)&&(ae=ae.map(se=>yR(Ro(se)))),f(o,["tools"],ae)}const Z=c(e,["toolConfig"]);if(o!==void 0&&Z!=null&&f(o,["toolConfig"],gR(Z)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=c(e,["cachedContent"]);o!==void 0&&j!=null&&f(o,["cachedContent"],In(i,j));const V=c(e,["responseModalities"]);V!=null&&f(s,["responseModalities"],V);const z=c(e,["mediaResolution"]);z!=null&&f(s,["mediaResolution"],z);const F=c(e,["speechConfig"]);if(F!=null&&f(s,["speechConfig"],$c(F)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=c(e,["thinkingConfig"]);ee!=null&&f(s,["thinkingConfig"],ee);const ce=c(e,["imageConfig"]);return ce!=null&&f(s,["imageConfig"],Yb(ce)),s}function Eb(i,e,o){const s={},a=c(e,["systemInstruction"]);o!==void 0&&a!=null&&f(o,["systemInstruction"],mt(a));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const h=c(e,["topK"]);h!=null&&f(s,["topK"],h);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const g=c(e,["maxOutputTokens"]);g!=null&&f(s,["maxOutputTokens"],g);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const S=c(e,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const E=c(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const R=c(e,["frequencyPenalty"]);R!=null&&f(s,["frequencyPenalty"],R);const w=c(e,["seed"]);w!=null&&f(s,["seed"],w);const B=c(e,["responseMimeType"]);B!=null&&f(s,["responseMimeType"],B);const Y=c(e,["responseSchema"]);Y!=null&&f(s,["responseSchema"],Yc(Y));const K=c(e,["responseJsonSchema"]);K!=null&&f(s,["responseJsonSchema"],K);const L=c(e,["routingConfig"]);L!=null&&f(s,["routingConfig"],L);const O=c(e,["modelSelectionConfig"]);O!=null&&f(s,["modelConfig"],O);const Z=c(e,["safetySettings"]);if(o!==void 0&&Z!=null){let H=Z;Array.isArray(H)&&(H=H.map(te=>te)),f(o,["safetySettings"],H)}const j=c(e,["tools"]);if(o!==void 0&&j!=null){let H=Mo(j);Array.isArray(H)&&(H=H.map(te=>DT(Ro(te)))),f(o,["tools"],H)}const V=c(e,["toolConfig"]);o!==void 0&&V!=null&&f(o,["toolConfig"],V);const z=c(e,["labels"]);o!==void 0&&z!=null&&f(o,["labels"],z);const F=c(e,["cachedContent"]);o!==void 0&&F!=null&&f(o,["cachedContent"],In(i,F));const ee=c(e,["responseModalities"]);ee!=null&&f(s,["responseModalities"],ee);const ce=c(e,["mediaResolution"]);ce!=null&&f(s,["mediaResolution"],ce);const ae=c(e,["speechConfig"]);ae!=null&&f(s,["speechConfig"],MT($c(ae)));const se=c(e,["audioTimestamp"]);se!=null&&f(s,["audioTimestamp"],se);const Te=c(e,["thinkingConfig"]);Te!=null&&f(s,["thinkingConfig"],Te);const Ie=c(e,["imageConfig"]);return Ie!=null&&f(s,["imageConfig"],$b(Ie)),s}function zg(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Kt(a);Array.isArray(d)&&(d=d.map(h=>Da(h))),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&f(o,["generationConfig"],Tb(i,u,o)),o}function Gg(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Kt(a);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&f(o,["generationConfig"],Eb(i,u,o)),o}function Hg(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(g=>kN(g))),f(e,["candidates"],y)}const a=c(i,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const u=c(i,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const d=c(i,["responseId"]);d!=null&&f(e,["responseId"],d);const h=c(i,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function Vg(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),f(e,["candidates"],g)}const a=c(i,["createTime"]);a!=null&&f(e,["createTime"],a);const u=c(i,["modelVersion"]);u!=null&&f(e,["modelVersion"],u);const d=c(i,["promptFeedback"]);d!=null&&f(e,["promptFeedback"],d);const h=c(i,["responseId"]);h!=null&&f(e,["responseId"],h);const y=c(i,["usageMetadata"]);return y!=null&&f(e,["usageMetadata"],y),e}function Cb(i,e){const o={};if(c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=c(i,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=c(i,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(i,["guidanceScale"]);if(e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&f(e,["parameters","safetySetting"],d);const h=c(i,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const y=c(i,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const g=c(i,["includeRaiReason"]);e!==void 0&&g!=null&&f(e,["parameters","includeRaiReason"],g);const v=c(i,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const S=c(i,["outputMimeType"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","mimeType"],S);const E=c(i,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),c(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(i,["imageSize"]);if(e!==void 0&&A!=null&&f(e,["parameters","sampleImageSize"],A),c(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function _b(i,e){const o={},s=c(i,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=c(i,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const u=c(i,["numberOfImages"]);e!==void 0&&u!=null&&f(e,["parameters","sampleCount"],u);const d=c(i,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const h=c(i,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const y=c(i,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const g=c(i,["safetyFilterLevel"]);e!==void 0&&g!=null&&f(e,["parameters","safetySetting"],g);const v=c(i,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const S=c(i,["includeSafetyAttributes"]);e!==void 0&&S!=null&&f(e,["parameters","includeSafetyAttributes"],S);const E=c(i,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=c(i,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const R=c(i,["outputMimeType"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","mimeType"],R);const w=c(i,["outputCompressionQuality"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","compressionQuality"],w);const B=c(i,["addWatermark"]);e!==void 0&&B!=null&&f(e,["parameters","addWatermark"],B);const Y=c(i,["labels"]);e!==void 0&&Y!=null&&f(e,["labels"],Y);const K=c(i,["imageSize"]);e!==void 0&&K!=null&&f(e,["parameters","sampleImageSize"],K);const L=c(i,["enhancePrompt"]);return e!==void 0&&L!=null&&f(e,["parameters","enhancePrompt"],L),o}function Ab(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["config"]);return u!=null&&Cb(u,o),o}function wb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["config"]);return u!=null&&_b(u,o),o}function xb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>zb(d))),f(e,["generatedImages"],u)}const a=c(i,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],bT(a)),e}function Nb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Ia(d))),f(e,["generatedImages"],u)}const a=c(i,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],RT(a)),e}function bb(i,e){const o={},s=c(i,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=c(i,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(i,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const d=c(i,["resolution"]);e!==void 0&&d!=null&&f(e,["parameters","resolution"],d);const h=c(i,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),c(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=c(i,["negativePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","negativePrompt"],y);const g=c(i,["enhancePrompt"]);if(e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g),c(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=c(i,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],La(v));const S=c(i,["referenceImages"]);if(e!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(A=>MR(A))),f(e,["instances[0]","referenceImages"],E)}if(c(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function Rb(i,e){const o={},s=c(i,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=c(i,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const u=c(i,["fps"]);e!==void 0&&u!=null&&f(e,["parameters","fps"],u);const d=c(i,["durationSeconds"]);e!==void 0&&d!=null&&f(e,["parameters","durationSeconds"],d);const h=c(i,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const y=c(i,["aspectRatio"]);e!==void 0&&y!=null&&f(e,["parameters","aspectRatio"],y);const g=c(i,["resolution"]);e!==void 0&&g!=null&&f(e,["parameters","resolution"],g);const v=c(i,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const S=c(i,["pubsubTopic"]);e!==void 0&&S!=null&&f(e,["parameters","pubsubTopic"],S);const E=c(i,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const A=c(i,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const R=c(i,["generateAudio"]);e!==void 0&&R!=null&&f(e,["parameters","generateAudio"],R);const w=c(i,["lastFrame"]);e!==void 0&&w!=null&&f(e,["instances[0]","lastFrame"],tn(w));const B=c(i,["referenceImages"]);if(e!==void 0&&B!=null){let L=B;Array.isArray(L)&&(L=L.map(O=>DR(O))),f(e,["instances[0]","referenceImages"],L)}const Y=c(i,["mask"]);e!==void 0&&Y!=null&&f(e,["instances[0]","mask"],RR(Y));const K=c(i,["compressionQuality"]);return e!==void 0&&K!=null&&f(e,["parameters","compressionQuality"],K),o}function Mb(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response","generateVideoResponse"]);return d!=null&&f(e,["response"],Ub(d)),e}function Db(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],qb(d)),e}function Ib(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["image"]);u!=null&&f(o,["instances[0]","image"],La(u));const d=c(e,["video"]);d!=null&&f(o,["instances[0]","video"],IT(d));const h=c(e,["source"]);h!=null&&Pb(h,o);const y=c(e,["config"]);return y!=null&&bb(y,o),o}function Lb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["image"]);u!=null&&f(o,["instances[0]","image"],tn(u));const d=c(e,["video"]);d!=null&&f(o,["instances[0]","video"],LT(d));const h=c(e,["source"]);h!=null&&Bb(h,o);const y=c(e,["config"]);return y!=null&&Rb(y,o),o}function Ub(i){const e={},o=c(i,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Hb(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function qb(i){const e={},o=c(i,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Vb(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function Pb(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],La(a));const u=c(i,["video"]);return e!==void 0&&u!=null&&f(e,["instances[0]","video"],IT(u)),o}function Bb(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],tn(a));const u=c(i,["video"]);return e!==void 0&&u!=null&&f(e,["instances[0]","video"],LT(u)),o}function zb(i){const e={},o=c(i,["_self"]);o!=null&&f(e,["image"],Kb(o));const s=c(i,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=c(i,["_self"]);return a!=null&&f(e,["safetyAttributes"],bT(a)),e}function Ia(i){const e={},o=c(i,["_self"]);o!=null&&f(e,["image"],NT(o));const s=c(i,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=c(i,["_self"]);a!=null&&f(e,["safetyAttributes"],RT(a));const u=c(i,["prompt"]);return u!=null&&f(e,["enhancedPrompt"],u),e}function Gb(i){const e={},o=c(i,["_self"]);o!=null&&f(e,["mask"],NT(o));const s=c(i,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(e,["labels"],a)}return e}function Hb(i){const e={},o=c(i,["video"]);return o!=null&&f(e,["video"],NR(o)),e}function Vb(i){const e={},o=c(i,["_self"]);return o!=null&&f(e,["video"],bR(o)),e}function Ob(i){const e={},o=c(i,["modelSelectionConfig"]);o!=null&&f(e,["modelConfig"],o);const s=c(i,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=c(i,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const u=c(i,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const d=c(i,["enableAffectiveDialog"]);d!=null&&f(e,["enableAffectiveDialog"],d);const h=c(i,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const y=c(i,["logprobs"]);y!=null&&f(e,["logprobs"],y);const g=c(i,["maxOutputTokens"]);g!=null&&f(e,["maxOutputTokens"],g);const v=c(i,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const S=c(i,["presencePenalty"]);S!=null&&f(e,["presencePenalty"],S);const E=c(i,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const A=c(i,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const R=c(i,["responseModalities"]);R!=null&&f(e,["responseModalities"],R);const w=c(i,["responseSchema"]);w!=null&&f(e,["responseSchema"],w);const B=c(i,["routingConfig"]);B!=null&&f(e,["routingConfig"],B);const Y=c(i,["seed"]);Y!=null&&f(e,["seed"],Y);const K=c(i,["speechConfig"]);K!=null&&f(e,["speechConfig"],MT(K));const L=c(i,["stopSequences"]);L!=null&&f(e,["stopSequences"],L);const O=c(i,["temperature"]);O!=null&&f(e,["temperature"],O);const Z=c(i,["thinkingConfig"]);Z!=null&&f(e,["thinkingConfig"],Z);const j=c(i,["topK"]);j!=null&&f(e,["topK"],j);const V=c(i,["topP"]);if(V!=null&&f(e,["topP"],V),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kb(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function Fb(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function Qb(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function Jb(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function Yb(i){const e={},o=c(i,["aspectRatio"]);o!=null&&f(e,["aspectRatio"],o);const s=c(i,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $b(i){const e={},o=c(i,["aspectRatio"]);o!=null&&f(e,["aspectRatio"],o);const s=c(i,["imageSize"]);s!=null&&f(e,["imageSize"],s);const a=c(i,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const u=c(i,["outputCompressionQuality"]);return u!=null&&f(e,["imageOutputOptions","compressionQuality"],u),e}function Kb(i){const e={},o=c(i,["bytesBase64Encoded"]);o!=null&&f(e,["imageBytes"],ai(o));const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function NT(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["gcsUri"],o);const s=c(i,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function La(i){const e={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(i,["imageBytes"]);o!=null&&f(e,["bytesBase64Encoded"],ai(o));const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function tn(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["gcsUri"],o);const s=c(i,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Xb(i,e,o){const s={},a=c(e,["pageSize"]);o!==void 0&&a!=null&&f(o,["_query","pageSize"],a);const u=c(e,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const d=c(e,["filter"]);o!==void 0&&d!=null&&f(o,["_query","filter"],d);const h=c(e,["queryBase"]);return o!==void 0&&h!=null&&f(o,["_url","models_url"],ST(i,h)),s}function Zb(i,e,o){const s={},a=c(e,["pageSize"]);o!==void 0&&a!=null&&f(o,["_query","pageSize"],a);const u=c(e,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const d=c(e,["filter"]);o!==void 0&&d!=null&&f(o,["_query","filter"],d);const h=c(e,["queryBase"]);return o!==void 0&&h!=null&&f(o,["_url","models_url"],ST(i,h)),s}function Wb(i,e){const o={},s=c(e,["config"]);return s!=null&&Xb(i,s,o),o}function jb(i,e){const o={},s=c(e,["config"]);return s!=null&&Zb(i,s,o),o}function eR(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["_self"]);if(a!=null){let u=TT(a);Array.isArray(u)&&(u=u.map(d=>Nc(d))),f(e,["models"],u)}return e}function tR(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["_self"]);if(a!=null){let u=TT(a);Array.isArray(u)&&(u=u.map(d=>bc(d))),f(e,["models"],u)}return e}function nR(i){const e={},o=c(i,["maskMode"]);o!=null&&f(e,["maskMode"],o);const s=c(i,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const a=c(i,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Nc(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);a!=null&&f(e,["description"],a);const u=c(i,["version"]);u!=null&&f(e,["version"],u);const d=c(i,["_self"]);d!=null&&f(e,["tunedModelInfo"],vR(d));const h=c(i,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const y=c(i,["outputTokenLimit"]);y!=null&&f(e,["outputTokenLimit"],y);const g=c(i,["supportedGenerationMethods"]);g!=null&&f(e,["supportedActions"],g);const v=c(i,["temperature"]);v!=null&&f(e,["temperature"],v);const S=c(i,["maxTemperature"]);S!=null&&f(e,["maxTemperature"],S);const E=c(i,["topP"]);E!=null&&f(e,["topP"],E);const A=c(i,["topK"]);A!=null&&f(e,["topK"],A);const R=c(i,["thinking"]);return R!=null&&f(e,["thinking"],R),e}function bc(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);a!=null&&f(e,["description"],a);const u=c(i,["versionId"]);u!=null&&f(e,["version"],u);const d=c(i,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(E=>pb(E))),f(e,["endpoints"],S)}const h=c(i,["labels"]);h!=null&&f(e,["labels"],h);const y=c(i,["_self"]);y!=null&&f(e,["tunedModelInfo"],SR(y));const g=c(i,["defaultCheckpointId"]);g!=null&&f(e,["defaultCheckpointId"],g);const v=c(i,["checkpoints"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>E)),f(e,["checkpoints"],S)}return e}function iR(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],gb(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],yb(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],ON(y));const g=c(i,["text"]);g!=null&&f(e,["text"],g);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function oR(i){const e={},o=c(i,["productImage"]);return o!=null&&f(e,["image"],tn(o)),e}function sR(i,e){const o={},s=c(i,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=c(i,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const u=c(i,["outputGcsUri"]);e!==void 0&&u!=null&&f(e,["parameters","storageUri"],u);const d=c(i,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const h=c(i,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const y=c(i,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const g=c(i,["addWatermark"]);e!==void 0&&g!=null&&f(e,["parameters","addWatermark"],g);const v=c(i,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const S=c(i,["outputCompressionQuality"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S);const E=c(i,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const A=c(i,["labels"]);return e!==void 0&&A!=null&&f(e,["labels"],A),o}function lR(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["source"]);a!=null&&rR(a,o);const u=c(e,["config"]);return u!=null&&sR(u,o),o}function aR(i){const e={},o=c(i,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Ia(a))),f(e,["generatedImages"],s)}return e}function rR(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],tn(a));const u=c(i,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>oR(h))),f(e,["instances[0]","productImages"],d)}return o}function uR(i){const e={},o=c(i,["referenceImage"]);o!=null&&f(e,["referenceImage"],tn(o));const s=c(i,["referenceId"]);s!=null&&f(e,["referenceId"],s);const a=c(i,["referenceType"]);a!=null&&f(e,["referenceType"],a);const u=c(i,["maskImageConfig"]);u!=null&&f(e,["maskImageConfig"],nR(u));const d=c(i,["controlImageConfig"]);d!=null&&f(e,["controlImageConfig"],KN(d));const h=c(i,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const y=c(i,["subjectImageConfig"]);return y!=null&&f(e,["subjectImageConfig"],y),e}function bT(i){const e={},o=c(i,["safetyAttributes","categories"]);o!=null&&f(e,["categories"],o);const s=c(i,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=c(i,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function RT(i){const e={},o=c(i,["safetyAttributes","categories"]);o!=null&&f(e,["categories"],o);const s=c(i,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=c(i,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function cR(i){const e={},o=c(i,["category"]);if(o!=null&&f(e,["category"],o),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(i,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function fR(i){const e={},o=c(i,["image"]);return o!=null&&f(e,["image"],tn(o)),e}function dR(i,e){const o={},s=c(i,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const a=c(i,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const u=c(i,["confidenceThreshold"]);e!==void 0&&u!=null&&f(e,["parameters","confidenceThreshold"],u);const d=c(i,["maskDilation"]);e!==void 0&&d!=null&&f(e,["parameters","maskDilation"],d);const h=c(i,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const y=c(i,["labels"]);return e!==void 0&&y!=null&&f(e,["labels"],y),o}function mR(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["source"]);a!=null&&pR(a,o);const u=c(e,["config"]);return u!=null&&dR(u,o),o}function hR(i){const e={},o=c(i,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Gb(a))),f(e,["generatedMasks"],s)}return e}function pR(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],tn(a));const u=c(i,["scribbleImage"]);return e!==void 0&&u!=null&&f(e,["instances[0]","scribble"],fR(u)),o}function MT(i){const e={},o=c(i,["languageCode"]);o!=null&&f(e,["languageCode"],o);const s=c(i,["voiceConfig"]);if(s!=null&&f(e,["voiceConfig"],s),c(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function gR(i){const e={},o=c(i,["functionCallingConfig"]);o!=null&&f(e,["functionCallingConfig"],vb(o));const s=c(i,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function yR(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],Qb(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],Jb(y));const g=c(i,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}function DT(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(E=>Sb(E))),f(e,["functionDeclarations"],S)}const s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=c(i,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const u=c(i,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=c(i,["codeExecution"]);d!=null&&f(e,["codeExecution"],d);const h=c(i,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const y=c(i,["googleMaps"]);y!=null&&f(e,["googleMaps"],y);const g=c(i,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const v=c(i,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function vR(i){const e={},o=c(i,["baseModel"]);o!=null&&f(e,["baseModel"],o);const s=c(i,["createTime"]);s!=null&&f(e,["createTime"],s);const a=c(i,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function SR(i){const e={},o=c(i,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&f(e,["baseModel"],o);const s=c(i,["createTime"]);s!=null&&f(e,["createTime"],s);const a=c(i,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function TR(i,e){const o={},s=c(i,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const u=c(i,["defaultCheckpointId"]);return e!==void 0&&u!=null&&f(e,["defaultCheckpointId"],u),o}function ER(i,e){const o={},s=c(i,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const u=c(i,["defaultCheckpointId"]);return e!==void 0&&u!=null&&f(e,["defaultCheckpointId"],u),o}function CR(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","name"],Re(i,s));const a=c(e,["config"]);return a!=null&&TR(a,o),o}function _R(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&ER(a,o),o}function AR(i,e){const o={},s=c(i,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=c(i,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const u=c(i,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const d=c(i,["includeRaiReason"]);e!==void 0&&d!=null&&f(e,["parameters","includeRaiReason"],d);const h=c(i,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const y=c(i,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const g=c(i,["enhanceInputImage"]);e!==void 0&&g!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],g);const v=c(i,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const S=c(i,["labels"]);e!==void 0&&S!=null&&f(e,["labels"],S);const E=c(i,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const A=c(i,["mode"]);return e!==void 0&&A!=null&&f(e,["parameters","mode"],A),o}function wR(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["image"]);a!=null&&f(o,["instances[0]","image"],tn(a));const u=c(e,["upscaleFactor"]);u!=null&&f(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=c(e,["config"]);return d!=null&&AR(d,o),o}function xR(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Ia(u))),f(e,["generatedImages"],a)}return e}function NR(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["uri"],o);const s=c(i,["encodedVideo"]);s!=null&&f(e,["videoBytes"],ai(s));const a=c(i,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function bR(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["uri"],o);const s=c(i,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function RR(i){const e={},o=c(i,["image"]);o!=null&&f(e,["_self"],tn(o));const s=c(i,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function MR(i){const e={},o=c(i,["image"]);o!=null&&f(e,["image"],La(o));const s=c(i,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function DR(i){const e={},o=c(i,["image"]);o!=null&&f(e,["image"],tn(o));const s=c(i,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function IT(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["uri"],o);const s=c(i,["videoBytes"]);s!=null&&f(e,["encodedVideo"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function LT(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["gcsUri"],o);const s=c(i,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IR="Content-Type",LR="X-Server-Timeout",UR="User-Agent",Rc="x-goog-api-client",qR="1.30.0",PR=`google-genai-sdk/${qR}`,BR="v1beta1",zR="v1beta",Og=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class GR{constructor(e){var o,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:BR,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:zR,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,s){const a=[this.getRequestUrlInternal(o)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,o,s);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))a.searchParams.append(d,String(h));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,a.toString(),e.abortSignal),this.unaryApiCall(a,u,e.httpMethod)}patchHttpOptions(e,o){const s=JSON.parse(JSON.stringify(e));for(const[a,u]of Object.entries(o))typeof u=="object"?s[a]=Object.assign(Object.assign({},s[a]),u):u!==void 0&&(s[a]=u);return s}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,o,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,a.toString(),e.abortSignal),this.streamApiCall(a,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,s,a){if(o&&o.timeout||a){const u=new AbortController,d=u.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const h=setTimeout(()=>u.abort(),o.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{u.abort()}),e.signal=d}return o&&o.extraBody!==null&&HR(e,o.extraBody),e.headers=await this.getHeadersInternal(o,s),e}async unaryApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async a=>(await kg(a),new Ac(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async a=>(await kg(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var o;return xo(this,arguments,function*(){const a=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),u=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:y}=yield ke(a.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=u.decode(y,{stream:!0});try{const S=JSON.parse(g);if("error"in S){const E=JSON.parse(JSON.stringify(S.error)),A=E.status,R=E.code,w=`got status: ${A}. ${JSON.stringify(S)}`;if(R>=400&&R<600)throw new Ma({message:w,status:R})}}catch(S){if(S.name==="ApiError")throw S}d+=g;let v=d.match(Og);for(;v;){const S=v[1];try{const E=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new Ac(E)),d=d.slice(v[0].length),v=d.match(Og)}catch(E){throw new Error(`exception parsing stream chunk ${S}. ${E}`)}}}}finally{a.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},o=PR+" "+this.clientOptions.userAgentExtra;return e[UR]=o,e[Rc]=o,e[IR]="application/json",e}async getHeadersInternal(e,o){const s=new Headers;if(e&&e.headers){for(const[a,u]of Object.entries(e.headers))s.append(a,u);e.timeout&&e.timeout>0&&s.append(LR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(e){var o;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(e,o){var s;const a={};o!=null&&(a.mimeType=o.mimeType,a.name=o.name,a.displayName=o.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);a.sizeBytes=String(d.size);const h=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const y={file:a},g=this.getFileName(e),v=ie("upload/v1beta/files",y._url),S=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,g,y,o==null?void 0:o.httpOptions);return u.upload(e,S,this)}async uploadFileToFileSearchStore(e,o,s){var a;const u=this.clientOptions.uploader,d=await u.stat(o),h=String(d.size),y=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:d.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const g=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(o),S={};s!=null&&s.customMetadata&&(S.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(S.chunkingConfig=s.chunkingConfig);const E=await this.fetchUploadUrl(g,h,y,v,S,s==null?void 0:s.httpOptions);return u.uploadToFileSearchStore(o,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,s,a,u,d){var h;let y={};d?y=d:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const g=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:y});if(!g||!(g!=null&&g.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=g==null?void 0:g.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function kg(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const o=i.status;let s;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=JSON.stringify(s);throw o>=400&&o<600?new Ma({message:a,status:o}):new Error(a)}}function HR(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof i.body=="string"&&i.body.length>0)try{const u=JSON.parse(i.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,d){const h=Object.assign({},u);for(const y in d)if(Object.prototype.hasOwnProperty.call(d,y)){const g=d[y],v=h[y];g&&typeof g=="object"&&!Array.isArray(g)&&v&&typeof v=="object"&&!Array.isArray(v)?h[y]=s(v,g):(v&&g&&typeof v!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof g}. Overwriting.`),h[y]=g)}return h}const a=s(o,e);i.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VR="mcp_used/unknown";let OR=!1;function UT(i){for(const e of i)if(kR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return OR}function qT(i){var e;const o=(e=i[Rc])!==null&&e!==void 0?e:"";i[Rc]=(o+` ${VR}`).trimStart()}function kR(i){return i!==null&&typeof i=="object"&&i instanceof Xc}function FR(i,e=100){return xo(this,arguments,function*(){let s,a=0;for(;a<e;){const u=yield ke(i.listTools({cursor:s}));for(const d of u.tools)yield yield ke(d),a++;if(!u.nextCursor)break;s=u.nextCursor}})}class Xc{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Xc(e,o)}async initialize(){var e,o,s,a;if(this.mcpTools.length>0)return;const u={},d=[];for(const v of this.mcpClients)try{for(var h=!0,y=(o=void 0,Is(FR(v))),g;g=await y.next(),e=g.done,!e;h=!0){a=g.value,h=!1;const S=a;d.push(S);const E=S.name;if(u[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);u[E]=v}}catch(S){o={error:S}}finally{try{!h&&!e&&(s=y.return)&&await s.call(y)}finally{if(o)throw o.error}}this.mcpTools=d,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),Pw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const d=await a.callTool({name:s.name,arguments:s.args},void 0,u);o.push({functionResponse:{name:s.name,response:d.isError?{error:d}:d}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QR(i,e,o){const s=new bw;let a;o.data instanceof Blob?a=JSON.parse(await o.data.text()):a=JSON.parse(o.data),Object.assign(s,a),e(s)}class JR{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s}async connect(e){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),d=KR(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${a}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${h}`;let g=()=>{};const v=new Promise(L=>{g=L}),S=e.callbacks,E=function(){g({})},A=this.apiClient,R={onopen:E,onmessage:L=>{QR(A,S.onmessage,L)},onerror:(o=S==null?void 0:S.onerror)!==null&&o!==void 0?o:function(L){},onclose:(s=S==null?void 0:S.onclose)!==null&&s!==void 0?s:function(L){}},w=this.webSocketFactory.create(y,$R(d),R);w.connect(),await v;const K={setup:{model:Re(this.apiClient,e.model)}};return w.send(JSON.stringify(K)),new YR(w,this.apiClient)}}class YR{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=LN(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=IN(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(_o.PLAY)}pause(){this.sendPlaybackControl(_o.PAUSE)}stop(){this.sendPlaybackControl(_o.STOP)}resetContext(){this.sendPlaybackControl(_o.RESET_CONTEXT)}close(){this.conn.close()}}function $R(i){const e={};return i.forEach((o,s)=>{e[s]=o}),e}function KR(i){const e=new Headers;for(const[o,s]of Object.entries(i))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ZR(i,e,o){const s=new Nw;let a;o.data instanceof Blob?a=await o.data.text():o.data instanceof ArrayBuffer?a=new TextDecoder().decode(o.data):a=o.data;const u=JSON.parse(a);if(i.isVertexAI()){const d=PN(u);Object.assign(s,d)}else Object.assign(s,u);e(s)}class WR{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s,this.music=new JR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,s,a,u,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let v;const S=this.apiClient.getHeaders();e.config&&e.config.tools&&UT(e.config.tools)&&qT(S);const E=n1(S);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v);else{const F=this.apiClient.getApiKey();let ee="BidiGenerateContent",ce="key";F!=null&&F.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ee="BidiGenerateContentConstrained",ce="access_token"),v=`${y}/ws/google.ai.generativelanguage.${g}.GenerativeService.${ee}?${ce}=${F}`}let A=()=>{};const R=new Promise(F=>{A=F}),w=e.callbacks,B=function(){var F;(F=w==null?void 0:w.onopen)===null||F===void 0||F.call(w),A({})},Y=this.apiClient,K={onopen:B,onmessage:F=>{ZR(Y,w.onmessage,F)},onerror:(o=w==null?void 0:w.onerror)!==null&&o!==void 0?o:function(F){},onclose:(s=w==null?void 0:w.onclose)!==null&&s!==void 0?s:function(F){}},L=this.webSocketFactory.create(v,t1(E),K);L.connect(),await R;let O=Re(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const F=this.apiClient.getProject(),ee=this.apiClient.getLocation();O=`projects/${F}/locations/${ee}/`+O}let Z={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ga.AUDIO]}:e.config.responseModalities=[ga.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],V=[];for(const F of j)if(this.isCallableTool(F)){const ee=F;V.push(await ee.tool())}else V.push(F);V.length>0&&(e.config.tools=V);const z={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=DN(this.apiClient,z):Z=MN(this.apiClient,z),delete Z.config,L.send(JSON.stringify(Z)),new e1(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jR={turnComplete:!0};class e1{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=Kt(o.turns),e.isVertexAI()||(s=s.map(a=>Da(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(XR)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},jR),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:qN(e)}:o={realtimeInput:UN(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function t1(i){const e={};return i.forEach((o,s)=>{e[s]=o}),e}function n1(i){const e=new Headers;for(const[o,s]of Object.entries(i))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fg=10;function Qg(i){var e,o,s;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const d of(o=i==null?void 0:i.tools)!==null&&o!==void 0?o:[])if(No(d)){a=!0;break}if(!a)return!0;const u=(s=i==null?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function No(i){return"callTool"in i&&typeof i.callTool=="function"}function i1(i){var e,o,s;return(s=(o=(e=i.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(a=>No(a)))!==null&&s!==void 0?s:!1}function Jg(i){var e;const o=[];return!((e=i==null?void 0:i.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((s,a)=>{if(No(s))return;const u=s;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(a)}),o}function Yg(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o1 extends Dn{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var s,a,u,d,h;const y=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!i1(o)||Qg(o.config))return await this.generateContentInternal(y);const g=Jg(o);if(g.length>0){const w=g.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let v,S;const E=Kt(y.contents),A=(u=(a=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&u!==void 0?u:Fg;let R=0;for(;R<A&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const w=v.candidates[0].content,B=[];for(const Y of(h=(d=o.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(No(Y)){const L=await Y.callTool(v.functionCalls);B.push(...L)}R++,S={role:"user",parts:B},y.contents=Kt(y.contents),y.contents.push(w),y.contents.push(S),Yg(y.config)&&(E.push(w),E.push(S))}return Yg(y.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async o=>{var s,a,u,d,h;if(this.maybeMoveToResponseJsonSchem(o),Qg(o.config)){const S=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(S)}const y=Jg(o);if(y.length>0){const S=y.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const g=(u=(a=(s=o==null?void 0:o.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,v=(h=(d=o==null?void 0:o.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(g&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var a;let u;const d=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((a=y==null?void 0:y.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?u=y==null?void 0:y.safetyAttributes:d.push(y);let h;return u?h={generatedImages:d,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async o=>{var s;const d={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((s=d.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Ui(Mn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const a={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async o=>{var s,a,u,d,h,y;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((a=o.video)===null||a===void 0)&&a.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((d=(u=o.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.uri&&(!((y=(h=o.source)===null||h===void 0?void 0:h.video)===null||y===void 0)&&y.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,s,a;const u=(o=e.config)===null||o===void 0?void 0:o.tools;if(!u)return e;const d=await Promise.all(u.map(async y=>No(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&UT(e.config.tools)){const y=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let g=Object.assign({},y);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),qT(g),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return h}async initAfcToolsMap(e){var o,s,a;const u=new Map;for(const d of(s=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(No(d)){const h=d,y=await h.tool();for(const g of(a=y.functionDeclarations)!==null&&a!==void 0?a:[]){if(!g.name)throw new Error("Function declaration name is required.");if(u.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);u.set(g.name,h)}}return u}async processAfcStream(e){var o,s,a;const u=(a=(s=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Fg;let d=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(g,v,S){var E,A;return xo(this,arguments,function*(){for(var R,w,B,Y;h<u;){d&&(h++,d=!1);const Z=yield ke(g.processParamsMaybeAddMcpUsage(S)),j=yield ke(g.generateContentStreamInternal(Z)),V=[],z=[];try{for(var K=!0,L=(w=void 0,Is(j)),O;O=yield ke(L.next()),R=O.done,!R;K=!0){Y=O.value,K=!1;const F=Y;if(yield yield ke(F),F.candidates&&(!((E=F.candidates[0])===null||E===void 0)&&E.content)){z.push(F.candidates[0].content);for(const ee of(A=F.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(h<u&&ee.functionCall){if(!ee.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ee.functionCall.name)){const ce=yield ke(v.get(ee.functionCall.name).callTool([ee.functionCall]));V.push(...ce)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ee.functionCall.name}`)}}}}catch(F){w={error:F}}finally{try{!K&&!R&&(B=L.return)&&(yield ke(B.call(L)))}finally{if(w)throw w.error}}if(V.length>0){d=!0;const F=new Rs;F.candidates=[{content:{role:"user",parts:V}}],yield yield ke(F);const ee=[];ee.push(...z),ee.push({role:"user",parts:V});const ce=Kt(S.contents).concat(ee);S.contents=ce}else break}})})(this,y,e)}async generateContentInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Gg(this.apiClient,e);return h=ie("{model}:generateContent",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Vg(v),E=new Rs;return Object.assign(E,S),E})}else{const g=zg(this.apiClient,e);return h=ie("{model}:generateContent",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Hg(v),E=new Rs;return Object.assign(E,S),E})}}async generateContentStreamInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Gg(this.apiClient,e);return h=ie("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),d.then(function(S){return xo(this,arguments,function*(){var E,A,R,w;try{for(var B=!0,Y=Is(S),K;K=yield ke(Y.next()),E=K.done,!E;B=!0){w=K.value,B=!1;const L=w,O=Vg(yield ke(L.json()));O.sdkHttpResponse={headers:L.headers};const Z=new Rs;Object.assign(Z,O),yield yield ke(Z)}}catch(L){A={error:L}}finally{try{!B&&!E&&(R=Y.return)&&(yield ke(R.call(Y)))}finally{if(A)throw A.error}}})})}else{const g=zg(this.apiClient,e);return h=ie("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),d.then(function(S){return xo(this,arguments,function*(){var E,A,R,w;try{for(var B=!0,Y=Is(S),K;K=yield ke(Y.next()),E=K.done,!E;B=!0){w=K.value,B=!1;const L=w,O=Hg(yield ke(L.json()));O.sdkHttpResponse={headers:L.headers};const Z=new Rs;Object.assign(Z,O),yield yield ke(Z)}}catch(L){A={error:L}}finally{try{!B&&!E&&(R=Y.return)&&(yield ke(R.call(Y)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=db(this.apiClient,e);return h=ie("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=hb(v),E=new Cg;return Object.assign(E,S),E})}else{const g=fb(this.apiClient,e);return h=ie("{model}:batchEmbedContents",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=mb(v),E=new Cg;return Object.assign(E,S),E})}}async generateImagesInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=wb(this.apiClient,e);return h=ie("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Nb(v),E=new _g;return Object.assign(E,S),E})}else{const g=Ab(this.apiClient,e);return h=ie("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=xb(v),E=new _g;return Object.assign(E,S),E})}}async editImageInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=ab(this.apiClient,e);return u=ie("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const g=rb(y),v=new gw;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=wR(this.apiClient,e);return u=ie("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const g=xR(y),v=new yw;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=lR(this.apiClient,e);return u=ie("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const g=aR(y),v=new vw;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=mR(this.apiClient,e);return u=ie("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const g=hR(y),v=new Sw;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Fb(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>bc(v))}else{const g=kb(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>Nc(v))}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=jb(this.apiClient,e);return h=ie("{models_url}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=tR(v),E=new Ag;return Object.assign(E,S),E})}else{const g=Wb(this.apiClient,e);return h=ie("{models_url}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=eR(v),E=new Ag;return Object.assign(E,S),E})}}async update(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=_R(this.apiClient,e);return h=ie("{model}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>bc(v))}else{const g=CR(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>Nc(v))}}async delete(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=ib(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=sb(v),E=new wg;return Object.assign(E,S),E})}else{const g=nb(this.apiClient,e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=ob(v),E=new wg;return Object.assign(E,S),E})}}async countTokens(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=jN(this.apiClient,e);return h=ie("{model}:countTokens",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=tb(v),E=new xg;return Object.assign(E,S),E})}else{const g=WN(this.apiClient,e);return h=ie("{model}:countTokens",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=eb(v),E=new xg;return Object.assign(E,S),E})}}async computeTokens(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=QN(this.apiClient,e);return u=ie("{model}:computeTokens",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const g=JN(y),v=new Tw;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=Lb(this.apiClient,e);return h=ie("{model}:predictLongRunning",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>{const S=Db(v),E=new ya;return Object.assign(E,S),E})}else{const g=Ib(this.apiClient,e);return h=ie("{model}:predictLongRunning",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>{const S=Mb(v),E=new ya;return Object.assign(E,S),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s1 extends Dn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:a,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:a,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=cw(e);return h=ie("{operationName}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d}else{const g=uw(e);return h=ie("{operationName}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=nw(e);return u=ie("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l1(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function a1(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>g1(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function r1(i,e,o){const s={},a=c(e,["expireTime"]);o!==void 0&&a!=null&&f(o,["expireTime"],a);const u=c(e,["newSessionExpireTime"]);o!==void 0&&u!=null&&f(o,["newSessionExpireTime"],u);const d=c(e,["uses"]);o!==void 0&&d!=null&&f(o,["uses"],d);const h=c(e,["liveConnectConstraints"]);o!==void 0&&h!=null&&f(o,["bidiGenerateContentSetup"],p1(i,h));const y=c(e,["lockAdditionalFields"]);return o!==void 0&&y!=null&&f(o,["fieldMask"],y),s}function u1(i,e){const o={},s=c(e,["config"]);return s!=null&&f(o,["config"],r1(i,s,o)),o}function c1(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function f1(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d1(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function m1(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function h1(i,e){const o={},s=c(i,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=c(i,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const h=c(i,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const g=c(i,["mediaResolution"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","mediaResolution"],g);const v=c(i,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","speechConfig"],Kc(S));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=c(i,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const R=c(i,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],a1(mt(R)));const w=c(i,["tools"]);if(e!==void 0&&w!=null){let j=Mo(w);Array.isArray(j)&&(j=j.map(V=>v1(Ro(V)))),f(e,["setup","tools"],j)}const B=c(i,["sessionResumption"]);e!==void 0&&B!=null&&f(e,["setup","sessionResumption"],y1(B));const Y=c(i,["inputAudioTranscription"]);e!==void 0&&Y!=null&&f(e,["setup","inputAudioTranscription"],Y);const K=c(i,["outputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","outputAudioTranscription"],K);const L=c(i,["realtimeInputConfig"]);e!==void 0&&L!=null&&f(e,["setup","realtimeInputConfig"],L);const O=c(i,["contextWindowCompression"]);e!==void 0&&O!=null&&f(e,["setup","contextWindowCompression"],O);const Z=c(i,["proactivity"]);return e!==void 0&&Z!=null&&f(e,["setup","proactivity"],Z),o}function p1(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["setup","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&f(o,["config"],h1(a,o)),o}function g1(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],c1(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],f1(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],l1(y));const g=c(i,["text"]);g!=null&&f(e,["text"],g);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function y1(i){const e={},o=c(i,["handle"]);if(o!=null&&f(e,["handle"],o),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function v1(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],d1(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],m1(y));const g=c(i,["urlContext"]);return g!=null&&f(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S1(i){const e=[];for(const o in i)if(Object.prototype.hasOwnProperty.call(i,o)){const s=i[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(u=>`${o}.${u}`);e.push(...a)}else e.push(o)}return e.join(",")}function T1(i,e){let o=null;const s=i.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(i.bidiGenerateContentSetup=u,o=u):delete i.bidiGenerateContentSetup}else s!==void 0&&delete i.bidiGenerateContentSetup;const a=i.fieldMask;if(o){const u=S1(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)u?i.fieldMask=u:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(g=>d.includes(g)?`generationConfig.${g}`:g));const y=[];u&&y.push(u),h.length>0&&y.push(...h),y.length>0?i.fieldMask=y.join(","):delete i.fieldMask}else delete i.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?i.fieldMask=a.join(","):delete i.fieldMask;return i}class E1 extends Dn{constructor(e){super(),this.apiClient=e}async create(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=u1(this.apiClient,e);u=ie("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const y=T1(h,e.config);return a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C1(i,e){const o={},s=c(i,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),o}function _1(i){const e={},o=c(i,["config"]);return o!=null&&C1(o,e),e}function A1(i,e){const o={},s=c(i,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),o}function w1(i){const e={},o=c(i,["name"]);o!=null&&f(e,["_url","name"],o);const s=c(i,["config"]);return s!=null&&A1(s,e),e}function x1(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","name"],o),e}function N1(i,e){const o={},s=c(i,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const a=c(i,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),o}function b1(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],M1(d)),e}function R1(i){const e={},o=c(i,["fileSearchStoreName"]);o!=null&&f(e,["_url","file_search_store_name"],o);const s=c(i,["fileName"]);s!=null&&f(e,["fileName"],s);const a=c(i,["config"]);return a!=null&&N1(a,e),e}function M1(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["parent"]);s!=null&&f(e,["parent"],s);const a=c(i,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function D1(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function I1(i){const e={},o=c(i,["config"]);return o!=null&&D1(o,e),e}function L1(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["fileSearchStores"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["fileSearchStores"],u)}return e}function U1(i,e){const o={},s=c(i,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const a=c(i,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const u=c(i,["customMetadata"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>y)),f(e,["customMetadata"],h)}const d=c(i,["chunkingConfig"]);return e!==void 0&&d!=null&&f(e,["chunkingConfig"],d),o}function q1(i){const e={},o=c(i,["fileSearchStoreName"]);o!=null&&f(e,["_url","file_search_store_name"],o);const s=c(i,["config"]);return s!=null&&U1(s,e),e}function P1(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B1(i,e){const o={},s=c(i,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),o}function z1(i){const e={},o=c(i,["name"]);o!=null&&f(e,["_url","name"],o);const s=c(i,["config"]);return s!=null&&B1(s,e),e}function G1(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","name"],o),e}function H1(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function V1(i){const e={},o=c(i,["parent"]);o!=null&&f(e,["_url","parent"],o);const s=c(i,["config"]);return s!=null&&H1(s,e),e}function O1(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["documents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k1 extends Dn{constructor(e){super(),this.apiClient=e,this.list=async o=>new Ui(Mn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=G1(e);return u=ie("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var o,s;let a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=z1(e);a=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=V1(e);return u=ie("{parent}/documents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const g=O1(y),v=new Ew;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F1 extends Dn{constructor(e,o=new k1(e)){super(),this.apiClient=e,this.documents=o,this.list=async(s={})=>new Ui(Mn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_1(e);return u=ie("fileSearchStores",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async get(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=x1(e);return u=ie("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var o,s;let a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=w1(e);a=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=I1(e);return u=ie("fileSearchStores",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const g=L1(y),v=new Cw;return Object.assign(v,g),v})}}async uploadToFileSearchStoreInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=q1(e);return u=ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const g=P1(y),v=new _w;return Object.assign(v,g),v})}}async importFile(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=R1(e);return u=ie("{file_search_store_name}:importFile",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const g=b1(y),v=new Fc;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q1(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function J1(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function Y1(i,e,o){const s={};if(c(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=c(i,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),c(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(i,["epochCount"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","epochCount"],u);const d=c(i,["learningRateMultiplier"]);if(d!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],d),c(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=c(i,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const y=c(i,["learningRate"]);if(e!==void 0&&y!=null&&f(e,["tuningTask","hyperparameters","learningRate"],y),c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function $1(i,e,o){const s={};let a=c(o,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const A=c(i,["validationDataset"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec"],$g(A))}else if(a==="PREFERENCE_TUNING"){const A=c(i,["validationDataset"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec"],$g(A))}const u=c(i,["tunedModelDisplayName"]);e!==void 0&&u!=null&&f(e,["tunedModelDisplayName"],u);const d=c(i,["description"]);e!==void 0&&d!=null&&f(e,["description"],d);let h=c(o,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=c(i,["epochCount"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(h==="PREFERENCE_TUNING"){const A=c(i,["epochCount"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let y=c(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=c(i,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(y==="PREFERENCE_TUNING"){const A=c(i,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let g=c(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=c(i,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(g==="PREFERENCE_TUNING"){const A=c(i,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=c(i,["adapterSize"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=c(i,["adapterSize"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=c(i,["labels"]);e!==void 0&&S!=null&&f(e,["labels"],S);const E=c(i,["beta"]);return e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function K1(i,e){const o={},s=c(i,["baseModel"]);s!=null&&f(o,["baseModel"],s);const a=c(i,["preTunedModel"]);a!=null&&f(o,["preTunedModel"],a);const u=c(i,["trainingDataset"]);u!=null&&lM(u);const d=c(i,["config"]);return d!=null&&Y1(d,o),o}function X1(i,e){const o={},s=c(i,["baseModel"]);s!=null&&f(o,["baseModel"],s);const a=c(i,["preTunedModel"]);a!=null&&f(o,["preTunedModel"],a);const u=c(i,["trainingDataset"]);u!=null&&aM(u,o,e);const d=c(i,["config"]);return d!=null&&$1(d,o,e),o}function Z1(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function W1(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function j1(i,e,o){const s={},a=c(i,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(i,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function eM(i,e,o){const s={},a=c(i,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(i,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function tM(i,e){const o={},s=c(i,["config"]);return s!=null&&j1(s,o),o}function nM(i,e){const o={},s=c(i,["config"]);return s!=null&&eM(s,o),o}function iM(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["nextPageToken"]);a!=null&&f(o,["nextPageToken"],a);const u=c(i,["tunedModels"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>PT(h))),f(o,["tuningJobs"],d)}return o}function oM(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["nextPageToken"]);a!=null&&f(o,["nextPageToken"],a);const u=c(i,["tuningJobs"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>Mc(h))),f(o,["tuningJobs"],d)}return o}function sM(i,e){const o={},s=c(i,["name"]);s!=null&&f(o,["model"],s);const a=c(i,["name"]);return a!=null&&f(o,["endpoint"],a),o}function lM(i,e){const o={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(i,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(o,["examples","examples"],a)}return o}function aM(i,e,o){const s={};let a=c(o,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const d=c(i,["gcsUri"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(a==="PREFERENCE_TUNING"){const d=c(i,["gcsUri"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const d=c(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(u==="PREFERENCE_TUNING"){const d=c(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}if(c(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function PT(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["name"]);a!=null&&f(o,["name"],a);const u=c(i,["state"]);u!=null&&f(o,["state"],yT(u));const d=c(i,["createTime"]);d!=null&&f(o,["createTime"],d);const h=c(i,["tuningTask","startTime"]);h!=null&&f(o,["startTime"],h);const y=c(i,["tuningTask","completeTime"]);y!=null&&f(o,["endTime"],y);const g=c(i,["updateTime"]);g!=null&&f(o,["updateTime"],g);const v=c(i,["description"]);v!=null&&f(o,["description"],v);const S=c(i,["baseModel"]);S!=null&&f(o,["baseModel"],S);const E=c(i,["_self"]);return E!=null&&f(o,["tunedModel"],sM(E)),o}function Mc(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["name"]);a!=null&&f(o,["name"],a);const u=c(i,["state"]);u!=null&&f(o,["state"],yT(u));const d=c(i,["createTime"]);d!=null&&f(o,["createTime"],d);const h=c(i,["startTime"]);h!=null&&f(o,["startTime"],h);const y=c(i,["endTime"]);y!=null&&f(o,["endTime"],y);const g=c(i,["updateTime"]);g!=null&&f(o,["updateTime"],g);const v=c(i,["error"]);v!=null&&f(o,["error"],v);const S=c(i,["description"]);S!=null&&f(o,["description"],S);const E=c(i,["baseModel"]);E!=null&&f(o,["baseModel"],E);const A=c(i,["tunedModel"]);A!=null&&f(o,["tunedModel"],A);const R=c(i,["preTunedModel"]);R!=null&&f(o,["preTunedModel"],R);const w=c(i,["supervisedTuningSpec"]);w!=null&&f(o,["supervisedTuningSpec"],w);const B=c(i,["preferenceOptimizationSpec"]);B!=null&&f(o,["preferenceOptimizationSpec"],B);const Y=c(i,["tuningDataStats"]);Y!=null&&f(o,["tuningDataStats"],Y);const K=c(i,["encryptionSpec"]);K!=null&&f(o,["encryptionSpec"],K);const L=c(i,["partnerModelTuningSpec"]);L!=null&&f(o,["partnerModelTuningSpec"],L);const O=c(i,["customBaseModel"]);O!=null&&f(o,["customBaseModel"],O);const Z=c(i,["experiment"]);Z!=null&&f(o,["experiment"],Z);const j=c(i,["labels"]);j!=null&&f(o,["labels"],j);const V=c(i,["outputUri"]);V!=null&&f(o,["outputUri"],V);const z=c(i,["pipelineJob"]);z!=null&&f(o,["pipelineJob"],z);const F=c(i,["serviceAccount"]);F!=null&&f(o,["serviceAccount"],F);const ee=c(i,["tunedModelDisplayName"]);ee!=null&&f(o,["tunedModelDisplayName"],ee);const ce=c(i,["veoTuningSpec"]);return ce!=null&&f(o,["veoTuningSpec"],ce),o}function rM(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["name"]);a!=null&&f(o,["name"],a);const u=c(i,["metadata"]);u!=null&&f(o,["metadata"],u);const d=c(i,["done"]);d!=null&&f(o,["done"],d);const h=c(i,["error"]);return h!=null&&f(o,["error"],h),o}function $g(i,e){const o={},s=c(i,["gcsUri"]);s!=null&&f(o,["validationDatasetUri"],s);const a=c(i,["vertexDatasetResource"]);return a!=null&&f(o,["validationDatasetUri"],a),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uM extends Dn{constructor(e){super(),this.apiClient=e,this.get=async o=>await this.getInternal(o),this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const a={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:a});return u.baseModel=void 0,await this.tuneInternal(u)}else{const a=Object.assign({},o);return await this.tuneInternal(a)}else{const a=Object.assign({},o),u=await this.tuneMldevInternal(a);let d="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?d=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(d=u.name.split("/operations/")[0]),{name:d,state:_c.JOB_STATE_QUEUED}}}}async getInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=W1(e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>Mc(v))}else{const g=Z1(e);return h=ie("{name}",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>PT(v))}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const g=nM(e);return h=ie("tuningJobs",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=oM(v),E=new Ng;return Object.assign(E,S),E})}else{const g=tM(e);return h=ie("tunedModels",g._url),y=g._query,delete g._url,delete g._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=iM(v),E=new Ng;return Object.assign(E,S),E})}}async cancel(e){var o,s,a,u;let d="",h={};if(this.apiClient.isVertexAI()){const y=J1(e);d=ie("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=Q1(e);d=ie("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async tuneInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=X1(e,e);return u=ie("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>Mc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=K1(e);return u=ie("tunedModels",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>rM(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cM{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fM=1024*1024*8,dM=3,mM=1e3,hM=2,Sa="x-goog-upload-status";async function pM(i,e,o){var s;const a=await BT(i,e,o),u=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Sa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function gM(i,e,o){var s;const a=await BT(i,e,o),u=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Sa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=fT(u),h=new Qc;return Object.assign(h,d),h}async function BT(i,e,o){var s,a;let u=0,d=0,h=new Ac(new Response),y="upload";for(u=i.size;d<u;){const g=Math.min(fM,u-d),v=i.slice(d,d+g);d+g>=u&&(y+=", finalize");let S=0,E=mM;for(;S<dM&&(h=await o.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(d),"Content-Length":String(g)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Sa]));)S++,await vM(E),E=E*hM;if(d+=g,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Sa])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function yM(i){return{size:i.size,type:i.type}}function vM(i){return new Promise(e=>setTimeout(e,i))}class SM{async upload(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pM(e,o,s)}async uploadToFileSearchStore(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gM(e,o,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TM{create(e,o,s){return new EM(e,o,s)}}class EM{constructor(e,o,s){this.url=e,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kg="x-goog-api-key";class CM{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(Kg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Kg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _M="gl-node/";class AM{constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const s=ew(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const a=new CM(this.apiKey);this.apiClient=new GR({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:_M+"web",uploader:new SM,downloader:new cM}),this.models=new o1(this.apiClient),this.live=new WR(this.apiClient,a,new TM),this.batches=new Rx(this.apiClient),this.chats=new cN(this.models,this.apiClient),this.caches=new aN(this.apiClient),this.files=new TN(this.apiClient),this.operations=new s1(this.apiClient),this.authTokens=new E1(this.apiClient),this.tunings=new uM(this.apiClient),this.fileSearchStores=new F1(this.apiClient)}}const zT=()=>new AM({apiKey:"PLACEHOLDER_API_KEY"});async function wM(i,e,o){var h,y,g,v;const s=e.openaiApiKey;let a=(h=e.openaiBaseUrl)==null?void 0:h.trim();const u=e.openaiModel||"gpt-3.5-turbo";if(!a)throw new Error("OpenAI Base URL is missing in settings. Please configure it (e.g., https://api.openai.com/v1).");/^https?:\/\//i.test(a)||(a=`https://${a}`),a=a.replace(/\/+$/,"");const d=`You are an empathetic, articulate, and observant writer. 
Your goal is to turn mundane notes into a meaningful narrative that feels personal and warm.
You MUST respond with a valid JSON object matching this schema:
${JSON.stringify(o,null,2)}
Do not wrap the JSON in markdown code blocks. Just return the raw JSON string.`;try{const S=await fetch(`${a}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({model:u,messages:[{role:"system",content:d},{role:"user",content:i}],temperature:.7,response_format:{type:"json_object"}})});if(!S.ok){const w=await S.text();throw new Error(`OpenAI API Error: ${S.status} - ${w}`)}const A=(v=(g=(y=(await S.json()).choices)==null?void 0:y[0])==null?void 0:g.message)==null?void 0:v.content;if(!A)throw new Error("Empty response from OpenAI provider");const R=A.replace(/^```(?:json)?\s*/,"").replace(/\s*```$/,"").trim();return JSON.parse(R)}catch(S){throw console.error("OpenAI Generation Error:",S),S.name==="TypeError"&&S.message==="Failed to fetch"?new Error("Connection failed. Check your Base URL. If you are using a browser, ensure the API endpoint supports CORS."):S}}async function xM(i,e,o,s){var E;const a=s.openaiApiKey;let u=(E=s.openaiBaseUrl)==null?void 0:E.trim();if(!u)throw new Error("OpenAI Base URL is missing.");/^https?:\/\//i.test(u)||(u=`https://${u}`),u=u.replace(/\/+$/,"");const d=atob(i),h=new Array(d.length);for(let A=0;A<d.length;A++)h[A]=d.charCodeAt(A);const y=new Uint8Array(h),g=new Blob([y],{type:e}),v=new FormData,S=e.split("/")[1]||"webm";v.append("file",g,`recording.${S}`),v.append("model","whisper-1"),o==="zh"?v.append("language","zh"):v.append("language","en");try{const A=await fetch(`${u}/audio/transcriptions`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:v});if(!A.ok){const w=await A.text();throw new Error(`OpenAI Transcription Error: ${A.status} - ${w}`)}return(await A.json()).text||""}catch(A){throw console.error("OpenAI Transcription Error:",A),A.name==="TypeError"&&A.message==="Failed to fetch"?new Error("Connection failed during transcription. Check Base URL and CORS."):A}}const GT=async(i,e,o="default",s)=>{if(i.length===0)throw new Error("No fragments to summarize.");const a=i.map(E=>{const A=new Date(E.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),R=E.tags&&E.tags.length>0?` [Tags: ${E.tags.join(", ")}]`:"";return`[${A}] ${E.content}${R}`}).join(`
`),u=e==="zh"?"IMPORTANT: Write the entire response (title, content, mood, reflection, tags) in Simplified Chinese (Mandarin).":"Write in English.";let d="";o!=="default"&&(d=`ADOPT A SPECIFIC TONE: The user explicitly requested a "${o}" writing style. Ensure the vocabulary, sentence structure, and emotional weight reflect this specific persona/vibe.`);const h=`
    Here are my raw fragmented notes from today:
    
    ${a}
    
    Please weave these fragments into a cohesive, beautifully written, first-person diary entry.
    Infer the underlying mood and themes. 
    Add a title that captures the essence of the day.
    Include a short "reflection" that synthesizes a takeaway or philosophical thought based on the events.
    Extract 3-5 relevant keywords/tags.

    ${d}

    ${u}
  `,y={type:yt.OBJECT,properties:{title:{type:yt.STRING,description:"A creative title for the diary entry"},content:{type:yt.STRING,description:"The main body of the diary entry, rich in description and emotion."},mood:{type:yt.STRING,description:"One or two words describing the overall mood (e.g., Melancholic, Productive, Serene)"},reflection:{type:yt.STRING,description:"A profound or summarizing closing thought."},tags:{type:yt.ARRAY,items:{type:yt.STRING},description:"Key themes or topics from the day"}},required:["title","content","mood","reflection","tags"],propertyOrdering:["title","mood","content","reflection","tags"]};if(s&&s.provider==="openai")return wM(h,s,y);const g=zT();let v;const S=3;for(let E=0;E<S;E++)try{const R=(await g.models.generateContent({model:"gemini-2.5-flash",contents:[{parts:[{text:h}]}],config:{responseMimeType:"application/json",responseSchema:y,systemInstruction:"You are an empathetic, articulate, and observant writer. Your goal is to turn mundane notes into a meaningful narrative that feels personal and warm."}})).text;if(!R)throw new Error("Empty response from AI");return JSON.parse(R)}catch(A){console.warn(`Attempt ${E+1} failed:`,A),v=A,E<S-1&&await new Promise(R=>setTimeout(R,1e3*Math.pow(2,E)))}throw console.error("Gemini Service Error after retries:",v),v},NM=async(i,e,o,s)=>{if(s&&s.provider==="openai")return xM(i,e,o,s);const a=zT(),u=o==="zh"?"Transcribe this audio directly into Simplified Chinese text. Do not add any explanations.":"Transcribe this audio directly into English text. Do not add any explanations.";try{return(await a.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:e,data:i}},{text:u}]}})).text||""}catch(d){throw console.error("Transcription Error:",d),d}},ri=Lc((i,e)=>({currentDate:new Date().toISOString().split("T")[0],currentDayData:{fragments:[],diaryEntry:null},allDates:[],searchQuery:"",searchResults:[],isGenerating:!1,selectedTone:"default",error:null,setCurrentDate:o=>i({currentDate:o}),setSearchQuery:o=>i({searchQuery:o}),setSelectedTone:o=>i({selectedTone:o}),setError:o=>i({error:o}),loadCurrentDayData:async()=>{try{const{currentDate:o}=e();console.log("[loadCurrentDayData] Loading for date:",o);const[s,a]=await Promise.all([kA(o),JA(o)]);console.log("[loadCurrentDayData] Loaded fragments:",s),console.log("[loadCurrentDayData] Fragment count:",s.length),s.length>0&&console.log("[loadCurrentDayData] First fragment:",s[0]),i({currentDayData:{fragments:s,diaryEntry:a}})}catch(o){console.error("Failed to load day data:",o),i({error:"Failed to load day data"})}},loadAllDates:async()=>{try{const o=await YA();i({allDates:o})}catch(o){console.error("Failed to load dates:",o),i({error:"Failed to load dates"})}},addFragment:async(o,s=[])=>{const a={id:crypto.randomUUID(),content:o,timestamp:Date.now(),tags:s};try{const{currentDate:u}=e();await Ec(u,a),await e().loadCurrentDayData(),await e().loadAllDates()}catch(u){console.error("Failed to add fragment:",u),i({error:"Failed to add fragment"})}},deleteFragment:async o=>{try{await QA(o),await e().loadCurrentDayData(),await e().loadAllDates()}catch(s){console.error("Failed to delete fragment:",s),i({error:"Failed to delete fragment"})}},updateFragment:async(o,s,a)=>{try{await FA(o,s,a),await e().loadCurrentDayData()}catch(u){console.error("Failed to update fragment:",u),i({error:"Failed to update fragment"})}},generateDiary:async(o,s)=>{const{currentDayData:a,currentDate:u,selectedTone:d}=e();if(a.fragments.length!==0){i({isGenerating:!0,error:null});try{const h=await GT(a.fragments,o,d,s);await Ds(u,h),await e().loadCurrentDayData()}catch(h){console.error(h),i({error:"Failed to generate diary entry"})}finally{i({isGenerating:!1})}}},updateDiaryEntry:async o=>{try{const{currentDate:s}=e();await Ds(s,o),await e().loadCurrentDayData()}catch(s){console.error("Failed to update entry:",s),i({error:"Failed to update entry"})}},clearDayData:async()=>{try{const{currentDate:o}=e();await $A(o),await e().loadCurrentDayData(),await e().loadAllDates()}catch(o){console.error("Failed to clear day:",o),i({error:"Failed to clear day data"})}},performSearch:async(o,s)=>{if(!o.trim()){i({searchResults:[]});return}try{const[a,u]=await Promise.all([KA(o),XA(o)]),d=[],h=(y,g,v=40)=>{const S=y.toLowerCase().indexOf(g.toLowerCase());if(S===-1)return y.slice(0,100);const E=Math.max(0,S-v),A=Math.min(y.length,S+g.length+v);let R=y.slice(E,A);return E>0&&(R="..."+R),A<y.length&&(R=R+"..."),R};u.forEach(({date:y,entry:g})=>{const{title:v,content:S,mood:E,reflection:A,tags:R}=g,w=o.toLowerCase();v.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:v,matchField:s.titleLabel}):S.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:h(S,o),matchField:s.contentLabel}):E.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:E,matchField:s.moodLabel}):A.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:h(A,o),matchField:s.reflectionLabel}):R.some(B=>B.toLowerCase().includes(w))&&d.push({date:y,type:"diary",preview:R.join(", "),matchField:s.tagsLabel})}),a.forEach(({date:y,fragment:g})=>{var S;const v=o.toLowerCase();g.content.toLowerCase().includes(v)?d.push({date:y,type:"fragment",id:g.id,preview:h(g.content,o),matchField:s.fragment}):(S=g.tags)!=null&&S.some(E=>E.toLowerCase().includes(v))&&d.push({date:y,type:"fragment",id:g.id,preview:g.tags.join(", "),matchField:s.tagsLabel})}),i({searchResults:d})}catch(a){console.error("Search failed:",a),i({searchResults:[],error:"Search failed"})}},handleSearchResultSelect:o=>{i({currentDate:o,searchQuery:""}),e().loadCurrentDayData()},importData:async o=>{try{for(const[s,a]of Object.entries(o)){for(const u of a.fragments)await Ec(s,u);a.diaryEntry&&await Ds(s,a.diaryEntry)}await e().loadCurrentDayData(),await e().loadAllDates(),console.log("Import completed successfully")}catch(s){console.error("Failed to import data:",s),i({error:"Failed to import data"})}}}));var Xe=(i=>(i.COMPOSING="COMPOSING",i.GENERATING="GENERATING",i.READING="READING",i.ERROR="ERROR",i.SEARCH="SEARCH",i))(Xe||{});const zs=Lc((i,e)=>({viewState:Xe.COMPOSING,isHistoryOpen:!1,isSettingsOpen:!1,showClearConfirm:!1,setViewState:o=>i({viewState:o}),setHistoryOpen:o=>i({isHistoryOpen:o}),setSettingsOpen:o=>i({isSettingsOpen:o}),setShowClearConfirm:o=>i({showClearConfirm:o}),openHistory:()=>i({isHistoryOpen:!0}),closeHistory:()=>i({isHistoryOpen:!1}),openSettings:()=>i({isSettingsOpen:!0}),closeSettings:()=>i({isSettingsOpen:!1}),showClearConfirmation:()=>i({showClearConfirm:!0}),hideClearConfirmation:()=>i({showClearConfirm:!1}),backToFragments:()=>i({viewState:Xe.COMPOSING}),setToComposing:()=>i({viewState:Xe.COMPOSING}),setToReading:()=>i({viewState:Xe.READING})}));function bM(i,e){let o;try{o=i()}catch{return}return{getItem:a=>{var u;const d=y=>y===null?null:JSON.parse(y,void 0),h=(u=o.getItem(a))!=null?u:null;return h instanceof Promise?h.then(d):d(h)},setItem:(a,u)=>o.setItem(a,JSON.stringify(u,void 0)),removeItem:a=>o.removeItem(a)}}const Dc=i=>e=>{try{const o=i(e);return o instanceof Promise?o:{then(s){return Dc(s)(o)},catch(s){return this}}}catch(o){return{then(s){return this},catch(s){return Dc(s)(o)}}}},RM=(i,e)=>(o,s,a)=>{let u={storage:bM(()=>localStorage),partialize:w=>w,version:0,merge:(w,B)=>({...B,...w}),...e},d=!1;const h=new Set,y=new Set;let g=u.storage;if(!g)return i((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...w)},s,a);const v=()=>{const w=u.partialize({...s()});return g.setItem(u.name,{state:w,version:u.version})},S=a.setState;a.setState=(w,B)=>(S(w,B),v());const E=i((...w)=>(o(...w),v()),s,a);a.getInitialState=()=>E;let A;const R=()=>{var w,B;if(!g)return;d=!1,h.forEach(K=>{var L;return K((L=s())!=null?L:E)});const Y=((B=u.onRehydrateStorage)==null?void 0:B.call(u,(w=s())!=null?w:E))||void 0;return Dc(g.getItem.bind(g))(u.name).then(K=>{if(K)if(typeof K.version=="number"&&K.version!==u.version){if(u.migrate){const L=u.migrate(K.state,K.version);return L instanceof Promise?L.then(O=>[!0,O]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,K.state];return[!1,void 0]}).then(K=>{var L;const[O,Z]=K;if(A=u.merge(Z,(L=s())!=null?L:E),o(A,!0),O)return v()}).then(()=>{Y==null||Y(A,void 0),A=s(),d=!0,y.forEach(K=>K(A))}).catch(K=>{Y==null||Y(void 0,K)})};return a.persist={setOptions:w=>{u={...u,...w},w.storage&&(g=w.storage)},clearStorage:()=>{g==null||g.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>R(),hasHydrated:()=>d,onHydrate:w=>(h.add(w),()=>{h.delete(w)}),onFinishHydration:w=>(y.add(w),()=>{y.delete(w)})},u.skipHydration||R(),A||E},MM=RM,DM="https://api.302.ai/v1",IM="gemini-2.5-flash",LM="sk-Xc1xkQKZmbBk3TCP2njCcM1fuTsh9AcQMONlbZHhLjJbwHZ3",Io=Lc()(MM((i,e)=>({language:"en",apiConfig:{provider:"openai",openaiBaseUrl:DM,openaiApiKey:LM,openaiModel:IM},setLanguage:o=>{i({language:o})},setApiConfig:o=>{i({apiConfig:o})}}),{name:"nimo-settings",partialize:i=>({language:i.language,apiConfig:i.apiConfig})})),UM=()=>{const{language:i,setLanguage:e}=Io(),{searchQuery:o,setSearchQuery:s}=ri(),{openHistory:a,openSettings:u}=zs(),d=an(i);return _.jsxs("header",{className:"py-4 md:py-6 px-4 md:px-8 max-w-4xl mx-auto w-full flex flex-wrap md:flex-nowrap justify-between items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-4 select-none shrink-0",children:[_.jsx("button",{onClick:u,className:"text-gray-500 hover:text-indigo-600 transition-colors p-2 -ml-2 rounded-lg hover:bg-gray-100",title:d.settings,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),_.jsx("div",{className:"flex items-center gap-3",children:_.jsx("h1",{className:"text-2xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 tracking-tight",children:i==="zh"?"":"Nimo"})})]}),_.jsx("div",{className:"flex-grow order-3 md:order-2 w-full md:w-auto relative",children:_.jsxs("div",{className:"relative group",children:[_.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 text-gray-400 group-focus-within:text-indigo-500 transition-colors",children:_.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),_.jsx("input",{type:"text",value:o,onChange:h=>s(h.target.value),placeholder:d.searchPlaceholder,className:"block w-full pl-10 pr-8 py-2 border border-gray-200 rounded-full leading-5 bg-gray-50 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 focus:bg-white transition-all duration-200 text-sm"}),o&&_.jsx("button",{onClick:()=>s(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",title:d.clearSearch,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:_.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})]})}),_.jsxs("div",{className:"flex items-center gap-2 shrink-0 order-2 md:order-3",children:[_.jsx("button",{onClick:()=>e(i==="en"?"zh":"en"),className:"text-xs font-medium px-3 py-1.5 rounded-full border border-gray-200 hover:bg-gray-100 text-gray-600 transition-colors",children:i==="en"?"":"English"}),_.jsx("button",{onClick:a,className:"text-gray-500 hover:text-indigo-600 transition-colors p-2 rounded-lg hover:bg-gray-100",title:d.viewHistory,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})})]})]})},HT=i=>{const e=i.getFullYear(),o=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${e}-${o}-${s}`},VT=()=>HT(new Date),Gs=(i,e="en")=>{const[o,s,a]=i.split("-").map(Number),u=new Date(o,s-1,a),d=new Date;d.setHours(0,0,0,0);const h=new Date(d);h.setDate(d.getDate()-1);const y=iS[e];if(u.getTime()===d.getTime())return y.today;if(u.getTime()===h.getTime())return y.yesterday;const g=e==="zh"?"zh-CN":"en-US";return u.toLocaleDateString(g,{weekday:"long",month:"short",day:"numeric"})},Xg=(i,e)=>{const[o,s,a]=i.split("-").map(Number),u=new Date(o,s-1,a);return u.setDate(u.getDate()+e),HT(u)},qM=({selectedDate:i,onSelect:e,maxDate:o,language:s,onClose:a})=>{const[u,d,h]=i.split("-").map(Number),[y,g]=ve.useState(new Date(u,d-1,1)),v=s==="zh"?["","","","","","",""]:["Su","Mo","Tu","We","Th","Fr","Sa"],S=s==="zh"?["","","","","","","","","","","",""]:["January","February","March","April","May","June","July","August","September","October","November","December"],E=(z,F)=>new Date(z,F+1,0).getDate(),A=(z,F)=>new Date(z,F,1).getDay(),R=y.getFullYear(),w=y.getMonth(),B=E(R,w),Y=A(R,w),K=z=>`${R}-${String(w+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`===i,L=z=>`${R}-${String(w+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`>o,O=z=>{const F=new Date;return F.getDate()===z&&F.getMonth()===w&&F.getFullYear()===R},Z=z=>{z.stopPropagation(),g(new Date(R,w-1,1))},j=z=>{z.stopPropagation(),g(new Date(R,w+1,1))},V=z=>{if(L(z))return;const F=`${R}-${String(w+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`;e(F),a()};return _.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-2xl shadow-xl border border-gray-100 p-3 w-64 z-50 animate-in zoom-in-95 duration-200 select-none",onClick:z=>z.stopPropagation(),children:[_.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[_.jsx("button",{onClick:Z,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:_.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})}),_.jsxs("div",{className:"font-serif font-semibold text-sm text-gray-800",children:[S[w]," ",R]}),_.jsx("button",{onClick:j,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:_.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})})]}),_.jsx("div",{className:"grid grid-cols-7 mb-1",children:v.map(z=>_.jsx("div",{className:"text-center text-[10px] font-medium text-gray-400 py-1",children:z},z))}),_.jsxs("div",{className:"grid grid-cols-7 gap-0.5",children:[Array.from({length:Y}).map((z,F)=>_.jsx("div",{},`empty-${F}`)),Array.from({length:B}).map((z,F)=>{const ee=F+1,ce=K(ee),ae=L(ee),se=O(ee);return _.jsxs("button",{onClick:()=>V(ee),disabled:ae,className:`
                        h-8 w-8 rounded-full flex items-center justify-center text-xs transition-all relative mx-auto
                        ${ce?"bg-indigo-600 text-white shadow-sm font-bold":ae?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}
                        ${se&&!ce?"bg-indigo-50 text-indigo-700 font-semibold":""}
                    `,children:[ee,se&&!ce&&_.jsx("span",{className:"absolute bottom-1.5 left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-indigo-400 rounded-full"})]},ee)})]}),_.jsx("div",{className:"mt-3 pt-2 border-t border-gray-50 flex justify-center",children:_.jsx("button",{onClick:()=>{const z=new Date,F=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`;e(F),a()},className:"text-xs font-medium text-indigo-500 hover:text-indigo-700 transition-colors",children:s==="zh"?"":"Jump to Today"})})]})},PM=({currentDate:i,onPrev:e,onNext:o,canGoNext:s,language:a,onDateSelect:u})=>{const d=VT(),[h,y]=ve.useState(!1),g=ve.useRef(null);return ve.useEffect(()=>{const v=S=>{g.current&&!g.current.contains(S.target)&&y(!1)};return h&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[h]),_.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 select-none relative z-20",children:[_.jsx("button",{onClick:e,className:"p-1.5 text-gray-400 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-all focus:outline-none focus:ring-2 focus:ring-gray-200 shrink-0 active:scale-95","aria-label":"Previous day",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-4 h-4",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),_.jsxs("div",{ref:g,className:`
            relative group flex items-center justify-center gap-2 px-4 py-1.5 rounded-full transition-all text-center cursor-pointer border border-transparent min-w-[160px]
            ${h?"bg-white shadow-sm border-indigo-100 text-indigo-600":"hover:bg-white/60 hover:shadow-sm text-gray-700"}
        `,onClick:()=>y(!h),children:[_.jsxs("div",{className:"flex items-center gap-2 relative z-0",children:[_.jsx("h2",{className:"text-xl font-serif font-semibold whitespace-nowrap",children:Gs(i,a)}),_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:`w-3.5 h-3.5 transition-transform duration-200 ${h?"rotate-180":"text-gray-400 group-hover:text-indigo-600"}`,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),h&&_.jsx(qM,{selectedDate:i,maxDate:d,onSelect:u,language:a,onClose:()=>y(!1)})]}),_.jsx("button",{onClick:o,disabled:!s,className:`p-1.5 rounded-full transition-all focus:outline-none focus:ring-2 focus:ring-gray-200 shrink-0 active:scale-95 ${s?"text-gray-400 hover:text-gray-900 hover:bg-gray-100":"text-gray-200 cursor-not-allowed"}`,"aria-label":"Next day",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-4 h-4",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})},BM=({isOpen:i,onClose:e,dates:o,onSelectDate:s,activeDate:a,language:u})=>{const d=an(u);return i?_.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[_.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity",onClick:e}),_.jsxs("div",{className:"relative w-full max-w-sm bg-white shadow-2xl h-full overflow-y-auto slide-in-from-right duration-300 flex flex-col","data-state":"open",children:[_.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-white sticky top-0 z-10",children:[_.jsx("h2",{className:"font-serif text-xl font-semibold text-gray-800",children:d.historyTitle}),_.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-700 rounded-full hover:bg-gray-100",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),_.jsxs("div",{className:"p-4 space-y-3",children:[o.length===0&&_.jsx("p",{className:"text-center text-gray-400 py-8",children:d.noEntries}),o.map(h=>{const y=h===a;return _.jsxs("button",{onClick:()=>{s(h),e()},className:`w-full text-left p-4 rounded-xl transition-all border ${y?"bg-indigo-50 border-indigo-200 shadow-sm ring-1 ring-indigo-200":"bg-white border-gray-100 hover:border-gray-200 hover:shadow-sm"}`,children:[_.jsxs("div",{className:"flex justify-between items-start mb-1",children:[_.jsx("span",{className:`font-semibold ${y?"text-indigo-900":"text-gray-700"}`,children:Gs(h,u)}),_.jsx("span",{className:"text-xs text-gray-400 font-mono",children:h})]}),_.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Click to view"})]},h)})]})]})]}):null},zM=({isOpen:i,onClose:e,data:o,onImport:s,language:a,apiConfig:u,onSaveConfig:d})=>{const h=an(a),y=ve.useRef(null),[g,v]=ve.useState("idle"),[S,E]=ve.useState(u),[A,R]=ve.useState(!1);if(ve.useEffect(()=>{i&&(E(u),R(!1),v("idle"))},[i,u]),!i)return null;const w=()=>{d(S),R(!0),setTimeout(()=>R(!1),3e3)},B=()=>{if(!o){alert("Export functionality temporarily unavailable");return}const L=JSON.stringify(o,null,2),O=new Blob([L],{type:"application/json"}),Z=URL.createObjectURL(O),j=document.createElement("a");j.href=Z,j.download=`fragment-diary-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j)},Y=()=>{if(!o){alert("Export functionality temporarily unavailable");return}let L=`# Fragment to Diary Export
Generated on ${new Date().toLocaleDateString()}

`;Object.keys(o).sort().reverse().forEach(z=>{const F=o[z],ee=F.diaryEntry,ce=F.fragments;(!ce||ce.length===0)&&!ee||(L+=`## ${z}

`,ee&&(L+=`### ${h.diaryCreated}: ${ee.title}
`,L+=`**${h.moodLabel}:** ${ee.mood} | **${h.tagsLabel}:** ${ee.tags.join(", ")}

`,L+=`${ee.content}

`,L+=`> *${h.reflectionLabel}: ${ee.reflection}*

`),ce&&ce.length>0&&(L+=`### ${h.fragments}
`,[...ce].sort((se,Te)=>se.timestamp-Te.timestamp).forEach(se=>{let Ie=`- **${new Date(se.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}**: ${se.content}`;se.tags&&se.tags.length>0&&(Ie+=` _(#${se.tags.join(", #")})_`),L+=`${Ie}
`}),L+=`
`),L+=`---

`)});const Z=new Blob([L],{type:"text/markdown"}),j=URL.createObjectURL(Z),V=document.createElement("a");V.href=j,V.download=`fragment-diary-export-${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(V),V.click(),document.body.removeChild(V)},K=L=>{var j;const O=(j=L.target.files)==null?void 0:j[0];if(!O)return;const Z=new FileReader;Z.onload=V=>{var z;try{const F=(z=V.target)==null?void 0:z.result,ee=JSON.parse(F);typeof ee=="object"&&ee!==null&&!Array.isArray(ee)&&Object.values(ee).every(se=>se&&Array.isArray(se.fragments)&&(se.diaryEntry===null||typeof se.diaryEntry=="object"))?(s(ee),v("success"),setTimeout(()=>v("idle"),3e3)):v("error")}catch(F){console.error(F),v("error")}},Z.readAsText(O),L.target.value=""};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm fade-in duration-200","data-state":"open",children:_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative zoom-in-95 max-h-[90vh] overflow-y-auto custom-scrollbar","data-state":"open",children:[_.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4 sticky top-0 bg-white z-10",children:[_.jsx("h2",{className:"text-xl font-serif font-semibold text-gray-800",children:h.settings}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),_.jsxs("div",{className:"mb-8",children:[_.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:h.aiConfig}),_.jsxs("div",{className:"p-5 border border-gray-100 rounded-xl bg-gray-50/50 space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.provider}),_.jsxs("select",{value:S.provider,onChange:L=>E({...S,provider:L.target.value}),className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",children:[_.jsx("option",{value:"gemini",children:h.gemini}),_.jsx("option",{value:"openai",children:h.openai})]})]}),S.provider==="openai"&&_.jsxs("div",{className:"space-y-3 fade-in slide-in-from-top","data-state":"open",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.baseUrl}),_.jsx("input",{type:"text",value:S.openaiBaseUrl,onChange:L=>E({...S,openaiBaseUrl:L.target.value}),placeholder:"https://api.openai.com/v1",className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"}),_.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Example: https://api.openai.com/v1 (Ensure CORS is enabled if connecting from browser)"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.apiKey}),_.jsx("input",{type:"password",value:S.openaiApiKey,onChange:L=>E({...S,openaiApiKey:L.target.value}),placeholder:"sk-...",className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.modelName}),_.jsx("input",{type:"text",value:S.openaiModel,onChange:L=>E({...S,openaiModel:L.target.value}),placeholder:"gpt-3.5-turbo",className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"})]})]}),_.jsxs("div",{className:"pt-2 flex items-center justify-between",children:[_.jsx("button",{onClick:w,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors shadow-sm shadow-indigo-200",children:h.saveConfig}),A&&_.jsxs("span",{className:"text-xs text-green-600 font-medium flex items-center gap-1 fade-in","data-state":"open",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:_.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),h.configSaved]})]})]})]}),_.jsxs("div",{className:"mb-8",children:[_.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:h.exportData}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl hover:border-indigo-100 transition-colors flex items-center justify-between group",children:[_.jsxs("div",{className:"mr-4",children:[_.jsx("div",{className:"font-semibold text-gray-700 mb-1",children:h.json}),_.jsx("div",{className:"text-xs text-gray-500",children:h.exportJsonDesc})]}),_.jsxs("button",{onClick:B,className:"shrink-0 bg-gray-50 text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),h.exportButton]})]}),_.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl hover:border-indigo-100 transition-colors flex items-center justify-between group",children:[_.jsxs("div",{className:"mr-4",children:[_.jsx("div",{className:"font-semibold text-gray-700 mb-1",children:h.markdown}),_.jsx("div",{className:"text-xs text-gray-500",children:h.exportMdDesc})]}),_.jsxs("button",{onClick:Y,className:"shrink-0 bg-gray-50 text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),h.exportButton]})]})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:h.importData}),_.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[_.jsx("div",{className:"text-sm text-gray-600 mb-4",children:h.importDesc}),_.jsx("input",{type:"file",ref:y,onChange:K,accept:".json",className:"hidden"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:()=>{var L;return(L=y.current)==null?void 0:L.click()},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors shadow-sm shadow-indigo-200",children:h.importButton}),g==="success"&&_.jsxs("span",{className:"text-xs text-green-600 font-medium flex items-center gap-1 fade-in","data-state":"open",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:_.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),h.importSuccess]}),g==="error"&&_.jsx("span",{className:"text-xs text-red-500 font-medium fade-in","data-state":"open",children:h.importError})]})]})]})]})})},OT="nimo_db_migrated",ua="fragment_diary_db",GM=()=>localStorage.getItem(OT)==="true"?!1:localStorage.getItem(ua)!==null,HM=async()=>{try{console.log("[Migration] Starting migration from localStorage...");const i=localStorage.getItem(ua);if(!i)return console.log("[Migration] No data to migrate"),{success:!0,migratedCount:0};const e=JSON.parse(i),o=Object.keys(e);console.log(`[Migration] Found ${o.length} dates to migrate`);let s=0,a=0;for(const u of o){const d=e[u];if(d.fragments&&d.fragments.length>0)for(const h of d.fragments)await Ec(u,h),s++;d.diaryEntry&&(await Ds(u,d.diaryEntry),a++)}return console.log(`[Migration] Migrated ${s} fragments and ${a} diary entries`),localStorage.setItem(OT,"true"),localStorage.setItem(ua+"_backup",i),localStorage.removeItem(ua),console.log("[Migration] Migration completed successfully"),{success:!0,migratedCount:s+a}}catch(i){return console.error("[Migration] Migration failed:",i),{success:!1,error:i.message}}},VM=()=>{const{loadCurrentDayData:i,loadAllDates:e,currentDate:o}=ri();ve.useEffect(()=>{(async()=>{try{if(await OA(),GM()){console.log("Migration needed, starting...");const a=await HM();a.success?console.log(`Migration successful: ${a.migratedCount} items migrated`):console.error("Migration failed:",a.error)}await i(),await e()}catch(a){console.error("Failed to initialize database:",a)}})()},[i,e]),ve.useEffect(()=>{i()},[o,i])},OM=()=>{const{currentDayData:i,searchQuery:e}=ri(),{viewState:o,setViewState:s}=zs();ve.useEffect(()=>{if(e.trim()){o!==Xe.SEARCH&&s(Xe.SEARCH);return}i.diaryEntry&&o===Xe.GENERATING?s(Xe.READING):!i.diaryEntry&&o===Xe.READING&&s(Xe.COMPOSING)},[i.diaryEntry,e,s])},kM=({results:i,query:e,onSelect:o,language:s})=>{const a=an(s);return i.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 fade-in","data-state":"open",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 mb-4 text-gray-200",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),_.jsxs("p",{className:"text-lg font-medium text-gray-500",children:[a.noResultsFound,' "',e,'"']})]}):_.jsxs("div",{className:"fade-in duration-500 pb-12","data-state":"open",children:[_.jsxs("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:_.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})}),a.searchResults," (",i.length,")"]}),_.jsx("div",{className:"space-y-4",children:i.map((u,d)=>_.jsxs("button",{onClick:()=>o(u.date),className:"w-full text-left bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md hover:border-indigo-200 transition-all group",children:[_.jsxs("div",{className:"flex justify-between items-start mb-2",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-indigo-600 font-semibold text-sm group-hover:underline",children:Gs(u.date,s)}),_.jsx("span",{className:"text-xs text-gray-400",children:u.date})]}),_.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-medium uppercase tracking-wider ${u.type==="diary"?"bg-purple-50 text-purple-700":"bg-gray-100 text-gray-600"}`,children:u.type==="diary"?a.diaryCreated:a.fragment})]}),_.jsxs("div",{className:"mb-2",children:[_.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase mr-2",children:[u.matchField,":"]}),_.jsx("span",{className:"text-gray-800 font-medium text-sm font-serif",children:u.preview})]}),_.jsxs("div",{className:"text-xs text-gray-400 italic flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[_.jsx("span",{children:"Go to entry"}),_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:_.jsx("path",{fillRule:"evenodd",d:"M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z",clipRule:"evenodd"})})]})]},`${u.date}-${d}`))})]})},FM=()=>{const{searchResults:i,searchQuery:e,handleSearchResultSelect:o}=ri(),{language:s}=Io();return _.jsx(kM,{results:i,query:e,onSelect:o,language:s})},QM=({language:i,apiConfig:e,onTranscriptionComplete:o,onError:s})=>{const[a,u]=ve.useState(!1),[d,h]=ve.useState(!1),y=ve.useRef(null),g=ve.useRef([]),v=ve.useCallback(async R=>{h(!0);try{const w=new FileReader;w.readAsDataURL(R),w.onloadend=async()=>{try{const Y=w.result.split(",")[1],K=await NM(Y,"audio/webm",i,e);K&&o(K)}catch(B){console.error("Transcription failed",B),s==null||s("Transcription failed. Please try again.")}finally{h(!1)}}}catch(w){console.error("Audio processing failed",w),h(!1),s==null||s("Audio processing failed. Please try again.")}},[i,e,o,s]),S=ve.useCallback(async()=>{try{const R=await navigator.mediaDevices.getUserMedia({audio:!0}),w=new MediaRecorder(R);y.current=w,g.current=[],w.ondataavailable=B=>{B.data.size>0&&g.current.push(B.data)},w.onstop=async()=>{const B=new Blob(g.current,{type:"audio/webm"});R.getTracks().forEach(Y=>Y.stop()),await v(B)},w.start(),u(!0)}catch(R){console.error("Error accessing microphone:",R),s==null||s("Could not access microphone. Please check permissions.")}},[v,s]),E=ve.useCallback(()=>{y.current&&a&&(y.current.stop(),u(!1))},[a]),A=ve.useCallback(()=>{y.current&&a&&(y.current.stop(),u(!1))},[a]);return{isRecording:a,isTranscribing:d,startRecording:S,stopRecording:E,cleanup:A}},To="fragment_diary_draft",JM=({onAdd:i,language:e,apiConfig:o})=>{const[s,a]=ve.useState(""),[u,d]=ve.useState(""),[h,y]=ve.useState(!1),[g,v]=ve.useState(!1),S=an(e),{isRecording:E,isTranscribing:A,startRecording:R,stopRecording:w}=QM({language:e,apiConfig:o,onTranscriptionComplete:O=>{a(Z=>Z?`${Z} ${O}`:O)},onError:O=>{alert(O)}});ve.useEffect(()=>{const O=localStorage.getItem(To);if(O)try{const Z=JSON.parse(O);(Z.text&&Z.text.trim()||Z.tags&&Z.tags.trim())&&v(!0)}catch(Z){console.error("Failed to parse draft",Z)}},[]),ve.useEffect(()=>{if(g&&!s&&!u)return;if(g&&(s||u)&&v(!1),s.trim()||u.trim()){const Z={text:s,tags:u};localStorage.setItem(To,JSON.stringify(Z))}else g||localStorage.removeItem(To)},[s,u,g]);const B=()=>{const O=localStorage.getItem(To);if(O)try{const Z=JSON.parse(O);a(Z.text||""),d(Z.tags||""),Z.tags&&Z.tags.trim()&&y(!0),v(!1)}catch{}},Y=()=>{localStorage.removeItem(To),v(!1)},K=ve.useCallback(O=>{if(O.preventDefault(),s.trim()){const Z=u.split(",").map(j=>j.trim()).filter(j=>j.length>0);i(s,Z),a(""),d(""),y(!1),localStorage.removeItem(To)}},[s,u,i]),L=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),K(O))};return _.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 mb-8 transition-shadow focus-within:shadow-md overflow-hidden",children:[g&&_.jsxs("div",{className:"px-4 py-2 bg-indigo-50 border-b border-indigo-100 flex items-center justify-between fade-in slide-in-from-top","data-state":"open",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 text-indigo-600",children:_.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.25a.75.75 0 00-1.5 0v2.5h-2.5a.75.75 0 000 1.5h3.25a.75.75 0 00.75-.75v-3.25z",clipRule:"evenodd"})}),_.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:S.unsavedDraft})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{onClick:B,className:"text-xs font-bold text-indigo-600 hover:text-indigo-800 hover:underline",children:S.restore}),_.jsx("button",{onClick:Y,className:"text-xs text-gray-400 hover:text-gray-600 hover:underline",children:S.discard})]})]}),_.jsxs("form",{onSubmit:K,className:"flex flex-col",children:[_.jsx("textarea",{value:s,onChange:O=>a(O.target.value),onKeyDown:L,placeholder:A?S.transcribing:S.placeholder,disabled:A,className:`w-full min-h-[100px] p-4 text-gray-700 placeholder-gray-400 bg-transparent outline-none resize-none font-sans text-base ${A?"animate-pulse":""}`,rows:3}),h&&_.jsx("div",{className:"px-4 pb-2 fade-in slide-in-from-top duration-200","data-state":"open",children:_.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-md px-2 border border-gray-200 focus-within:ring-2 focus-within:ring-indigo-100 focus-within:border-indigo-300 transition-all",children:[_.jsx("span",{className:"text-gray-400 text-sm",children:"#"}),_.jsx("input",{type:"text",value:u,onChange:O=>d(O.target.value),onKeyDown:L,placeholder:S.fragmentTagPlaceholder,className:"w-full py-2 bg-transparent border-none outline-none text-sm text-gray-600 placeholder-gray-400"})]})}),_.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50/50 border-t border-gray-50",children:[_.jsxs("div",{className:"flex-1 flex items-center gap-3 min-h-[24px]",children:[_.jsx("button",{type:"button",onClick:()=>y(!h),className:`text-gray-400 hover:text-indigo-600 transition-colors p-1 rounded-md hover:bg-indigo-50 ${h?"text-indigo-600 bg-indigo-50":""}`,title:"Add tags",children:_.jsx("span",{className:"font-bold text-lg",children:"#"})}),A&&_.jsx("span",{className:"text-xs text-indigo-500 font-medium animate-pulse bg-indigo-50 px-3 py-1 rounded-full",children:S.transcribing})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{type:"button",onClick:E?w:R,disabled:A,className:`p-2 rounded-full transition-all flex items-center justify-center w-10 h-10 ${E?"bg-red-500 hover:bg-red-600 text-white animate-pulse shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-500 hover:text-indigo-600"}`,title:E?S.stopRecording:S.startRecording,children:E?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:_.jsx("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-9a3 3 0 01-3-3v-9z",clipRule:"evenodd"})}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:[_.jsx("path",{d:"M8.25 4.5a3.75 3.75 0 117.5 0v8.25a3.75 3.75 0 11-7.5 0V4.5z"}),_.jsx("path",{d:"M6 10.5a.75.75 0 01.75.75v1.5a5.25 5.25 0 1010.5 0v-1.5a.75.75 0 011.5 0v1.5a6.751 6.751 0 01-6 6.709v2.291h3a.75.75 0 010 1.5h-7.5a.75.75 0 010-1.5h3v-2.291a6.751 6.751 0 01-6-6.709v-1.5A.75.75 0 016 10.5z"})]})}),_.jsx("button",{type:"submit",disabled:!s.trim()||E||A,className:`p-2 rounded-full transition-all flex items-center justify-center w-10 h-10 shadow-sm ${!s.trim()||E||A?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200"}`,"aria-label":S.addNote,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]})]})]})]})},YM=({fragments:i,onDelete:e,onUpdate:o,language:s})=>{const a=ve.useRef(null),[u,d]=ve.useState(null),[h,y]=ve.useState(null),[g,v]=ve.useState(null),[S,E]=ve.useState(""),[A,R]=ve.useState(""),w=an(s);ve.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[i.length]);const B=ve.useMemo(()=>{const z=new Set;return i.forEach(F=>{var ee;return(ee=F.tags)==null?void 0:ee.forEach(ce=>z.add(ce))}),Array.from(z).sort()},[i]),Y=ve.useMemo(()=>{let z=i;return h&&(z=i.filter(F=>{var ee;return(ee=F.tags)==null?void 0:ee.includes(h)})),[...z].sort((F,ee)=>ee.timestamp-F.timestamp)},[i,h]),K=z=>{d(z)},L=()=>{u&&(e(u),d(null))},O=()=>{d(null)},Z=z=>{var F;v(z.id),E(z.content),R(((F=z.tags)==null?void 0:F.join(", "))||"")},j=()=>{if(g&&S.trim()){const z=A.split(",").map(F=>F.trim()).filter(F=>F.length>0);o(g,S,z),v(null)}},V=()=>{v(null),E(""),R("")};return i.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12 mb-3 opacity-50",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),_.jsx("p",{children:w.noNotes})]}):_.jsxs("div",{className:"flex-grow flex flex-col relative mb-6",children:[B.length>0&&_.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 px-1 fade-in slide-in-from-top duration-300","data-state":"open",children:[_.jsx("button",{onClick:()=>y(null),className:`px-3 py-1 rounded-full text-xs font-medium transition-all ${h===null?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:w.filterAll}),B.map(z=>_.jsxs("button",{onClick:()=>y(h===z?null:z),className:`px-3 py-1 rounded-full text-xs font-medium transition-all border ${h===z?"bg-indigo-100 text-indigo-700 border-indigo-200 shadow-sm":"bg-white text-gray-500 border-gray-200 hover:border-indigo-200 hover:text-indigo-600"}`,children:["#",z]},z))]}),_.jsxs("div",{className:"relative flex-grow",children:[_.jsx("div",{className:"absolute left-[19px] md:left-[50%] top-0 bottom-0 w-3.5 -translate-x-1/2 z-0 flex items-center justify-center",children:_.jsx("div",{className:"w-0.5 h-full bg-gray-200"})}),_.jsx("div",{ref:a,className:"space-y-6 relative z-10 max-h-[60vh] overflow-y-auto pr-2 scroll-smooth py-4",children:Y.length===0?_.jsxs("div",{className:"text-center py-8 text-gray-400 text-sm italic bg-white/50 rounded-lg",children:["No fragments found with tag #",h]}):Y.map((z,F)=>{const ce=new Date(z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ae=g===z.id,se=F%2===0;return _.jsxs("div",{className:`flex md:flex-row flex-col items-start md:items-center group ${se?"md:flex-row-reverse":""}`,children:[_.jsx("div",{className:`md:w-1/2 w-full flex ${se?"md:justify-start md:pl-20":"md:justify-end md:pr-20"} pl-10 md:px-0 mb-1 md:mb-0`,children:_.jsx("span",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider font-sans md:text-sm",children:ce})}),_.jsx("div",{className:"absolute left-[19px] md:left-[50%] w-3.5 h-3.5 bg-gradient-to-br from-indigo-500 to-purple-600 border-2 border-white rounded-full -translate-x-1/2 shadow-md shadow-indigo-200 z-20 mt-1.5 md:mt-0 ring-2 ring-indigo-50"}),_.jsx("div",{className:`md:w-1/2 w-full pl-10 ${se?"md:pr-10 md:pl-0":"md:pl-10"}`,children:ae?_.jsxs("div",{className:"relative bg-white p-4 rounded-xl border-2 border-indigo-100 shadow-md z-20",children:[_.jsx("textarea",{value:S,onChange:Te=>E(Te.target.value),className:"w-full text-sm text-gray-700 border-none outline-none resize-none bg-transparent mb-3 font-sans md:text-base",rows:3,autoFocus:!0,placeholder:"Edit note..."}),_.jsxs("div",{className:"flex items-center gap-2 mb-3 bg-gray-50 rounded px-2 border border-gray-100",children:[_.jsx("span",{className:"text-gray-400 text-sm",children:"#"}),_.jsx("input",{value:A,onChange:Te=>R(Te.target.value),className:"w-full py-1 bg-transparent text-sm text-gray-600 outline-none",placeholder:w.fragmentTagPlaceholder})]}),_.jsxs("div",{className:"flex justify-end gap-2 border-t border-gray-50 pt-2",children:[_.jsx("button",{onClick:V,className:"text-xs font-medium px-3 py-1.5 rounded text-gray-500 hover:bg-gray-100",children:w.cancel}),_.jsx("button",{onClick:j,className:"text-xs font-medium px-3 py-1.5 rounded bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm",children:w.save})]})]}):_.jsxs("div",{className:"relative bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group-hover:border-indigo-100",children:[_.jsx("p",{className:"text-gray-700 leading-relaxed text-sm md:text-base",children:z.content}),z.tags&&z.tags.length>0&&_.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:z.tags.map((Te,Ie)=>_.jsxs("span",{className:"text-xs text-indigo-500 bg-indigo-50 px-2 py-1 rounded-md md:text-sm",children:["#",Te]},Ie))}),_.jsxs("div",{className:"absolute -top-4 right-3 flex items-center opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out translate-y-1 group-hover:translate-y-0 bg-white shadow-lg shadow-gray-200/50 border border-gray-100 rounded-full overflow-hidden z-10 hover:shadow-xl hover:shadow-gray-300/60",children:[_.jsx("button",{onClick:()=>Z(z),className:"p-2.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors border-r border-gray-100/50",title:w.edit,children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[_.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),_.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})}),_.jsx("button",{onClick:()=>K(z.id),className:"p-2.5 text-gray-400 hover:text-red-500 hover:bg-red-50/50 transition-colors",title:w.deleteNote,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:_.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})})]})]})})]},z.id)})})]}),u&&_.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-white/80 backdrop-blur-sm rounded-xl fade-in duration-200","data-state":"open",children:_.jsxs("div",{className:"bg-white border border-gray-200 shadow-xl rounded-xl p-6 max-w-xs w-full transform scale-100",children:[_.jsx("h3",{className:"text-lg font-serif font-semibold text-gray-800 mb-2",children:w.deleteConfirmTitle}),_.jsx("p",{className:"text-sm text-gray-500 mb-6",children:w.deleteConfirmMessage}),_.jsxs("div",{className:"flex justify-end gap-3",children:[_.jsx("button",{onClick:O,className:"text-sm font-medium text-gray-600 hover:bg-gray-50 px-4 py-2 rounded-lg transition-colors",children:w.cancel}),_.jsx("button",{onClick:L,className:"text-sm font-medium bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 shadow-sm shadow-red-200 transition-colors",children:w.confirmDelete})]})]})})]})},$M=()=>{const i=ri(),e=zs(),o=Io(),{currentDayData:s,currentDate:a,selectedTone:u,addFragment:d,deleteFragment:h,updateFragment:y,setSelectedTone:g,setError:v,loadCurrentDayData:S}=i,{setViewState:E,setShowClearConfirm:A}=e,{language:R,apiConfig:w}=o,B=an(R),Y=async()=>{if(s.fragments.length!==0){E(Xe.GENERATING),v(null);try{const L=await GT(s.fragments,R,u,w);await Ds(a,L),await S(),E(Xe.READING)}catch(L){console.error(L),v(B.failedError),E(Xe.COMPOSING)}}},K=()=>{A(!0)};return _.jsxs("div",{className:"fade-in duration-500","data-state":"open",children:[_.jsx(JM,{onAdd:d,language:R,apiConfig:w}),_.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[_.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:B.timeline}),s.fragments.length>0&&_.jsx("button",{onClick:K,className:"text-xs text-gray-400 hover:text-red-500 underline transition-colors",children:B.clearDay})]}),_.jsx(YM,{fragments:s.fragments,onDelete:h,onUpdate:y,language:R}),_.jsx("div",{className:"sticky bottom-6 mt-8 flex flex-col items-center z-30 pointer-events-none",children:_.jsxs("div",{className:"pointer-events-auto flex flex-col items-center gap-3",children:[s.fragments.length>0&&_.jsxs("div",{className:"bg-white/90 backdrop-blur-sm p-1.5 rounded-full shadow-sm border border-indigo-100 flex items-center gap-2 fade-in slide-in-from-top","data-state":"open",children:[_.jsxs("div",{className:"px-2 flex items-center gap-1 text-xs font-medium text-gray-400",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:_.jsx("path",{fillRule:"evenodd",d:"M10 2c-1.716 0-3.408.106-5.07.31C3.806 2.45 3 3.414 3 4.517V17.25a.75.75 0 001.075.676L10 15.082l5.925 2.844A.75.75 0 0017 17.25V4.517c0-1.103-.806-2.068-1.93-2.207A41.403 41.403 0 0010 2z",clipRule:"evenodd"})}),B.toneLabel]}),_.jsx("select",{value:u,onChange:L=>g(L.target.value),className:"bg-gray-50 text-sm border-0 rounded-full py-1 pl-3 pr-8 focus:ring-2 focus:ring-indigo-500 text-gray-700 cursor-pointer hover:bg-gray-100 transition-colors font-medium",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundSize:"1.5em 1.5em",backgroundRepeat:"no-repeat",appearance:"none"},children:Object.entries(B.tones).map(([L,O])=>_.jsx("option",{value:L,children:O},L))})]}),_.jsxs("button",{onClick:Y,disabled:s.fragments.length===0,className:`
                group relative inline-flex items-center justify-center overflow-hidden rounded-full p-4 px-8 font-medium text-white shadow-2xl transition-all duration-300 focus:outline-none
                ${s.fragments.length===0?"bg-gray-300 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800 hover:scale-105 hover:shadow-indigo-500/20"}
              `,children:[_.jsx("span",{className:"mr-2",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})})}),_.jsx("span",{children:s.diaryEntry?B.regenerateButton:B.weaveButton})]})]})}),s.diaryEntry&&_.jsx("div",{className:"text-center mt-2",children:_.jsx("button",{onClick:()=>E(Xe.READING),className:"text-sm text-indigo-600 hover:underline",children:B.cancelView})})]})},KM=({entry:i,onBack:e,onUpdate:o,language:s})=>{const a=an(s),u=s==="zh"?"zh-CN":"en-US",d=new Date().toLocaleDateString(u,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),[h,y]=ve.useState(!1),[g,v]=ve.useState(i),[S,E]=ve.useState(i.tags.join(", "));ve.useEffect(()=>{v(i),E(i.tags.join(", "))},[i]);const A=()=>{const w={...g,tags:S.split(",").map(B=>B.trim()).filter(B=>B.length>0)};o(w),y(!1)},R=()=>{v(i),E(i.tags.join(", ")),y(!1)};return _.jsxs("div",{className:"fade-in max-w-3xl mx-auto pb-20","data-state":"open",children:[_.jsxs("div",{className:"bg-paper border border-stone-100 shadow-xl rounded-sm p-8 md:p-12 relative overflow-hidden transition-all",children:[_.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 opacity-30"}),_.jsx("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:h?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:R,className:"text-xs font-medium px-3 py-1.5 rounded text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:a.cancel}),_.jsx("button",{onClick:A,className:"text-xs font-medium px-3 py-1.5 rounded bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm",children:a.save})]}):_.jsx("button",{onClick:()=>y(!0),className:"p-2 text-gray-400 hover:text-indigo-600 rounded-full hover:bg-indigo-50 transition-colors",title:a.edit,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})})}),h?_.jsxs("div",{className:"space-y-6 mt-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.moodLabel}),_.jsx("input",{type:"text",value:g.mood,onChange:w=>v({...g,mood:w.target.value}),className:"w-full p-2 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-sans text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.titleLabel}),_.jsx("input",{type:"text",value:g.title,onChange:w=>v({...g,title:w.target.value}),className:"w-full p-2 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-serif text-xl"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.contentLabel}),_.jsx("textarea",{value:g.content,onChange:w=>v({...g,content:w.target.value}),rows:10,className:"w-full p-3 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-serif text-base leading-relaxed"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.reflectionLabel}),_.jsx("textarea",{value:g.reflection,onChange:w=>v({...g,reflection:w.target.value}),rows:3,className:"w-full p-3 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-serif italic text-gray-600"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.tagsLabel}),_.jsx("input",{type:"text",value:S,onChange:w=>E(w.target.value),className:"w-full p-2 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-sans text-sm"})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-8 text-center mt-4",children:[_.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 text-indigo-600 text-xs font-medium uppercase tracking-wider mb-4",children:i.mood}),_.jsx("h2",{className:"font-serif text-3xl md:text-4xl text-gray-900 mb-2 leading-tight",children:i.title}),_.jsx("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm font-sans",children:_.jsx("span",{children:d})})]}),_.jsx("div",{className:"prose prose-stone prose-lg max-w-none font-serif leading-loose text-gray-800 first-letter:text-5xl first-letter:font-serif first-letter:float-left first-letter:mr-2 first-letter:mt-[-4px] text-justify",children:i.content.split(`
`).map((w,B)=>w.trim()&&_.jsx("p",{className:"mb-4",children:w},B))}),_.jsxs("div",{className:"mt-10 pt-8 border-t border-gray-200",children:[_.jsx("h3",{className:"text-sm font-sans font-bold text-gray-400 uppercase tracking-widest mb-3",children:a.reflectionLabel}),_.jsxs("p",{className:"font-serif italic text-gray-600 text-lg bg-gray-50 p-6 rounded-r-lg border-l-4 border-indigo-300",children:['"',i.reflection,'"']})]}),_.jsx("div",{className:"mt-8 flex flex-wrap gap-2",children:i.tags.map(w=>_.jsxs("span",{className:"text-xs text-gray-500 px-2 py-1 border border-gray-200 rounded hover:bg-gray-50 cursor-default",children:["#",w]},w))})]})]}),_.jsx("div",{className:"mt-8 text-center",children:_.jsxs("button",{onClick:e,className:"text-gray-500 hover:text-gray-900 text-sm font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),a.backToFragments]})})]})},XM=()=>{const{currentDayData:i,updateDiaryEntry:e}=ri(),{backToFragments:o}=zs(),{language:s}=Io();return i.diaryEntry?_.jsx(KM,{entry:i.diaryEntry,onBack:o,onUpdate:e,language:s}):null},ZM=()=>{const{currentDate:i}=ri(),{language:e}=Io(),o=an(e);return _.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] animate-pulse",children:[_.jsxs("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-6 relative overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-indigo-100 animate-[spin_3s_linear_infinite]"}),_.jsx("div",{className:"bg-white w-14 h-14 rounded-full z-10 flex items-center justify-center",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-indigo-500",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})})]}),_.jsx("h3",{className:"text-xl font-serif font-medium text-gray-800 mb-2",children:o.writingStory}),_.jsxs("p",{className:"text-gray-400 text-sm",children:[o.analyzing," ",Gs(i,e)]})]})};function WM(){const i=ri(),e=zs(),o=Io(),{currentDate:s,allDates:a,searchQuery:u,error:d,setCurrentDate:h,performSearch:y,importData:g,clearDayData:v}=i,{viewState:S,isHistoryOpen:E,isSettingsOpen:A,showClearConfirm:R,setViewState:w,setHistoryOpen:B,setSettingsOpen:Y,setShowClearConfirm:K}=e,{language:L,apiConfig:O,setApiConfig:Z}=o,j=ve.useMemo(()=>an(L),[L]);VM(),OM(),Eo.useEffect(()=>{y(u,j)},[u,j,y]);const V=async se=>{await g(se)},z=se=>{Z(se)},F=()=>{h(Xg(s,-1))},ee=()=>{h(Xg(s,1))},ce=async()=>{await v(),w(Xe.COMPOSING),K(!1)},ae=s===VT();return _.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans text-gray-900 pb-10",children:[_.jsx(UM,{}),_.jsx(BM,{isOpen:E,onClose:()=>B(!1),dates:a,activeDate:s,onSelectDate:se=>{h(se),B(!1)},language:L}),_.jsx(zM,{isOpen:A,onClose:()=>Y(!1),onImport:V,language:L,apiConfig:O,onSaveConfig:z}),_.jsxs("main",{className:"max-w-2xl mx-auto px-4",children:[S!==Xe.SEARCH&&_.jsx(PM,{currentDate:s,onPrev:F,onNext:ee,canGoNext:!ae,language:L,onDateSelect:h}),d&&_.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm flex items-center gap-2 animate-pulse",children:_.jsx("span",{children:d})}),S===Xe.SEARCH&&_.jsx(FM,{}),S===Xe.COMPOSING&&_.jsx($M,{}),S===Xe.GENERATING&&_.jsx(ZM,{}),S===Xe.READING&&_.jsx(XM,{}),R&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm fade-in duration-200","data-state":"open",children:_.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-6 transform scale-100 zoom-in-95","data-state":"open",children:[_.jsx("h3",{className:"text-lg font-serif font-semibold text-gray-800 mb-2",children:"Clear Today's Data?"}),_.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[j.clearConfirm," ",Gs(s,L),"?"]}),_.jsxs("div",{className:"flex justify-end gap-3",children:[_.jsx("button",{onClick:()=>K(!1),className:"text-sm font-medium text-gray-600 hover:bg-gray-50 px-4 py-2 rounded-lg transition-colors",children:j.cancel}),_.jsx("button",{onClick:ce,className:"text-sm font-medium bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 shadow-sm shadow-red-200 transition-colors",children:j.confirmDelete})]})]})})]})]})}const Zg=document.getElementById("root");Zg&&A_.createRoot(Zg).render(_.jsx(Eo.StrictMode,{children:_.jsx(WM,{})}));export{oS as W};
