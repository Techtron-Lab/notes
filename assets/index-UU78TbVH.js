var p_=Object.defineProperty;var g_=(i,e,o)=>e in i?p_(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o;var x=(i,e,o)=>g_(i,typeof e!="symbol"?e+"":e,o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=o(a);fetch(a.href,u)}})();function y_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wu={exports:{}},xs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh;function v_(){if(jh)return xs;jh=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function o(s,a,u){var d=null;if(u!==void 0&&(d=""+u),a.key!==void 0&&(d=""+a.key),"key"in a){u={};for(var h in a)h!=="key"&&(u[h]=a[h])}else u=a;return a=u.ref,{$$typeof:i,type:s,key:d,ref:a!==void 0?a:null,props:u}}return xs.Fragment=e,xs.jsx=o,xs.jsxs=o,xs}var ep;function S_(){return ep||(ep=1,Wu.exports=v_()),Wu.exports}var C=S_(),ju={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function T_(){if(tp)return ye;tp=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),E=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,L={};function V(M,K,oe){this.props=M,this.context=K,this.refs=L,this.updater=oe||N}V.prototype.isReactComponent={},V.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},V.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=V.prototype;function U(M,K,oe){this.props=M,this.context=K,this.refs=L,this.updater=oe||N}var k=U.prototype=new $;k.constructor=U,w(k,V.prototype),k.isPureReactComponent=!0;var ne=Array.isArray;function ie(){}var H={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function z(M,K,oe){var ue=oe.ref;return{$$typeof:i,type:M,key:K,ref:ue!==void 0?ue:null,props:oe}}function X(M,K){return z(M.type,K,M.props)}function Z(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function te(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(oe){return K[oe]})}var ae=/\/+/g;function ge(M,K){return typeof M=="object"&&M!==null&&M.key!=null?te(""+M.key):K.toString(36)}function Ie(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ie,ie):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function G(M,K,oe,ue,ve){var Ee=typeof M;(Ee==="undefined"||Ee==="boolean")&&(M=null);var De=!1;if(M===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(M.$$typeof){case i:case e:De=!0;break;case v:return De=M._init,G(De(M._payload),K,oe,ue,ve)}}if(De)return ve=ve(M),De=ue===""?"."+ge(M,0):ue,ne(ve)?(oe="",De!=null&&(oe=De.replace(ae,"$&/")+"/"),G(ve,K,oe,"",function(Lo){return Lo})):ve!=null&&(Z(ve)&&(ve=X(ve,oe+(ve.key==null||M&&M.key===ve.key?"":(""+ve.key).replace(ae,"$&/")+"/")+De)),K.push(ve)),1;De=0;var ht=ue===""?".":ue+":";if(ne(M))for(var Ye=0;Ye<M.length;Ye++)ue=M[Ye],Ee=ht+ge(ue,Ye),De+=G(ue,K,oe,Ee,ve);else if(Ye=A(M),typeof Ye=="function")for(M=Ye.call(M),Ye=0;!(ue=M.next()).done;)ue=ue.value,Ee=ht+ge(ue,Ye++),De+=G(ue,K,oe,Ee,ve);else if(Ee==="object"){if(typeof M.then=="function")return G(Ie(M),K,oe,ue,ve);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return De}function ee(M,K,oe){if(M==null)return M;var ue=[],ve=0;return G(M,ue,"","",function(Ee){return K.call(oe,Ee,ve++)}),ue}function fe(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(oe){(M._status===0||M._status===-1)&&(M._status=1,M._result=oe)},function(oe){(M._status===0||M._status===-1)&&(M._status=2,M._result=oe)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:ee,forEach:function(M,K,oe){ee(M,function(){K.apply(this,arguments)},oe)},count:function(M){var K=0;return ee(M,function(){K++}),K},toArray:function(M){return ee(M,function(K){return K})||[]},only:function(M){if(!Z(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ye.Activity=S,ye.Children=Ge,ye.Component=V,ye.Fragment=o,ye.Profiler=a,ye.PureComponent=U,ye.StrictMode=s,ye.Suspense=y,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ye.__COMPILER_RUNTIME={__proto__:null,c:function(M){return H.H.useMemoCache(M)}},ye.cache=function(M){return function(){return M.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(M,K,oe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=w({},M.props),ve=M.key;if(K!=null)for(Ee in K.key!==void 0&&(ve=""+K.key),K)!Q.call(K,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&K.ref===void 0||(ue[Ee]=K[Ee]);var Ee=arguments.length-2;if(Ee===1)ue.children=oe;else if(1<Ee){for(var De=Array(Ee),ht=0;ht<Ee;ht++)De[ht]=arguments[ht+2];ue.children=De}return z(M.type,ve,ue)},ye.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},ye.createElement=function(M,K,oe){var ue,ve={},Ee=null;if(K!=null)for(ue in K.key!==void 0&&(Ee=""+K.key),K)Q.call(K,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ve[ue]=K[ue]);var De=arguments.length-2;if(De===1)ve.children=oe;else if(1<De){for(var ht=Array(De),Ye=0;Ye<De;Ye++)ht[Ye]=arguments[Ye+2];ve.children=ht}if(M&&M.defaultProps)for(ue in De=M.defaultProps,De)ve[ue]===void 0&&(ve[ue]=De[ue]);return z(M,Ee,ve)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(M){return{$$typeof:h,render:M}},ye.isValidElement=Z,ye.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:fe}},ye.memo=function(M,K){return{$$typeof:p,type:M,compare:K===void 0?null:K}},ye.startTransition=function(M){var K=H.T,oe={};H.T=oe;try{var ue=M(),ve=H.S;ve!==null&&ve(oe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ie,qe)}catch(Ee){qe(Ee)}finally{K!==null&&oe.types!==null&&(K.types=oe.types),H.T=K}},ye.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ye.use=function(M){return H.H.use(M)},ye.useActionState=function(M,K,oe){return H.H.useActionState(M,K,oe)},ye.useCallback=function(M,K){return H.H.useCallback(M,K)},ye.useContext=function(M){return H.H.useContext(M)},ye.useDebugValue=function(){},ye.useDeferredValue=function(M,K){return H.H.useDeferredValue(M,K)},ye.useEffect=function(M,K){return H.H.useEffect(M,K)},ye.useEffectEvent=function(M){return H.H.useEffectEvent(M)},ye.useId=function(){return H.H.useId()},ye.useImperativeHandle=function(M,K,oe){return H.H.useImperativeHandle(M,K,oe)},ye.useInsertionEffect=function(M,K){return H.H.useInsertionEffect(M,K)},ye.useLayoutEffect=function(M,K){return H.H.useLayoutEffect(M,K)},ye.useMemo=function(M,K){return H.H.useMemo(M,K)},ye.useOptimistic=function(M,K){return H.H.useOptimistic(M,K)},ye.useReducer=function(M,K,oe){return H.H.useReducer(M,K,oe)},ye.useRef=function(M){return H.H.useRef(M)},ye.useState=function(M){return H.H.useState(M)},ye.useSyncExternalStore=function(M,K,oe){return H.H.useSyncExternalStore(M,K,oe)},ye.useTransition=function(){return H.H.useTransition()},ye.version="19.2.0",ye}var np;function Ic(){return np||(np=1,ju.exports=T_()),ju.exports}var me=Ic();const Eo=y_(me);var ec={exports:{}},Ns={},tc={exports:{}},nc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function E_(){return ip||(ip=1,(function(i){function e(G,ee){var fe=G.length;G.push(ee);e:for(;0<fe;){var qe=fe-1>>>1,Ge=G[qe];if(0<a(Ge,ee))G[qe]=ee,G[fe]=Ge,fe=qe;else break e}}function o(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ee=G[0],fe=G.pop();if(fe!==ee){G[0]=fe;e:for(var qe=0,Ge=G.length,M=Ge>>>1;qe<M;){var K=2*(qe+1)-1,oe=G[K],ue=K+1,ve=G[ue];if(0>a(oe,fe))ue<Ge&&0>a(ve,oe)?(G[qe]=ve,G[ue]=fe,qe=ue):(G[qe]=oe,G[K]=fe,qe=K);else if(ue<Ge&&0>a(ve,fe))G[qe]=ve,G[ue]=fe,qe=ue;else break e}}return ee}function a(G,ee){var fe=G.sortIndex-ee.sortIndex;return fe!==0?fe:G.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var y=[],p=[],v=1,S=null,E=3,A=!1,N=!1,w=!1,L=!1,V=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function k(G){for(var ee=o(p);ee!==null;){if(ee.callback===null)s(p);else if(ee.startTime<=G)s(p),ee.sortIndex=ee.expirationTime,e(y,ee);else break;ee=o(p)}}function ne(G){if(w=!1,k(G),!N)if(o(y)!==null)N=!0,ie||(ie=!0,te());else{var ee=o(p);ee!==null&&Ie(ne,ee.startTime-G)}}var ie=!1,H=-1,Q=5,z=-1;function X(){return L?!0:!(i.unstable_now()-z<Q)}function Z(){if(L=!1,ie){var G=i.unstable_now();z=G;var ee=!0;try{e:{N=!1,w&&(w=!1,$(H),H=-1),A=!0;var fe=E;try{t:{for(k(G),S=o(y);S!==null&&!(S.expirationTime>G&&X());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,E=S.priorityLevel;var Ge=qe(S.expirationTime<=G);if(G=i.unstable_now(),typeof Ge=="function"){S.callback=Ge,k(G),ee=!0;break t}S===o(y)&&s(y),k(G)}else s(y);S=o(y)}if(S!==null)ee=!0;else{var M=o(p);M!==null&&Ie(ne,M.startTime-G),ee=!1}}break e}finally{S=null,E=fe,A=!1}ee=void 0}}finally{ee?te():ie=!1}}}var te;if(typeof U=="function")te=function(){U(Z)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ge=ae.port2;ae.port1.onmessage=Z,te=function(){ge.postMessage(null)}}else te=function(){V(Z,0)};function Ie(G,ee){H=V(function(){G(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(G){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var fe=E;E=ee;try{return G()}finally{E=fe}},i.unstable_requestPaint=function(){L=!0},i.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var fe=E;E=G;try{return ee()}finally{E=fe}},i.unstable_scheduleCallback=function(G,ee,fe){var qe=i.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?qe+fe:qe):fe=qe,G){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=fe+Ge,G={id:v++,callback:ee,priorityLevel:G,startTime:fe,expirationTime:Ge,sortIndex:-1},fe>qe?(G.sortIndex=fe,e(p,G),o(y)===null&&G===o(p)&&(w?($(H),H=-1):w=!0,Ie(ne,fe-qe))):(G.sortIndex=Ge,e(y,G),N||A||(N=!0,ie||(ie=!0,te()))),G},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(G){var ee=E;return function(){var fe=E;E=ee;try{return G.apply(this,arguments)}finally{E=fe}}}})(nc)),nc}var op;function C_(){return op||(op=1,tc.exports=E_()),tc.exports}var ic={exports:{}},ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function __(){if(sp)return ft;sp=1;var i=Ic();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(e(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(y,p,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:S==null?null:""+S,children:y,containerInfo:p,implementation:v}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ft.createPortal=function(y,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,v)},ft.flushSync=function(y){var p=d.T,v=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=p,s.p=v,s.d.f()}},ft.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},ft.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},ft.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var v=p.as,S=h(v,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:A}):v==="script"&&s.d.X(y,{crossOrigin:S,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ft.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},ft.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,S=h(v,p.crossOrigin);s.d.L(y,v,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ft.preloadModule=function(y,p){if(typeof y=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},ft.requestFormReset=function(y){s.d.r(y)},ft.unstable_batchedUpdates=function(y,p){return y(p)},ft.useFormState=function(y,p,v){return d.H.useFormState(y,p,v)},ft.useFormStatus=function(){return d.H.useHostTransitionStatus()},ft.version="19.2.0",ft}var lp;function A_(){if(lp)return ic.exports;lp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ic.exports=__(),ic.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function w_(){if(ap)return Ns;ap=1;var i=C_(),e=Ic(),o=A_();function s(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,l=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(l=n.return),t=n.return;while(t)}return n.tag===3?l:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(s(188))}function p(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(s(188));return n!==t?null:t}for(var l=t,r=n;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(r=m.return,r!==null){l=r;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return y(m),t;if(g===r)return y(m),n;g=g.sibling}throw Error(s(188))}if(l.return!==r.return)l=m,r=g;else{for(var T=!1,_=m.child;_;){if(_===l){T=!0,l=m,r=g;break}if(_===r){T=!0,r=m,l=g;break}_=_.sibling}if(!T){for(_=g.child;_;){if(_===l){T=!0,l=g,r=m;break}if(_===r){T=!0,r=g,l=m;break}_=_.sibling}if(!T)throw Error(s(189))}}if(l.alternate!==r)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),U=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function te(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Symbol.for("react.client.reference");function ge(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ae?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case V:return"Profiler";case L:return"StrictMode";case ne:return"Suspense";case ie:return"SuspenseList";case z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case U:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case k:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case H:return n=t.displayName||null,n!==null?n:ge(t.type)||"Memo";case Q:n=t._payload,t=t._init;try{return ge(t(n))}catch{}}return null}var Ie=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},qe=[],Ge=-1;function M(t){return{current:t}}function K(t){0>Ge||(t.current=qe[Ge],qe[Ge]=null,Ge--)}function oe(t,n){Ge++,qe[Ge]=t.current,t.current=n}var ue=M(null),ve=M(null),Ee=M(null),De=M(null);function ht(t,n){switch(oe(Ee,n),oe(ve,t),oe(ue,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ch(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ch(n),t=_h(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(ue),oe(ue,t)}function Ye(){K(ue),K(ve),K(Ee)}function Lo(t){t.memoizedState!==null&&oe(De,t);var n=ue.current,l=_h(n,t.type);n!==l&&(oe(ve,t),oe(ue,l))}function Hs(t){ve.current===t&&(K(ue),K(ve)),De.current===t&&(K(De),Cs._currentValue=fe)}var Ua,Zc;function ui(t){if(Ua===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);Ua=n&&n[1]||"",Zc=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ua+t+Zc}var qa=!1;function Pa(t,n){if(!t||qa)return"";qa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(O){var B=O}Reflect.construct(t,[],Y)}else{try{Y.call()}catch(O){B=O}t.call(Y.prototype)}}else{try{throw Error()}catch(O){B=O}(Y=t())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(O){if(O&&B&&typeof O.stack=="string")return[O.stack,B.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=r.DetermineComponentFrameRoot(),T=g[0],_=g[1];if(T&&_){var b=T.split(`
`),P=_.split(`
`);for(m=r=0;r<b.length&&!b[r].includes("DetermineComponentFrameRoot");)r++;for(;m<P.length&&!P[m].includes("DetermineComponentFrameRoot");)m++;if(r===b.length||m===P.length)for(r=b.length-1,m=P.length-1;1<=r&&0<=m&&b[r]!==P[m];)m--;for(;1<=r&&0<=m;r--,m--)if(b[r]!==P[m]){if(r!==1||m!==1)do if(r--,m--,0>m||b[r]!==P[m]){var F=`
`+b[r].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=r&&0<=m);break}}}finally{qa=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?ui(l):""}function JT(t,n){switch(t.tag){case 26:case 27:case 5:return ui(t.type);case 16:return ui("Lazy");case 13:return t.child!==n&&n!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return Pa(t.type,!1);case 11:return Pa(t.type.render,!1);case 1:return Pa(t.type,!0);case 31:return ui("Activity");default:return""}}function Wc(t){try{var n="",l=null;do n+=JT(t,l),l=t,t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Ba=Object.prototype.hasOwnProperty,za=i.unstable_scheduleCallback,Ga=i.unstable_cancelCallback,YT=i.unstable_shouldYield,$T=i.unstable_requestPaint,Nt=i.unstable_now,KT=i.unstable_getCurrentPriorityLevel,jc=i.unstable_ImmediatePriority,ef=i.unstable_UserBlockingPriority,Os=i.unstable_NormalPriority,XT=i.unstable_LowPriority,tf=i.unstable_IdlePriority,ZT=i.log,WT=i.unstable_setDisableYieldValue,Uo=null,bt=null;function Ln(t){if(typeof ZT=="function"&&WT(t),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Uo,t)}catch{}}var Rt=Math.clz32?Math.clz32:tE,jT=Math.log,eE=Math.LN2;function tE(t){return t>>>=0,t===0?32:31-(jT(t)/eE|0)|0}var Vs=256,ks=262144,Fs=4194304;function ci(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qs(t,n,l){var r=t.pendingLanes;if(r===0)return 0;var m=0,g=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var _=r&134217727;return _!==0?(r=_&~g,r!==0?m=ci(r):(T&=_,T!==0?m=ci(T):l||(l=_&~t,l!==0&&(m=ci(l))))):(_=r&~g,_!==0?m=ci(_):T!==0?m=ci(T):l||(l=r&~t,l!==0&&(m=ci(l)))),m===0?0:n!==0&&n!==m&&(n&g)===0&&(g=m&-m,l=n&-n,g>=l||g===32&&(l&4194048)!==0)?n:m}function qo(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function nE(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nf(){var t=Fs;return Fs<<=1,(Fs&62914560)===0&&(Fs=4194304),t}function Ha(t){for(var n=[],l=0;31>l;l++)n.push(t);return n}function Po(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function iE(t,n,l,r,m,g){var T=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var _=t.entanglements,b=t.expirationTimes,P=t.hiddenUpdates;for(l=T&~l;0<l;){var F=31-Rt(l),Y=1<<F;_[F]=0,b[F]=-1;var B=P[F];if(B!==null)for(P[F]=null,F=0;F<B.length;F++){var O=B[F];O!==null&&(O.lane&=-536870913)}l&=~Y}r!==0&&of(t,r,0),g!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=g&~(T&~n))}function of(t,n,l){t.pendingLanes|=n,t.suspendedLanes&=~n;var r=31-Rt(n);t.entangledLanes|=n,t.entanglements[r]=t.entanglements[r]|1073741824|l&261930}function sf(t,n){var l=t.entangledLanes|=n;for(t=t.entanglements;l;){var r=31-Rt(l),m=1<<r;m&n|t[r]&n&&(t[r]|=n),l&=~m}}function lf(t,n){var l=n&-n;return l=(l&42)!==0?1:Oa(l),(l&(t.suspendedLanes|n))!==0?0:l}function Oa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Va(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function af(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:Jh(t.type))}function rf(t,n){var l=ee.p;try{return ee.p=t,n()}finally{ee.p=l}}var Un=Math.random().toString(36).slice(2),lt="__reactFiber$"+Un,St="__reactProps$"+Un,qi="__reactContainer$"+Un,ka="__reactEvents$"+Un,oE="__reactListeners$"+Un,sE="__reactHandles$"+Un,uf="__reactResources$"+Un,Bo="__reactMarker$"+Un;function Fa(t){delete t[lt],delete t[St],delete t[ka],delete t[oE],delete t[sE]}function Pi(t){var n=t[lt];if(n)return n;for(var l=t.parentNode;l;){if(n=l[qi]||l[lt]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(t=Mh(t);t!==null;){if(l=t[lt])return l;t=Mh(t)}return n}t=l,l=t.parentNode}return null}function Bi(t){if(t=t[lt]||t[qi]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function zo(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(s(33))}function zi(t){var n=t[uf];return n||(n=t[uf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function it(t){t[Bo]=!0}var cf=new Set,ff={};function fi(t,n){Gi(t,n),Gi(t+"Capture",n)}function Gi(t,n){for(ff[t]=n,t=0;t<n.length;t++)cf.add(n[t])}var lE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),df={},mf={};function aE(t){return Ba.call(mf,t)?!0:Ba.call(df,t)?!1:lE.test(t)?mf[t]=!0:(df[t]=!0,!1)}function Js(t,n,l){if(aE(n))if(l===null)t.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var r=n.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+l)}}function Ys(t,n,l){if(l===null)t.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+l)}}function un(t,n,l,r){if(r===null)t.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(n,l,""+r)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hf(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rE(t,n,l){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var m=r.get,g=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return m.call(this)},set:function(T){l=""+T,g.call(this,T)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Qa(t){if(!t._valueTracker){var n=hf(t)?"checked":"value";t._valueTracker=rE(t,n,""+t[n])}}function pf(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var l=n.getValue(),r="";return t&&(r=hf(t)?t.checked?"true":"false":t.value),t=r,t!==l?(n.setValue(t),!0):!1}function $s(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var uE=/[\n"\\]/g;function Ht(t){return t.replace(uE,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ja(t,n,l,r,m,g,T,_){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),n!=null?T==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Gt(n)):t.value!==""+Gt(n)&&(t.value=""+Gt(n)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),n!=null?Ya(t,T,Gt(n)):l!=null?Ya(t,T,Gt(l)):r!=null&&t.removeAttribute("value"),m==null&&g!=null&&(t.defaultChecked=!!g),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Gt(_):t.removeAttribute("name")}function gf(t,n,l,r,m,g,T,_){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),n!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){Qa(t);return}l=l!=null?""+Gt(l):"",n=n!=null?""+Gt(n):l,_||n===t.value||(t.value=n),t.defaultValue=n}r=r??m,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=_?t.checked:!!r,t.defaultChecked=!!r,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Qa(t)}function Ya(t,n,l){n==="number"&&$s(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Hi(t,n,l,r){if(t=t.options,n){n={};for(var m=0;m<l.length;m++)n["$"+l[m]]=!0;for(l=0;l<t.length;l++)m=n.hasOwnProperty("$"+t[l].value),t[l].selected!==m&&(t[l].selected=m),m&&r&&(t[l].defaultSelected=!0)}else{for(l=""+Gt(l),n=null,m=0;m<t.length;m++){if(t[m].value===l){t[m].selected=!0,r&&(t[m].defaultSelected=!0);return}n!==null||t[m].disabled||(n=t[m])}n!==null&&(n.selected=!0)}}function yf(t,n,l){if(n!=null&&(n=""+Gt(n),n!==t.value&&(t.value=n),l==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=l!=null?""+Gt(l):""}function vf(t,n,l,r){if(n==null){if(r!=null){if(l!=null)throw Error(s(92));if(Ie(r)){if(1<r.length)throw Error(s(93));r=r[0]}l=r}l==null&&(l=""),n=l}l=Gt(n),t.defaultValue=l,r=t.textContent,r===l&&r!==""&&r!==null&&(t.value=r),Qa(t)}function Oi(t,n){if(n){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=n;return}}t.textContent=n}var cE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sf(t,n,l){var r=n.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?r?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":r?t.setProperty(n,l):typeof l!="number"||l===0||cE.has(n)?n==="float"?t.cssFloat=l:t[n]=(""+l).trim():t[n]=l+"px"}function Tf(t,n,l){if(n!=null&&typeof n!="object")throw Error(s(62));if(t=t.style,l!=null){for(var r in l)!l.hasOwnProperty(r)||n!=null&&n.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var m in n)r=n[m],n.hasOwnProperty(m)&&l[m]!==r&&Sf(t,m,r)}else for(var g in n)n.hasOwnProperty(g)&&Sf(t,g,n[g])}function $a(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ks(t){return dE.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function cn(){}var Ka=null;function Xa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vi=null,ki=null;function Ef(t){var n=Bi(t);if(n&&(t=n.stateNode)){var l=t[St]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ja(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),n=l.name,l.type==="radio"&&n!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ht(""+n)+'"][type="radio"]'),n=0;n<l.length;n++){var r=l[n];if(r!==t&&r.form===t.form){var m=r[St]||null;if(!m)throw Error(s(90));Ja(r,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<l.length;n++)r=l[n],r.form===t.form&&pf(r)}break e;case"textarea":yf(t,l.value,l.defaultValue);break e;case"select":n=l.value,n!=null&&Hi(t,!!l.multiple,n,!1)}}}var Za=!1;function Cf(t,n,l){if(Za)return t(n,l);Za=!0;try{var r=t(n);return r}finally{if(Za=!1,(Vi!==null||ki!==null)&&(Pl(),Vi&&(n=Vi,t=ki,ki=Vi=null,Ef(n),t)))for(n=0;n<t.length;n++)Ef(t[n])}}function Go(t,n){var l=t.stateNode;if(l===null)return null;var r=l[St]||null;if(r===null)return null;l=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,n,typeof l));return l}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(fn)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{Wa=!1}var qn=null,ja=null,Xs=null;function _f(){if(Xs)return Xs;var t,n=ja,l=n.length,r,m="value"in qn?qn.value:qn.textContent,g=m.length;for(t=0;t<l&&n[t]===m[t];t++);var T=l-t;for(r=1;r<=T&&n[l-r]===m[g-r];r++);return Xs=m.slice(t,1<r?1-r:void 0)}function Zs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function Af(){return!1}function Tt(t){function n(l,r,m,g,T){this._reactName=l,this._targetInst=m,this.type=r,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(l=t[_],this[_]=l?l(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ws:Af,this.isPropagationStopped=Af,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),n}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=Tt(di),Oo=S({},di,{view:0,detail:0}),mE=Tt(Oo),er,tr,Vo,el=S({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ir,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(er=t.screenX-Vo.screenX,tr=t.screenY-Vo.screenY):tr=er=0,Vo=t),er)},movementY:function(t){return"movementY"in t?t.movementY:tr}}),wf=Tt(el),hE=S({},el,{dataTransfer:0}),pE=Tt(hE),gE=S({},Oo,{relatedTarget:0}),nr=Tt(gE),yE=S({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),vE=Tt(yE),SE=S({},di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TE=Tt(SE),EE=S({},di,{data:0}),xf=Tt(EE),CE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_E={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wE(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=AE[t])?!!n[t]:!1}function ir(){return wE}var xE=S({},Oo,{key:function(t){if(t.key){var n=CE[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Zs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_E[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ir,charCode:function(t){return t.type==="keypress"?Zs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NE=Tt(xE),bE=S({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=Tt(bE),RE=S({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ir}),ME=Tt(RE),DE=S({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),IE=Tt(DE),LE=S({},el,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UE=Tt(LE),qE=S({},di,{newState:0,oldState:0}),PE=Tt(qE),BE=[9,13,27,32],or=fn&&"CompositionEvent"in window,ko=null;fn&&"documentMode"in document&&(ko=document.documentMode);var zE=fn&&"TextEvent"in window&&!ko,bf=fn&&(!or||ko&&8<ko&&11>=ko),Rf=" ",Mf=!1;function Df(t,n){switch(t){case"keyup":return BE.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function If(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function GE(t,n){switch(t){case"compositionend":return If(n);case"keypress":return n.which!==32?null:(Mf=!0,Rf);case"textInput":return t=n.data,t===Rf&&Mf?null:t;default:return null}}function HE(t,n){if(Fi)return t==="compositionend"||!or&&Df(t,n)?(t=_f(),Xs=ja=qn=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return bf&&n.locale!=="ko"?null:n.data;default:return null}}var OE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!OE[t.type]:n==="textarea"}function Uf(t,n,l,r){Vi?ki?ki.push(r):ki=[r]:Vi=r,n=kl(n,"onChange"),0<n.length&&(l=new js("onChange","change",null,l,r),t.push({event:l,listeners:n}))}var Fo=null,Qo=null;function VE(t){gh(t,0)}function tl(t){var n=zo(t);if(pf(n))return t}function qf(t,n){if(t==="change")return n}var Pf=!1;if(fn){var sr;if(fn){var lr="oninput"in document;if(!lr){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),lr=typeof Bf.oninput=="function"}sr=lr}else sr=!1;Pf=sr&&(!document.documentMode||9<document.documentMode)}function zf(){Fo&&(Fo.detachEvent("onpropertychange",Gf),Qo=Fo=null)}function Gf(t){if(t.propertyName==="value"&&tl(Qo)){var n=[];Uf(n,Qo,t,Xa(t)),Cf(VE,n)}}function kE(t,n,l){t==="focusin"?(zf(),Fo=n,Qo=l,Fo.attachEvent("onpropertychange",Gf)):t==="focusout"&&zf()}function FE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Qo)}function QE(t,n){if(t==="click")return tl(n)}function JE(t,n){if(t==="input"||t==="change")return tl(n)}function YE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Mt=typeof Object.is=="function"?Object.is:YE;function Jo(t,n){if(Mt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var l=Object.keys(t),r=Object.keys(n);if(l.length!==r.length)return!1;for(r=0;r<l.length;r++){var m=l[r];if(!Ba.call(n,m)||!Mt(t[m],n[m]))return!1}return!0}function Hf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Of(t,n){var l=Hf(t);t=0;for(var r;l;){if(l.nodeType===3){if(r=t+l.textContent.length,t<=n&&r>=n)return{node:l,offset:n-t};t=r}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hf(l)}}function Vf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Vf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function kf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=$s(t.document);n instanceof t.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)t=n.contentWindow;else break;n=$s(t.document)}return n}function ar(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var $E=fn&&"documentMode"in document&&11>=document.documentMode,Qi=null,rr=null,Yo=null,ur=!1;function Ff(t,n,l){var r=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ur||Qi==null||Qi!==$s(r)||(r=Qi,"selectionStart"in r&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yo&&Jo(Yo,r)||(Yo=r,r=kl(rr,"onSelect"),0<r.length&&(n=new js("onSelect","select",null,n,l),t.push({event:n,listeners:r}),n.target=Qi)))}function mi(t,n){var l={};return l[t.toLowerCase()]=n.toLowerCase(),l["Webkit"+t]="webkit"+n,l["Moz"+t]="moz"+n,l}var Ji={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionrun:mi("Transition","TransitionRun"),transitionstart:mi("Transition","TransitionStart"),transitioncancel:mi("Transition","TransitionCancel"),transitionend:mi("Transition","TransitionEnd")},cr={},Qf={};fn&&(Qf=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function hi(t){if(cr[t])return cr[t];if(!Ji[t])return t;var n=Ji[t],l;for(l in n)if(n.hasOwnProperty(l)&&l in Qf)return cr[t]=n[l];return t}var Jf=hi("animationend"),Yf=hi("animationiteration"),$f=hi("animationstart"),KE=hi("transitionrun"),XE=hi("transitionstart"),ZE=hi("transitioncancel"),Kf=hi("transitionend"),Xf=new Map,fr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fr.push("scrollEnd");function Wt(t,n){Xf.set(t,n),fi(n,[t])}var nl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ot=[],Yi=0,dr=0;function il(){for(var t=Yi,n=dr=Yi=0;n<t;){var l=Ot[n];Ot[n++]=null;var r=Ot[n];Ot[n++]=null;var m=Ot[n];Ot[n++]=null;var g=Ot[n];if(Ot[n++]=null,r!==null&&m!==null){var T=r.pending;T===null?m.next=m:(m.next=T.next,T.next=m),r.pending=m}g!==0&&Zf(l,m,g)}}function ol(t,n,l,r){Ot[Yi++]=t,Ot[Yi++]=n,Ot[Yi++]=l,Ot[Yi++]=r,dr|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function mr(t,n,l,r){return ol(t,n,l,r),sl(t)}function pi(t,n){return ol(t,null,null,n),sl(t)}function Zf(t,n,l){t.lanes|=l;var r=t.alternate;r!==null&&(r.lanes|=l);for(var m=!1,g=t.return;g!==null;)g.childLanes|=l,r=g.alternate,r!==null&&(r.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(m=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,m&&n!==null&&(m=31-Rt(l),t=g.hiddenUpdates,r=t[m],r===null?t[m]=[n]:r.push(n),n.lane=l|536870912),g):null}function sl(t){if(50<ps)throw ps=0,Cu=null,Error(s(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var $i={};function WE(t,n,l,r){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,n,l,r){return new WE(t,n,l,r)}function hr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dn(t,n){var l=t.alternate;return l===null?(l=Dt(t.tag,n,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=n,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,n=t.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Wf(t,n){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,n=l.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function ll(t,n,l,r,m,g){var T=0;if(r=t,typeof t=="function")hr(t)&&(T=1);else if(typeof t=="string")T=i_(t,l,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case z:return t=Dt(31,l,n,m),t.elementType=z,t.lanes=g,t;case w:return gi(l.children,m,g,n);case L:T=8,m|=24;break;case V:return t=Dt(12,l,n,m|2),t.elementType=V,t.lanes=g,t;case ne:return t=Dt(13,l,n,m),t.elementType=ne,t.lanes=g,t;case ie:return t=Dt(19,l,n,m),t.elementType=ie,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:T=10;break e;case $:T=9;break e;case k:T=11;break e;case H:T=14;break e;case Q:T=16,r=null;break e}T=29,l=Error(s(130,t===null?"null":typeof t,"")),r=null}return n=Dt(T,l,n,m),n.elementType=t,n.type=r,n.lanes=g,n}function gi(t,n,l,r){return t=Dt(7,t,r,n),t.lanes=l,t}function pr(t,n,l){return t=Dt(6,t,null,n),t.lanes=l,t}function jf(t){var n=Dt(18,null,null,0);return n.stateNode=t,n}function gr(t,n,l){return n=Dt(4,t.children!==null?t.children:[],t.key,n),n.lanes=l,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var ed=new WeakMap;function Vt(t,n){if(typeof t=="object"&&t!==null){var l=ed.get(t);return l!==void 0?l:(n={value:t,source:n,stack:Wc(n)},ed.set(t,n),n)}return{value:t,source:n,stack:Wc(n)}}var Ki=[],Xi=0,al=null,$o=0,kt=[],Ft=0,Pn=null,on=1,sn="";function mn(t,n){Ki[Xi++]=$o,Ki[Xi++]=al,al=t,$o=n}function td(t,n,l){kt[Ft++]=on,kt[Ft++]=sn,kt[Ft++]=Pn,Pn=t;var r=on;t=sn;var m=32-Rt(r)-1;r&=~(1<<m),l+=1;var g=32-Rt(n)+m;if(30<g){var T=m-m%5;g=(r&(1<<T)-1).toString(32),r>>=T,m-=T,on=1<<32-Rt(n)+m|l<<m|r,sn=g+t}else on=1<<g|l<<m|r,sn=t}function yr(t){t.return!==null&&(mn(t,1),td(t,1,0))}function vr(t){for(;t===al;)al=Ki[--Xi],Ki[Xi]=null,$o=Ki[--Xi],Ki[Xi]=null;for(;t===Pn;)Pn=kt[--Ft],kt[Ft]=null,sn=kt[--Ft],kt[Ft]=null,on=kt[--Ft],kt[Ft]=null}function nd(t,n){kt[Ft++]=on,kt[Ft++]=sn,kt[Ft++]=Pn,on=n.id,sn=n.overflow,Pn=t}var at=null,Oe=null,xe=!1,Bn=null,Qt=!1,Sr=Error(s(519));function zn(t){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ko(Vt(n,t)),Sr}function id(t){var n=t.stateNode,l=t.type,r=t.memoizedProps;switch(n[lt]=t,n[St]=r,l){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(l=0;l<ys.length;l++)_e(ys[l],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":_e("invalid",n),gf(n,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":_e("invalid",n);break;case"textarea":_e("invalid",n),vf(n,r.value,r.defaultValue,r.children)}l=r.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||n.textContent===""+l||r.suppressHydrationWarning===!0||Th(n.textContent,l)?(r.popover!=null&&(_e("beforetoggle",n),_e("toggle",n)),r.onScroll!=null&&_e("scroll",n),r.onScrollEnd!=null&&_e("scrollend",n),r.onClick!=null&&(n.onclick=cn),n=!0):n=!1,n||zn(t,!0)}function od(t){for(at=t.return;at;)switch(at.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:at=at.return}}function Zi(t){if(t!==at)return!1;if(!xe)return od(t),xe=!0,!1;var n=t.tag,l;if((l=n!==3&&n!==27)&&((l=n===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Bu(t.type,t.memoizedProps)),l=!l),l&&Oe&&zn(t),od(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Oe=Rh(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Oe=Rh(t)}else n===27?(n=Oe,Wn(t.type)?(t=Vu,Vu=null,Oe=t):Oe=n):Oe=at?Yt(t.stateNode.nextSibling):null;return!0}function yi(){Oe=at=null,xe=!1}function Tr(){var t=Bn;return t!==null&&(At===null?At=t:At.push.apply(At,t),Bn=null),t}function Ko(t){Bn===null?Bn=[t]:Bn.push(t)}var Er=M(null),vi=null,hn=null;function Gn(t,n,l){oe(Er,n._currentValue),n._currentValue=l}function pn(t){t._currentValue=Er.current,K(Er)}function Cr(t,n,l){for(;t!==null;){var r=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),t===l)break;t=t.return}}function _r(t,n,l,r){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var _=g;g=m;for(var b=0;b<n.length;b++)if(_.context===n[b]){g.lanes|=l,_=g.alternate,_!==null&&(_.lanes|=l),Cr(g.return,l,t),r||(T=null);break e}g=_.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),Cr(T,l,t),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===t){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Wi(t,n,l,r){t=null;for(var m=n,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var _=m.type;Mt(m.pendingProps.value,T.value)||(t!==null?t.push(_):t=[_])}}else if(m===De.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Cs):t=[Cs])}m=m.return}t!==null&&_r(n,t,l,r),n.flags|=262144}function rl(t){for(t=t.firstContext;t!==null;){if(!Mt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Si(t){vi=t,hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rt(t){return sd(vi,t)}function ul(t,n){return vi===null&&Si(t),sd(t,n)}function sd(t,n){var l=n._currentValue;if(n={context:n,memoizedValue:l,next:null},hn===null){if(t===null)throw Error(s(308));hn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else hn=hn.next=n;return l}var jE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(l,r){t.push(r)}};this.abort=function(){n.aborted=!0,t.forEach(function(l){return l()})}},eC=i.unstable_scheduleCallback,tC=i.unstable_NormalPriority,Ze={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ar(){return{controller:new jE,data:new Map,refCount:0}}function Xo(t){t.refCount--,t.refCount===0&&eC(tC,function(){t.controller.abort()})}var Zo=null,wr=0,ji=0,eo=null;function nC(t,n){if(Zo===null){var l=Zo=[];wr=0,ji=bu(),eo={status:"pending",value:void 0,then:function(r){l.push(r)}}}return wr++,n.then(ld,ld),n}function ld(){if(--wr===0&&Zo!==null){eo!==null&&(eo.status="fulfilled");var t=Zo;Zo=null,ji=0,eo=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function iC(t,n){var l=[],r={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return t.then(function(){r.status="fulfilled",r.value=n;for(var m=0;m<l.length;m++)(0,l[m])(n)},function(m){for(r.status="rejected",r.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),r}var ad=G.S;G.S=function(t,n){Fm=Nt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&nC(t,n),ad!==null&&ad(t,n)};var Ti=M(null);function xr(){var t=Ti.current;return t!==null?t:He.pooledCache}function cl(t,n){n===null?oe(Ti,Ti.current):oe(Ti,n.pool)}function rd(){var t=xr();return t===null?null:{parent:Ze._currentValue,pool:t}}var to=Error(s(460)),Nr=Error(s(474)),fl=Error(s(542)),dl={then:function(){}};function ud(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cd(t,n,l){switch(l=t[l],l===void 0?t.push(n):l!==n&&(n.then(cn,cn),n=l),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,dd(t),t;default:if(typeof n.status=="string")n.then(cn,cn);else{if(t=He,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=n,t.status="pending",t.then(function(r){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=r}},function(r){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=r}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,dd(t),t}throw Ci=n,to}}function Ei(t){try{var n=t._init;return n(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ci=l,to):l}}var Ci=null;function fd(){if(Ci===null)throw Error(s(459));var t=Ci;return Ci=null,t}function dd(t){if(t===to||t===fl)throw Error(s(483))}var no=null,Wo=0;function ml(t){var n=Wo;return Wo+=1,no===null&&(no=[]),cd(no,t,n)}function jo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function hl(t,n){throw n.$$typeof===E?Error(s(525)):(t=Object.prototype.toString.call(n),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function md(t){function n(D,R){if(t){var q=D.deletions;q===null?(D.deletions=[R],D.flags|=16):q.push(R)}}function l(D,R){if(!t)return null;for(;R!==null;)n(D,R),R=R.sibling;return null}function r(D){for(var R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function m(D,R){return D=dn(D,R),D.index=0,D.sibling=null,D}function g(D,R,q){return D.index=q,t?(q=D.alternate,q!==null?(q=q.index,q<R?(D.flags|=67108866,R):q):(D.flags|=67108866,R)):(D.flags|=1048576,R)}function T(D){return t&&D.alternate===null&&(D.flags|=67108866),D}function _(D,R,q,J){return R===null||R.tag!==6?(R=pr(q,D.mode,J),R.return=D,R):(R=m(R,q),R.return=D,R)}function b(D,R,q,J){var de=q.type;return de===w?F(D,R,q.props.children,J,q.key):R!==null&&(R.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&Ei(de)===R.type)?(R=m(R,q.props),jo(R,q),R.return=D,R):(R=ll(q.type,q.key,q.props,null,D.mode,J),jo(R,q),R.return=D,R)}function P(D,R,q,J){return R===null||R.tag!==4||R.stateNode.containerInfo!==q.containerInfo||R.stateNode.implementation!==q.implementation?(R=gr(q,D.mode,J),R.return=D,R):(R=m(R,q.children||[]),R.return=D,R)}function F(D,R,q,J,de){return R===null||R.tag!==7?(R=gi(q,D.mode,J,de),R.return=D,R):(R=m(R,q),R.return=D,R)}function Y(D,R,q){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=pr(""+R,D.mode,q),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case A:return q=ll(R.type,R.key,R.props,null,D.mode,q),jo(q,R),q.return=D,q;case N:return R=gr(R,D.mode,q),R.return=D,R;case Q:return R=Ei(R),Y(D,R,q)}if(Ie(R)||te(R))return R=gi(R,D.mode,q,null),R.return=D,R;if(typeof R.then=="function")return Y(D,ml(R),q);if(R.$$typeof===U)return Y(D,ul(D,R),q);hl(D,R)}return null}function B(D,R,q,J){var de=R!==null?R.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return de!==null?null:_(D,R,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===de?b(D,R,q,J):null;case N:return q.key===de?P(D,R,q,J):null;case Q:return q=Ei(q),B(D,R,q,J)}if(Ie(q)||te(q))return de!==null?null:F(D,R,q,J,null);if(typeof q.then=="function")return B(D,R,ml(q),J);if(q.$$typeof===U)return B(D,R,ul(D,q),J);hl(D,q)}return null}function O(D,R,q,J,de){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return D=D.get(q)||null,_(R,D,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return D=D.get(J.key===null?q:J.key)||null,b(R,D,J,de);case N:return D=D.get(J.key===null?q:J.key)||null,P(R,D,J,de);case Q:return J=Ei(J),O(D,R,q,J,de)}if(Ie(J)||te(J))return D=D.get(q)||null,F(R,D,J,de,null);if(typeof J.then=="function")return O(D,R,q,ml(J),de);if(J.$$typeof===U)return O(D,R,q,ul(R,J),de);hl(R,J)}return null}function re(D,R,q,J){for(var de=null,Ne=null,ce=R,Te=R=0,we=null;ce!==null&&Te<q.length;Te++){ce.index>Te?(we=ce,ce=null):we=ce.sibling;var be=B(D,ce,q[Te],J);if(be===null){ce===null&&(ce=we);break}t&&ce&&be.alternate===null&&n(D,ce),R=g(be,R,Te),Ne===null?de=be:Ne.sibling=be,Ne=be,ce=we}if(Te===q.length)return l(D,ce),xe&&mn(D,Te),de;if(ce===null){for(;Te<q.length;Te++)ce=Y(D,q[Te],J),ce!==null&&(R=g(ce,R,Te),Ne===null?de=ce:Ne.sibling=ce,Ne=ce);return xe&&mn(D,Te),de}for(ce=r(ce);Te<q.length;Te++)we=O(ce,D,Te,q[Te],J),we!==null&&(t&&we.alternate!==null&&ce.delete(we.key===null?Te:we.key),R=g(we,R,Te),Ne===null?de=we:Ne.sibling=we,Ne=we);return t&&ce.forEach(function(ii){return n(D,ii)}),xe&&mn(D,Te),de}function pe(D,R,q,J){if(q==null)throw Error(s(151));for(var de=null,Ne=null,ce=R,Te=R=0,we=null,be=q.next();ce!==null&&!be.done;Te++,be=q.next()){ce.index>Te?(we=ce,ce=null):we=ce.sibling;var ii=B(D,ce,be.value,J);if(ii===null){ce===null&&(ce=we);break}t&&ce&&ii.alternate===null&&n(D,ce),R=g(ii,R,Te),Ne===null?de=ii:Ne.sibling=ii,Ne=ii,ce=we}if(be.done)return l(D,ce),xe&&mn(D,Te),de;if(ce===null){for(;!be.done;Te++,be=q.next())be=Y(D,be.value,J),be!==null&&(R=g(be,R,Te),Ne===null?de=be:Ne.sibling=be,Ne=be);return xe&&mn(D,Te),de}for(ce=r(ce);!be.done;Te++,be=q.next())be=O(ce,D,Te,be.value,J),be!==null&&(t&&be.alternate!==null&&ce.delete(be.key===null?Te:be.key),R=g(be,R,Te),Ne===null?de=be:Ne.sibling=be,Ne=be);return t&&ce.forEach(function(h_){return n(D,h_)}),xe&&mn(D,Te),de}function ze(D,R,q,J){if(typeof q=="object"&&q!==null&&q.type===w&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var de=q.key;R!==null;){if(R.key===de){if(de=q.type,de===w){if(R.tag===7){l(D,R.sibling),J=m(R,q.props.children),J.return=D,D=J;break e}}else if(R.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&Ei(de)===R.type){l(D,R.sibling),J=m(R,q.props),jo(J,q),J.return=D,D=J;break e}l(D,R);break}else n(D,R);R=R.sibling}q.type===w?(J=gi(q.props.children,D.mode,J,q.key),J.return=D,D=J):(J=ll(q.type,q.key,q.props,null,D.mode,J),jo(J,q),J.return=D,D=J)}return T(D);case N:e:{for(de=q.key;R!==null;){if(R.key===de)if(R.tag===4&&R.stateNode.containerInfo===q.containerInfo&&R.stateNode.implementation===q.implementation){l(D,R.sibling),J=m(R,q.children||[]),J.return=D,D=J;break e}else{l(D,R);break}else n(D,R);R=R.sibling}J=gr(q,D.mode,J),J.return=D,D=J}return T(D);case Q:return q=Ei(q),ze(D,R,q,J)}if(Ie(q))return re(D,R,q,J);if(te(q)){if(de=te(q),typeof de!="function")throw Error(s(150));return q=de.call(q),pe(D,R,q,J)}if(typeof q.then=="function")return ze(D,R,ml(q),J);if(q.$$typeof===U)return ze(D,R,ul(D,q),J);hl(D,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,R!==null&&R.tag===6?(l(D,R.sibling),J=m(R,q),J.return=D,D=J):(l(D,R),J=pr(q,D.mode,J),J.return=D,D=J),T(D)):l(D,R)}return function(D,R,q,J){try{Wo=0;var de=ze(D,R,q,J);return no=null,de}catch(ce){if(ce===to||ce===fl)throw ce;var Ne=Dt(29,ce,null,D.mode);return Ne.lanes=J,Ne.return=D,Ne}finally{}}}var _i=md(!0),hd=md(!1),Hn=!1;function br(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rr(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function On(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(t,n,l){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Me&2)!==0){var m=r.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),r.pending=n,n=sl(t),Zf(t,null,l),n}return ol(t,r,n,l),sl(t)}function es(t,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194048)!==0)){var r=n.lanes;r&=t.pendingLanes,l|=r,n.lanes=l,sf(t,l)}}function Mr(t,n){var l=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,l===r)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?m=g=n:g=g.next=n}else m=g=n;l={baseState:r.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:r.shared,callbacks:r.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=n:t.next=n,l.lastBaseUpdate=n}var Dr=!1;function ts(){if(Dr){var t=eo;if(t!==null)throw t}}function ns(t,n,l,r){Dr=!1;var m=t.updateQueue;Hn=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,_=m.shared.pending;if(_!==null){m.shared.pending=null;var b=_,P=b.next;b.next=null,T===null?g=P:T.next=P,T=b;var F=t.alternate;F!==null&&(F=F.updateQueue,_=F.lastBaseUpdate,_!==T&&(_===null?F.firstBaseUpdate=P:_.next=P,F.lastBaseUpdate=b))}if(g!==null){var Y=m.baseState;T=0,F=P=b=null,_=g;do{var B=_.lane&-536870913,O=B!==_.lane;if(O?(Ae&B)===B:(r&B)===B){B!==0&&B===ji&&(Dr=!0),F!==null&&(F=F.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var re=t,pe=_;B=n;var ze=l;switch(pe.tag){case 1:if(re=pe.payload,typeof re=="function"){Y=re.call(ze,Y,B);break e}Y=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=pe.payload,B=typeof re=="function"?re.call(ze,Y,B):re,B==null)break e;Y=S({},Y,B);break e;case 2:Hn=!0}}B=_.callback,B!==null&&(t.flags|=64,O&&(t.flags|=8192),O=m.callbacks,O===null?m.callbacks=[B]:O.push(B))}else O={lane:B,tag:_.tag,payload:_.payload,callback:_.callback,next:null},F===null?(P=F=O,b=Y):F=F.next=O,T|=B;if(_=_.next,_===null){if(_=m.shared.pending,_===null)break;O=_,_=O.next,O.next=null,m.lastBaseUpdate=O,m.shared.pending=null}}while(!0);F===null&&(b=Y),m.baseState=b,m.firstBaseUpdate=P,m.lastBaseUpdate=F,g===null&&(m.shared.lanes=0),Yn|=T,t.lanes=T,t.memoizedState=Y}}function pd(t,n){if(typeof t!="function")throw Error(s(191,t));t.call(n)}function gd(t,n){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)pd(l[t],n)}var io=M(null),pl=M(0);function yd(t,n){t=An,oe(pl,t),oe(io,n),An=t|n.baseLanes}function Ir(){oe(pl,An),oe(io,io.current)}function Lr(){An=pl.current,K(io),K(pl)}var It=M(null),Jt=null;function kn(t){var n=t.alternate;oe($e,$e.current&1),oe(It,t),Jt===null&&(n===null||io.current!==null||n.memoizedState!==null)&&(Jt=t)}function Ur(t){oe($e,$e.current),oe(It,t),Jt===null&&(Jt=t)}function vd(t){t.tag===22?(oe($e,$e.current),oe(It,t),Jt===null&&(Jt=t)):Fn()}function Fn(){oe($e,$e.current),oe(It,It.current)}function Lt(t){K(It),Jt===t&&(Jt=null),K($e)}var $e=M(0);function gl(t){for(var n=t;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Hu(l)||Ou(l)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var gn=0,Se=null,Pe=null,We=null,yl=!1,oo=!1,Ai=!1,vl=0,is=0,so=null,oC=0;function Qe(){throw Error(s(321))}function qr(t,n){if(n===null)return!1;for(var l=0;l<n.length&&l<t.length;l++)if(!Mt(t[l],n[l]))return!1;return!0}function Pr(t,n,l,r,m,g){return gn=g,Se=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=t===null||t.memoizedState===null?tm:Zr,Ai=!1,g=l(r,m),Ai=!1,oo&&(g=Td(n,l,r,m)),Sd(t),g}function Sd(t){G.H=ls;var n=Pe!==null&&Pe.next!==null;if(gn=0,We=Pe=Se=null,yl=!1,is=0,so=null,n)throw Error(s(300));t===null||je||(t=t.dependencies,t!==null&&rl(t)&&(je=!0))}function Td(t,n,l,r){Se=t;var m=0;do{if(oo&&(so=null),is=0,oo=!1,25<=m)throw Error(s(301));if(m+=1,We=Pe=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}G.H=nm,g=n(l,r)}while(oo);return g}function sC(){var t=G.H,n=t.useState()[0];return n=typeof n.then=="function"?os(n):n,t=t.useState()[0],(Pe!==null?Pe.memoizedState:null)!==t&&(Se.flags|=1024),n}function Br(){var t=vl!==0;return vl=0,t}function zr(t,n,l){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~l}function Gr(t){if(yl){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}yl=!1}gn=0,We=Pe=Se=null,oo=!1,is=vl=0,so=null}function pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Se.memoizedState=We=t:We=We.next=t,We}function Ke(){if(Pe===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var n=We===null?Se.memoizedState:We.next;if(n!==null)We=n,Pe=t;else{if(t===null)throw Se.alternate===null?Error(s(467)):Error(s(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},We===null?Se.memoizedState=We=t:We=We.next=t}return We}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function os(t){var n=is;return is+=1,so===null&&(so=[]),t=cd(so,t,n),n=Se,(We===null?n.memoizedState:We.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?tm:Zr),t}function Tl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return os(t);if(t.$$typeof===U)return rt(t)}throw Error(s(438,String(t)))}function Hr(t){var n=null,l=Se.updateQueue;if(l!==null&&(n=l.memoCache),n==null){var r=Se.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(n={data:r.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),l===null&&(l=Sl(),Se.updateQueue=l),l.memoCache=n,l=n.data[n.index],l===void 0)for(l=n.data[n.index]=Array(t),r=0;r<t;r++)l[r]=X;return n.index++,l}function yn(t,n){return typeof n=="function"?n(t):n}function El(t){var n=Ke();return Or(n,Pe,t)}function Or(t,n,l){var r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=l;var m=t.baseQueue,g=r.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}n.baseQueue=m=g,r.pending=null}if(g=t.baseState,m===null)t.memoizedState=g;else{n=m.next;var _=T=null,b=null,P=n,F=!1;do{var Y=P.lane&-536870913;if(Y!==P.lane?(Ae&Y)===Y:(gn&Y)===Y){var B=P.revertLane;if(B===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),Y===ji&&(F=!0);else if((gn&B)===B){P=P.next,B===ji&&(F=!0);continue}else Y={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},b===null?(_=b=Y,T=g):b=b.next=Y,Se.lanes|=B,Yn|=B;Y=P.action,Ai&&l(g,Y),g=P.hasEagerState?P.eagerState:l(g,Y)}else B={lane:Y,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},b===null?(_=b=B,T=g):b=b.next=B,Se.lanes|=Y,Yn|=Y;P=P.next}while(P!==null&&P!==n);if(b===null?T=g:b.next=_,!Mt(g,t.memoizedState)&&(je=!0,F&&(l=eo,l!==null)))throw l;t.memoizedState=g,t.baseState=T,t.baseQueue=b,r.lastRenderedState=g}return m===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Vr(t){var n=Ke(),l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var r=l.dispatch,m=l.pending,g=n.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do g=t(g,T.action),T=T.next;while(T!==m);Mt(g,n.memoizedState)||(je=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),l.lastRenderedState=g}return[g,r]}function Ed(t,n,l){var r=Se,m=Ke(),g=xe;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=n();var T=!Mt((Pe||m).memoizedState,l);if(T&&(m.memoizedState=l,je=!0),m=m.queue,Qr(Ad.bind(null,r,m,t),[t]),m.getSnapshot!==n||T||We!==null&&We.memoizedState.tag&1){if(r.flags|=2048,lo(9,{destroy:void 0},_d.bind(null,r,m,l,n),null),He===null)throw Error(s(349));g||(gn&127)!==0||Cd(r,n,l)}return l}function Cd(t,n,l){t.flags|=16384,t={getSnapshot:n,value:l},n=Se.updateQueue,n===null?(n=Sl(),Se.updateQueue=n,n.stores=[t]):(l=n.stores,l===null?n.stores=[t]:l.push(t))}function _d(t,n,l,r){n.value=l,n.getSnapshot=r,wd(n)&&xd(t)}function Ad(t,n,l){return l(function(){wd(n)&&xd(t)})}function wd(t){var n=t.getSnapshot;t=t.value;try{var l=n();return!Mt(t,l)}catch{return!0}}function xd(t){var n=pi(t,2);n!==null&&wt(n,t,2)}function kr(t){var n=pt();if(typeof t=="function"){var l=t;if(t=l(),Ai){Ln(!0);try{l()}finally{Ln(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:t},n}function Nd(t,n,l,r){return t.baseState=l,Or(t,Pe,typeof r=="function"?r:yn)}function lC(t,n,l,r,m){if(Al(t))throw Error(s(485));if(t=n.action,t!==null){var g={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};G.T!==null?l(!0):g.isTransition=!1,r(g),l=n.pending,l===null?(g.next=n.pending=g,bd(n,g)):(g.next=l.next,n.pending=l.next=g)}}function bd(t,n){var l=n.action,r=n.payload,m=t.state;if(n.isTransition){var g=G.T,T={};G.T=T;try{var _=l(m,r),b=G.S;b!==null&&b(T,_),Rd(t,n,_)}catch(P){Fr(t,n,P)}finally{g!==null&&T.types!==null&&(g.types=T.types),G.T=g}}else try{g=l(m,r),Rd(t,n,g)}catch(P){Fr(t,n,P)}}function Rd(t,n,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(r){Md(t,n,r)},function(r){return Fr(t,n,r)}):Md(t,n,l)}function Md(t,n,l){n.status="fulfilled",n.value=l,Dd(n),t.state=l,n=t.pending,n!==null&&(l=n.next,l===n?t.pending=null:(l=l.next,n.next=l,bd(t,l)))}function Fr(t,n,l){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do n.status="rejected",n.reason=l,Dd(n),n=n.next;while(n!==r)}t.action=null}function Dd(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Id(t,n){return n}function Ld(t,n){if(xe){var l=He.formState;if(l!==null){e:{var r=Se;if(xe){if(Oe){t:{for(var m=Oe,g=Qt;m.nodeType!==8;){if(!g){m=null;break t}if(m=Yt(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Oe=Yt(m.nextSibling),r=m.data==="F!";break e}}zn(r)}r=!1}r&&(n=l[0])}}return l=pt(),l.memoizedState=l.baseState=n,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:n},l.queue=r,l=Wd.bind(null,Se,r),r.dispatch=l,r=kr(!1),g=Xr.bind(null,Se,!1,r.queue),r=pt(),m={state:n,dispatch:null,action:t,pending:null},r.queue=m,l=lC.bind(null,Se,m,g,l),m.dispatch=l,r.memoizedState=t,[n,l,!1]}function Ud(t){var n=Ke();return qd(n,Pe,t)}function qd(t,n,l){if(n=Or(t,n,Id)[0],t=El(yn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var r=os(n)}catch(T){throw T===to?fl:T}else r=n;n=Ke();var m=n.queue,g=m.dispatch;return l!==n.memoizedState&&(Se.flags|=2048,lo(9,{destroy:void 0},aC.bind(null,m,l),null)),[r,g,t]}function aC(t,n){t.action=n}function Pd(t){var n=Ke(),l=Pe;if(l!==null)return qd(n,l,t);Ke(),n=n.memoizedState,l=Ke();var r=l.queue.dispatch;return l.memoizedState=t,[n,r,!1]}function lo(t,n,l,r){return t={tag:t,create:l,deps:r,inst:n,next:null},n=Se.updateQueue,n===null&&(n=Sl(),Se.updateQueue=n),l=n.lastEffect,l===null?n.lastEffect=t.next=t:(r=l.next,l.next=t,t.next=r,n.lastEffect=t),t}function Bd(){return Ke().memoizedState}function Cl(t,n,l,r){var m=pt();Se.flags|=t,m.memoizedState=lo(1|n,{destroy:void 0},l,r===void 0?null:r)}function _l(t,n,l,r){var m=Ke();r=r===void 0?null:r;var g=m.memoizedState.inst;Pe!==null&&r!==null&&qr(r,Pe.memoizedState.deps)?m.memoizedState=lo(n,g,l,r):(Se.flags|=t,m.memoizedState=lo(1|n,g,l,r))}function zd(t,n){Cl(8390656,8,t,n)}function Qr(t,n){_l(2048,8,t,n)}function rC(t){Se.flags|=4;var n=Se.updateQueue;if(n===null)n=Sl(),Se.updateQueue=n,n.events=[t];else{var l=n.events;l===null?n.events=[t]:l.push(t)}}function Gd(t){var n=Ke().memoizedState;return rC({ref:n,nextImpl:t}),function(){if((Me&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Hd(t,n){return _l(4,2,t,n)}function Od(t,n){return _l(4,4,t,n)}function Vd(t,n){if(typeof n=="function"){t=t();var l=n(t);return function(){typeof l=="function"?l():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function kd(t,n,l){l=l!=null?l.concat([t]):null,_l(4,4,Vd.bind(null,n,t),l)}function Jr(){}function Fd(t,n){var l=Ke();n=n===void 0?null:n;var r=l.memoizedState;return n!==null&&qr(n,r[1])?r[0]:(l.memoizedState=[t,n],t)}function Qd(t,n){var l=Ke();n=n===void 0?null:n;var r=l.memoizedState;if(n!==null&&qr(n,r[1]))return r[0];if(r=t(),Ai){Ln(!0);try{t()}finally{Ln(!1)}}return l.memoizedState=[r,n],r}function Yr(t,n,l){return l===void 0||(gn&1073741824)!==0&&(Ae&261930)===0?t.memoizedState=n:(t.memoizedState=l,t=Jm(),Se.lanes|=t,Yn|=t,l)}function Jd(t,n,l,r){return Mt(l,n)?l:io.current!==null?(t=Yr(t,l,r),Mt(t,n)||(je=!0),t):(gn&42)===0||(gn&1073741824)!==0&&(Ae&261930)===0?(je=!0,t.memoizedState=l):(t=Jm(),Se.lanes|=t,Yn|=t,n)}function Yd(t,n,l,r,m){var g=ee.p;ee.p=g!==0&&8>g?g:8;var T=G.T,_={};G.T=_,Xr(t,!1,n,l);try{var b=m(),P=G.S;if(P!==null&&P(_,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var F=iC(b,r);ss(t,n,F,Pt(t))}else ss(t,n,r,Pt(t))}catch(Y){ss(t,n,{then:function(){},status:"rejected",reason:Y},Pt())}finally{ee.p=g,T!==null&&_.types!==null&&(T.types=_.types),G.T=T}}function uC(){}function $r(t,n,l,r){if(t.tag!==5)throw Error(s(476));var m=$d(t).queue;Yd(t,m,n,fe,l===null?uC:function(){return Kd(t),l(r)})}function $d(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:fe},next:null};var l={};return n.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:l},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Kd(t){var n=$d(t);n.next===null&&(n=t.alternate.memoizedState),ss(t,n.next.queue,{},Pt())}function Kr(){return rt(Cs)}function Xd(){return Ke().memoizedState}function Zd(){return Ke().memoizedState}function cC(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var l=Pt();t=On(l);var r=Vn(n,t,l);r!==null&&(wt(r,n,l),es(r,n,l)),n={cache:Ar()},t.payload=n;return}n=n.return}}function fC(t,n,l){var r=Pt();l={lane:r,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Al(t)?jd(n,l):(l=mr(t,n,l,r),l!==null&&(wt(l,t,r),em(l,n,r)))}function Wd(t,n,l){var r=Pt();ss(t,n,l,r)}function ss(t,n,l,r){var m={lane:r,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Al(t))jd(n,m);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var T=n.lastRenderedState,_=g(T,l);if(m.hasEagerState=!0,m.eagerState=_,Mt(_,T))return ol(t,n,m,0),He===null&&il(),!1}catch{}finally{}if(l=mr(t,n,m,r),l!==null)return wt(l,t,r),em(l,n,r),!0}return!1}function Xr(t,n,l,r){if(r={lane:2,revertLane:bu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Al(t)){if(n)throw Error(s(479))}else n=mr(t,l,r,2),n!==null&&wt(n,t,2)}function Al(t){var n=t.alternate;return t===Se||n!==null&&n===Se}function jd(t,n){oo=yl=!0;var l=t.pending;l===null?n.next=n:(n.next=l.next,l.next=n),t.pending=n}function em(t,n,l){if((l&4194048)!==0){var r=n.lanes;r&=t.pendingLanes,l|=r,n.lanes=l,sf(t,l)}}var ls={readContext:rt,use:Tl,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};ls.useEffectEvent=Qe;var tm={readContext:rt,use:Tl,useCallback:function(t,n){return pt().memoizedState=[t,n===void 0?null:n],t},useContext:rt,useEffect:zd,useImperativeHandle:function(t,n,l){l=l!=null?l.concat([t]):null,Cl(4194308,4,Vd.bind(null,n,t),l)},useLayoutEffect:function(t,n){return Cl(4194308,4,t,n)},useInsertionEffect:function(t,n){Cl(4,2,t,n)},useMemo:function(t,n){var l=pt();n=n===void 0?null:n;var r=t();if(Ai){Ln(!0);try{t()}finally{Ln(!1)}}return l.memoizedState=[r,n],r},useReducer:function(t,n,l){var r=pt();if(l!==void 0){var m=l(n);if(Ai){Ln(!0);try{l(n)}finally{Ln(!1)}}}else m=n;return r.memoizedState=r.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},r.queue=t,t=t.dispatch=fC.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var n=pt();return t={current:t},n.memoizedState=t},useState:function(t){t=kr(t);var n=t.queue,l=Wd.bind(null,Se,n);return n.dispatch=l,[t.memoizedState,l]},useDebugValue:Jr,useDeferredValue:function(t,n){var l=pt();return Yr(l,t,n)},useTransition:function(){var t=kr(!1);return t=Yd.bind(null,Se,t.queue,!0,!1),pt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,l){var r=Se,m=pt();if(xe){if(l===void 0)throw Error(s(407));l=l()}else{if(l=n(),He===null)throw Error(s(349));(Ae&127)!==0||Cd(r,n,l)}m.memoizedState=l;var g={value:l,getSnapshot:n};return m.queue=g,zd(Ad.bind(null,r,g,t),[t]),r.flags|=2048,lo(9,{destroy:void 0},_d.bind(null,r,g,l,n),null),l},useId:function(){var t=pt(),n=He.identifierPrefix;if(xe){var l=sn,r=on;l=(r&~(1<<32-Rt(r)-1)).toString(32)+l,n="_"+n+"R_"+l,l=vl++,0<l&&(n+="H"+l.toString(32)),n+="_"}else l=oC++,n="_"+n+"r_"+l.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Kr,useFormState:Ld,useActionState:Ld,useOptimistic:function(t){var n=pt();n.memoizedState=n.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=l,n=Xr.bind(null,Se,!0,l),l.dispatch=n,[t,n]},useMemoCache:Hr,useCacheRefresh:function(){return pt().memoizedState=cC.bind(null,Se)},useEffectEvent:function(t){var n=pt(),l={impl:t};return n.memoizedState=l,function(){if((Me&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Zr={readContext:rt,use:Tl,useCallback:Fd,useContext:rt,useEffect:Qr,useImperativeHandle:kd,useInsertionEffect:Hd,useLayoutEffect:Od,useMemo:Qd,useReducer:El,useRef:Bd,useState:function(){return El(yn)},useDebugValue:Jr,useDeferredValue:function(t,n){var l=Ke();return Jd(l,Pe.memoizedState,t,n)},useTransition:function(){var t=El(yn)[0],n=Ke().memoizedState;return[typeof t=="boolean"?t:os(t),n]},useSyncExternalStore:Ed,useId:Xd,useHostTransitionStatus:Kr,useFormState:Ud,useActionState:Ud,useOptimistic:function(t,n){var l=Ke();return Nd(l,Pe,t,n)},useMemoCache:Hr,useCacheRefresh:Zd};Zr.useEffectEvent=Gd;var nm={readContext:rt,use:Tl,useCallback:Fd,useContext:rt,useEffect:Qr,useImperativeHandle:kd,useInsertionEffect:Hd,useLayoutEffect:Od,useMemo:Qd,useReducer:Vr,useRef:Bd,useState:function(){return Vr(yn)},useDebugValue:Jr,useDeferredValue:function(t,n){var l=Ke();return Pe===null?Yr(l,t,n):Jd(l,Pe.memoizedState,t,n)},useTransition:function(){var t=Vr(yn)[0],n=Ke().memoizedState;return[typeof t=="boolean"?t:os(t),n]},useSyncExternalStore:Ed,useId:Xd,useHostTransitionStatus:Kr,useFormState:Pd,useActionState:Pd,useOptimistic:function(t,n){var l=Ke();return Pe!==null?Nd(l,Pe,t,n):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Hr,useCacheRefresh:Zd};nm.useEffectEvent=Gd;function Wr(t,n,l,r){n=t.memoizedState,l=l(r,n),l=l==null?n:S({},n,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var jr={enqueueSetState:function(t,n,l){t=t._reactInternals;var r=Pt(),m=On(r);m.payload=n,l!=null&&(m.callback=l),n=Vn(t,m,r),n!==null&&(wt(n,t,r),es(n,t,r))},enqueueReplaceState:function(t,n,l){t=t._reactInternals;var r=Pt(),m=On(r);m.tag=1,m.payload=n,l!=null&&(m.callback=l),n=Vn(t,m,r),n!==null&&(wt(n,t,r),es(n,t,r))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var l=Pt(),r=On(l);r.tag=2,n!=null&&(r.callback=n),n=Vn(t,r,l),n!==null&&(wt(n,t,l),es(n,t,l))}};function im(t,n,l,r,m,g,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,g,T):n.prototype&&n.prototype.isPureReactComponent?!Jo(l,r)||!Jo(m,g):!0}function om(t,n,l,r){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,r),n.state!==t&&jr.enqueueReplaceState(n,n.state,null)}function wi(t,n){var l=n;if("ref"in n){l={};for(var r in n)r!=="ref"&&(l[r]=n[r])}if(t=t.defaultProps){l===n&&(l=S({},l));for(var m in t)l[m]===void 0&&(l[m]=t[m])}return l}function sm(t){nl(t)}function lm(t){console.error(t)}function am(t){nl(t)}function wl(t,n){try{var l=t.onUncaughtError;l(n.value,{componentStack:n.stack})}catch(r){setTimeout(function(){throw r})}}function rm(t,n,l){try{var r=t.onCaughtError;r(l.value,{componentStack:l.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function eu(t,n,l){return l=On(l),l.tag=3,l.payload={element:null},l.callback=function(){wl(t,n)},l}function um(t){return t=On(t),t.tag=3,t}function cm(t,n,l,r){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=r.value;t.payload=function(){return m(g)},t.callback=function(){rm(n,l,r)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){rm(n,l,r),typeof m!="function"&&($n===null?$n=new Set([this]):$n.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})})}function dC(t,n,l,r,m){if(l.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(n=l.alternate,n!==null&&Wi(n,l,m,!0),l=It.current,l!==null){switch(l.tag){case 31:case 13:return Jt===null?Bl():l.alternate===null&&Je===0&&(Je=3),l.flags&=-257,l.flags|=65536,l.lanes=m,r===dl?l.flags|=16384:(n=l.updateQueue,n===null?l.updateQueue=new Set([r]):n.add(r),wu(t,r,m)),!1;case 22:return l.flags|=65536,r===dl?l.flags|=16384:(n=l.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([r])},l.updateQueue=n):(l=n.retryQueue,l===null?n.retryQueue=new Set([r]):l.add(r)),wu(t,r,m)),!1}throw Error(s(435,l.tag))}return wu(t,r,m),Bl(),!1}if(xe)return n=It.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,r!==Sr&&(t=Error(s(422),{cause:r}),Ko(Vt(t,l)))):(r!==Sr&&(n=Error(s(423),{cause:r}),Ko(Vt(n,l))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,r=Vt(r,l),m=eu(t.stateNode,r,m),Mr(t,m),Je!==4&&(Je=2)),!1;var g=Error(s(520),{cause:r});if(g=Vt(g,l),hs===null?hs=[g]:hs.push(g),Je!==4&&(Je=2),n===null)return!0;r=Vt(r,l),l=n;do{switch(l.tag){case 3:return l.flags|=65536,t=m&-m,l.lanes|=t,t=eu(l.stateNode,r,t),Mr(l,t),!1;case 1:if(n=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&($n===null||!$n.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=um(m),cm(m,t,l,r),Mr(l,m),!1}l=l.return}while(l!==null);return!1}var tu=Error(s(461)),je=!1;function ut(t,n,l,r){n.child=t===null?hd(n,null,l,r):_i(n,t.child,l,r)}function fm(t,n,l,r,m){l=l.render;var g=n.ref;if("ref"in r){var T={};for(var _ in r)_!=="ref"&&(T[_]=r[_])}else T=r;return Si(n),r=Pr(t,n,l,T,g,m),_=Br(),t!==null&&!je?(zr(t,n,m),vn(t,n,m)):(xe&&_&&yr(n),n.flags|=1,ut(t,n,r,m),n.child)}function dm(t,n,l,r,m){if(t===null){var g=l.type;return typeof g=="function"&&!hr(g)&&g.defaultProps===void 0&&l.compare===null?(n.tag=15,n.type=g,mm(t,n,g,r,m)):(t=ll(l.type,null,r,n,n.mode,m),t.ref=n.ref,t.return=n,n.child=t)}if(g=t.child,!uu(t,m)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:Jo,l(T,r)&&t.ref===n.ref)return vn(t,n,m)}return n.flags|=1,t=dn(g,r),t.ref=n.ref,t.return=n,n.child=t}function mm(t,n,l,r,m){if(t!==null){var g=t.memoizedProps;if(Jo(g,r)&&t.ref===n.ref)if(je=!1,n.pendingProps=r=g,uu(t,m))(t.flags&131072)!==0&&(je=!0);else return n.lanes=t.lanes,vn(t,n,m)}return nu(t,n,l,r,m)}function hm(t,n,l,r){var m=r.children,g=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,t!==null){for(r=n.child=t.child,m=0;r!==null;)m=m|r.lanes|r.childLanes,r=r.sibling;r=m&~g}else r=0,n.child=null;return pm(t,n,g,l,r)}if((l&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&cl(n,g!==null?g.cachePool:null),g!==null?yd(n,g):Ir(),vd(n);else return r=n.lanes=536870912,pm(t,n,g!==null?g.baseLanes|l:l,l,r)}else g!==null?(cl(n,g.cachePool),yd(n,g),Fn(),n.memoizedState=null):(t!==null&&cl(n,null),Ir(),Fn());return ut(t,n,m,l),n.child}function as(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function pm(t,n,l,r,m){var g=xr();return g=g===null?null:{parent:Ze._currentValue,pool:g},n.memoizedState={baseLanes:l,cachePool:g},t!==null&&cl(n,null),Ir(),vd(n),t!==null&&Wi(t,n,r,!0),n.childLanes=m,null}function xl(t,n){return n=bl({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function gm(t,n,l){return _i(n,t.child,null,l),t=xl(n,n.pendingProps),t.flags|=2,Lt(n),n.memoizedState=null,t}function mC(t,n,l){var r=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(xe){if(r.mode==="hidden")return t=xl(n,r),n.lanes=536870912,as(null,t);if(Ur(n),(t=Oe)?(t=bh(t,Qt),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Pn!==null?{id:on,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},l=jf(t),l.return=n,n.child=l,at=n,Oe=null)):t=null,t===null)throw zn(n);return n.lanes=536870912,null}return xl(n,r)}var g=t.memoizedState;if(g!==null){var T=g.dehydrated;if(Ur(n),m)if(n.flags&256)n.flags&=-257,n=gm(t,n,l);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(s(558));else if(je||Wi(t,n,l,!1),m=(l&t.childLanes)!==0,je||m){if(r=He,r!==null&&(T=lf(r,l),T!==0&&T!==g.retryLane))throw g.retryLane=T,pi(t,T),wt(r,t,T),tu;Bl(),n=gm(t,n,l)}else t=g.treeContext,Oe=Yt(T.nextSibling),at=n,xe=!0,Bn=null,Qt=!1,t!==null&&nd(n,t),n=xl(n,r),n.flags|=4096;return n}return t=dn(t.child,{mode:r.mode,children:r.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Nl(t,n){var l=n.ref;if(l===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(t===null||t.ref!==l)&&(n.flags|=4194816)}}function nu(t,n,l,r,m){return Si(n),l=Pr(t,n,l,r,void 0,m),r=Br(),t!==null&&!je?(zr(t,n,m),vn(t,n,m)):(xe&&r&&yr(n),n.flags|=1,ut(t,n,l,m),n.child)}function ym(t,n,l,r,m,g){return Si(n),n.updateQueue=null,l=Td(n,r,l,m),Sd(t),r=Br(),t!==null&&!je?(zr(t,n,g),vn(t,n,g)):(xe&&r&&yr(n),n.flags|=1,ut(t,n,l,g),n.child)}function vm(t,n,l,r,m){if(Si(n),n.stateNode===null){var g=$i,T=l.contextType;typeof T=="object"&&T!==null&&(g=rt(T)),g=new l(r,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=jr,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=r,g.state=n.memoizedState,g.refs={},br(n),T=l.contextType,g.context=typeof T=="object"&&T!==null?rt(T):$i,g.state=n.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Wr(n,l,T,r),g.state=n.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&jr.enqueueReplaceState(g,g.state,null),ns(n,r,g,m),ts(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),r=!0}else if(t===null){g=n.stateNode;var _=n.memoizedProps,b=wi(l,_);g.props=b;var P=g.context,F=l.contextType;T=$i,typeof F=="object"&&F!==null&&(T=rt(F));var Y=l.getDerivedStateFromProps;F=typeof Y=="function"||typeof g.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,F||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_||P!==T)&&om(n,g,r,T),Hn=!1;var B=n.memoizedState;g.state=B,ns(n,r,g,m),ts(),P=n.memoizedState,_||B!==P||Hn?(typeof Y=="function"&&(Wr(n,l,Y,r),P=n.memoizedState),(b=Hn||im(n,l,b,r,B,P,T))?(F||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=P),g.props=r,g.state=P,g.context=T,r=b):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{g=n.stateNode,Rr(t,n),T=n.memoizedProps,F=wi(l,T),g.props=F,Y=n.pendingProps,B=g.context,P=l.contextType,b=$i,typeof P=="object"&&P!==null&&(b=rt(P)),_=l.getDerivedStateFromProps,(P=typeof _=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==Y||B!==b)&&om(n,g,r,b),Hn=!1,B=n.memoizedState,g.state=B,ns(n,r,g,m),ts();var O=n.memoizedState;T!==Y||B!==O||Hn||t!==null&&t.dependencies!==null&&rl(t.dependencies)?(typeof _=="function"&&(Wr(n,l,_,r),O=n.memoizedState),(F=Hn||im(n,l,F,r,B,O,b)||t!==null&&t.dependencies!==null&&rl(t.dependencies))?(P||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(r,O,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(r,O,b)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=O),g.props=r,g.state=O,g.context=b,r=F):(typeof g.componentDidUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),r=!1)}return g=r,Nl(t,n),r=(n.flags&128)!==0,g||r?(g=n.stateNode,l=r&&typeof l.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,t!==null&&r?(n.child=_i(n,t.child,null,m),n.child=_i(n,null,l,m)):ut(t,n,l,m),n.memoizedState=g.state,t=n.child):t=vn(t,n,m),t}function Sm(t,n,l,r){return yi(),n.flags|=256,ut(t,n,l,r),n.child}var iu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ou(t){return{baseLanes:t,cachePool:rd()}}function su(t,n,l){return t=t!==null?t.childLanes&~l:0,n&&(t|=qt),t}function Tm(t,n,l){var r=n.pendingProps,m=!1,g=(n.flags&128)!==0,T;if((T=g)||(T=t!==null&&t.memoizedState===null?!1:($e.current&2)!==0),T&&(m=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,t===null){if(xe){if(m?kn(n):Fn(),(t=Oe)?(t=bh(t,Qt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Pn!==null?{id:on,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},l=jf(t),l.return=n,n.child=l,at=n,Oe=null)):t=null,t===null)throw zn(n);return Ou(t)?n.lanes=32:n.lanes=536870912,null}var _=r.children;return r=r.fallback,m?(Fn(),m=n.mode,_=bl({mode:"hidden",children:_},m),r=gi(r,m,l,null),_.return=n,r.return=n,_.sibling=r,n.child=_,r=n.child,r.memoizedState=ou(l),r.childLanes=su(t,T,l),n.memoizedState=iu,as(null,r)):(kn(n),lu(n,_))}var b=t.memoizedState;if(b!==null&&(_=b.dehydrated,_!==null)){if(g)n.flags&256?(kn(n),n.flags&=-257,n=au(t,n,l)):n.memoizedState!==null?(Fn(),n.child=t.child,n.flags|=128,n=null):(Fn(),_=r.fallback,m=n.mode,r=bl({mode:"visible",children:r.children},m),_=gi(_,m,l,null),_.flags|=2,r.return=n,_.return=n,r.sibling=_,n.child=r,_i(n,t.child,null,l),r=n.child,r.memoizedState=ou(l),r.childLanes=su(t,T,l),n.memoizedState=iu,n=as(null,r));else if(kn(n),Ou(_)){if(T=_.nextSibling&&_.nextSibling.dataset,T)var P=T.dgst;T=P,r=Error(s(419)),r.stack="",r.digest=T,Ko({value:r,source:null,stack:null}),n=au(t,n,l)}else if(je||Wi(t,n,l,!1),T=(l&t.childLanes)!==0,je||T){if(T=He,T!==null&&(r=lf(T,l),r!==0&&r!==b.retryLane))throw b.retryLane=r,pi(t,r),wt(T,t,r),tu;Hu(_)||Bl(),n=au(t,n,l)}else Hu(_)?(n.flags|=192,n.child=t.child,n=null):(t=b.treeContext,Oe=Yt(_.nextSibling),at=n,xe=!0,Bn=null,Qt=!1,t!==null&&nd(n,t),n=lu(n,r.children),n.flags|=4096);return n}return m?(Fn(),_=r.fallback,m=n.mode,b=t.child,P=b.sibling,r=dn(b,{mode:"hidden",children:r.children}),r.subtreeFlags=b.subtreeFlags&65011712,P!==null?_=dn(P,_):(_=gi(_,m,l,null),_.flags|=2),_.return=n,r.return=n,r.sibling=_,n.child=r,as(null,r),r=n.child,_=t.child.memoizedState,_===null?_=ou(l):(m=_.cachePool,m!==null?(b=Ze._currentValue,m=m.parent!==b?{parent:b,pool:b}:m):m=rd(),_={baseLanes:_.baseLanes|l,cachePool:m}),r.memoizedState=_,r.childLanes=su(t,T,l),n.memoizedState=iu,as(t.child,r)):(kn(n),l=t.child,t=l.sibling,l=dn(l,{mode:"visible",children:r.children}),l.return=n,l.sibling=null,t!==null&&(T=n.deletions,T===null?(n.deletions=[t],n.flags|=16):T.push(t)),n.child=l,n.memoizedState=null,l)}function lu(t,n){return n=bl({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function bl(t,n){return t=Dt(22,t,null,n),t.lanes=0,t}function au(t,n,l){return _i(n,t.child,null,l),t=lu(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Em(t,n,l){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n),Cr(t.return,n,l)}function ru(t,n,l,r,m,g){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:l,tailMode:m,treeForkCount:g}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=r,T.tail=l,T.tailMode=m,T.treeForkCount=g)}function Cm(t,n,l){var r=n.pendingProps,m=r.revealOrder,g=r.tail;r=r.children;var T=$e.current,_=(T&2)!==0;if(_?(T=T&1|2,n.flags|=128):T&=1,oe($e,T),ut(t,n,r,l),r=xe?$o:0,!_&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Em(t,l,n);else if(t.tag===19)Em(t,l,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(l=n.child,m=null;l!==null;)t=l.alternate,t!==null&&gl(t)===null&&(m=l),l=l.sibling;l=m,l===null?(m=n.child,n.child=null):(m=l.sibling,l.sibling=null),ru(n,!1,m,l,g,r);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=n.child,n.child=null;m!==null;){if(t=m.alternate,t!==null&&gl(t)===null){n.child=m;break}t=m.sibling,m.sibling=l,l=m,m=t}ru(n,!0,l,null,g,r);break;case"together":ru(n,!1,null,null,void 0,r);break;default:n.memoizedState=null}return n.child}function vn(t,n,l){if(t!==null&&(n.dependencies=t.dependencies),Yn|=n.lanes,(l&n.childLanes)===0)if(t!==null){if(Wi(t,n,l,!1),(l&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(s(153));if(n.child!==null){for(t=n.child,l=dn(t,t.pendingProps),n.child=l,l.return=n;t.sibling!==null;)t=t.sibling,l=l.sibling=dn(t,t.pendingProps),l.return=n;l.sibling=null}return n.child}function uu(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&rl(t)))}function hC(t,n,l){switch(n.tag){case 3:ht(n,n.stateNode.containerInfo),Gn(n,Ze,t.memoizedState.cache),yi();break;case 27:case 5:Lo(n);break;case 4:ht(n,n.stateNode.containerInfo);break;case 10:Gn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ur(n),null;break;case 13:var r=n.memoizedState;if(r!==null)return r.dehydrated!==null?(kn(n),n.flags|=128,null):(l&n.child.childLanes)!==0?Tm(t,n,l):(kn(n),t=vn(t,n,l),t!==null?t.sibling:null);kn(n);break;case 19:var m=(t.flags&128)!==0;if(r=(l&n.childLanes)!==0,r||(Wi(t,n,l,!1),r=(l&n.childLanes)!==0),m){if(r)return Cm(t,n,l);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),oe($e,$e.current),r)break;return null;case 22:return n.lanes=0,hm(t,n,l,n.pendingProps);case 24:Gn(n,Ze,t.memoizedState.cache)}return vn(t,n,l)}function _m(t,n,l){if(t!==null)if(t.memoizedProps!==n.pendingProps)je=!0;else{if(!uu(t,l)&&(n.flags&128)===0)return je=!1,hC(t,n,l);je=(t.flags&131072)!==0}else je=!1,xe&&(n.flags&1048576)!==0&&td(n,$o,n.index);switch(n.lanes=0,n.tag){case 16:e:{var r=n.pendingProps;if(t=Ei(n.elementType),n.type=t,typeof t=="function")hr(t)?(r=wi(t,r),n.tag=1,n=vm(null,n,t,r,l)):(n.tag=0,n=nu(null,n,t,r,l));else{if(t!=null){var m=t.$$typeof;if(m===k){n.tag=11,n=fm(null,n,t,r,l);break e}else if(m===H){n.tag=14,n=dm(null,n,t,r,l);break e}}throw n=ge(t)||t,Error(s(306,n,""))}}return n;case 0:return nu(t,n,n.type,n.pendingProps,l);case 1:return r=n.type,m=wi(r,n.pendingProps),vm(t,n,r,m,l);case 3:e:{if(ht(n,n.stateNode.containerInfo),t===null)throw Error(s(387));r=n.pendingProps;var g=n.memoizedState;m=g.element,Rr(t,n),ns(n,r,null,l);var T=n.memoizedState;if(r=T.cache,Gn(n,Ze,r),r!==g.cache&&_r(n,[Ze],l,!0),ts(),r=T.element,g.isDehydrated)if(g={element:r,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=Sm(t,n,r,l);break e}else if(r!==m){m=Vt(Error(s(424)),n),Ko(m),n=Sm(t,n,r,l);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Oe=Yt(t.firstChild),at=n,xe=!0,Bn=null,Qt=!0,l=hd(n,null,r,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(yi(),r===m){n=vn(t,n,l);break e}ut(t,n,r,l)}n=n.child}return n;case 26:return Nl(t,n),t===null?(l=Uh(n.type,null,n.pendingProps,null))?n.memoizedState=l:xe||(l=n.type,t=n.pendingProps,r=Fl(Ee.current).createElement(l),r[lt]=n,r[St]=t,ct(r,l,t),it(r),n.stateNode=r):n.memoizedState=Uh(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Lo(n),t===null&&xe&&(r=n.stateNode=Dh(n.type,n.pendingProps,Ee.current),at=n,Qt=!0,m=Oe,Wn(n.type)?(Vu=m,Oe=Yt(r.firstChild)):Oe=m),ut(t,n,n.pendingProps.children,l),Nl(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&xe&&((m=r=Oe)&&(r=FC(r,n.type,n.pendingProps,Qt),r!==null?(n.stateNode=r,at=n,Oe=Yt(r.firstChild),Qt=!1,m=!0):m=!1),m||zn(n)),Lo(n),m=n.type,g=n.pendingProps,T=t!==null?t.memoizedProps:null,r=g.children,Bu(m,g)?r=null:T!==null&&Bu(m,T)&&(n.flags|=32),n.memoizedState!==null&&(m=Pr(t,n,sC,null,null,l),Cs._currentValue=m),Nl(t,n),ut(t,n,r,l),n.child;case 6:return t===null&&xe&&((t=l=Oe)&&(l=QC(l,n.pendingProps,Qt),l!==null?(n.stateNode=l,at=n,Oe=null,t=!0):t=!1),t||zn(n)),null;case 13:return Tm(t,n,l);case 4:return ht(n,n.stateNode.containerInfo),r=n.pendingProps,t===null?n.child=_i(n,null,r,l):ut(t,n,r,l),n.child;case 11:return fm(t,n,n.type,n.pendingProps,l);case 7:return ut(t,n,n.pendingProps,l),n.child;case 8:return ut(t,n,n.pendingProps.children,l),n.child;case 12:return ut(t,n,n.pendingProps.children,l),n.child;case 10:return r=n.pendingProps,Gn(n,n.type,r.value),ut(t,n,r.children,l),n.child;case 9:return m=n.type._context,r=n.pendingProps.children,Si(n),m=rt(m),r=r(m),n.flags|=1,ut(t,n,r,l),n.child;case 14:return dm(t,n,n.type,n.pendingProps,l);case 15:return mm(t,n,n.type,n.pendingProps,l);case 19:return Cm(t,n,l);case 31:return mC(t,n,l);case 22:return hm(t,n,l,n.pendingProps);case 24:return Si(n),r=rt(Ze),t===null?(m=xr(),m===null&&(m=He,g=Ar(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),n.memoizedState={parent:r,cache:m},br(n),Gn(n,Ze,m)):((t.lanes&l)!==0&&(Rr(t,n),ns(n,null,null,l),ts()),m=t.memoizedState,g=n.memoizedState,m.parent!==r?(m={parent:r,cache:r},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),Gn(n,Ze,r)):(r=g.cache,Gn(n,Ze,r),r!==m.cache&&_r(n,[Ze],l,!0))),ut(t,n,n.pendingProps.children,l),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Sn(t){t.flags|=4}function cu(t,n,l,r,m){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(Xm())t.flags|=8192;else throw Ci=dl,Nr}else t.flags&=-16777217}function Am(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Gh(n))if(Xm())t.flags|=8192;else throw Ci=dl,Nr}function Rl(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?nf():536870912,t.lanes|=n,co|=n)}function rs(t,n){if(!xe)switch(t.tailMode){case"hidden":n=t.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var r=null;l!==null;)l.alternate!==null&&(r=l),l=l.sibling;r===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ve(t){var n=t.alternate!==null&&t.alternate.child===t.child,l=0,r=0;if(n)for(var m=t.child;m!==null;)l|=m.lanes|m.childLanes,r|=m.subtreeFlags&65011712,r|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)l|=m.lanes|m.childLanes,r|=m.subtreeFlags,r|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=r,t.childLanes=l,n}function pC(t,n,l){var r=n.pendingProps;switch(vr(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(n),null;case 1:return Ve(n),null;case 3:return l=n.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),pn(Ze),Ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Zi(n)?Sn(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Tr())),Ve(n),null;case 26:var m=n.type,g=n.memoizedState;return t===null?(Sn(n),g!==null?(Ve(n),Am(n,g)):(Ve(n),cu(n,m,null,r,l))):g?g!==t.memoizedState?(Sn(n),Ve(n),Am(n,g)):(Ve(n),n.flags&=-16777217):(t=t.memoizedProps,t!==r&&Sn(n),Ve(n),cu(n,m,t,r,l)),null;case 27:if(Hs(n),l=Ee.current,m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==r&&Sn(n);else{if(!r){if(n.stateNode===null)throw Error(s(166));return Ve(n),null}t=ue.current,Zi(n)?id(n):(t=Dh(m,r,l),n.stateNode=t,Sn(n))}return Ve(n),null;case 5:if(Hs(n),m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==r&&Sn(n);else{if(!r){if(n.stateNode===null)throw Error(s(166));return Ve(n),null}if(g=ue.current,Zi(n))id(n);else{var T=Fl(Ee.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof r.is=="string"?T.createElement("select",{is:r.is}):T.createElement("select"),r.multiple?g.multiple=!0:r.size&&(g.size=r.size);break;default:g=typeof r.is=="string"?T.createElement(m,{is:r.is}):T.createElement(m)}}g[lt]=n,g[St]=r;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=g;e:switch(ct(g,m,r),m){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Sn(n)}}return Ve(n),cu(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,l),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==r&&Sn(n);else{if(typeof r!="string"&&n.stateNode===null)throw Error(s(166));if(t=Ee.current,Zi(n)){if(t=n.stateNode,l=n.memoizedProps,r=null,m=at,m!==null)switch(m.tag){case 27:case 5:r=m.memoizedProps}t[lt]=n,t=!!(t.nodeValue===l||r!==null&&r.suppressHydrationWarning===!0||Th(t.nodeValue,l)),t||zn(n,!0)}else t=Fl(t).createTextNode(r),t[lt]=n,n.stateNode=t}return Ve(n),null;case 31:if(l=n.memoizedState,t===null||t.memoizedState!==null){if(r=Zi(n),l!==null){if(t===null){if(!r)throw Error(s(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[lt]=n}else yi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),t=!1}else l=Tr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return n.flags&256?(Lt(n),n):(Lt(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Ve(n),null;case 13:if(r=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=Zi(n),r!==null&&r.dehydrated!==null){if(t===null){if(!m)throw Error(s(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[lt]=n}else yi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ve(n),m=!1}else m=Tr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(Lt(n),n):(Lt(n),null)}return Lt(n),(n.flags&128)!==0?(n.lanes=l,n):(l=r!==null,t=t!==null&&t.memoizedState!==null,l&&(r=n.child,m=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(m=r.alternate.memoizedState.cachePool.pool),g=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(g=r.memoizedState.cachePool.pool),g!==m&&(r.flags|=2048)),l!==t&&l&&(n.child.flags|=8192),Rl(n,n.updateQueue),Ve(n),null);case 4:return Ye(),t===null&&Iu(n.stateNode.containerInfo),Ve(n),null;case 10:return pn(n.type),Ve(n),null;case 19:if(K($e),r=n.memoizedState,r===null)return Ve(n),null;if(m=(n.flags&128)!==0,g=r.rendering,g===null)if(m)rs(r,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(g=gl(t),g!==null){for(n.flags|=128,rs(r,!1),t=g.updateQueue,n.updateQueue=t,Rl(n,t),n.subtreeFlags=0,t=l,l=n.child;l!==null;)Wf(l,t),l=l.sibling;return oe($e,$e.current&1|2),xe&&mn(n,r.treeForkCount),n.child}t=t.sibling}r.tail!==null&&Nt()>Ul&&(n.flags|=128,m=!0,rs(r,!1),n.lanes=4194304)}else{if(!m)if(t=gl(g),t!==null){if(n.flags|=128,m=!0,t=t.updateQueue,n.updateQueue=t,Rl(n,t),rs(r,!0),r.tail===null&&r.tailMode==="hidden"&&!g.alternate&&!xe)return Ve(n),null}else 2*Nt()-r.renderingStartTime>Ul&&l!==536870912&&(n.flags|=128,m=!0,rs(r,!1),n.lanes=4194304);r.isBackwards?(g.sibling=n.child,n.child=g):(t=r.last,t!==null?t.sibling=g:n.child=g,r.last=g)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Nt(),t.sibling=null,l=$e.current,oe($e,m?l&1|2:l&1),xe&&mn(n,r.treeForkCount),t):(Ve(n),null);case 22:case 23:return Lt(n),Lr(),r=n.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(n.flags|=8192):r&&(n.flags|=8192),r?(l&536870912)!==0&&(n.flags&128)===0&&(Ve(n),n.subtreeFlags&6&&(n.flags|=8192)):Ve(n),l=n.updateQueue,l!==null&&Rl(n,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==l&&(n.flags|=2048),t!==null&&K(Ti),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),pn(Ze),Ve(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function gC(t,n){switch(vr(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return pn(Ze),Ye(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Hs(n),null;case 31:if(n.memoizedState!==null){if(Lt(n),n.alternate===null)throw Error(s(340));yi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Lt(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(s(340));yi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return K($e),null;case 4:return Ye(),null;case 10:return pn(n.type),null;case 22:case 23:return Lt(n),Lr(),t!==null&&K(Ti),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return pn(Ze),null;case 25:return null;default:return null}}function wm(t,n){switch(vr(n),n.tag){case 3:pn(Ze),Ye();break;case 26:case 27:case 5:Hs(n);break;case 4:Ye();break;case 31:n.memoizedState!==null&&Lt(n);break;case 13:Lt(n);break;case 19:K($e);break;case 10:pn(n.type);break;case 22:case 23:Lt(n),Lr(),t!==null&&K(Ti);break;case 24:pn(Ze)}}function us(t,n){try{var l=n.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var m=r.next;l=m;do{if((l.tag&t)===t){r=void 0;var g=l.create,T=l.inst;r=g(),T.destroy=r}l=l.next}while(l!==m)}}catch(_){Ue(n,n.return,_)}}function Qn(t,n,l){try{var r=n.updateQueue,m=r!==null?r.lastEffect:null;if(m!==null){var g=m.next;r=g;do{if((r.tag&t)===t){var T=r.inst,_=T.destroy;if(_!==void 0){T.destroy=void 0,m=n;var b=l,P=_;try{P()}catch(F){Ue(m,b,F)}}}r=r.next}while(r!==g)}}catch(F){Ue(n,n.return,F)}}function xm(t){var n=t.updateQueue;if(n!==null){var l=t.stateNode;try{gd(n,l)}catch(r){Ue(t,t.return,r)}}}function Nm(t,n,l){l.props=wi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(r){Ue(t,n,r)}}function cs(t,n){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof l=="function"?t.refCleanup=l(r):l.current=r}}catch(m){Ue(t,n,m)}}function ln(t,n){var l=t.ref,r=t.refCleanup;if(l!==null)if(typeof r=="function")try{r()}catch(m){Ue(t,n,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ue(t,n,m)}else l.current=null}function bm(t){var n=t.type,l=t.memoizedProps,r=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break e;case"img":l.src?r.src=l.src:l.srcSet&&(r.srcset=l.srcSet)}}catch(m){Ue(t,t.return,m)}}function fu(t,n,l){try{var r=t.stateNode;zC(r,t.type,l,n),r[St]=n}catch(m){Ue(t,t.return,m)}}function Rm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Wn(t.type)||t.tag===4}function du(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Wn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mu(t,n,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,n):(n=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,n.appendChild(t),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=cn));else if(r!==4&&(r===27&&Wn(t.type)&&(l=t.stateNode,n=null),t=t.child,t!==null))for(mu(t,n,l),t=t.sibling;t!==null;)mu(t,n,l),t=t.sibling}function Ml(t,n,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?l.insertBefore(t,n):l.appendChild(t);else if(r!==4&&(r===27&&Wn(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Ml(t,n,l),t=t.sibling;t!==null;)Ml(t,n,l),t=t.sibling}function Mm(t){var n=t.stateNode,l=t.memoizedProps;try{for(var r=t.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);ct(n,r,l),n[lt]=t,n[St]=l}catch(g){Ue(t,t.return,g)}}var Tn=!1,et=!1,hu=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,ot=null;function yC(t,n){if(t=t.containerInfo,qu=Zl,t=kf(t),ar(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var r=l.getSelection&&l.getSelection();if(r&&r.rangeCount!==0){l=r.anchorNode;var m=r.anchorOffset,g=r.focusNode;r=r.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,_=-1,b=-1,P=0,F=0,Y=t,B=null;t:for(;;){for(var O;Y!==l||m!==0&&Y.nodeType!==3||(_=T+m),Y!==g||r!==0&&Y.nodeType!==3||(b=T+r),Y.nodeType===3&&(T+=Y.nodeValue.length),(O=Y.firstChild)!==null;)B=Y,Y=O;for(;;){if(Y===t)break t;if(B===l&&++P===m&&(_=T),B===g&&++F===r&&(b=T),(O=Y.nextSibling)!==null)break;Y=B,B=Y.parentNode}Y=O}l=_===-1||b===-1?null:{start:_,end:b}}else l=null}l=l||{start:0,end:0}}else l=null;for(Pu={focusedElem:t,selectionRange:l},Zl=!1,ot=n;ot!==null;)if(n=ot,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ot=t;else for(;ot!==null;){switch(n=ot,g=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)m=t[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=n,m=g.memoizedProps,g=g.memoizedState,r=l.stateNode;try{var re=wi(l.type,m);t=r.getSnapshotBeforeUpdate(re,g),r.__reactInternalSnapshotBeforeUpdate=t}catch(pe){Ue(l,l.return,pe)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,l=t.nodeType,l===9)Gu(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=n.sibling,t!==null){t.return=n.return,ot=t;break}ot=n.return}}function Im(t,n,l){var r=l.flags;switch(l.tag){case 0:case 11:case 15:Cn(t,l),r&4&&us(5,l);break;case 1:if(Cn(t,l),r&4)if(t=l.stateNode,n===null)try{t.componentDidMount()}catch(T){Ue(l,l.return,T)}else{var m=wi(l.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(m,n,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Ue(l,l.return,T)}}r&64&&xm(l),r&512&&cs(l,l.return);break;case 3:if(Cn(t,l),r&64&&(t=l.updateQueue,t!==null)){if(n=null,l.child!==null)switch(l.child.tag){case 27:case 5:n=l.child.stateNode;break;case 1:n=l.child.stateNode}try{gd(t,n)}catch(T){Ue(l,l.return,T)}}break;case 27:n===null&&r&4&&Mm(l);case 26:case 5:Cn(t,l),n===null&&r&4&&bm(l),r&512&&cs(l,l.return);break;case 12:Cn(t,l);break;case 31:Cn(t,l),r&4&&qm(t,l);break;case 13:Cn(t,l),r&4&&Pm(t,l),r&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=xC.bind(null,l),JC(t,l))));break;case 22:if(r=l.memoizedState!==null||Tn,!r){n=n!==null&&n.memoizedState!==null||et,m=Tn;var g=et;Tn=r,(et=n)&&!g?_n(t,l,(l.subtreeFlags&8772)!==0):Cn(t,l),Tn=m,et=g}break;case 30:break;default:Cn(t,l)}}function Lm(t){var n=t.alternate;n!==null&&(t.alternate=null,Lm(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Fa(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fe=null,Et=!1;function En(t,n,l){for(l=l.child;l!==null;)Um(t,n,l),l=l.sibling}function Um(t,n,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Uo,l)}catch{}switch(l.tag){case 26:et||ln(l,n),En(t,n,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:et||ln(l,n);var r=Fe,m=Et;Wn(l.type)&&(Fe=l.stateNode,Et=!1),En(t,n,l),Ss(l.stateNode),Fe=r,Et=m;break;case 5:et||ln(l,n);case 6:if(r=Fe,m=Et,Fe=null,En(t,n,l),Fe=r,Et=m,Fe!==null)if(Et)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(l.stateNode)}catch(g){Ue(l,n,g)}else try{Fe.removeChild(l.stateNode)}catch(g){Ue(l,n,g)}break;case 18:Fe!==null&&(Et?(t=Fe,xh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),So(t)):xh(Fe,l.stateNode));break;case 4:r=Fe,m=Et,Fe=l.stateNode.containerInfo,Et=!0,En(t,n,l),Fe=r,Et=m;break;case 0:case 11:case 14:case 15:Qn(2,l,n),et||Qn(4,l,n),En(t,n,l);break;case 1:et||(ln(l,n),r=l.stateNode,typeof r.componentWillUnmount=="function"&&Nm(l,n,r)),En(t,n,l);break;case 21:En(t,n,l);break;case 22:et=(r=et)||l.memoizedState!==null,En(t,n,l),et=r;break;default:En(t,n,l)}}function qm(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{So(t)}catch(l){Ue(n,n.return,l)}}}function Pm(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{So(t)}catch(l){Ue(n,n.return,l)}}function vC(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Dm),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Dm),n;default:throw Error(s(435,t.tag))}}function Dl(t,n){var l=vC(t);n.forEach(function(r){if(!l.has(r)){l.add(r);var m=NC.bind(null,t,r);r.then(m,m)}})}function Ct(t,n){var l=n.deletions;if(l!==null)for(var r=0;r<l.length;r++){var m=l[r],g=t,T=n,_=T;e:for(;_!==null;){switch(_.tag){case 27:if(Wn(_.type)){Fe=_.stateNode,Et=!1;break e}break;case 5:Fe=_.stateNode,Et=!1;break e;case 3:case 4:Fe=_.stateNode.containerInfo,Et=!0;break e}_=_.return}if(Fe===null)throw Error(s(160));Um(g,T,m),Fe=null,Et=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Bm(n,t),n=n.sibling}var jt=null;function Bm(t,n){var l=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ct(n,t),_t(t),r&4&&(Qn(3,t,t.return),us(3,t),Qn(5,t,t.return));break;case 1:Ct(n,t),_t(t),r&512&&(et||l===null||ln(l,l.return)),r&64&&Tn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?r:l.concat(r))));break;case 26:var m=jt;if(Ct(n,t),_t(t),r&512&&(et||l===null||ln(l,l.return)),r&4){var g=l!==null?l.memoizedState:null;if(r=t.memoizedState,l===null)if(r===null)if(t.stateNode===null){e:{r=t.type,l=t.memoizedProps,m=m.ownerDocument||m;t:switch(r){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Bo]||g[lt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(r),m.head.insertBefore(g,m.querySelector("head > title"))),ct(g,r,l),g[lt]=t,it(g),r=g;break e;case"link":var T=Bh("link","href",m).get(r+(l.href||""));if(T){for(var _=0;_<T.length;_++)if(g=T[_],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(_,1);break t}}g=m.createElement(r),ct(g,r,l),m.head.appendChild(g);break;case"meta":if(T=Bh("meta","content",m).get(r+(l.content||""))){for(_=0;_<T.length;_++)if(g=T[_],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(_,1);break t}}g=m.createElement(r),ct(g,r,l),m.head.appendChild(g);break;default:throw Error(s(468,r))}g[lt]=t,it(g),r=g}t.stateNode=r}else zh(m,t.type,t.stateNode);else t.stateNode=Ph(m,r,t.memoizedProps);else g!==r?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,r===null?zh(m,t.type,t.stateNode):Ph(m,r,t.memoizedProps)):r===null&&t.stateNode!==null&&fu(t,t.memoizedProps,l.memoizedProps)}break;case 27:Ct(n,t),_t(t),r&512&&(et||l===null||ln(l,l.return)),l!==null&&r&4&&fu(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Ct(n,t),_t(t),r&512&&(et||l===null||ln(l,l.return)),t.flags&32){m=t.stateNode;try{Oi(m,"")}catch(re){Ue(t,t.return,re)}}r&4&&t.stateNode!=null&&(m=t.memoizedProps,fu(t,m,l!==null?l.memoizedProps:m)),r&1024&&(hu=!0);break;case 6:if(Ct(n,t),_t(t),r&4){if(t.stateNode===null)throw Error(s(162));r=t.memoizedProps,l=t.stateNode;try{l.nodeValue=r}catch(re){Ue(t,t.return,re)}}break;case 3:if(Yl=null,m=jt,jt=Ql(n.containerInfo),Ct(n,t),jt=m,_t(t),r&4&&l!==null&&l.memoizedState.isDehydrated)try{So(n.containerInfo)}catch(re){Ue(t,t.return,re)}hu&&(hu=!1,zm(t));break;case 4:r=jt,jt=Ql(t.stateNode.containerInfo),Ct(n,t),_t(t),jt=r;break;case 12:Ct(n,t),_t(t);break;case 31:Ct(n,t),_t(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Dl(t,r)));break;case 13:Ct(n,t),_t(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ll=Nt()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Dl(t,r)));break;case 22:m=t.memoizedState!==null;var b=l!==null&&l.memoizedState!==null,P=Tn,F=et;if(Tn=P||m,et=F||b,Ct(n,t),et=F,Tn=P,_t(t),r&8192)e:for(n=t.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(l===null||b||Tn||et||xi(t)),l=null,n=t;;){if(n.tag===5||n.tag===26){if(l===null){b=l=n;try{if(g=b.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{_=b.stateNode;var Y=b.memoizedProps.style,B=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;_.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(re){Ue(b,b.return,re)}}}else if(n.tag===6){if(l===null){b=n;try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(re){Ue(b,b.return,re)}}}else if(n.tag===18){if(l===null){b=n;try{var O=b.stateNode;m?Nh(O,!0):Nh(b.stateNode,!1)}catch(re){Ue(b,b.return,re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;l===n&&(l=null),n=n.return}l===n&&(l=null),n.sibling.return=n.return,n=n.sibling}r&4&&(r=t.updateQueue,r!==null&&(l=r.retryQueue,l!==null&&(r.retryQueue=null,Dl(t,l))));break;case 19:Ct(n,t),_t(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Dl(t,r)));break;case 30:break;case 21:break;default:Ct(n,t),_t(t)}}function _t(t){var n=t.flags;if(n&2){try{for(var l,r=t.return;r!==null;){if(Rm(r)){l=r;break}r=r.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var m=l.stateNode,g=du(t);Ml(t,g,m);break;case 5:var T=l.stateNode;l.flags&32&&(Oi(T,""),l.flags&=-33);var _=du(t);Ml(t,_,T);break;case 3:case 4:var b=l.stateNode.containerInfo,P=du(t);mu(t,P,b);break;default:throw Error(s(161))}}catch(F){Ue(t,t.return,F)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function zm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;zm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Cn(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Im(t,n.alternate,n),n=n.sibling}function xi(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Qn(4,n,n.return),xi(n);break;case 1:ln(n,n.return);var l=n.stateNode;typeof l.componentWillUnmount=="function"&&Nm(n,n.return,l),xi(n);break;case 27:Ss(n.stateNode);case 26:case 5:ln(n,n.return),xi(n);break;case 22:n.memoizedState===null&&xi(n);break;case 30:xi(n);break;default:xi(n)}t=t.sibling}}function _n(t,n,l){for(l=l&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var r=n.alternate,m=t,g=n,T=g.flags;switch(g.tag){case 0:case 11:case 15:_n(m,g,l),us(4,g);break;case 1:if(_n(m,g,l),r=g,m=r.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(P){Ue(r,r.return,P)}if(r=g,m=r.updateQueue,m!==null){var _=r.stateNode;try{var b=m.shared.hiddenCallbacks;if(b!==null)for(m.shared.hiddenCallbacks=null,m=0;m<b.length;m++)pd(b[m],_)}catch(P){Ue(r,r.return,P)}}l&&T&64&&xm(g),cs(g,g.return);break;case 27:Mm(g);case 26:case 5:_n(m,g,l),l&&r===null&&T&4&&bm(g),cs(g,g.return);break;case 12:_n(m,g,l);break;case 31:_n(m,g,l),l&&T&4&&qm(m,g);break;case 13:_n(m,g,l),l&&T&4&&Pm(m,g);break;case 22:g.memoizedState===null&&_n(m,g,l),cs(g,g.return);break;case 30:break;default:_n(m,g,l)}n=n.sibling}}function pu(t,n){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&Xo(l))}function gu(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Xo(t))}function en(t,n,l,r){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gm(t,n,l,r),n=n.sibling}function Gm(t,n,l,r){var m=n.flags;switch(n.tag){case 0:case 11:case 15:en(t,n,l,r),m&2048&&us(9,n);break;case 1:en(t,n,l,r);break;case 3:en(t,n,l,r),m&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Xo(t)));break;case 12:if(m&2048){en(t,n,l,r),t=n.stateNode;try{var g=n.memoizedProps,T=g.id,_=g.onPostCommit;typeof _=="function"&&_(T,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(b){Ue(n,n.return,b)}}else en(t,n,l,r);break;case 31:en(t,n,l,r);break;case 13:en(t,n,l,r);break;case 23:break;case 22:g=n.stateNode,T=n.alternate,n.memoizedState!==null?g._visibility&2?en(t,n,l,r):fs(t,n):g._visibility&2?en(t,n,l,r):(g._visibility|=2,ao(t,n,l,r,(n.subtreeFlags&10256)!==0||!1)),m&2048&&pu(T,n);break;case 24:en(t,n,l,r),m&2048&&gu(n.alternate,n);break;default:en(t,n,l,r)}}function ao(t,n,l,r,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=t,T=n,_=l,b=r,P=T.flags;switch(T.tag){case 0:case 11:case 15:ao(g,T,_,b,m),us(8,T);break;case 23:break;case 22:var F=T.stateNode;T.memoizedState!==null?F._visibility&2?ao(g,T,_,b,m):fs(g,T):(F._visibility|=2,ao(g,T,_,b,m)),m&&P&2048&&pu(T.alternate,T);break;case 24:ao(g,T,_,b,m),m&&P&2048&&gu(T.alternate,T);break;default:ao(g,T,_,b,m)}n=n.sibling}}function fs(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var l=t,r=n,m=r.flags;switch(r.tag){case 22:fs(l,r),m&2048&&pu(r.alternate,r);break;case 24:fs(l,r),m&2048&&gu(r.alternate,r);break;default:fs(l,r)}n=n.sibling}}var ds=8192;function ro(t,n,l){if(t.subtreeFlags&ds)for(t=t.child;t!==null;)Hm(t,n,l),t=t.sibling}function Hm(t,n,l){switch(t.tag){case 26:ro(t,n,l),t.flags&ds&&t.memoizedState!==null&&o_(l,jt,t.memoizedState,t.memoizedProps);break;case 5:ro(t,n,l);break;case 3:case 4:var r=jt;jt=Ql(t.stateNode.containerInfo),ro(t,n,l),jt=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=ds,ds=16777216,ro(t,n,l),ds=r):ro(t,n,l));break;default:ro(t,n,l)}}function Om(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function ms(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var r=n[l];ot=r,km(r,t)}Om(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vm(t),t=t.sibling}function Vm(t){switch(t.tag){case 0:case 11:case 15:ms(t),t.flags&2048&&Qn(9,t,t.return);break;case 3:ms(t);break;case 12:ms(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Il(t)):ms(t);break;default:ms(t)}}function Il(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var r=n[l];ot=r,km(r,t)}Om(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Qn(8,n,n.return),Il(n);break;case 22:l=n.stateNode,l._visibility&2&&(l._visibility&=-3,Il(n));break;default:Il(n)}t=t.sibling}}function km(t,n){for(;ot!==null;){var l=ot;switch(l.tag){case 0:case 11:case 15:Qn(8,l,n);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var r=l.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Xo(l.memoizedState.cache)}if(r=l.child,r!==null)r.return=l,ot=r;else e:for(l=t;ot!==null;){r=ot;var m=r.sibling,g=r.return;if(Lm(r),r===l){ot=null;break e}if(m!==null){m.return=g,ot=m;break e}ot=g}}}var SC={getCacheForType:function(t){var n=rt(Ze),l=n.data.get(t);return l===void 0&&(l=t(),n.data.set(t,l)),l},cacheSignal:function(){return rt(Ze).controller.signal}},TC=typeof WeakMap=="function"?WeakMap:Map,Me=0,He=null,Ce=null,Ae=0,Le=0,Ut=null,Jn=!1,uo=!1,yu=!1,An=0,Je=0,Yn=0,Ni=0,vu=0,qt=0,co=0,hs=null,At=null,Su=!1,Ll=0,Fm=0,Ul=1/0,ql=null,$n=null,nt=0,Kn=null,fo=null,wn=0,Tu=0,Eu=null,Qm=null,ps=0,Cu=null;function Pt(){return(Me&2)!==0&&Ae!==0?Ae&-Ae:G.T!==null?bu():af()}function Jm(){if(qt===0)if((Ae&536870912)===0||xe){var t=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),qt=t}else qt=536870912;return t=It.current,t!==null&&(t.flags|=32),qt}function wt(t,n,l){(t===He&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(mo(t,0),Xn(t,Ae,qt,!1)),Po(t,l),((Me&2)===0||t!==He)&&(t===He&&((Me&2)===0&&(Ni|=l),Je===4&&Xn(t,Ae,qt,!1)),an(t))}function Ym(t,n,l){if((Me&6)!==0)throw Error(s(327));var r=!l&&(n&127)===0&&(n&t.expiredLanes)===0||qo(t,n),m=r?_C(t,n):Au(t,n,!0),g=r;do{if(m===0){uo&&!r&&Xn(t,n,0,!1);break}else{if(l=t.current.alternate,g&&!EC(l)){m=Au(t,n,!1),g=!1;continue}if(m===2){if(g=n,t.errorRecoveryDisabledLanes&g)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var _=t;m=hs;var b=_.current.memoizedState.isDehydrated;if(b&&(mo(_,T).flags|=256),T=Au(_,T,!1),T!==2){if(yu&&!b){_.errorRecoveryDisabledLanes|=g,Ni|=g,m=4;break e}g=At,At=m,g!==null&&(At===null?At=g:At.push.apply(At,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){mo(t,0),Xn(t,n,0,!0);break}e:{switch(r=t,g=m,g){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Xn(r,n,qt,!Jn);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(m=Ll+300-Nt(),10<m)){if(Xn(r,n,qt,!Jn),Qs(r,0,!0)!==0)break e;wn=n,r.timeoutHandle=Ah($m.bind(null,r,l,At,ql,Su,n,qt,Ni,co,Jn,g,"Throttled",-0,0),m);break e}$m(r,l,At,ql,Su,n,qt,Ni,co,Jn,g,null,-0,0)}}break}while(!0);an(t)}function $m(t,n,l,r,m,g,T,_,b,P,F,Y,B,O){if(t.timeoutHandle=-1,Y=n.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cn},Hm(n,g,Y);var re=(g&62914560)===g?Ll-Nt():(g&4194048)===g?Fm-Nt():0;if(re=s_(Y,re),re!==null){wn=g,t.cancelPendingCommit=re(nh.bind(null,t,n,g,l,r,m,T,_,b,F,Y,null,B,O)),Xn(t,g,T,!P);return}}nh(t,n,g,l,r,m,T,_,b)}function EC(t){for(var n=t;;){var l=n.tag;if((l===0||l===11||l===15)&&n.flags&16384&&(l=n.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var r=0;r<l.length;r++){var m=l[r],g=m.getSnapshot;m=m.value;try{if(!Mt(g(),m))return!1}catch{return!1}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Xn(t,n,l,r){n&=~vu,n&=~Ni,t.suspendedLanes|=n,t.pingedLanes&=~n,r&&(t.warmLanes|=n),r=t.expirationTimes;for(var m=n;0<m;){var g=31-Rt(m),T=1<<g;r[g]=-1,m&=~T}l!==0&&of(t,l,n)}function Pl(){return(Me&6)===0?(gs(0),!1):!0}function _u(){if(Ce!==null){if(Le===0)var t=Ce.return;else t=Ce,hn=vi=null,Gr(t),no=null,Wo=0,t=Ce;for(;t!==null;)wm(t.alternate,t),t=t.return;Ce=null}}function mo(t,n){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,OC(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),wn=0,_u(),He=t,Ce=l=dn(t.current,null),Ae=n,Le=0,Ut=null,Jn=!1,uo=qo(t,n),yu=!1,co=qt=vu=Ni=Yn=Je=0,At=hs=null,Su=!1,(n&8)!==0&&(n|=n&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=n;0<r;){var m=31-Rt(r),g=1<<m;n|=t[m],r&=~g}return An=n,il(),l}function Km(t,n){Se=null,G.H=ls,n===to||n===fl?(n=fd(),Le=3):n===Nr?(n=fd(),Le=4):Le=n===tu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ut=n,Ce===null&&(Je=1,wl(t,Vt(n,t.current)))}function Xm(){var t=It.current;return t===null?!0:(Ae&4194048)===Ae?Jt===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?t===Jt:!1}function Zm(){var t=G.H;return G.H=ls,t===null?ls:t}function Wm(){var t=G.A;return G.A=SC,t}function Bl(){Je=4,Jn||(Ae&4194048)!==Ae&&It.current!==null||(uo=!0),(Yn&134217727)===0&&(Ni&134217727)===0||He===null||Xn(He,Ae,qt,!1)}function Au(t,n,l){var r=Me;Me|=2;var m=Zm(),g=Wm();(He!==t||Ae!==n)&&(ql=null,mo(t,n)),n=!1;var T=Je;e:do try{if(Le!==0&&Ce!==null){var _=Ce,b=Ut;switch(Le){case 8:_u(),T=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(n=!0);var P=Le;if(Le=0,Ut=null,ho(t,_,b,P),l&&uo){T=0;break e}break;default:P=Le,Le=0,Ut=null,ho(t,_,b,P)}}CC(),T=Je;break}catch(F){Km(t,F)}while(!0);return n&&t.shellSuspendCounter++,hn=vi=null,Me=r,G.H=m,G.A=g,Ce===null&&(He=null,Ae=0,il()),T}function CC(){for(;Ce!==null;)jm(Ce)}function _C(t,n){var l=Me;Me|=2;var r=Zm(),m=Wm();He!==t||Ae!==n?(ql=null,Ul=Nt()+500,mo(t,n)):uo=qo(t,n);e:do try{if(Le!==0&&Ce!==null){n=Ce;var g=Ut;t:switch(Le){case 1:Le=0,Ut=null,ho(t,n,g,1);break;case 2:case 9:if(ud(g)){Le=0,Ut=null,eh(n);break}n=function(){Le!==2&&Le!==9||He!==t||(Le=7),an(t)},g.then(n,n);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:ud(g)?(Le=0,Ut=null,eh(n)):(Le=0,Ut=null,ho(t,n,g,7));break;case 5:var T=null;switch(Ce.tag){case 26:T=Ce.memoizedState;case 5:case 27:var _=Ce;if(T?Gh(T):_.stateNode.complete){Le=0,Ut=null;var b=_.sibling;if(b!==null)Ce=b;else{var P=_.return;P!==null?(Ce=P,zl(P)):Ce=null}break t}}Le=0,Ut=null,ho(t,n,g,5);break;case 6:Le=0,Ut=null,ho(t,n,g,6);break;case 8:_u(),Je=6;break e;default:throw Error(s(462))}}AC();break}catch(F){Km(t,F)}while(!0);return hn=vi=null,G.H=r,G.A=m,Me=l,Ce!==null?0:(He=null,Ae=0,il(),Je)}function AC(){for(;Ce!==null&&!YT();)jm(Ce)}function jm(t){var n=_m(t.alternate,t,An);t.memoizedProps=t.pendingProps,n===null?zl(t):Ce=n}function eh(t){var n=t,l=n.alternate;switch(n.tag){case 15:case 0:n=ym(l,n,n.pendingProps,n.type,void 0,Ae);break;case 11:n=ym(l,n,n.pendingProps,n.type.render,n.ref,Ae);break;case 5:Gr(n);default:wm(l,n),n=Ce=Wf(n,An),n=_m(l,n,An)}t.memoizedProps=t.pendingProps,n===null?zl(t):Ce=n}function ho(t,n,l,r){hn=vi=null,Gr(n),no=null,Wo=0;var m=n.return;try{if(dC(t,m,n,l,Ae)){Je=1,wl(t,Vt(l,t.current)),Ce=null;return}}catch(g){if(m!==null)throw Ce=m,g;Je=1,wl(t,Vt(l,t.current)),Ce=null;return}n.flags&32768?(xe||r===1?t=!0:uo||(Ae&536870912)!==0?t=!1:(Jn=t=!0,(r===2||r===9||r===3||r===6)&&(r=It.current,r!==null&&r.tag===13&&(r.flags|=16384))),th(n,t)):zl(n)}function zl(t){var n=t;do{if((n.flags&32768)!==0){th(n,Jn);return}t=n.return;var l=pC(n.alternate,n,An);if(l!==null){Ce=l;return}if(n=n.sibling,n!==null){Ce=n;return}Ce=n=t}while(n!==null);Je===0&&(Je=5)}function th(t,n){do{var l=gC(t.alternate,t);if(l!==null){l.flags&=32767,Ce=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!n&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=l}while(t!==null);Je=6,Ce=null}function nh(t,n,l,r,m,g,T,_,b){t.cancelPendingCommit=null;do Gl();while(nt!==0);if((Me&6)!==0)throw Error(s(327));if(n!==null){if(n===t.current)throw Error(s(177));if(g=n.lanes|n.childLanes,g|=dr,iE(t,l,g,T,_,b),t===He&&(Ce=He=null,Ae=0),fo=n,Kn=t,wn=l,Tu=g,Eu=m,Qm=r,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,bC(Os,function(){return ah(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||r){r=G.T,G.T=null,m=ee.p,ee.p=2,T=Me,Me|=4;try{yC(t,n,l)}finally{Me=T,ee.p=m,G.T=r}}nt=1,ih(),oh(),sh()}}function ih(){if(nt===1){nt=0;var t=Kn,n=fo,l=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var r=ee.p;ee.p=2;var m=Me;Me|=4;try{Bm(n,t);var g=Pu,T=kf(t.containerInfo),_=g.focusedElem,b=g.selectionRange;if(T!==_&&_&&_.ownerDocument&&Vf(_.ownerDocument.documentElement,_)){if(b!==null&&ar(_)){var P=b.start,F=b.end;if(F===void 0&&(F=P),"selectionStart"in _)_.selectionStart=P,_.selectionEnd=Math.min(F,_.value.length);else{var Y=_.ownerDocument||document,B=Y&&Y.defaultView||window;if(B.getSelection){var O=B.getSelection(),re=_.textContent.length,pe=Math.min(b.start,re),ze=b.end===void 0?pe:Math.min(b.end,re);!O.extend&&pe>ze&&(T=ze,ze=pe,pe=T);var D=Of(_,pe),R=Of(_,ze);if(D&&R&&(O.rangeCount!==1||O.anchorNode!==D.node||O.anchorOffset!==D.offset||O.focusNode!==R.node||O.focusOffset!==R.offset)){var q=Y.createRange();q.setStart(D.node,D.offset),O.removeAllRanges(),pe>ze?(O.addRange(q),O.extend(R.node,R.offset)):(q.setEnd(R.node,R.offset),O.addRange(q))}}}}for(Y=[],O=_;O=O.parentNode;)O.nodeType===1&&Y.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Y.length;_++){var J=Y[_];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Zl=!!qu,Pu=qu=null}finally{Me=m,ee.p=r,G.T=l}}t.current=n,nt=2}}function oh(){if(nt===2){nt=0;var t=Kn,n=fo,l=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var r=ee.p;ee.p=2;var m=Me;Me|=4;try{Im(t,n.alternate,n)}finally{Me=m,ee.p=r,G.T=l}}nt=3}}function sh(){if(nt===4||nt===3){nt=0,$T();var t=Kn,n=fo,l=wn,r=Qm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?nt=5:(nt=0,fo=Kn=null,lh(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&($n=null),Va(l),n=n.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Uo,n,void 0,(n.current.flags&128)===128)}catch{}if(r!==null){n=G.T,m=ee.p,ee.p=2,G.T=null;try{for(var g=t.onRecoverableError,T=0;T<r.length;T++){var _=r[T];g(_.value,{componentStack:_.stack})}}finally{G.T=n,ee.p=m}}(wn&3)!==0&&Gl(),an(t),m=t.pendingLanes,(l&261930)!==0&&(m&42)!==0?t===Cu?ps++:(ps=0,Cu=t):ps=0,gs(0)}}function lh(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Xo(n)))}function Gl(){return ih(),oh(),sh(),ah()}function ah(){if(nt!==5)return!1;var t=Kn,n=Tu;Tu=0;var l=Va(wn),r=G.T,m=ee.p;try{ee.p=32>l?32:l,G.T=null,l=Eu,Eu=null;var g=Kn,T=wn;if(nt=0,fo=Kn=null,wn=0,(Me&6)!==0)throw Error(s(331));var _=Me;if(Me|=4,Vm(g.current),Gm(g,g.current,T,l),Me=_,gs(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Uo,g)}catch{}return!0}finally{ee.p=m,G.T=r,lh(t,n)}}function rh(t,n,l){n=Vt(l,n),n=eu(t.stateNode,n,2),t=Vn(t,n,2),t!==null&&(Po(t,2),an(t))}function Ue(t,n,l){if(t.tag===3)rh(t,t,l);else for(;n!==null;){if(n.tag===3){rh(n,t,l);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($n===null||!$n.has(r))){t=Vt(l,t),l=um(2),r=Vn(n,l,2),r!==null&&(cm(l,r,n,t),Po(r,2),an(r));break}}n=n.return}}function wu(t,n,l){var r=t.pingCache;if(r===null){r=t.pingCache=new TC;var m=new Set;r.set(n,m)}else m=r.get(n),m===void 0&&(m=new Set,r.set(n,m));m.has(l)||(yu=!0,m.add(l),t=wC.bind(null,t,n,l),n.then(t,t))}function wC(t,n,l){var r=t.pingCache;r!==null&&r.delete(n),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,He===t&&(Ae&l)===l&&(Je===4||Je===3&&(Ae&62914560)===Ae&&300>Nt()-Ll?(Me&2)===0&&mo(t,0):vu|=l,co===Ae&&(co=0)),an(t)}function uh(t,n){n===0&&(n=nf()),t=pi(t,n),t!==null&&(Po(t,n),an(t))}function xC(t){var n=t.memoizedState,l=0;n!==null&&(l=n.retryLane),uh(t,l)}function NC(t,n){var l=0;switch(t.tag){case 31:case 13:var r=t.stateNode,m=t.memoizedState;m!==null&&(l=m.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(n),uh(t,l)}function bC(t,n){return za(t,n)}var Hl=null,po=null,xu=!1,Ol=!1,Nu=!1,Zn=0;function an(t){t!==po&&t.next===null&&(po===null?Hl=po=t:po=po.next=t),Ol=!0,xu||(xu=!0,MC())}function gs(t,n){if(!Nu&&Ol){Nu=!0;do for(var l=!1,r=Hl;r!==null;){if(t!==0){var m=r.pendingLanes;if(m===0)var g=0;else{var T=r.suspendedLanes,_=r.pingedLanes;g=(1<<31-Rt(42|t)+1)-1,g&=m&~(T&~_),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,mh(r,g))}else g=Ae,g=Qs(r,r===He?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(g&3)===0||qo(r,g)||(l=!0,mh(r,g));r=r.next}while(l);Nu=!1}}function RC(){ch()}function ch(){Ol=xu=!1;var t=0;Zn!==0&&HC()&&(t=Zn);for(var n=Nt(),l=null,r=Hl;r!==null;){var m=r.next,g=fh(r,n);g===0?(r.next=null,l===null?Hl=m:l.next=m,m===null&&(po=l)):(l=r,(t!==0||(g&3)!==0)&&(Ol=!0)),r=m}nt!==0&&nt!==5||gs(t),Zn!==0&&(Zn=0)}function fh(t,n){for(var l=t.suspendedLanes,r=t.pingedLanes,m=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var T=31-Rt(g),_=1<<T,b=m[T];b===-1?((_&l)===0||(_&r)!==0)&&(m[T]=nE(_,n)):b<=n&&(t.expiredLanes|=_),g&=~_}if(n=He,l=Ae,l=Qs(t,t===n?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,l===0||t===n&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Ga(r),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||qo(t,l)){if(n=l&-l,n===t.callbackPriority)return n;switch(r!==null&&Ga(r),Va(l)){case 2:case 8:l=ef;break;case 32:l=Os;break;case 268435456:l=tf;break;default:l=Os}return r=dh.bind(null,t),l=za(l,r),t.callbackPriority=n,t.callbackNode=l,n}return r!==null&&r!==null&&Ga(r),t.callbackPriority=2,t.callbackNode=null,2}function dh(t,n){if(nt!==0&&nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Gl()&&t.callbackNode!==l)return null;var r=Ae;return r=Qs(t,t===He?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(Ym(t,r,n),fh(t,Nt()),t.callbackNode!=null&&t.callbackNode===l?dh.bind(null,t):null)}function mh(t,n){if(Gl())return null;Ym(t,n,!0)}function MC(){VC(function(){(Me&6)!==0?za(jc,RC):ch()})}function bu(){if(Zn===0){var t=ji;t===0&&(t=Vs,Vs<<=1,(Vs&261888)===0&&(Vs=256)),Zn=t}return Zn}function hh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ks(""+t)}function ph(t,n){var l=n.ownerDocument.createElement("input");return l.name=n.name,l.value=n.value,t.id&&l.setAttribute("form",t.id),n.parentNode.insertBefore(l,n),t=new FormData(t),l.parentNode.removeChild(l),t}function DC(t,n,l,r,m){if(n==="submit"&&l&&l.stateNode===m){var g=hh((m[St]||null).action),T=r.submitter;T&&(n=(n=T[St]||null)?hh(n.formAction):T.getAttribute("formAction"),n!==null&&(g=n,T=null));var _=new js("action","action",null,r,m);t.push({event:_,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Zn!==0){var b=T?ph(m,T):new FormData(m);$r(l,{pending:!0,data:b,method:m.method,action:g},null,b)}}else typeof g=="function"&&(_.preventDefault(),b=T?ph(m,T):new FormData(m),$r(l,{pending:!0,data:b,method:m.method,action:g},g,b))},currentTarget:m}]})}}for(var Ru=0;Ru<fr.length;Ru++){var Mu=fr[Ru],IC=Mu.toLowerCase(),LC=Mu[0].toUpperCase()+Mu.slice(1);Wt(IC,"on"+LC)}Wt(Jf,"onAnimationEnd"),Wt(Yf,"onAnimationIteration"),Wt($f,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(KE,"onTransitionRun"),Wt(XE,"onTransitionStart"),Wt(ZE,"onTransitionCancel"),Wt(Kf,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ys));function gh(t,n){n=(n&4)!==0;for(var l=0;l<t.length;l++){var r=t[l],m=r.event;r=r.listeners;e:{var g=void 0;if(n)for(var T=r.length-1;0<=T;T--){var _=r[T],b=_.instance,P=_.currentTarget;if(_=_.listener,b!==g&&m.isPropagationStopped())break e;g=_,m.currentTarget=P;try{g(m)}catch(F){nl(F)}m.currentTarget=null,g=b}else for(T=0;T<r.length;T++){if(_=r[T],b=_.instance,P=_.currentTarget,_=_.listener,b!==g&&m.isPropagationStopped())break e;g=_,m.currentTarget=P;try{g(m)}catch(F){nl(F)}m.currentTarget=null,g=b}}}}function _e(t,n){var l=n[ka];l===void 0&&(l=n[ka]=new Set);var r=t+"__bubble";l.has(r)||(yh(n,t,2,!1),l.add(r))}function Du(t,n,l){var r=0;n&&(r|=4),yh(l,t,r,n)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function Iu(t){if(!t[Vl]){t[Vl]=!0,cf.forEach(function(l){l!=="selectionchange"&&(UC.has(l)||Du(l,!1,t),Du(l,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Vl]||(n[Vl]=!0,Du("selectionchange",!1,n))}}function yh(t,n,l,r){switch(Jh(n)){case 2:var m=r_;break;case 8:m=u_;break;default:m=Yu}l=m.bind(null,n,l,t),m=void 0,!Wa||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),r?m!==void 0?t.addEventListener(n,l,{capture:!0,passive:m}):t.addEventListener(n,l,!0):m!==void 0?t.addEventListener(n,l,{passive:m}):t.addEventListener(n,l,!1)}function Lu(t,n,l,r,m){var g=r;if((n&1)===0&&(n&2)===0&&r!==null)e:for(;;){if(r===null)return;var T=r.tag;if(T===3||T===4){var _=r.stateNode.containerInfo;if(_===m)break;if(T===4)for(T=r.return;T!==null;){var b=T.tag;if((b===3||b===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;_!==null;){if(T=Pi(_),T===null)return;if(b=T.tag,b===5||b===6||b===26||b===27){r=g=T;continue e}_=_.parentNode}}r=r.return}Cf(function(){var P=g,F=Xa(l),Y=[];e:{var B=Xf.get(t);if(B!==void 0){var O=js,re=t;switch(t){case"keypress":if(Zs(l)===0)break e;case"keydown":case"keyup":O=NE;break;case"focusin":re="focus",O=nr;break;case"focusout":re="blur",O=nr;break;case"beforeblur":case"afterblur":O=nr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=pE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=ME;break;case Jf:case Yf:case $f:O=vE;break;case Kf:O=IE;break;case"scroll":case"scrollend":O=mE;break;case"wheel":O=UE;break;case"copy":case"cut":case"paste":O=TE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Nf;break;case"toggle":case"beforetoggle":O=PE}var pe=(n&4)!==0,ze=!pe&&(t==="scroll"||t==="scrollend"),D=pe?B!==null?B+"Capture":null:B;pe=[];for(var R=P,q;R!==null;){var J=R;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||D===null||(J=Go(R,D),J!=null&&pe.push(vs(R,J,q))),ze)break;R=R.return}0<pe.length&&(B=new O(B,re,null,l,F),Y.push({event:B,listeners:pe}))}}if((n&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",B&&l!==Ka&&(re=l.relatedTarget||l.fromElement)&&(Pi(re)||re[qi]))break e;if((O||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,O?(re=l.relatedTarget||l.toElement,O=P,re=re?Pi(re):null,re!==null&&(ze=u(re),pe=re.tag,re!==ze||pe!==5&&pe!==27&&pe!==6)&&(re=null)):(O=null,re=P),O!==re)){if(pe=wf,J="onMouseLeave",D="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Nf,J="onPointerLeave",D="onPointerEnter",R="pointer"),ze=O==null?B:zo(O),q=re==null?B:zo(re),B=new pe(J,R+"leave",O,l,F),B.target=ze,B.relatedTarget=q,J=null,Pi(F)===P&&(pe=new pe(D,R+"enter",re,l,F),pe.target=q,pe.relatedTarget=ze,J=pe),ze=J,O&&re)t:{for(pe=qC,D=O,R=re,q=0,J=D;J;J=pe(J))q++;J=0;for(var de=R;de;de=pe(de))J++;for(;0<q-J;)D=pe(D),q--;for(;0<J-q;)R=pe(R),J--;for(;q--;){if(D===R||R!==null&&D===R.alternate){pe=D;break t}D=pe(D),R=pe(R)}pe=null}else pe=null;O!==null&&vh(Y,B,O,pe,!1),re!==null&&ze!==null&&vh(Y,ze,re,pe,!0)}}e:{if(B=P?zo(P):window,O=B.nodeName&&B.nodeName.toLowerCase(),O==="select"||O==="input"&&B.type==="file")var Ne=qf;else if(Lf(B))if(Pf)Ne=JE;else{Ne=FE;var ce=kE}else O=B.nodeName,!O||O.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?P&&$a(P.elementType)&&(Ne=qf):Ne=QE;if(Ne&&(Ne=Ne(t,P))){Uf(Y,Ne,l,F);break e}ce&&ce(t,B,P),t==="focusout"&&P&&B.type==="number"&&P.memoizedProps.value!=null&&Ya(B,"number",B.value)}switch(ce=P?zo(P):window,t){case"focusin":(Lf(ce)||ce.contentEditable==="true")&&(Qi=ce,rr=P,Yo=null);break;case"focusout":Yo=rr=Qi=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,Ff(Y,l,F);break;case"selectionchange":if($E)break;case"keydown":case"keyup":Ff(Y,l,F)}var Te;if(or)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Fi?Df(t,l)&&(we="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(bf&&l.locale!=="ko"&&(Fi||we!=="onCompositionStart"?we==="onCompositionEnd"&&Fi&&(Te=_f()):(qn=F,ja="value"in qn?qn.value:qn.textContent,Fi=!0)),ce=kl(P,we),0<ce.length&&(we=new xf(we,t,null,l,F),Y.push({event:we,listeners:ce}),Te?we.data=Te:(Te=If(l),Te!==null&&(we.data=Te)))),(Te=zE?GE(t,l):HE(t,l))&&(we=kl(P,"onBeforeInput"),0<we.length&&(ce=new xf("onBeforeInput","beforeinput",null,l,F),Y.push({event:ce,listeners:we}),ce.data=Te)),DC(Y,t,P,l,F)}gh(Y,n)})}function vs(t,n,l){return{instance:t,listener:n,currentTarget:l}}function kl(t,n){for(var l=n+"Capture",r=[];t!==null;){var m=t,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Go(t,l),m!=null&&r.unshift(vs(t,m,g)),m=Go(t,n),m!=null&&r.push(vs(t,m,g))),t.tag===3)return r;t=t.return}return[]}function qC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function vh(t,n,l,r,m){for(var g=n._reactName,T=[];l!==null&&l!==r;){var _=l,b=_.alternate,P=_.stateNode;if(_=_.tag,b!==null&&b===r)break;_!==5&&_!==26&&_!==27||P===null||(b=P,m?(P=Go(l,g),P!=null&&T.unshift(vs(l,P,b))):m||(P=Go(l,g),P!=null&&T.push(vs(l,P,b)))),l=l.return}T.length!==0&&t.push({event:n,listeners:T})}var PC=/\r\n?/g,BC=/\u0000|\uFFFD/g;function Sh(t){return(typeof t=="string"?t:""+t).replace(PC,`
`).replace(BC,"")}function Th(t,n){return n=Sh(n),Sh(t)===n}function Be(t,n,l,r,m,g){switch(l){case"children":typeof r=="string"?n==="body"||n==="textarea"&&r===""||Oi(t,r):(typeof r=="number"||typeof r=="bigint")&&n!=="body"&&Oi(t,""+r);break;case"className":Ys(t,"class",r);break;case"tabIndex":Ys(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ys(t,l,r);break;case"style":Tf(t,r,g);break;case"data":if(n!=="object"){Ys(t,"data",r);break}case"src":case"href":if(r===""&&(n!=="a"||l!=="href")){t.removeAttribute(l);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=Ks(""+r),t.setAttribute(l,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(n!=="input"&&Be(t,n,"name",m.name,m,null),Be(t,n,"formEncType",m.formEncType,m,null),Be(t,n,"formMethod",m.formMethod,m,null),Be(t,n,"formTarget",m.formTarget,m,null)):(Be(t,n,"encType",m.encType,m,null),Be(t,n,"method",m.method,m,null),Be(t,n,"target",m.target,m,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=Ks(""+r),t.setAttribute(l,r);break;case"onClick":r!=null&&(t.onclick=cn);break;case"onScroll":r!=null&&_e("scroll",t);break;case"onScrollEnd":r!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(l=r.__html,l!=null){if(m.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}l=Ks(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""+r):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":r===!0?t.setAttribute(l,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,r):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(l,r):t.removeAttribute(l);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(l):t.setAttribute(l,r);break;case"popover":_e("beforetoggle",t),_e("toggle",t),Js(t,"popover",r);break;case"xlinkActuate":un(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":un(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":un(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":un(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":un(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":un(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":un(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Js(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=fE.get(l)||l,Js(t,l,r))}}function Uu(t,n,l,r,m,g){switch(l){case"style":Tf(t,r,g);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(l=r.__html,l!=null){if(m.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"children":typeof r=="string"?Oi(t,r):(typeof r=="number"||typeof r=="bigint")&&Oi(t,""+r);break;case"onScroll":r!=null&&_e("scroll",t);break;case"onScrollEnd":r!=null&&_e("scrollend",t);break;case"onClick":r!=null&&(t.onclick=cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ff.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),n=l.slice(2,m?l.length-7:void 0),g=t[St]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(n,g,m),typeof r=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(n,r,m);break e}l in t?t[l]=r:r===!0?t.setAttribute(l,""):Js(t,l,r)}}}function ct(t,n,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var r=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":r=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Be(t,n,g,T,l,null)}}m&&Be(t,n,"srcSet",l.srcSet,l,null),r&&Be(t,n,"src",l.src,l,null);return;case"input":_e("invalid",t);var _=g=T=m=null,b=null,P=null;for(r in l)if(l.hasOwnProperty(r)){var F=l[r];if(F!=null)switch(r){case"name":m=F;break;case"type":T=F;break;case"checked":b=F;break;case"defaultChecked":P=F;break;case"value":g=F;break;case"defaultValue":_=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,n));break;default:Be(t,n,r,F,l,null)}}gf(t,g,_,b,P,T,m,!1);return;case"select":_e("invalid",t),r=T=g=null;for(m in l)if(l.hasOwnProperty(m)&&(_=l[m],_!=null))switch(m){case"value":g=_;break;case"defaultValue":T=_;break;case"multiple":r=_;default:Be(t,n,m,_,l,null)}n=g,l=T,t.multiple=!!r,n!=null?Hi(t,!!r,n,!1):l!=null&&Hi(t,!!r,l,!0);return;case"textarea":_e("invalid",t),g=m=r=null;for(T in l)if(l.hasOwnProperty(T)&&(_=l[T],_!=null))switch(T){case"value":r=_;break;case"defaultValue":m=_;break;case"children":g=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Be(t,n,T,_,l,null)}vf(t,r,m,g);return;case"option":for(b in l)if(l.hasOwnProperty(b)&&(r=l[b],r!=null))switch(b){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Be(t,n,b,r,l,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(r=0;r<ys.length;r++)_e(ys[r],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in l)if(l.hasOwnProperty(P)&&(r=l[P],r!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Be(t,n,P,r,l,null)}return;default:if($a(n)){for(F in l)l.hasOwnProperty(F)&&(r=l[F],r!==void 0&&Uu(t,n,F,r,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(r=l[_],r!=null&&Be(t,n,_,r,l,null))}function zC(t,n,l,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,_=null,b=null,P=null,F=null;for(O in l){var Y=l[O];if(l.hasOwnProperty(O)&&Y!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":b=Y;default:r.hasOwnProperty(O)||Be(t,n,O,null,r,Y)}}for(var B in r){var O=r[B];if(Y=l[B],r.hasOwnProperty(B)&&(O!=null||Y!=null))switch(B){case"type":g=O;break;case"name":m=O;break;case"checked":P=O;break;case"defaultChecked":F=O;break;case"value":T=O;break;case"defaultValue":_=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,n));break;default:O!==Y&&Be(t,n,B,O,r,Y)}}Ja(t,T,_,b,P,F,g,m);return;case"select":O=T=_=B=null;for(g in l)if(b=l[g],l.hasOwnProperty(g)&&b!=null)switch(g){case"value":break;case"multiple":O=b;default:r.hasOwnProperty(g)||Be(t,n,g,null,r,b)}for(m in r)if(g=r[m],b=l[m],r.hasOwnProperty(m)&&(g!=null||b!=null))switch(m){case"value":B=g;break;case"defaultValue":_=g;break;case"multiple":T=g;default:g!==b&&Be(t,n,m,g,r,b)}n=_,l=T,r=O,B!=null?Hi(t,!!l,B,!1):!!r!=!!l&&(n!=null?Hi(t,!!l,n,!0):Hi(t,!!l,l?[]:"",!1));return;case"textarea":O=B=null;for(_ in l)if(m=l[_],l.hasOwnProperty(_)&&m!=null&&!r.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Be(t,n,_,null,r,m)}for(T in r)if(m=r[T],g=l[T],r.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":B=m;break;case"defaultValue":O=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==g&&Be(t,n,T,m,r,g)}yf(t,B,O);return;case"option":for(var re in l)if(B=l[re],l.hasOwnProperty(re)&&B!=null&&!r.hasOwnProperty(re))switch(re){case"selected":t.selected=!1;break;default:Be(t,n,re,null,r,B)}for(b in r)if(B=r[b],O=l[b],r.hasOwnProperty(b)&&B!==O&&(B!=null||O!=null))switch(b){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Be(t,n,b,B,r,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in l)B=l[pe],l.hasOwnProperty(pe)&&B!=null&&!r.hasOwnProperty(pe)&&Be(t,n,pe,null,r,B);for(P in r)if(B=r[P],O=l[P],r.hasOwnProperty(P)&&B!==O&&(B!=null||O!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,n));break;default:Be(t,n,P,B,r,O)}return;default:if($a(n)){for(var ze in l)B=l[ze],l.hasOwnProperty(ze)&&B!==void 0&&!r.hasOwnProperty(ze)&&Uu(t,n,ze,void 0,r,B);for(F in r)B=r[F],O=l[F],!r.hasOwnProperty(F)||B===O||B===void 0&&O===void 0||Uu(t,n,F,B,r,O);return}}for(var D in l)B=l[D],l.hasOwnProperty(D)&&B!=null&&!r.hasOwnProperty(D)&&Be(t,n,D,null,r,B);for(Y in r)B=r[Y],O=l[Y],!r.hasOwnProperty(Y)||B===O||B==null&&O==null||Be(t,n,Y,B,r,O)}function Eh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,l=performance.getEntriesByType("resource"),r=0;r<l.length;r++){var m=l[r],g=m.transferSize,T=m.initiatorType,_=m.duration;if(g&&_&&Eh(T)){for(T=0,_=m.responseEnd,r+=1;r<l.length;r++){var b=l[r],P=b.startTime;if(P>_)break;var F=b.transferSize,Y=b.initiatorType;F&&Eh(Y)&&(b=b.responseEnd,T+=F*(b<_?1:(_-P)/(b-P)))}if(--r,n+=8*(g+T)/(m.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qu=null,Pu=null;function Fl(t){return t.nodeType===9?t:t.ownerDocument}function Ch(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _h(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Bu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var zu=null;function HC(){var t=window.event;return t&&t.type==="popstate"?t===zu?!1:(zu=t,!0):(zu=null,!1)}var Ah=typeof setTimeout=="function"?setTimeout:void 0,OC=typeof clearTimeout=="function"?clearTimeout:void 0,wh=typeof Promise=="function"?Promise:void 0,VC=typeof queueMicrotask=="function"?queueMicrotask:typeof wh<"u"?function(t){return wh.resolve(null).then(t).catch(kC)}:Ah;function kC(t){setTimeout(function(){throw t})}function Wn(t){return t==="head"}function xh(t,n){var l=n,r=0;do{var m=l.nextSibling;if(t.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(r===0){t.removeChild(m),So(n);return}r--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")r++;else if(l==="html")Ss(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Ss(l);for(var g=l.firstChild;g;){var T=g.nextSibling,_=g.nodeName;g[Bo]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=T}}else l==="body"&&Ss(t.ownerDocument.body);l=m}while(l);So(n)}function Nh(t,n){var l=t;t=0;do{var r=l.nextSibling;if(l.nodeType===1?n?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(n?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),r&&r.nodeType===8)if(l=r.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=r}while(l)}function Gu(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var l=n;switch(n=n.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Gu(l),Fa(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function FC(t,n,l,r){for(;t.nodeType===1;){var m=l;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Bo])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Yt(t.nextSibling),t===null)break}return null}function QC(t,n,l){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Yt(t.nextSibling),t===null))return null;return t}function bh(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Yt(t.nextSibling),t===null))return null;return t}function Hu(t){return t.data==="$?"||t.data==="$~"}function Ou(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function JC(t,n){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||l.readyState!=="loading")n();else{var r=function(){n(),l.removeEventListener("DOMContentLoaded",r)};l.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Yt(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Vu=null;function Rh(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(n===0)return Yt(t.nextSibling);n--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||n++}t=t.nextSibling}return null}function Mh(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(n===0)return t;n--}else l!=="/$"&&l!=="/&"||n++}t=t.previousSibling}return null}function Dh(t,n,l){switch(n=Fl(l),t){case"html":if(t=n.documentElement,!t)throw Error(s(452));return t;case"head":if(t=n.head,!t)throw Error(s(453));return t;case"body":if(t=n.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ss(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Fa(t)}var $t=new Map,Ih=new Set;function Ql(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var xn=ee.d;ee.d={f:YC,r:$C,D:KC,C:XC,L:ZC,m:WC,X:e_,S:jC,M:t_};function YC(){var t=xn.f(),n=Pl();return t||n}function $C(t){var n=Bi(t);n!==null&&n.tag===5&&n.type==="form"?Kd(n):xn.r(t)}var go=typeof document>"u"?null:document;function Lh(t,n,l){var r=go;if(r&&typeof n=="string"&&n){var m=Ht(n);m='link[rel="'+t+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Ih.has(m)||(Ih.add(m),t={rel:t,crossOrigin:l,href:n},r.querySelector(m)===null&&(n=r.createElement("link"),ct(n,"link",t),it(n),r.head.appendChild(n)))}}function KC(t){xn.D(t),Lh("dns-prefetch",t,null)}function XC(t,n){xn.C(t,n),Lh("preconnect",t,n)}function ZC(t,n,l){xn.L(t,n,l);var r=go;if(r&&t&&n){var m='link[rel="preload"][as="'+Ht(n)+'"]';n==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Ht(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Ht(l.imageSizes)+'"]')):m+='[href="'+Ht(t)+'"]';var g=m;switch(n){case"style":g=yo(t);break;case"script":g=vo(t)}$t.has(g)||(t=S({rel:"preload",href:n==="image"&&l&&l.imageSrcSet?void 0:t,as:n},l),$t.set(g,t),r.querySelector(m)!==null||n==="style"&&r.querySelector(Ts(g))||n==="script"&&r.querySelector(Es(g))||(n=r.createElement("link"),ct(n,"link",t),it(n),r.head.appendChild(n)))}}function WC(t,n){xn.m(t,n);var l=go;if(l&&t){var r=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+Ht(r)+'"][href="'+Ht(t)+'"]',g=m;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=vo(t)}if(!$t.has(g)&&(t=S({rel:"modulepreload",href:t},n),$t.set(g,t),l.querySelector(m)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Es(g)))return}r=l.createElement("link"),ct(r,"link",t),it(r),l.head.appendChild(r)}}}function jC(t,n,l){xn.S(t,n,l);var r=go;if(r&&t){var m=zi(r).hoistableStyles,g=yo(t);n=n||"default";var T=m.get(g);if(!T){var _={loading:0,preload:null};if(T=r.querySelector(Ts(g)))_.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},l),(l=$t.get(g))&&ku(t,l);var b=T=r.createElement("link");it(b),ct(b,"link",t),b._p=new Promise(function(P,F){b.onload=P,b.onerror=F}),b.addEventListener("load",function(){_.loading|=1}),b.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Jl(T,n,r)}T={type:"stylesheet",instance:T,count:1,state:_},m.set(g,T)}}}function e_(t,n){xn.X(t,n);var l=go;if(l&&t){var r=zi(l).hoistableScripts,m=vo(t),g=r.get(m);g||(g=l.querySelector(Es(m)),g||(t=S({src:t,async:!0},n),(n=$t.get(m))&&Fu(t,n),g=l.createElement("script"),it(g),ct(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(m,g))}}function t_(t,n){xn.M(t,n);var l=go;if(l&&t){var r=zi(l).hoistableScripts,m=vo(t),g=r.get(m);g||(g=l.querySelector(Es(m)),g||(t=S({src:t,async:!0,type:"module"},n),(n=$t.get(m))&&Fu(t,n),g=l.createElement("script"),it(g),ct(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(m,g))}}function Uh(t,n,l,r){var m=(m=Ee.current)?Ql(m):null;if(!m)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(n=yo(l.href),l=zi(m).hoistableStyles,r=l.get(n),r||(r={type:"style",instance:null,count:0,state:null},l.set(n,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=yo(l.href);var g=zi(m).hoistableStyles,T=g.get(t);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,T),(g=m.querySelector(Ts(t)))&&!g._p&&(T.instance=g,T.state.loading=5),$t.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$t.set(t,l),g||n_(m,t,l,T.state))),n&&r===null)throw Error(s(528,""));return T}if(n&&r!==null)throw Error(s(529,""));return null;case"script":return n=l.async,l=l.src,typeof l=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=vo(l),l=zi(m).hoistableScripts,r=l.get(n),r||(r={type:"script",instance:null,count:0,state:null},l.set(n,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function yo(t){return'href="'+Ht(t)+'"'}function Ts(t){return'link[rel="stylesheet"]['+t+"]"}function qh(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function n_(t,n,l,r){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?r.loading=1:(n=t.createElement("link"),r.preload=n,n.addEventListener("load",function(){return r.loading|=1}),n.addEventListener("error",function(){return r.loading|=2}),ct(n,"link",l),it(n),t.head.appendChild(n))}function vo(t){return'[src="'+Ht(t)+'"]'}function Es(t){return"script[async]"+t}function Ph(t,n,l){if(n.count++,n.instance===null)switch(n.type){case"style":var r=t.querySelector('style[data-href~="'+Ht(l.href)+'"]');if(r)return n.instance=r,it(r),r;var m=S({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),it(r),ct(r,"style",m),Jl(r,l.precedence,t),n.instance=r;case"stylesheet":m=yo(l.href);var g=t.querySelector(Ts(m));if(g)return n.state.loading|=4,n.instance=g,it(g),g;r=qh(l),(m=$t.get(m))&&ku(r,m),g=(t.ownerDocument||t).createElement("link"),it(g);var T=g;return T._p=new Promise(function(_,b){T.onload=_,T.onerror=b}),ct(g,"link",r),n.state.loading|=4,Jl(g,l.precedence,t),n.instance=g;case"script":return g=vo(l.src),(m=t.querySelector(Es(g)))?(n.instance=m,it(m),m):(r=l,(m=$t.get(g))&&(r=S({},l),Fu(r,m)),t=t.ownerDocument||t,m=t.createElement("script"),it(m),ct(m,"link",r),t.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(r=n.instance,n.state.loading|=4,Jl(r,l.precedence,t));return n.instance}function Jl(t,n,l){for(var r=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=r.length?r[r.length-1]:null,g=m,T=0;T<r.length;T++){var _=r[T];if(_.dataset.precedence===n)g=_;else if(g!==m)break}g?g.parentNode.insertBefore(t,g.nextSibling):(n=l.nodeType===9?l.head:l,n.insertBefore(t,n.firstChild))}function ku(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Fu(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Yl=null;function Bh(t,n,l){if(Yl===null){var r=new Map,m=Yl=new Map;m.set(l,r)}else m=Yl,r=m.get(l),r||(r=new Map,m.set(l,r));if(r.has(t))return r;for(r.set(t,null),l=l.getElementsByTagName(t),m=0;m<l.length;m++){var g=l[m];if(!(g[Bo]||g[lt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(n)||"";T=t+T;var _=r.get(T);_?_.push(g):r.set(T,[g])}}return r}function zh(t,n,l){t=t.ownerDocument||t,t.head.insertBefore(l,n==="title"?t.querySelector("head > title"):null)}function i_(t,n,l){if(l===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Gh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function o_(t,n,l,r){if(l.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=yo(r.href),g=n.querySelector(Ts(m));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=$l.bind(t),n.then(t,t)),l.state.loading|=4,l.instance=g,it(g);return}g=n.ownerDocument||n,r=qh(r),(m=$t.get(m))&&ku(r,m),g=g.createElement("link"),it(g);var T=g;T._p=new Promise(function(_,b){T.onload=_,T.onerror=b}),ct(g,"link",r),l.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,n),(n=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=$l.bind(t),n.addEventListener("load",l),n.addEventListener("error",l))}}var Qu=0;function s_(t,n){return t.stylesheets&&t.count===0&&Xl(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var r=setTimeout(function(){if(t.stylesheets&&Xl(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+n);0<t.imgBytes&&Qu===0&&(Qu=62500*GC());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Xl(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>Qu?50:800)+n);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(m)}}:null}function $l(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Kl=null;function Xl(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Kl=new Map,n.forEach(l_,t),Kl=null,$l.call(t))}function l_(t,n){if(!(n.state.loading&4)){var l=Kl.get(t);if(l)var r=l.get(null);else{l=new Map,Kl.set(t,l);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),r=T)}r&&l.set(null,r)}m=n.instance,T=m.getAttribute("data-precedence"),g=l.get(T)||r,g===r&&l.set(null,m),l.set(T,m),this.count++,r=$l.bind(this),m.addEventListener("load",r),m.addEventListener("error",r),g?g.parentNode.insertBefore(m,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),n.state.loading|=4}}var Cs={$$typeof:U,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function a_(t,n,l,r,m,g,T,_,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ha(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.hiddenUpdates=Ha(null),this.identifierPrefix=r,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Hh(t,n,l,r,m,g,T,_,b,P,F,Y){return t=new a_(t,n,l,T,b,P,F,Y,_),n=1,g===!0&&(n|=24),g=Dt(3,null,null,n),t.current=g,g.stateNode=t,n=Ar(),n.refCount++,t.pooledCache=n,n.refCount++,g.memoizedState={element:r,isDehydrated:l,cache:n},br(g),t}function Oh(t){return t?(t=$i,t):$i}function Vh(t,n,l,r,m,g){m=Oh(m),r.context===null?r.context=m:r.pendingContext=m,r=On(n),r.payload={element:l},g=g===void 0?null:g,g!==null&&(r.callback=g),l=Vn(t,r,n),l!==null&&(wt(l,t,n),es(l,t,n))}function kh(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<n?l:n}}function Ju(t,n){kh(t,n),(t=t.alternate)&&kh(t,n)}function Fh(t){if(t.tag===13||t.tag===31){var n=pi(t,67108864);n!==null&&wt(n,t,67108864),Ju(t,67108864)}}function Qh(t){if(t.tag===13||t.tag===31){var n=Pt();n=Oa(n);var l=pi(t,n);l!==null&&wt(l,t,n),Ju(t,n)}}var Zl=!0;function r_(t,n,l,r){var m=G.T;G.T=null;var g=ee.p;try{ee.p=2,Yu(t,n,l,r)}finally{ee.p=g,G.T=m}}function u_(t,n,l,r){var m=G.T;G.T=null;var g=ee.p;try{ee.p=8,Yu(t,n,l,r)}finally{ee.p=g,G.T=m}}function Yu(t,n,l,r){if(Zl){var m=$u(r);if(m===null)Lu(t,n,r,Wl,l),Yh(t,r);else if(f_(m,t,n,l,r))r.stopPropagation();else if(Yh(t,r),n&4&&-1<c_.indexOf(t)){for(;m!==null;){var g=Bi(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=ci(g.pendingLanes);if(T!==0){var _=g;for(_.pendingLanes|=2,_.entangledLanes|=2;T;){var b=1<<31-Rt(T);_.entanglements[1]|=b,T&=~b}an(g),(Me&6)===0&&(Ul=Nt()+500,gs(0))}}break;case 31:case 13:_=pi(g,2),_!==null&&wt(_,g,2),Pl(),Ju(g,2)}if(g=$u(r),g===null&&Lu(t,n,r,Wl,l),g===m)break;m=g}m!==null&&r.stopPropagation()}else Lu(t,n,r,null,l)}}function $u(t){return t=Xa(t),Ku(t)}var Wl=null;function Ku(t){if(Wl=null,t=Pi(t),t!==null){var n=u(t);if(n===null)t=null;else{var l=n.tag;if(l===13){if(t=d(n),t!==null)return t;t=null}else if(l===31){if(t=h(n),t!==null)return t;t=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Wl=t,null}function Jh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(KT()){case jc:return 2;case ef:return 8;case Os:case XT:return 32;case tf:return 268435456;default:return 32}default:return 32}}var Xu=!1,jn=null,ei=null,ti=null,_s=new Map,As=new Map,ni=[],c_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yh(t,n){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":_s.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(n.pointerId)}}function ws(t,n,l,r,m,g){return t===null||t.nativeEvent!==g?(t={blockedOn:n,domEventName:l,eventSystemFlags:r,nativeEvent:g,targetContainers:[m]},n!==null&&(n=Bi(n),n!==null&&Fh(n)),t):(t.eventSystemFlags|=r,n=t.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),t)}function f_(t,n,l,r,m){switch(n){case"focusin":return jn=ws(jn,t,n,l,r,m),!0;case"dragenter":return ei=ws(ei,t,n,l,r,m),!0;case"mouseover":return ti=ws(ti,t,n,l,r,m),!0;case"pointerover":var g=m.pointerId;return _s.set(g,ws(_s.get(g)||null,t,n,l,r,m)),!0;case"gotpointercapture":return g=m.pointerId,As.set(g,ws(As.get(g)||null,t,n,l,r,m)),!0}return!1}function $h(t){var n=Pi(t.target);if(n!==null){var l=u(n);if(l!==null){if(n=l.tag,n===13){if(n=d(l),n!==null){t.blockedOn=n,rf(t.priority,function(){Qh(l)});return}}else if(n===31){if(n=h(l),n!==null){t.blockedOn=n,rf(t.priority,function(){Qh(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var l=$u(t.nativeEvent);if(l===null){l=t.nativeEvent;var r=new l.constructor(l.type,l);Ka=r,l.target.dispatchEvent(r),Ka=null}else return n=Bi(l),n!==null&&Fh(n),t.blockedOn=l,!1;n.shift()}return!0}function Kh(t,n,l){jl(t)&&l.delete(n)}function d_(){Xu=!1,jn!==null&&jl(jn)&&(jn=null),ei!==null&&jl(ei)&&(ei=null),ti!==null&&jl(ti)&&(ti=null),_s.forEach(Kh),As.forEach(Kh)}function ea(t,n){t.blockedOn===n&&(t.blockedOn=null,Xu||(Xu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,d_)))}var ta=null;function Xh(t){ta!==t&&(ta=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ta===t&&(ta=null);for(var n=0;n<t.length;n+=3){var l=t[n],r=t[n+1],m=t[n+2];if(typeof r!="function"){if(Ku(r||l)===null)continue;break}var g=Bi(l);g!==null&&(t.splice(n,3),n-=3,$r(g,{pending:!0,data:m,method:l.method,action:r},r,m))}}))}function So(t){function n(b){return ea(b,t)}jn!==null&&ea(jn,t),ei!==null&&ea(ei,t),ti!==null&&ea(ti,t),_s.forEach(n),As.forEach(n);for(var l=0;l<ni.length;l++){var r=ni[l];r.blockedOn===t&&(r.blockedOn=null)}for(;0<ni.length&&(l=ni[0],l.blockedOn===null);)$h(l),l.blockedOn===null&&ni.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(r=0;r<l.length;r+=3){var m=l[r],g=l[r+1],T=m[St]||null;if(typeof g=="function")T||Xh(l);else if(T){var _=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[St]||null)_=T.formAction;else if(Ku(m)!==null)continue}else _=T.action;typeof _=="function"?l[r+1]=_:(l.splice(r,3),r-=3),Xh(l)}}}function Zh(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),r||setTimeout(l,20)}function l(){if(!r&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(l,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function Zu(t){this._internalRoot=t}na.prototype.render=Zu.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(s(409));var l=n.current,r=Pt();Vh(l,r,t,n,null,null)},na.prototype.unmount=Zu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Vh(t.current,2,null,t,null,null),Pl(),n[qi]=null}};function na(t){this._internalRoot=t}na.prototype.unstable_scheduleHydration=function(t){if(t){var n=af();t={blockedOn:null,target:t,priority:n};for(var l=0;l<ni.length&&n!==0&&n<ni[l].priority;l++);ni.splice(l,0,t),l===0&&$h(t)}};var Wh=e.version;if(Wh!=="19.2.0")throw Error(s(527,Wh,"19.2.0"));ee.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var m_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{Uo=ia.inject(m_),bt=ia}catch{}}return Ns.createRoot=function(t,n){if(!a(t))throw Error(s(299));var l=!1,r="",m=sm,g=lm,T=am;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=Hh(t,1,!1,null,null,l,r,null,m,g,T,Zh),t[qi]=n.current,Iu(t),new Zu(n)},Ns.hydrateRoot=function(t,n,l){if(!a(t))throw Error(s(299));var r=!1,m="",g=sm,T=lm,_=am,b=null;return l!=null&&(l.unstable_strictMode===!0&&(r=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(b=l.formState)),n=Hh(t,1,!0,n,l??null,r,m,b,g,T,_,Zh),n.context=Oh(null),l=n.current,r=Pt(),r=Oa(r),m=On(r),m.callback=null,Vn(l,m,r),l=r,n.current.lanes=l,Po(n,l),an(n),t[qi]=n.current,Iu(t),new na(n)},Ns.version="19.2.0",Ns}var rp;function x_(){if(rp)return ec.exports;rp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ec.exports=w_(),ec.exports}var N_=x_();const iS={en:{headerTitle:"Fragment to Diary",viewHistory:"View History",placeholder:"What's happening right now? (e.g., 'Had a great coffee with Sarah', 'Feeling stuck on the project')",addNote:"Add note",noNotes:"No notes yet today. Start capturing moments.",deleteNote:"Delete note",timeline:"Timeline",clearDay:"Clear Day",clearConfirm:"Are you sure you want to clear all notes for",weaveButton:"Weave into Diary",regenerateButton:"Regenerate Diary",cancelView:"Cancel and view existing diary",writingStory:"Writing your story...",analyzing:"Analyzing moments from",failedError:"Failed to create your diary. Please try again.",backToFragments:"Back to fragments",reflectionLabel:"Reflection",historyTitle:"Journal History",noEntries:"No entries yet.",diaryCreated:"Diary Created",draft:"Draft",fragment:"Fragment",fragments:"Fragments",today:"Today",yesterday:"Yesterday",edit:"Edit",save:"Save",cancel:"Cancel",titleLabel:"Title",moodLabel:"Mood",contentLabel:"Content",tagsLabel:"Tags (comma separated)",startRecording:"Record Audio",stopRecording:"Stop Recording",transcribing:"Transcribing...",transcriptionFailed:"Transcription failed",fragmentTagPlaceholder:"Tags (optional, comma separated)",deleteConfirmTitle:"Delete Note?",deleteConfirmMessage:"Are you sure you want to delete this fragment? This action cannot be undone.",confirmDelete:"Delete",filterAll:"All",unsavedDraft:"Found an unsaved draft",restore:"Restore",discard:"Discard",searchPlaceholder:"Search memories...",searchResults:"Search Results",noResultsFound:"No matches found for",matchFoundIn:"Found in",clearSearch:"Clear search",toneLabel:"Tone",tones:{default:"Natural (AI Decision)",happy:"Optimistic & Energetic",melancholic:"Melancholic & Deep",witty:"Witty & Sarcastic",formal:"Formal & Structured",poetic:"Poetic & Lyrical",grateful:"Grateful & Warm",stoic:"Stoic & Objective"},settings:"Settings",aiConfig:"AI Configuration",provider:"Provider",gemini:"Google Gemini (Default)",openai:"OpenAI Compatible",baseUrl:"Base URL",apiKey:"API Key",modelName:"Model Name",saveConfig:"Update Configuration",configSaved:"Configuration saved!",exportData:"Export Data",importData:"Import Data",exportJsonDesc:"Backup your raw data to transfer between devices.",exportMdDesc:"Download a readable text file of your diary entries.",importDesc:"Restore from a previously exported JSON file. This will merge with existing data.",importSuccess:"Data imported successfully!",importError:"Invalid data file.",importButton:"Select File",exportButton:"Export",json:"JSON (Backup)",markdown:"Markdown (Readable)",close:"Close"},zh:{headerTitle:"",viewHistory:"",placeholder:"('''')",addNote:"",noNotes:"",deleteNote:"",timeline:"",clearDay:"",clearConfirm:"",weaveButton:"",regenerateButton:"",cancelView:"",writingStory:"...",analyzing:"",failedError:"",backToFragments:"",reflectionLabel:"",historyTitle:"",noEntries:"",diaryCreated:"",draft:"",fragment:"",fragments:"",today:"",yesterday:"",edit:"",save:"",cancel:"",titleLabel:"",moodLabel:"",contentLabel:"",tagsLabel:" ()",startRecording:"",stopRecording:"",transcribing:"...",transcriptionFailed:"",fragmentTagPlaceholder:" ()",deleteConfirmTitle:"",deleteConfirmMessage:"",confirmDelete:"",filterAll:"",unsavedDraft:"",restore:"",discard:"",searchPlaceholder:"...",searchResults:"",noResultsFound:"",matchFoundIn:"",clearSearch:"",toneLabel:"",tones:{default:" (AI)",happy:" & ",melancholic:" & ",witty:" & ",formal:" & ",poetic:" & ",grateful:" & ",stoic:" &"},settings:"",aiConfig:"AI ",provider:"",gemini:"Google Gemini ()",openai:"OpenAI ",baseUrl:"Base URL",apiKey:"API Key",modelName:"",saveConfig:"",configSaved:"",exportData:"",importData:"",exportJsonDesc:"",exportMdDesc:"",importDesc:" JSON ",importSuccess:"",importError:"",importButton:"",exportButton:"",json:"JSON ()",markdown:"Markdown ()",close:""}},rn=i=>iS[i],up=i=>{let e;const o=new Set,s=(p,v)=>{const S=typeof p=="function"?p(e):p;if(!Object.is(S,e)){const E=e;e=v??(typeof S!="object"||S===null)?S:Object.assign({},e,S),o.forEach(A=>A(e,E))}},a=()=>e,h={setState:s,getState:a,getInitialState:()=>y,subscribe:p=>(o.add(p),()=>o.delete(p))},y=e=i(s,a,h);return h},b_=(i=>i?up(i):up),R_=i=>i;function M_(i,e=R_){const o=Eo.useSyncExternalStore(i.subscribe,Eo.useCallback(()=>e(i.getState()),[i,e]),Eo.useCallback(()=>e(i.getInitialState()),[i,e]));return Eo.useDebugValue(o),o}const cp=i=>{const e=b_(i),o=s=>M_(e,s);return Object.assign(o,e),o},Lc=(i=>i?cp(i):cp);/*! Capacitor: https://capacitorjs.com/ - MIT License */var bo;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(bo||(bo={}));class oc extends Error{constructor(e,o,s){super(e),this.message=e,this.code=o,this.data=s}}const D_=i=>{var e,o;return i!=null&&i.androidBridge?"android":!((o=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},I_=i=>{const e=i.CapacitorCustomPlatform||null,o=i.Capacitor||{},s=o.Plugins=o.Plugins||{},a=()=>e!==null?e.name:D_(i),u=()=>a()!=="web",d=S=>{const E=p.get(S);return!!(E!=null&&E.platforms.has(a())||h(S))},h=S=>{var E;return(E=o.PluginHeaders)===null||E===void 0?void 0:E.find(A=>A.name===S)},y=S=>i.console.error(S),p=new Map,v=(S,E={})=>{const A=p.get(S);if(A)return console.warn(`Capacitor plugin "${S}" already registered. Cannot register plugins twice.`),A.proxy;const N=a(),w=h(S);let L;const V=async()=>(!L&&N in E?L=typeof E[N]=="function"?L=await E[N]():L=E[N]:e!==null&&!L&&"web"in E&&(L=typeof E.web=="function"?L=await E.web():L=E.web),L),$=(Q,z)=>{var X,Z;if(w){const te=w==null?void 0:w.methods.find(ae=>z===ae.name);if(te)return te.rtype==="promise"?ae=>o.nativePromise(S,z.toString(),ae):(ae,ge)=>o.nativeCallback(S,z.toString(),ae,ge);if(Q)return(X=Q[z])===null||X===void 0?void 0:X.bind(Q)}else{if(Q)return(Z=Q[z])===null||Z===void 0?void 0:Z.bind(Q);throw new oc(`"${S}" plugin is not implemented on ${N}`,bo.Unimplemented)}},U=Q=>{let z;const X=(...Z)=>{const te=V().then(ae=>{const ge=$(ae,Q);if(ge){const Ie=ge(...Z);return z=Ie==null?void 0:Ie.remove,Ie}else throw new oc(`"${S}.${Q}()" is not implemented on ${N}`,bo.Unimplemented)});return Q==="addListener"&&(te.remove=async()=>z()),te};return X.toString=()=>`${Q.toString()}() { [capacitor code] }`,Object.defineProperty(X,"name",{value:Q,writable:!1,configurable:!1}),X},k=U("addListener"),ne=U("removeListener"),ie=(Q,z)=>{const X=k({eventName:Q},z),Z=async()=>{const ae=await X;ne({eventName:Q,callbackId:ae},z)},te=new Promise(ae=>X.then(()=>ae({remove:Z})));return te.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Z()},te},H=new Proxy({},{get(Q,z){switch(z){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?ie:k;case"removeListener":return ne;default:return U(z)}}});return s[S]=H,p.set(S,{name:S,proxy:H,platforms:new Set([...Object.keys(E),...w?[N]:[]])}),H};return o.convertFileSrc||(o.convertFileSrc=S=>S),o.getPlatform=a,o.handleError=y,o.isNativePlatform=u,o.isPluginAvailable=d,o.registerPlugin=v,o.Exception=oc,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o},L_=i=>i.Capacitor=I_(i),ca=L_(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Uc=ca.registerPlugin;class oS{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,o){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(o);const u=this.windowListeners[e];u&&!u.registered&&this.addWindowListener(u),s&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,o);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,o,s){const a=this.listeners[e];if(!a){if(s){let u=this.retainedEventArguments[e];u||(u=[]),u.push(o),this.retainedEventArguments[e]=u}return}a.forEach(u=>u(o))}hasListeners(e){var o;return!!(!((o=this.listeners[e])===null||o===void 0)&&o.length)}registerWindowListener(e,o){this.windowListeners[o]={registered:!1,windowEventName:e,pluginEventName:o,handler:s=>{this.notifyListeners(o,s)}}}unimplemented(e="not implemented"){return new ca.Exception(e,bo.Unimplemented)}unavailable(e="not available"){return new ca.Exception(e,bo.Unavailable)}async removeListener(e,o){const s=this.listeners[e];if(!s)return;const a=s.indexOf(o);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const o=this.retainedEventArguments[e];o&&(delete this.retainedEventArguments[e],o.forEach(s=>{this.notifyListeners(e,s)}))}}const fp=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),dp=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class U_ extends oS{async getCookies(){const e=document.cookie,o={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[a,u]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=dp(a).trim(),u=dp(u).trim(),o[a]=u}),o}async setCookie(e){try{const o=fp(e.key),s=fp(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,u=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${o}=${s||""}${a}; path=${u}; ${d};`}catch(o){return Promise.reject(o)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const o of e)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Uc("CapacitorCookies",{web:()=>new U_});const q_=async i=>new Promise((e,o)=>{const s=new FileReader;s.onload=()=>{const a=s.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},s.onerror=a=>o(a),s.readAsDataURL(i)}),P_=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(a=>a.toLocaleLowerCase()).reduce((a,u,d)=>(a[u]=i[e[d]],a),{})},B_=(i,e=!0)=>i?Object.entries(i).reduce((s,a)=>{const[u,d]=a;let h,y;return Array.isArray(d)?(y="",d.forEach(p=>{h=e?encodeURIComponent(p):p,y+=`${u}=${h}&`}),y.slice(0,-1)):(h=e?encodeURIComponent(d):d,y=`${u}=${h}`),`${s}&${y}`},"").substr(1):null,z_=(i,e={})=>{const o=Object.assign({method:i.method||"GET",headers:i.headers},e),a=P_(i.headers)["content-type"]||"";if(typeof i.data=="string")o.body=i.data;else if(a.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[d,h]of Object.entries(i.data||{}))u.set(d,h);o.body=u.toString()}else if(a.includes("multipart/form-data")||i.data instanceof FormData){const u=new FormData;if(i.data instanceof FormData)i.data.forEach((h,y)=>{u.append(y,h)});else for(const h of Object.keys(i.data))u.append(h,i.data[h]);o.body=u;const d=new Headers(o.headers);d.delete("content-type"),o.headers=d}else(a.includes("application/json")||typeof i.data=="object")&&(o.body=JSON.stringify(i.data));return o};class G_ extends oS{async request(e){const o=z_(e,e.webFetchExtra),s=B_(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,u=await fetch(a,o),d=u.headers.get("content-type")||"";let{responseType:h="text"}=u.ok?e:{};d.includes("application/json")&&(h="json");let y,p;switch(h){case"arraybuffer":case"blob":p=await u.blob(),y=await q_(p);break;case"json":y=await u.json();break;case"document":case"text":default:y=await u.text()}const v={};return u.headers.forEach((S,E)=>{v[E]=S}),{data:y,headers:v,status:u.status,url:u.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Uc("CapacitorHttp",{web:()=>new G_});const H_="modulepreload",O_=function(i){return"/notes/"+i},mp={},V_=function(e,o,s){let a=Promise.resolve();if(o&&o.length>0){let d=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=d(o.map(p=>{if(p=O_(p),p in mp)return;mp[p]=!0;const v=p.endsWith(".css"),S=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":H_,v||(E.as="script"),E.crossOrigin="",E.href=p,y&&E.setAttribute("nonce",y),document.head.appendChild(E),v)return new Promise((A,N)=>{E.addEventListener("load",A),E.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return a.then(d=>{for(const h of d||[])h.status==="rejected"&&u(h.reason);return e().catch(u)})};class k_{constructor(e){this.sqlite=e,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(e){return Promise.reject(e)}}async saveToStore(e){try{return await this.sqlite.saveToStore({database:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}async saveToLocalDisk(e){try{return await this.sqlite.saveToLocalDisk({database:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}async getFromLocalDiskToStore(e){const o=e??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async echo(e){try{const o=await this.sqlite.echo({value:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isSecretStored(){try{const e=await this.sqlite.isSecretStored();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async setEncryptionSecret(e){try{return await this.sqlite.setEncryptionSecret({passphrase:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}async changeEncryptionSecret(e,o){try{return await this.sqlite.changeEncryptionSecret({passphrase:e,oldpassphrase:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(e){return Promise.reject(e)}}async checkEncryptionSecret(e){try{const o=await this.sqlite.checkEncryptionSecret({passphrase:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async addUpgradeStatement(e,o){try{return e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:e,upgrade:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async createConnection(e,o,s,a,u){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.createConnection({database:e,encrypted:o,mode:s,version:a,readonly:u});const d=new hp(e,u,this.sqlite),h=u?`RO_${e}`:`RW_${e}`;return this._connectionDict.set(h,d),Promise.resolve(d)}catch(d){return Promise.reject(d)}}async closeConnection(e,o){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.closeConnection({database:e,readonly:o});const s=o?`RO_${e}`:`RW_${e}`;return this._connectionDict.delete(s),Promise.resolve()}catch(s){return Promise.reject(s)}}async isConnection(e,o){const s={};e.endsWith(".db")&&(e=e.slice(0,-3));const a=o?`RO_${e}`:`RW_${e}`;return s.result=this._connectionDict.has(a),Promise.resolve(s)}async retrieveConnection(e,o){e.endsWith(".db")&&(e=e.slice(0,-3));const s=o?`RO_${e}`:`RW_${e}`;if(this._connectionDict.has(s)){const a=this._connectionDict.get(s);return typeof a<"u"?Promise.resolve(a):Promise.reject(`Connection ${e} is undefined`)}else return Promise.reject(`Connection ${e} does not exist`)}async getNCDatabasePath(e,o){try{const s=await this.sqlite.getNCDatabasePath({path:e,database:o});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async createNCConnection(e,o){try{await this.sqlite.createNCConnection({databasePath:e,version:o});const s=new hp(e,!0,this.sqlite),a=`RO_${e})`;return this._connectionDict.set(a,s),Promise.resolve(s)}catch(s){return Promise.reject(s)}}async closeNCConnection(e){try{await this.sqlite.closeNCConnection({databasePath:e});const o=`RO_${e})`;return this._connectionDict.delete(o),Promise.resolve()}catch(o){return Promise.reject(o)}}async isNCConnection(e){const o={},s=`RO_${e})`;return o.result=this._connectionDict.has(s),Promise.resolve(o)}async retrieveNCConnection(e){if(this._connectionDict.has(e)){const o=`RO_${e})`,s=this._connectionDict.get(o);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${e} is undefined`)}else return Promise.reject(`Connection ${e} does not exist`)}async isNCDatabase(e){try{const o=await this.sqlite.isNCDatabase({databasePath:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const e=new Map;try{for(const o of this._connectionDict.keys()){const s=o.substring(3),a=o.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:s,readonly:a}),e.set(o,null)}for(const o of e.keys())this._connectionDict.delete(o);return Promise.resolve()}catch(o){return Promise.reject(o)}}async checkConnectionsConsistency(){try{const e=[...this._connectionDict.keys()],o=[],s=[];for(const u of e)o.push(u.substring(0,2)),s.push(u.substring(3));const a=await this.sqlite.checkConnectionsConsistency({dbNames:s,openModes:o});return a.result||(this._connectionDict=new Map),Promise.resolve(a)}catch(e){return this._connectionDict=new Map,Promise.reject(e)}}async importFromJson(e){try{const o=await this.sqlite.importFromJson({jsonstring:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isJsonValid(e){try{const o=await this.sqlite.isJsonValid({jsonstring:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async copyFromAssets(e){const o=e??!0;try{return await this.sqlite.copyFromAssets({overwrite:o}),Promise.resolve()}catch(s){return Promise.reject(s)}}async getFromHTTPRequest(e,o){const s=o??!0;try{return await this.sqlite.getFromHTTPRequest({url:e,overwrite:s}),Promise.resolve()}catch(a){return Promise.reject(a)}}async isDatabaseEncrypted(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const o=await this.sqlite.isDatabaseEncrypted({database:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isInConfigEncryption(){try{const e=await this.sqlite.isInConfigEncryption();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isInConfigBiometricAuth(){try{const e=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isDatabase(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const o=await this.sqlite.isDatabase({database:e});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async getDatabaseList(){try{const o=(await this.sqlite.getDatabaseList()).values;o.sort();const s={values:o};return Promise.resolve(s)}catch(e){return Promise.reject(e)}}async getMigratableDbList(e){const o=e||"default";try{const s=await this.sqlite.getMigratableDbList({folderPath:o});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async addSQLiteSuffix(e,o){const s=e||"default",a=o||[];try{const u=await this.sqlite.addSQLiteSuffix({folderPath:s,dbNameList:a});return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async deleteOldDatabases(e,o){const s=e||"default",a=o||[];try{const u=await this.sqlite.deleteOldDatabases({folderPath:s,dbNameList:a});return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async moveDatabasesAndAddSuffix(e,o){const s=e||"default",a=o||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:s,dbNameList:a})}}class hp{constructor(e,o,s){this.dbName=e,this.readonly=o,this.sqlite=s}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async beginTransaction(){try{const e=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async commitTransaction(){try{const e=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async rollbackTransaction(){try{const e=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTransactionActive(){try{const e=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async loadExtension(e){try{return await this.sqlite.loadExtension({database:this.dbName,path:e,readonly:this.readonly}),Promise.resolve()}catch(o){return Promise.reject(o)}}async enableLoadExtension(e){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:e,readonly:this.readonly}),Promise.resolve()}catch(o){return Promise.reject(o)}}async getUrl(){try{const e=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getVersion(){try{const e=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getTableList(){try{const e=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async execute(e,o=!0,s=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const a=await this.sqlite.execute({database:this.dbName,statements:e,transaction:o,readonly:!1,isSQL92:s});return Promise.resolve(a)}}catch(a){return Promise.reject(a)}}async query(e,o,s=!0){let a;try{return o&&o.length>0?a=await this.sqlite.query({database:this.dbName,statement:e,values:o,readonly:this.readonly,isSQL92:!0}):a=await this.sqlite.query({database:this.dbName,statement:e,values:[],readonly:this.readonly,isSQL92:s}),a=await this.reorderRows(a),Promise.resolve(a)}catch(u){return Promise.reject(u)}}async run(e,o,s=!0,a="no",u=!0){let d;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(o&&o.length>0?d=await this.sqlite.run({database:this.dbName,statement:e,values:o,transaction:s,readonly:!1,returnMode:a,isSQL92:!0}):d=await this.sqlite.run({database:this.dbName,statement:e,values:[],transaction:s,readonly:!1,returnMode:a,isSQL92:u}),d.changes=await this.reorderRows(d.changes),Promise.resolve(d))}catch(h){return Promise.reject(h)}}async executeSet(e,o=!0,s="no",a=!0){let u;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(u=await this.sqlite.executeSet({database:this.dbName,set:e,transaction:o,readonly:!1,returnMode:s,isSQL92:a}),u.changes=await this.reorderRows(u.changes),Promise.resolve(u))}catch(d){return Promise.reject(d)}}async isExists(){try{const e=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTable(e){try{const o=await this.sqlite.isTableExists({database:this.dbName,table:e,readonly:this.readonly});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async isDBOpen(){try{const e=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const e=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(e)}}catch(e){return Promise.reject(e)}}async setSyncDate(e){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:e,readonly:!1}),Promise.resolve())}catch(o){return Promise.reject(o)}}async getSyncDate(){try{const e=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let o="";return e.syncDate>0&&(o=new Date(e.syncDate*1e3).toISOString()),Promise.resolve(o)}catch(e){return Promise.reject(e)}}async exportToJson(e,o=!1){try{const s=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:e,readonly:this.readonly,encrypted:o});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async executeTransaction(e,o=!0){let s=0,a=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),a=await this.sqlite.isTransactionActive({database:this.dbName}),!a)return Promise.reject("After Begin Transaction, no transaction active");try{for(const h of e){if(typeof h!="object"||!("statement"in h))throw new Error("Error a task.statement must be provided");if("values"in h&&h.values&&h.values.length>0){const y=h.statement.toUpperCase().includes("RETURNING")?"all":"no",p=await this.sqlite.run({database:this.dbName,statement:h.statement,values:h.values,transaction:!1,readonly:!1,returnMode:y,isSQL92:o});if(p.changes.changes<0)throw new Error("Error in transaction method run ");s+=p.changes.changes}else{const y=await this.sqlite.execute({database:this.dbName,statements:h.statement,transaction:!1,readonly:!1});if(y.changes.changes<0)throw new Error("Error in transaction method execute ");s+=y.changes.changes}}const u=await this.sqlite.commitTransaction({database:this.dbName});s+=u.changes.changes;const d={changes:{changes:s}};return Promise.resolve(d)}catch(u){const d=u.message?u.message:u;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(d)}}async reorderRows(e){const o=e;if(e!=null&&e.values&&typeof e.values[0]=="object"&&Object.keys(e.values[0]).includes("ios_columns")){const s=e.values[0].ios_columns,a=[];for(let u=1;u<e.values.length;u++){const d=e.values[u],h={};for(const y of s)h[y]=d[y];a.push(h)}o.values=a}return Promise.resolve(o)}}const F_=Uc("CapacitorSQLite",{web:()=>V_(()=>import("./web-0TA4sCKg.js"),[]).then(i=>new i.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),j=Symbol.for("drizzle:entityKind");function W(i,e){if(!i||typeof i!="object")return!1;if(i instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,j))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let o=Object.getPrototypeOf(i).constructor;if(o)for(;o;){if(j in o&&o[j]===e[j])return!0;o=Object.getPrototypeOf(o)}return!1}var Wg;Wg=j;class sS{write(e){console.log(e)}}x(sS,Wg,"ConsoleLogWriter");var jg;jg=j;class lS{constructor(e){x(this,"writer");this.writer=(e==null?void 0:e.writer)??new sS}logQuery(e,o){const s=o.map(u=>{try{return JSON.stringify(u)}catch{return String(u)}}),a=s.length?` -- params: [${s.join(", ")}]`:"";this.writer.write(`Query: ${e}${a}`)}}x(lS,jg,"DefaultLogger");var ey;ey=j;class aS{logQuery(){}}x(aS,ey,"NoopLogger");const si=Symbol.for("drizzle:Name"),la=Symbol.for("drizzle:Schema"),rc=Symbol.for("drizzle:Columns"),pp=Symbol.for("drizzle:ExtraConfigColumns"),sc=Symbol.for("drizzle:OriginalName"),lc=Symbol.for("drizzle:BaseName"),fa=Symbol.for("drizzle:IsAlias"),gp=Symbol.for("drizzle:ExtraConfigBuilder"),Q_=Symbol.for("drizzle:IsDrizzleTable");var ty,ny,iy,oy,sy,ly,ay,ry,uy,cy;cy=j,uy=si,ry=sc,ay=la,ly=rc,sy=pp,oy=lc,iy=fa,ny=Q_,ty=gp;class le{constructor(e,o,s){x(this,uy);x(this,ry);x(this,ay);x(this,ly);x(this,sy);x(this,oy);x(this,iy,!1);x(this,ny,!0);x(this,ty);this[si]=this[sc]=e,this[la]=o,this[lc]=s}}x(le,cy,"Table"),x(le,"Symbol",{Name:si,Schema:la,OriginalName:sc,Columns:rc,ExtraConfigColumns:pp,BaseName:lc,IsAlias:fa,ExtraConfigBuilder:gp});function Co(i){return i[si]}function Us(i){return`${i[la]??"public"}.${i[si]}`}var fy;fy=j;class tt{constructor(e,o){x(this,"name");x(this,"keyAsName");x(this,"primary");x(this,"notNull");x(this,"default");x(this,"defaultFn");x(this,"onUpdateFn");x(this,"hasDefault");x(this,"isUnique");x(this,"uniqueName");x(this,"uniqueType");x(this,"dataType");x(this,"columnType");x(this,"enumValues");x(this,"generated");x(this,"generatedIdentity");x(this,"config");this.table=e,this.config=o,this.name=o.name,this.keyAsName=o.keyAsName,this.notNull=o.notNull,this.default=o.default,this.defaultFn=o.defaultFn,this.onUpdateFn=o.onUpdateFn,this.hasDefault=o.hasDefault,this.primary=o.primaryKey,this.isUnique=o.isUnique,this.uniqueName=o.uniqueName,this.uniqueType=o.uniqueType,this.dataType=o.dataType,this.columnType=o.columnType,this.generated=o.generated,this.generatedIdentity=o.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}x(tt,fy,"Column");var dy;dy=j;class rS{constructor(e,o,s){x(this,"config");x(this,"$default",this.$defaultFn);x(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:o,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}x(rS,dy,"ColumnBuilder");const yp=Symbol.for("drizzle:isPgEnum");function J_(i){return!!i&&typeof i=="function"&&yp in i&&i[yp]===!0}var my;my=j;class zt{constructor(e,o,s,a=!1,u=[]){this._={brand:"Subquery",sql:e,selectedFields:o,alias:s,isWith:a,usedTables:u}}}x(zt,my,"Subquery");var hy,py;class qc extends(py=zt,hy=j,py){}x(qc,hy,"WithSubquery");const Y_={startActiveSpan(i,e){return e()}},dt=Symbol.for("drizzle:ViewBaseConfig");function uS(i){return i!=null&&typeof i.getSQL=="function"}function $_(i){var o;const e={sql:"",params:[]};for(const s of i)e.sql+=s.sql,e.params.push(...s.params),(o=s.typings)!=null&&o.length&&(e.typings||(e.typings=[]),e.typings.push(...s.typings));return e}var gy;gy=j;class st{constructor(e){x(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new he([this])}}x(st,gy,"StringChunk");var yy;yy=j;const bi=class bi{constructor(e){x(this,"decoder",cS);x(this,"shouldInlineParams",!1);x(this,"usedTables",[]);this.queryChunks=e;for(const o of e)if(W(o,le)){const s=o[le.Symbol.Schema];this.usedTables.push(s===void 0?o[le.Symbol.Name]:s+"."+o[le.Symbol.Name])}}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Y_.startActiveSpan("drizzle.buildSQL",o=>{const s=this.buildQueryFromSourceParams(this.queryChunks,e);return o==null||o.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(e,o){const s=Object.assign({},o,{inlineParams:o.inlineParams||this.shouldInlineParams,paramStartIndex:o.paramStartIndex||{value:0}}),{casing:a,escapeName:u,escapeParam:d,prepareTyping:h,inlineParams:y,paramStartIndex:p}=s;return $_(e.map(v=>{var S;if(W(v,st))return{sql:v.value.join(""),params:[]};if(W(v,da))return{sql:u(v.value),params:[]};if(v===void 0)return{sql:"",params:[]};if(Array.isArray(v)){const E=[new st("(")];for(const[A,N]of v.entries())E.push(N),A<v.length-1&&E.push(new st(", "));return E.push(new st(")")),this.buildQueryFromSourceParams(E,s)}if(W(v,bi))return this.buildQueryFromSourceParams(v.queryChunks,{...s,inlineParams:y||v.shouldInlineParams});if(W(v,le)){const E=v[le.Symbol.Schema],A=v[le.Symbol.Name];return{sql:E===void 0||v[fa]?u(A):u(E)+"."+u(A),params:[]}}if(W(v,tt)){const E=a.getColumnCasing(v);if(o.invokeSource==="indexes")return{sql:u(E),params:[]};const A=v.table[le.Symbol.Schema];return{sql:v.table[fa]||A===void 0?u(v.table[le.Symbol.Name])+"."+u(E):u(A)+"."+u(v.table[le.Symbol.Name])+"."+u(E),params:[]}}if(W(v,Li)){const E=v[dt].schema,A=v[dt].name;return{sql:E===void 0||v[dt].isAlias?u(A):u(E)+"."+u(A),params:[]}}if(W(v,Rn)){if(W(v.value,Mi))return{sql:d(p.value++,v),params:[v],typings:["none"]};const E=v.value===null?null:v.encoder.mapToDriverValue(v.value);if(W(E,bi))return this.buildQueryFromSourceParams([E],s);if(y)return{sql:this.mapInlineParam(E,s),params:[]};let A=["none"];return h&&(A=[h(v.encoder)]),{sql:d(p.value++,E),params:[E],typings:A}}return W(v,Mi)?{sql:d(p.value++,v),params:[v],typings:["none"]}:W(v,bi.Aliased)&&v.fieldAlias!==void 0?{sql:u(v.fieldAlias),params:[]}:W(v,zt)?v._.isWith?{sql:u(v._.alias),params:[]}:this.buildQueryFromSourceParams([new st("("),v._.sql,new st(") "),new da(v._.alias)],s):J_(v)?v.schema?{sql:u(v.schema)+"."+u(v.enumName),params:[]}:{sql:u(v.enumName),params:[]}:uS(v)?(S=v.shouldOmitSQLParens)!=null&&S.call(v)?this.buildQueryFromSourceParams([v.getSQL()],s):this.buildQueryFromSourceParams([new st("("),v.getSQL(),new st(")")],s):y?{sql:this.mapInlineParam(v,s),params:[]}:{sql:d(p.value++,v),params:[v],typings:["none"]}}))}mapInlineParam(e,{escapeString:o}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return o(e);if(typeof e=="object"){const s=e.toString();return o(s==="[object Object]"?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new bi.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};x(bi,yy,"SQL");let he=bi;var vy;vy=j;class da{constructor(e){x(this,"brand");this.value=e}getSQL(){return new he([this])}}x(da,vy,"Name");function K_(i){return typeof i=="object"&&i!==null&&"mapToDriverValue"in i&&typeof i.mapToDriverValue=="function"}const cS={mapFromDriverValue:i=>i},fS={mapToDriverValue:i=>i};({...cS,...fS});var Sy;Sy=j;class Rn{constructor(e,o=fS){x(this,"brand");this.value=e,this.encoder=o}getSQL(){return new he([this])}}x(Rn,Sy,"Param");function I(i,...e){const o=[];(e.length>0||i.length>0&&i[0]!=="")&&o.push(new st(i[0]));for(const[s,a]of e.entries())o.push(a,new st(i[s+1]));return new he(o)}(i=>{function e(){return new he([])}i.empty=e;function o(y){return new he(y)}i.fromList=o;function s(y){return new he([new st(y)])}i.raw=s;function a(y,p){const v=[];for(const[S,E]of y.entries())S>0&&p!==void 0&&v.push(p),v.push(E);return new he(v)}i.join=a;function u(y){return new da(y)}i.identifier=u;function d(y){return new Mi(y)}i.placeholder=d;function h(y,p){return new Rn(y,p)}i.param=h})(I||(I={}));(i=>{var o;o=j;const s=class s{constructor(u,d){x(this,"isSelectionField",!1);this.sql=u,this.fieldAlias=d}getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}};x(s,o,"SQL.Aliased");let e=s;i.Aliased=e})(he||(he={}));var Ty;Ty=j;class Mi{constructor(e){this.name=e}getSQL(){return new he([this])}}x(Mi,Ty,"Placeholder");function oa(i,e){return i.map(o=>{if(W(o,Mi)){if(!(o.name in e))throw new Error(`No value for placeholder "${o.name}" was provided`);return e[o.name]}if(W(o,Rn)&&W(o.value,Mi)){if(!(o.value.name in e))throw new Error(`No value for placeholder "${o.value.name}" was provided`);return o.encoder.mapToDriverValue(e[o.value.name])}return o})}const X_=Symbol.for("drizzle:IsDrizzleView");var Ey,Cy,_y;_y=j,Cy=dt,Ey=X_;class Li{constructor({name:e,schema:o,selectedFields:s,query:a}){x(this,Cy);x(this,Ey,!0);this[dt]={name:e,originalName:e,schema:o,selectedFields:s,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new he([this])}}x(Li,_y,"View");tt.prototype.getSQL=function(){return new he([this])};le.prototype.getSQL=function(){return new he([this])};zt.prototype.getSQL=function(){return new he([this])};function vp(i,e,o){const s={},a=i.reduce((u,{path:d,field:h},y)=>{let p;W(h,tt)?p=h:W(h,he)?p=h.decoder:p=h.sql.decoder;let v=u;for(const[S,E]of d.entries())if(S<d.length-1)E in v||(v[E]={}),v=v[E];else{const A=e[y],N=v[E]=A===null?null:p.mapFromDriverValue(A);if(o&&W(h,tt)&&d.length===2){const w=d[0];w in s?typeof s[w]=="string"&&s[w]!==Co(h.table)&&(s[w]=!1):s[w]=N===null?Co(h.table):!1}}return u},{});if(o&&Object.keys(s).length>0)for(const[u,d]of Object.entries(s))typeof d=="string"&&!o[d]&&(a[u]=null);return a}function Di(i,e){return Object.entries(i).reduce((o,[s,a])=>{if(typeof s!="string")return o;const u=e?[...e,s]:[s];return W(a,tt)||W(a,he)||W(a,he.Aliased)?o.push({path:u,field:a}):W(a,le)?o.push(...Di(a[le.Symbol.Columns],u)):o.push(...Di(a,u)),o},[])}function Pc(i,e){const o=Object.keys(i),s=Object.keys(e);if(o.length!==s.length)return!1;for(const[a,u]of o.entries())if(u!==s[a])return!1;return!0}function dS(i,e){const o=Object.entries(e).filter(([,s])=>s!==void 0).map(([s,a])=>W(a,he)||W(a,tt)?[s,a]:[s,new Rn(a,i[le.Symbol.Columns][s])]);if(o.length===0)throw new Error("No values to set");return Object.fromEntries(o)}function Z_(i,e){for(const o of e)for(const s of Object.getOwnPropertyNames(o.prototype))s!=="constructor"&&Object.defineProperty(i.prototype,s,Object.getOwnPropertyDescriptor(o.prototype,s)||Object.create(null))}function W_(i){return i[le.Symbol.Columns]}function uc(i){return W(i,zt)?i._.alias:W(i,Li)?i[dt].name:W(i,he)?void 0:i[le.Symbol.IsAlias]?i[le.Symbol.Name]:i[le.Symbol.BaseName]}function Bs(i,e){return{name:typeof i=="string"&&i.length>0?i:"",config:typeof i=="object"?i:e}}const mS=typeof TextDecoder>"u"?null:new TextDecoder,Sp=Symbol.for("drizzle:PgInlineForeignKeys"),Tp=Symbol.for("drizzle:EnableRLS");var Ay,wy,xy,Ny,by,Ry;class cc extends(Ry=le,by=j,Ny=Sp,xy=Tp,wy=le.Symbol.ExtraConfigBuilder,Ay=le.Symbol.ExtraConfigColumns,Ry){constructor(){super(...arguments);x(this,Ny,[]);x(this,xy,!1);x(this,wy);x(this,Ay,{})}}x(cc,by,"PgTable"),x(cc,"Symbol",Object.assign({},le.Symbol,{InlineForeignKeys:Sp,EnableRLS:Tp}));var My;My=j;class hS{constructor(e,o){x(this,"columns");x(this,"name");this.columns=e,this.name=o}build(e){return new pS(e,this.columns,this.name)}}x(hS,My,"PgPrimaryKeyBuilder");var Dy;Dy=j;class pS{constructor(e,o,s){x(this,"columns");x(this,"name");this.table=e,this.columns=o,this.name=s}getName(){return this.name??`${this.table[cc.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}x(pS,Dy,"PgPrimaryKey");function xt(i,e){return K_(e)&&!uS(i)&&!W(i,Rn)&&!W(i,Mi)&&!W(i,tt)&&!W(i,le)&&!W(i,Li)?new Rn(i,e):i}const gS=(i,e)=>I`${i} = ${xt(e,i)}`,j_=(i,e)=>I`${i} <> ${xt(e,i)}`;function fc(...i){const e=i.filter(o=>o!==void 0);if(e.length!==0)return e.length===1?new he(e):new he([new st("("),I.join(e,new st(" and ")),new st(")")])}function eA(...i){const e=i.filter(o=>o!==void 0);if(e.length!==0)return e.length===1?new he(e):new he([new st("("),I.join(e,new st(" or ")),new st(")")])}function tA(i){return I`not ${i}`}const nA=(i,e)=>I`${i} > ${xt(e,i)}`,iA=(i,e)=>I`${i} >= ${xt(e,i)}`,oA=(i,e)=>I`${i} < ${xt(e,i)}`,sA=(i,e)=>I`${i} <= ${xt(e,i)}`;function lA(i,e){return Array.isArray(e)?e.length===0?I`false`:I`${i} in ${e.map(o=>xt(o,i))}`:I`${i} in ${xt(e,i)}`}function aA(i,e){return Array.isArray(e)?e.length===0?I`true`:I`${i} not in ${e.map(o=>xt(o,i))}`:I`${i} not in ${xt(e,i)}`}function rA(i){return I`${i} is null`}function uA(i){return I`${i} is not null`}function cA(i){return I`exists ${i}`}function fA(i){return I`not exists ${i}`}function dA(i,e,o){return I`${i} between ${xt(e,i)} and ${xt(o,i)}`}function mA(i,e,o){return I`${i} not between ${xt(e,i)} and ${xt(o,i)}`}function hA(i,e){return I`${i} like ${e}`}function pA(i,e){return I`${i} not like ${e}`}function gA(i,e){return I`${i} ilike ${e}`}function yA(i,e){return I`${i} not ilike ${e}`}function vA(i){return I`${i} asc`}function SA(i){return I`${i} desc`}var Iy;Iy=j;class Bc{constructor(e,o,s){x(this,"referencedTableName");x(this,"fieldName");this.sourceTable=e,this.referencedTable=o,this.relationName=s,this.referencedTableName=o[le.Symbol.Name]}}x(Bc,Iy,"Relation");var Ly;Ly=j;class yS{constructor(e,o){this.table=e,this.config=o}}x(yS,Ly,"Relations");var Uy,qy;const Ta=class Ta extends(qy=Bc,Uy=j,qy){constructor(e,o,s,a){super(e,o,s==null?void 0:s.relationName),this.config=s,this.isNullable=a}withFieldName(e){const o=new Ta(this.sourceTable,this.referencedTable,this.config,this.isNullable);return o.fieldName=e,o}};x(Ta,Uy,"One");let Ii=Ta;var Py,By;const Ea=class Ea extends(By=Bc,Py=j,By){constructor(e,o,s){super(e,o,s==null?void 0:s.relationName),this.config=s}withFieldName(e){const o=new Ea(this.sourceTable,this.referencedTable,this.config);return o.fieldName=e,o}};x(Ea,Py,"Many");let ma=Ea;function TA(){return{and:fc,between:dA,eq:gS,exists:cA,gt:nA,gte:iA,ilike:gA,inArray:lA,isNull:rA,isNotNull:uA,like:hA,lt:oA,lte:sA,ne:j_,not:tA,notBetween:mA,notExists:fA,notLike:pA,notIlike:yA,notInArray:aA,or:eA,sql:I}}function EA(){return{sql:I,asc:vA,desc:SA}}function CA(i,e){var u;Object.keys(i).length===1&&"default"in i&&!W(i.default,le)&&(i=i.default);const o={},s={},a={};for(const[d,h]of Object.entries(i))if(W(h,le)){const y=Us(h),p=s[y];o[y]=d,a[d]={tsName:d,dbName:h[le.Symbol.Name],schema:h[le.Symbol.Schema],columns:h[le.Symbol.Columns],relations:(p==null?void 0:p.relations)??{},primaryKey:(p==null?void 0:p.primaryKey)??[]};for(const S of Object.values(h[le.Symbol.Columns]))S.primary&&a[d].primaryKey.push(S);const v=(u=h[le.Symbol.ExtraConfigBuilder])==null?void 0:u.call(h,h[le.Symbol.ExtraConfigColumns]);if(v)for(const S of Object.values(v))W(S,hS)&&a[d].primaryKey.push(...S.columns)}else if(W(h,yS)){const y=Us(h.table),p=o[y],v=h.config(e(h.table));let S;for(const[E,A]of Object.entries(v))if(p){const N=a[p];N.relations[E]=A}else y in s||(s[y]={relations:{},primaryKey:S}),s[y].relations[E]=A}return{tables:a,tableNamesMap:o}}function _A(i){return function(o,s){return new Ii(i,o,s,(s==null?void 0:s.fields.reduce((a,u)=>a&&u.notNull,!0))??!1)}}function AA(i){return function(o,s){return new ma(i,o,s)}}function wA(i,e,o){if(W(o,Ii)&&o.config)return{fields:o.config.fields,references:o.config.references};const s=e[Us(o.referencedTable)];if(!s)throw new Error(`Table "${o.referencedTable[le.Symbol.Name]}" not found in schema`);const a=i[s];if(!a)throw new Error(`Table "${s}" not found in schema`);const u=o.sourceTable,d=e[Us(u)];if(!d)throw new Error(`Table "${u[le.Symbol.Name]}" not found in schema`);const h=[];for(const y of Object.values(a.relations))(o.relationName&&o!==y&&y.relationName===o.relationName||!o.relationName&&y.referencedTable===o.sourceTable)&&h.push(y);if(h.length>1)throw o.relationName?new Error(`There are multiple relations with name "${o.relationName}" in table "${s}"`):new Error(`There are multiple relations between "${s}" and "${o.sourceTable[le.Symbol.Name]}". Please specify relation name`);if(h[0]&&W(h[0],Ii)&&h[0].config)return{fields:h[0].config.references,references:h[0].config.fields};throw new Error(`There is not enough information to infer relation "${d}.${o.fieldName}"`)}function xA(i){return{one:_A(i),many:AA(i)}}function dc(i,e,o,s,a=u=>u){const u={};for(const[d,h]of s.entries())if(h.isJson){const y=e.relations[h.tsKey],p=o[d],v=typeof p=="string"?JSON.parse(p):p;u[h.tsKey]=W(y,Ii)?v&&dc(i,i[h.relationTableTsKey],v,h.selection,a):v.map(S=>dc(i,i[h.relationTableTsKey],S,h.selection,a))}else{const y=a(o[d]),p=h.field;let v;W(p,tt)?v=p:W(p,he)?v=p.decoder:v=p.sql.decoder,u[h.tsKey]=y===null?null:v.mapFromDriverValue(y)}return u}var zy;zy=j;class qs{constructor(e){this.table=e}get(e,o){return o==="table"?this.table:e[o]}}x(qs,zy,"ColumnAliasProxyHandler");var Gy;Gy=j;class Aa{constructor(e,o){this.alias=e,this.replaceOriginalName=o}get(e,o){if(o===le.Symbol.IsAlias)return!0;if(o===le.Symbol.Name)return this.alias;if(this.replaceOriginalName&&o===le.Symbol.OriginalName)return this.alias;if(o===dt)return{...e[dt],name:this.alias,isAlias:!0};if(o===le.Symbol.Columns){const a=e[le.Symbol.Columns];if(!a)return a;const u={};return Object.keys(a).map(d=>{u[d]=new Proxy(a[d],new qs(new Proxy(e,this)))}),u}const s=e[o];return W(s,tt)?new Proxy(s,new qs(new Proxy(e,this))):s}}x(Aa,Gy,"TableAliasProxyHandler");function ac(i,e){return new Proxy(i,new Aa(e,!1))}function Nn(i,e){return new Proxy(i,new qs(new Proxy(i.table,new Aa(e,!1))))}function vS(i,e){return new he.Aliased(ha(i.sql,e),i.fieldAlias)}function ha(i,e){return I.join(i.queryChunks.map(o=>W(o,tt)?Nn(o,e):W(o,he)?ha(o,e):W(o,he.Aliased)?vS(o,e):o))}var Hy;Hy=j;const Ca=class Ca{constructor(e){x(this,"config");this.config={...e}}get(e,o){if(o==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(o===dt)return{...e[dt],selectedFields:new Proxy(e[dt].selectedFields,this)};if(typeof o=="symbol")return e[o];const a=(W(e,zt)?e._.selectedFields:W(e,Li)?e[dt].selectedFields:e)[o];if(W(a,he.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!a.isSelectionField)return a.sql;const u=a.clone();return u.isSelectionField=!0,u}if(W(a,he)){if(this.config.sqlBehavior==="sql")return a;throw new Error(`You tried to reference "${o}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return W(a,tt)?this.config.alias?new Proxy(a,new qs(new Proxy(a.table,new Aa(this.config.alias,this.config.replaceOriginalName??!1)))):a:typeof a!="object"||a===null?a:new Proxy(a,new Ca(this.config))}};x(Ca,Hy,"SelectionProxyHandler");let gt=Ca;var Oy,Vy;Vy=j,Oy=Symbol.toStringTag;class li{constructor(){x(this,Oy,"QueryPromise")}catch(e){return this.then(void 0,e)}finally(e){return this.then(o=>(e==null||e(),o),o=>{throw e==null||e(),o})}then(e,o){return this.execute().then(e,o)}}x(li,Vy,"QueryPromise");var ky;ky=j;class SS{constructor(e,o){x(this,"reference");x(this,"_onUpdate");x(this,"_onDelete");this.reference=()=>{const{name:s,columns:a,foreignColumns:u}=e();return{name:s,columns:a,foreignTable:u[0].table,foreignColumns:u}},o&&(this._onUpdate=o.onUpdate,this._onDelete=o.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new TS(e,this)}}x(SS,ky,"SQLiteForeignKeyBuilder");var Fy;Fy=j;class TS{constructor(e,o){x(this,"reference");x(this,"onUpdate");x(this,"onDelete");this.table=e,this.reference=o.reference,this.onUpdate=o._onUpdate,this.onDelete=o._onDelete}getName(){const{name:e,columns:o,foreignColumns:s}=this.reference(),a=o.map(h=>h.name),u=s.map(h=>h.name),d=[this.table[si],...a,s[0].table[si],...u];return e??`${d.join("_")}_fk`}}x(TS,Fy,"SQLiteForeignKey");function NA(i,e){return`${i[si]}_${e.join("_")}_unique`}var Qy,Jy;class Zt extends(Jy=rS,Qy=j,Jy){constructor(){super(...arguments);x(this,"foreignKeyConfigs",[])}references(o,s={}){return this.foreignKeyConfigs.push({ref:o,actions:s}),this}unique(o){return this.config.isUnique=!0,this.config.uniqueName=o,this}generatedAlwaysAs(o,s){return this.config.generated={as:o,type:"always",mode:(s==null?void 0:s.mode)??"virtual"},this}buildForeignKeys(o,s){return this.foreignKeyConfigs.map(({ref:a,actions:u})=>((d,h)=>{const y=new SS(()=>{const p=d();return{columns:[o],foreignColumns:[p]}});return h.onUpdate&&y.onUpdate(h.onUpdate),h.onDelete&&y.onDelete(h.onDelete),y.build(s)})(a,u))}}x(Zt,Qy,"SQLiteColumnBuilder");var Yy,$y;class vt extends($y=tt,Yy=j,$y){constructor(e,o){o.uniqueName||(o.uniqueName=NA(e,[o.name])),super(e,o),this.table=e}}x(vt,Yy,"SQLiteColumn");var Ky,Xy;class ES extends(Xy=Zt,Ky=j,Xy){constructor(e){super(e,"bigint","SQLiteBigInt")}build(e){return new CS(e,this.config)}}x(ES,Ky,"SQLiteBigIntBuilder");var Zy,Wy;class CS extends(Wy=vt,Zy=j,Wy){getSQLType(){return"blob"}mapFromDriverValue(e){if(typeof Buffer<"u"&&Buffer.from){const o=Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?Buffer.from(e):e.buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e);return BigInt(o.toString("utf8"))}return BigInt(mS.decode(e))}mapToDriverValue(e){return Buffer.from(e.toString())}}x(CS,Zy,"SQLiteBigInt");var jy,e0;class _S extends(e0=Zt,jy=j,e0){constructor(e){super(e,"json","SQLiteBlobJson")}build(e){return new AS(e,this.config)}}x(_S,jy,"SQLiteBlobJsonBuilder");var t0,n0;class AS extends(n0=vt,t0=j,n0){getSQLType(){return"blob"}mapFromDriverValue(e){if(typeof Buffer<"u"&&Buffer.from){const o=Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?Buffer.from(e):e.buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e);return JSON.parse(o.toString("utf8"))}return JSON.parse(mS.decode(e))}mapToDriverValue(e){return Buffer.from(JSON.stringify(e))}}x(AS,t0,"SQLiteBlobJson");var i0,o0;class wS extends(o0=Zt,i0=j,o0){constructor(e){super(e,"buffer","SQLiteBlobBuffer")}build(e){return new xS(e,this.config)}}x(wS,i0,"SQLiteBlobBufferBuilder");var s0,l0;class xS extends(l0=vt,s0=j,l0){mapFromDriverValue(e){return Buffer.isBuffer(e)?e:Buffer.from(e)}getSQLType(){return"blob"}}x(xS,s0,"SQLiteBlobBuffer");function bA(i,e){const{name:o,config:s}=Bs(i,e);return(s==null?void 0:s.mode)==="json"?new _S(o):(s==null?void 0:s.mode)==="bigint"?new ES(o):new wS(o)}var a0,r0;class NS extends(r0=Zt,a0=j,r0){constructor(e,o,s){super(e,"custom","SQLiteCustomColumn"),this.config.fieldConfig=o,this.config.customTypeParams=s}build(e){return new bS(e,this.config)}}x(NS,a0,"SQLiteCustomColumnBuilder");var u0,c0;class bS extends(c0=vt,u0=j,c0){constructor(o,s){super(o,s);x(this,"sqlName");x(this,"mapTo");x(this,"mapFrom");this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(o){return typeof this.mapFrom=="function"?this.mapFrom(o):o}mapToDriverValue(o){return typeof this.mapTo=="function"?this.mapTo(o):o}}x(bS,u0,"SQLiteCustomColumn");function RA(i){return(e,o)=>{const{name:s,config:a}=Bs(e,o);return new NS(s,a,i)}}var f0,d0;class wa extends(d0=Zt,f0=j,d0){constructor(e,o,s){super(e,o,s),this.config.autoIncrement=!1}primaryKey(e){return e!=null&&e.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}x(wa,f0,"SQLiteBaseIntegerBuilder");var m0,h0;class xa extends(h0=vt,m0=j,h0){constructor(){super(...arguments);x(this,"autoIncrement",this.config.autoIncrement)}getSQLType(){return"integer"}}x(xa,m0,"SQLiteBaseInteger");var p0,g0;class RS extends(g0=wa,p0=j,g0){constructor(e){super(e,"number","SQLiteInteger")}build(e){return new MS(e,this.config)}}x(RS,p0,"SQLiteIntegerBuilder");var y0,v0;class MS extends(v0=xa,y0=j,v0){}x(MS,y0,"SQLiteInteger");var S0,T0;class DS extends(T0=wa,S0=j,T0){constructor(e,o){super(e,"date","SQLiteTimestamp"),this.config.mode=o}defaultNow(){return this.default(I`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(e){return new IS(e,this.config)}}x(DS,S0,"SQLiteTimestampBuilder");var E0,C0;class IS extends(C0=xa,E0=j,C0){constructor(){super(...arguments);x(this,"mode",this.config.mode)}mapFromDriverValue(o){return this.config.mode==="timestamp"?new Date(o*1e3):new Date(o)}mapToDriverValue(o){const s=o.getTime();return this.config.mode==="timestamp"?Math.floor(s/1e3):s}}x(IS,E0,"SQLiteTimestamp");var _0,A0;class LS extends(A0=wa,_0=j,A0){constructor(e,o){super(e,"boolean","SQLiteBoolean"),this.config.mode=o}build(e){return new US(e,this.config)}}x(LS,_0,"SQLiteBooleanBuilder");var w0,x0;class US extends(x0=xa,w0=j,x0){constructor(){super(...arguments);x(this,"mode",this.config.mode)}mapFromDriverValue(o){return Number(o)===1}mapToDriverValue(o){return o?1:0}}x(US,w0,"SQLiteBoolean");function zc(i,e){const{name:o,config:s}=Bs(i,e);return(s==null?void 0:s.mode)==="timestamp"||(s==null?void 0:s.mode)==="timestamp_ms"?new DS(o,s.mode):(s==null?void 0:s.mode)==="boolean"?new LS(o,s.mode):new RS(o)}var N0,b0;class qS extends(b0=Zt,N0=j,b0){constructor(e){super(e,"string","SQLiteNumeric")}build(e){return new PS(e,this.config)}}x(qS,N0,"SQLiteNumericBuilder");var R0,M0;class PS extends(M0=vt,R0=j,M0){mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return"numeric"}}x(PS,R0,"SQLiteNumeric");var D0,I0;class BS extends(I0=Zt,D0=j,I0){constructor(e){super(e,"number","SQLiteNumericNumber")}build(e){return new zS(e,this.config)}}x(BS,D0,"SQLiteNumericNumberBuilder");var L0,U0;class zS extends(U0=vt,L0=j,U0){constructor(){super(...arguments);x(this,"mapToDriverValue",String)}mapFromDriverValue(o){return typeof o=="number"?o:Number(o)}getSQLType(){return"numeric"}}x(zS,L0,"SQLiteNumericNumber");var q0,P0;class GS extends(P0=Zt,q0=j,P0){constructor(e){super(e,"bigint","SQLiteNumericBigInt")}build(e){return new HS(e,this.config)}}x(GS,q0,"SQLiteNumericBigIntBuilder");var B0,z0;class HS extends(z0=vt,B0=j,z0){constructor(){super(...arguments);x(this,"mapFromDriverValue",BigInt);x(this,"mapToDriverValue",String)}getSQLType(){return"numeric"}}x(HS,B0,"SQLiteNumericBigInt");function MA(i,e){const{name:o,config:s}=Bs(i,e),a=s==null?void 0:s.mode;return a==="number"?new BS(o):a==="bigint"?new GS(o):new qS(o)}var G0,H0;class OS extends(H0=Zt,G0=j,H0){constructor(e){super(e,"number","SQLiteReal")}build(e){return new VS(e,this.config)}}x(OS,G0,"SQLiteRealBuilder");var O0,V0;class VS extends(V0=vt,O0=j,V0){getSQLType(){return"real"}}x(VS,O0,"SQLiteReal");function DA(i){return new OS(i??"")}var k0,F0;class kS extends(F0=Zt,k0=j,F0){constructor(e,o){super(e,"string","SQLiteText"),this.config.enumValues=o.enum,this.config.length=o.length}build(e){return new FS(e,this.config)}}x(kS,k0,"SQLiteTextBuilder");var Q0,J0;class FS extends(J0=vt,Q0=j,J0){constructor(o,s){super(o,s);x(this,"enumValues",this.config.enumValues);x(this,"length",this.config.length)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}x(FS,Q0,"SQLiteText");var Y0,$0;class QS extends($0=Zt,Y0=j,$0){constructor(e){super(e,"json","SQLiteTextJson")}build(e){return new JS(e,this.config)}}x(QS,Y0,"SQLiteTextJsonBuilder");var K0,X0;class JS extends(X0=vt,K0=j,X0){getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}}x(JS,K0,"SQLiteTextJson");function Kt(i,e={}){const{name:o,config:s}=Bs(i,e);return s.mode==="json"?new QS(o):new kS(o,s)}function IA(){return{blob:bA,customType:RA,integer:zc,numeric:MA,real:DA,text:Kt}}const mc=Symbol.for("drizzle:SQLiteInlineForeignKeys");var Z0,W0,j0,ev,tv;class Bt extends(tv=le,ev=j,j0=le.Symbol.Columns,W0=mc,Z0=le.Symbol.ExtraConfigBuilder,tv){constructor(){super(...arguments);x(this,j0);x(this,W0,[]);x(this,Z0)}}x(Bt,ev,"SQLiteTable"),x(Bt,"Symbol",Object.assign({},le.Symbol,{InlineForeignKeys:mc}));function LA(i,e,o,s,a=i){const u=new Bt(i,s,a),d=typeof e=="function"?e(IA()):e,h=Object.fromEntries(Object.entries(d).map(([p,v])=>{const S=v;S.setName(p);const E=S.build(u);return u[mc].push(...S.buildForeignKeys(E,u)),[p,E]})),y=Object.assign(u,h);return y[le.Symbol.Columns]=h,y[le.Symbol.ExtraConfigColumns]=h,y}const YS=(i,e,o)=>LA(i,e);function Ri(i){return W(i,Bt)?[`${i[le.Symbol.BaseName]}`]:W(i,zt)?i._.usedTables??[]:W(i,he)?i.usedTables??[]:[]}var nv,iv;class hc extends(iv=li,nv=j,iv){constructor(o,s,a,u){super();x(this,"config");x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o));this.table=o,this.session=s,this.dialect=a,this.config={table:o,withList:u}}where(o){return this.config.where=o,this}orderBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.table[le.Symbol.Columns],new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),a=Array.isArray(s)?s:[s];this.config.orderBy=a}else{const s=o;this.config.orderBy=s}return this}limit(o){return this.config.limit=o,this}returning(o=this.table[Bt.Symbol.Columns]){return this.config.returning=Di(o),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(o=!0){return this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"delete",tables:Ri(this.config.table)})}prepare(){return this._prepare(!1)}async execute(o){return this._prepare().execute(o)}$dynamic(){return this}}x(hc,nv,"SQLiteDelete");function UA(i){return(i.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(o=>o.toLowerCase()).join("_")}function qA(i){return(i.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((o,s,a)=>{const u=a===0?s.toLowerCase():`${s[0].toUpperCase()}${s.slice(1)}`;return o+u},"")}function PA(i){return i}var ov;ov=j;class $S{constructor(e){x(this,"cache",{});x(this,"cachedTables",{});x(this,"convert");this.convert=e==="snake_case"?UA:e==="camelCase"?qA:PA}getColumnCasing(e){if(!e.keyAsName)return e.name;const o=e.table[le.Symbol.Schema]??"public",s=e.table[le.Symbol.OriginalName],a=`${o}.${s}.${e.name}`;return this.cache[a]||this.cacheTable(e.table),this.cache[a]}cacheTable(e){const o=e[le.Symbol.Schema]??"public",s=e[le.Symbol.OriginalName],a=`${o}.${s}`;if(!this.cachedTables[a]){for(const u of Object.values(e[le.Symbol.Columns])){const d=`${a}.${u.name}`;this.cache[d]=this.convert(u.name)}this.cachedTables[a]=!0}}clearCache(){this.cache={},this.cachedTables={}}}x($S,ov,"CasingCache");var sv,lv;class Na extends(lv=Error,sv=j,lv){constructor({message:e,cause:o}){super(e),this.name="DrizzleError",this.cause=o}}x(Na,sv,"DrizzleError");class oi extends Error{constructor(e,o,s){super(`Failed query: ${e}
params: ${o}`),this.query=e,this.params=o,this.cause=s,Error.captureStackTrace(this,oi),s&&(this.cause=s)}}var av,rv;class KS extends(rv=Na,av=j,rv){constructor(){super({message:"Rollback"})}}x(KS,av,"TransactionRollbackError");var uv,cv;class ba extends(cv=Li,uv=j,cv){}x(ba,uv,"SQLiteViewBase");var fv;fv=j;class Ps{constructor(e){x(this,"casing");this.casing=new $S(e==null?void 0:e.casing)}escapeName(e){return`"${e}"`}escapeParam(e){return"?"}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!(e!=null&&e.length))return;const o=[I`with `];for(const[s,a]of e.entries())o.push(I`${I.identifier(a._.alias)} as (${a._.sql})`),s<e.length-1&&o.push(I`, `);return o.push(I` `),I.join(o)}buildDeleteQuery({table:e,where:o,returning:s,withList:a,limit:u,orderBy:d}){const h=this.buildWithCTE(a),y=s?I` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,p=o?I` where ${o}`:void 0,v=this.buildOrderBy(d),S=this.buildLimit(u);return I`${h}delete from ${e}${p}${y}${v}${S}`}buildUpdateSet(e,o){const s=e[le.Symbol.Columns],a=Object.keys(s).filter(d=>{var h;return o[d]!==void 0||((h=s[d])==null?void 0:h.onUpdateFn)!==void 0}),u=a.length;return I.join(a.flatMap((d,h)=>{const y=s[d],p=o[d]??I.param(y.onUpdateFn(),y),v=I`${I.identifier(this.casing.getColumnCasing(y))} = ${p}`;return h<u-1?[v,I.raw(", ")]:[v]}))}buildUpdateQuery({table:e,set:o,where:s,returning:a,withList:u,joins:d,from:h,limit:y,orderBy:p}){const v=this.buildWithCTE(u),S=this.buildUpdateSet(e,o),E=h&&I.join([I.raw(" from "),this.buildFromTable(h)]),A=this.buildJoins(d),N=a?I` returning ${this.buildSelection(a,{isSingleTable:!0})}`:void 0,w=s?I` where ${s}`:void 0,L=this.buildOrderBy(p),V=this.buildLimit(y);return I`${v}update ${e} set ${S}${E}${A}${w}${N}${L}${V}`}buildSelection(e,{isSingleTable:o=!1}={}){const s=e.length,a=e.flatMap(({field:u},d)=>{const h=[];if(W(u,he.Aliased)&&u.isSelectionField)h.push(I.identifier(u.fieldAlias));else if(W(u,he.Aliased)||W(u,he)){const y=W(u,he.Aliased)?u.sql:u;o?h.push(new he(y.queryChunks.map(p=>W(p,tt)?I.identifier(this.casing.getColumnCasing(p)):p))):h.push(y),W(u,he.Aliased)&&h.push(I` as ${I.identifier(u.fieldAlias)}`)}else if(W(u,tt)){const y=u.table[le.Symbol.Name];u.columnType==="SQLiteNumericBigInt"?o?h.push(I`cast(${I.identifier(this.casing.getColumnCasing(u))} as text)`):h.push(I`cast(${I.identifier(y)}.${I.identifier(this.casing.getColumnCasing(u))} as text)`):o?h.push(I.identifier(this.casing.getColumnCasing(u))):h.push(I`${I.identifier(y)}.${I.identifier(this.casing.getColumnCasing(u))}`)}return d<s-1&&h.push(I`, `),h});return I.join(a)}buildJoins(e){if(!e||e.length===0)return;const o=[];if(e)for(const[s,a]of e.entries()){s===0&&o.push(I` `);const u=a.table,d=a.on?I` on ${a.on}`:void 0;if(W(u,Bt)){const h=u[Bt.Symbol.Name],y=u[Bt.Symbol.Schema],p=u[Bt.Symbol.OriginalName],v=h===p?void 0:a.alias;o.push(I`${I.raw(a.joinType)} join ${y?I`${I.identifier(y)}.`:void 0}${I.identifier(p)}${v&&I` ${I.identifier(v)}`}${d}`)}else o.push(I`${I.raw(a.joinType)} join ${u}${d}`);s<e.length-1&&o.push(I` `)}return I.join(o)}buildLimit(e){return typeof e=="object"||typeof e=="number"&&e>=0?I` limit ${e}`:void 0}buildOrderBy(e){const o=[];if(e)for(const[s,a]of e.entries())o.push(a),s<e.length-1&&o.push(I`, `);return o.length>0?I` order by ${I.join(o)}`:void 0}buildFromTable(e){return W(e,le)&&e[le.Symbol.IsAlias]?I`${I`${I.identifier(e[le.Symbol.Schema]??"")}.`.if(e[le.Symbol.Schema])}${I.identifier(e[le.Symbol.OriginalName])} ${I.identifier(e[le.Symbol.Name])}`:e}buildSelectQuery({withList:e,fields:o,fieldsFlat:s,where:a,having:u,table:d,joins:h,orderBy:y,groupBy:p,limit:v,offset:S,distinct:E,setOperators:A}){const N=s??Di(o);for(const ae of N)if(W(ae.field,tt)&&Co(ae.field.table)!==(W(d,zt)?d._.alias:W(d,ba)?d[dt].name:W(d,he)?void 0:Co(d))&&!(ge=>h==null?void 0:h.some(({alias:Ie})=>Ie===(ge[le.Symbol.IsAlias]?Co(ge):ge[le.Symbol.BaseName])))(ae.field.table)){const ge=Co(ae.field.table);throw new Error(`Your "${ae.path.join("->")}" field references a column "${ge}"."${ae.field.name}", but the table "${ge}" is not part of the query! Did you forget to join it?`)}const w=!h||h.length===0,L=this.buildWithCTE(e),V=E?I` distinct`:void 0,$=this.buildSelection(N,{isSingleTable:w}),U=this.buildFromTable(d),k=this.buildJoins(h),ne=a?I` where ${a}`:void 0,ie=u?I` having ${u}`:void 0,H=[];if(p)for(const[ae,ge]of p.entries())H.push(ge),ae<p.length-1&&H.push(I`, `);const Q=H.length>0?I` group by ${I.join(H)}`:void 0,z=this.buildOrderBy(y),X=this.buildLimit(v),Z=S?I` offset ${S}`:void 0,te=I`${L}select${V} ${$} from ${U}${k}${ne}${Q}${ie}${z}${X}${Z}`;return A.length>0?this.buildSetOperations(te,A):te}buildSetOperations(e,o){const[s,...a]=o;if(!s)throw new Error("Cannot pass undefined values to any set operator");return a.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:s}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:s}),a)}buildSetOperationQuery({leftSelect:e,setOperator:{type:o,isAll:s,rightSelect:a,limit:u,orderBy:d,offset:h}}){const y=I`${e.getSQL()} `,p=I`${a.getSQL()}`;let v;if(d&&d.length>0){const N=[];for(const w of d)if(W(w,vt))N.push(I.identifier(w.name));else if(W(w,he)){for(let L=0;L<w.queryChunks.length;L++){const V=w.queryChunks[L];W(V,vt)&&(w.queryChunks[L]=I.identifier(this.casing.getColumnCasing(V)))}N.push(I`${w}`)}else N.push(I`${w}`);v=I` order by ${I.join(N,I`, `)}`}const S=typeof u=="object"||typeof u=="number"&&u>=0?I` limit ${u}`:void 0,E=I.raw(`${o} ${s?"all ":""}`),A=h?I` offset ${h}`:void 0;return I`${y}${E}${p}${v}${S}${A}`}buildInsertQuery({table:e,values:o,onConflict:s,returning:a,withList:u,select:d}){const h=[],y=e[le.Symbol.Columns],p=Object.entries(y).filter(([w,L])=>!L.shouldDisableInsert()),v=p.map(([,w])=>I.identifier(this.casing.getColumnCasing(w)));if(d){const w=o;W(w,he)?h.push(w):h.push(w.getSQL())}else{const w=o;h.push(I.raw("values "));for(const[L,V]of w.entries()){const $=[];for(const[U,k]of p){const ne=V[U];if(ne===void 0||W(ne,Rn)&&ne.value===void 0){let ie;if(k.default!==null&&k.default!==void 0)ie=W(k.default,he)?k.default:I.param(k.default,k);else if(k.defaultFn!==void 0){const H=k.defaultFn();ie=W(H,he)?H:I.param(H,k)}else if(!k.default&&k.onUpdateFn!==void 0){const H=k.onUpdateFn();ie=W(H,he)?H:I.param(H,k)}else ie=I`null`;$.push(ie)}else $.push(ne)}h.push($),L<w.length-1&&h.push(I`, `)}}const S=this.buildWithCTE(u),E=I.join(h),A=a?I` returning ${this.buildSelection(a,{isSingleTable:!0})}`:void 0,N=s!=null&&s.length?I.join(s):void 0;return I`${S}insert into ${e} ${v} ${E}${N}${A}`}sqlToQuery(e,o){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:o})}buildRelationalQuery({fullSchema:e,schema:o,tableNamesMap:s,table:a,tableConfig:u,queryConfig:d,tableAlias:h,nestedQueryRelation:y,joinOn:p}){let v=[],S,E,A=[],N;const w=[];if(d===!0)v=Object.entries(u.columns).map(([$,U])=>({dbKey:U.name,tsKey:$,field:Nn(U,h),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{const V=Object.fromEntries(Object.entries(u.columns).map(([H,Q])=>[H,Nn(Q,h)]));if(d.where){const H=typeof d.where=="function"?d.where(V,TA()):d.where;N=H&&ha(H,h)}const $=[];let U=[];if(d.columns){let H=!1;for(const[Q,z]of Object.entries(d.columns))z!==void 0&&Q in u.columns&&(!H&&z===!0&&(H=!0),U.push(Q));U.length>0&&(U=H?U.filter(Q=>{var z;return((z=d.columns)==null?void 0:z[Q])===!0}):Object.keys(u.columns).filter(Q=>!U.includes(Q)))}else U=Object.keys(u.columns);for(const H of U){const Q=u.columns[H];$.push({tsKey:H,value:Q})}let k=[];d.with&&(k=Object.entries(d.with).filter(H=>!!H[1]).map(([H,Q])=>({tsKey:H,queryConfig:Q,relation:u.relations[H]})));let ne;if(d.extras){ne=typeof d.extras=="function"?d.extras(V,{sql:I}):d.extras;for(const[H,Q]of Object.entries(ne))$.push({tsKey:H,value:vS(Q,h)})}for(const{tsKey:H,value:Q}of $)v.push({dbKey:W(Q,he.Aliased)?Q.fieldAlias:u.columns[H].name,tsKey:H,field:W(Q,tt)?Nn(Q,h):Q,relationTableTsKey:void 0,isJson:!1,selection:[]});let ie=typeof d.orderBy=="function"?d.orderBy(V,EA()):d.orderBy??[];Array.isArray(ie)||(ie=[ie]),A=ie.map(H=>W(H,tt)?Nn(H,h):ha(H,h)),S=d.limit,E=d.offset;for(const{tsKey:H,queryConfig:Q,relation:z}of k){const X=wA(o,s,z),Z=Us(z.referencedTable),te=s[Z],ae=`${h}_${H}`,ge=fc(...X.fields.map((ee,fe)=>gS(Nn(X.references[fe],ae),Nn(ee,h)))),Ie=this.buildRelationalQuery({fullSchema:e,schema:o,tableNamesMap:s,table:e[te],tableConfig:o[te],queryConfig:W(z,Ii)?Q===!0?{limit:1}:{...Q,limit:1}:Q,tableAlias:ae,joinOn:ge,nestedQueryRelation:z}),G=I`(${Ie.sql})`.as(H);v.push({dbKey:H,tsKey:H,field:G,relationTableTsKey:te,isJson:!0,selection:Ie.selection})}}if(v.length===0)throw new Na({message:`No fields selected for table "${u.tsName}" ("${h}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});let L;if(N=fc(p,N),y){let V=I`json_array(${I.join(v.map(({field:k})=>W(k,vt)?I.identifier(this.casing.getColumnCasing(k)):W(k,he.Aliased)?k.sql:k),I`, `)})`;W(y,ma)&&(V=I`coalesce(json_group_array(${V}), json_array())`);const $=[{dbKey:"data",tsKey:"data",field:V.as("data"),isJson:!0,relationTableTsKey:u.tsName,selection:v}];S!==void 0||E!==void 0||A.length>0?(L=this.buildSelectQuery({table:ac(a,h),fields:{},fieldsFlat:[{path:[],field:I.raw("*")}],where:N,limit:S,offset:E,orderBy:A,setOperators:[]}),N=void 0,S=void 0,E=void 0,A=void 0):L=ac(a,h),L=this.buildSelectQuery({table:W(L,Bt)?L:new zt(L,{},h),fields:{},fieldsFlat:$.map(({field:k})=>({path:[],field:W(k,tt)?Nn(k,h):k})),joins:w,where:N,limit:S,offset:E,orderBy:A,setOperators:[]})}else L=this.buildSelectQuery({table:ac(a,h),fields:{},fieldsFlat:v.map(({field:V})=>({path:[],field:W(V,tt)?Nn(V,h):V})),joins:w,where:N,limit:S,offset:E,orderBy:A,setOperators:[]});return{tableTsKey:u.tsName,sql:L,selection:v}}}x(Ps,fv,"SQLiteDialect");var dv,mv;class XS extends(mv=Ps,dv=j,mv){migrate(e,o,s){const a=s===void 0||typeof s=="string"?"__drizzle_migrations":s.migrationsTable??"__drizzle_migrations",u=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(a)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;o.run(u);const h=o.values(I`SELECT id, hash, created_at FROM ${I.identifier(a)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;o.run(I`BEGIN`);try{for(const y of e)if(!h||Number(h[2])<y.folderMillis){for(const p of y.sql)o.run(I.raw(p));o.run(I`INSERT INTO ${I.identifier(a)} ("hash", "created_at") VALUES(${y.hash}, ${y.folderMillis})`)}o.run(I`COMMIT`)}catch(y){throw o.run(I`ROLLBACK`),y}}}x(XS,dv,"SQLiteSyncDialect");var hv,pv;class ZS extends(pv=Ps,hv=j,pv){async migrate(e,o,s){const a=s===void 0||typeof s=="string"?"__drizzle_migrations":s.migrationsTable??"__drizzle_migrations",u=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(a)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await o.run(u);const h=(await o.values(I`SELECT id, hash, created_at FROM ${I.identifier(a)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await o.transaction(async y=>{for(const p of e)if(!h||Number(h[2])<p.folderMillis){for(const v of p.sql)await y.run(I.raw(v));await y.run(I`INSERT INTO ${I.identifier(a)} ("hash", "created_at") VALUES(${p.hash}, ${p.folderMillis})`)}})}}x(ZS,hv,"SQLiteAsyncDialect");var gv;gv=j;class WS{getSelectedFields(){return this._.selectedFields}}x(WS,gv,"TypedQueryBuilder");var yv;yv=j;class bn{constructor(e){x(this,"fields");x(this,"session");x(this,"dialect");x(this,"withList");x(this,"distinct");this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,this.withList=e.withList,this.distinct=e.distinct}from(e){const o=!!this.fields;let s;return this.fields?s=this.fields:W(e,zt)?s=Object.fromEntries(Object.keys(e._.selectedFields).map(a=>[a,e[a]])):W(e,ba)?s=e[dt].selectedFields:W(e,he)?s={}:s=W_(e),new Gc({table:e,fields:s,isPartialSelect:o,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}x(bn,yv,"SQLiteSelectBuilder");var vv,Sv;class jS extends(Sv=WS,vv=j,Sv){constructor({table:o,fields:s,isPartialSelect:a,session:u,dialect:d,withList:h,distinct:y}){super();x(this,"_");x(this,"config");x(this,"joinsNotNullableMap");x(this,"tableName");x(this,"isPartialSelect");x(this,"session");x(this,"dialect");x(this,"cacheConfig");x(this,"usedTables",new Set);x(this,"leftJoin",this.createJoin("left"));x(this,"rightJoin",this.createJoin("right"));x(this,"innerJoin",this.createJoin("inner"));x(this,"fullJoin",this.createJoin("full"));x(this,"crossJoin",this.createJoin("cross"));x(this,"union",this.createSetOperator("union",!1));x(this,"unionAll",this.createSetOperator("union",!0));x(this,"intersect",this.createSetOperator("intersect",!1));x(this,"except",this.createSetOperator("except",!1));this.config={withList:h,table:o,fields:{...s},distinct:y,setOperators:[]},this.isPartialSelect=a,this.session=u,this.dialect=d,this._={selectedFields:s,config:this.config},this.tableName=uc(o),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(const p of Ri(o))this.usedTables.add(p)}getUsedTables(){return[...this.usedTables]}createJoin(o){return(s,a)=>{var h;const u=this.tableName,d=uc(s);for(const y of Ri(s))this.usedTables.add(y);if(typeof d=="string"&&((h=this.config.joins)!=null&&h.some(y=>y.alias===d)))throw new Error(`Alias "${d}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof u=="string"&&(this.config.fields={[u]:this.config.fields}),typeof d=="string"&&!W(s,he))){const y=W(s,zt)?s._.selectedFields:W(s,Li)?s[dt].selectedFields:s[le.Symbol.Columns];this.config.fields[d]=y}if(typeof a=="function"&&(a=a(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:a,table:s,joinType:o,alias:d}),typeof d=="string")switch(o){case"left":{this.joinsNotNullableMap[d]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([y])=>[y,!1])),this.joinsNotNullableMap[d]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[d]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([y])=>[y,!1])),this.joinsNotNullableMap[d]=!1;break}}return this}}createSetOperator(o,s){return a=>{const u=typeof a=="function"?a(BA()):a;if(!Pc(this.getSelectedFields(),u.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:o,isAll:s,rightSelect:u}),this}}addSetOperators(o){return this.config.setOperators.push(...o),this}where(o){return typeof o=="function"&&(o=o(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=o,this}having(o){return typeof o=="function"&&(o=o(new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=o,this}groupBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(s)?s:[s]}else this.config.groupBy=o;return this}orderBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.fields,new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),a=Array.isArray(s)?s:[s];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a}else{const s=o;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=s:this.config.orderBy=s}return this}limit(o){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=o:this.config.limit=o,this}offset(o){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=o:this.config.offset=o,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}as(o){const s=[];if(s.push(...Ri(this.config.table)),this.config.joins)for(const a of this.config.joins)s.push(...Ri(a.table));return new Proxy(new zt(this.getSQL(),this.config.fields,o,!1,[...new Set(s)]),new gt({alias:o,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new gt({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}x(jS,vv,"SQLiteSelectQueryBuilder");var Tv,Ev;class Gc extends(Ev=jS,Tv=j,Ev){constructor(){super(...arguments);x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o))}_prepare(o=!0){if(!this.session)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");const s=Di(this.config.fields),a=this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),s,"all",!0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return a.joinsNotNullableMap=this.joinsNotNullableMap,a}$withCache(o){return this.cacheConfig=o===void 0?{config:{},enable:!0,autoInvalidate:!0}:o===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...o},this}prepare(){return this._prepare(!1)}async execute(){return this.all()}}x(Gc,Tv,"SQLiteSelect");Z_(Gc,[li]);function Ra(i,e){return(o,s,...a)=>{const u=[s,...a].map(d=>({type:i,isAll:e,rightSelect:d}));for(const d of u)if(!Pc(o.getSelectedFields(),d.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return o.addSetOperators(u)}}const BA=()=>({union:zA,unionAll:GA,intersect:HA,except:OA}),zA=Ra("union",!1),GA=Ra("union",!0),HA=Ra("intersect",!1),OA=Ra("except",!1);var Cv;Cv=j;class Hc{constructor(e){x(this,"dialect");x(this,"dialectConfig");x(this,"$with",(e,o)=>{const s=this;return{as:u=>(typeof u=="function"&&(u=u(s)),new Proxy(new qc(u.getSQL(),o??("getSelectedFields"in u?u.getSelectedFields()??{}:{}),e,!0),new gt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}});this.dialect=W(e,Ps)?e:void 0,this.dialectConfig=W(e,Ps)?void 0:e}with(...e){const o=this;function s(u){return new bn({fields:u??void 0,session:void 0,dialect:o.getDialect(),withList:e})}function a(u){return new bn({fields:u??void 0,session:void 0,dialect:o.getDialect(),withList:e,distinct:!0})}return{select:s,selectDistinct:a}}select(e){return new bn({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new bn({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new XS(this.dialectConfig)),this.dialect}}x(Hc,Cv,"SQLiteQueryBuilder");var _v;_v=j;class pc{constructor(e,o,s,a){this.table=e,this.session=o,this.dialect=s,this.withList=a}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");const o=e.map(s=>{const a={},u=this.table[le.Symbol.Columns];for(const d of Object.keys(s)){const h=s[d];a[d]=W(h,he)?h:new Rn(h,u[d])}return a});return new gc(this.table,o,this.session,this.dialect,this.withList)}select(e){const o=typeof e=="function"?e(new Hc):e;if(!W(o,he)&&!Pc(this.table[rc],o._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new gc(this.table,o,this.session,this.dialect,this.withList,!0)}}x(pc,_v,"SQLiteInsertBuilder");var Av,wv;class gc extends(wv=li,Av=j,wv){constructor(o,s,a,u,d,h){super();x(this,"config");x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o));this.session=a,this.dialect=u,this.config={table:o,values:s,withList:d,select:h}}returning(o=this.config.table[Bt.Symbol.Columns]){return this.config.returning=Di(o),this}onConflictDoNothing(o={}){if(this.config.onConflict||(this.config.onConflict=[]),o.target===void 0)this.config.onConflict.push(I` on conflict do nothing`);else{const s=Array.isArray(o.target)?I`${o.target}`:I`${[o.target]}`,a=o.where?I` where ${o.where}`:I``;this.config.onConflict.push(I` on conflict ${s} do nothing${a}`)}return this}onConflictDoUpdate(o){if(o.where&&(o.targetWhere||o.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');this.config.onConflict||(this.config.onConflict=[]);const s=o.where?I` where ${o.where}`:void 0,a=o.targetWhere?I` where ${o.targetWhere}`:void 0,u=o.setWhere?I` where ${o.setWhere}`:void 0,d=Array.isArray(o.target)?I`${o.target}`:I`${[o.target]}`,h=this.dialect.buildUpdateSet(this.config.table,dS(this.config.table,o.set));return this.config.onConflict.push(I` on conflict ${d}${a} do update set ${h}${s}${u}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(o=!0){return this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:Ri(this.config.table)})}prepare(){return this._prepare(!1)}async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}x(gc,Av,"SQLiteInsert");var xv;xv=j;class yc{constructor(e,o,s,a){this.table=e,this.session=o,this.dialect=s,this.withList=a}set(e){return new eT(this.table,dS(this.table,e),this.session,this.dialect,this.withList)}}x(yc,xv,"SQLiteUpdateBuilder");var Nv,bv;class eT extends(bv=li,Nv=j,bv){constructor(o,s,a,u,d){super();x(this,"config");x(this,"leftJoin",this.createJoin("left"));x(this,"rightJoin",this.createJoin("right"));x(this,"innerJoin",this.createJoin("inner"));x(this,"fullJoin",this.createJoin("full"));x(this,"run",o=>this._prepare().run(o));x(this,"all",o=>this._prepare().all(o));x(this,"get",o=>this._prepare().get(o));x(this,"values",o=>this._prepare().values(o));this.session=a,this.dialect=u,this.config={set:s,table:o,withList:d,joins:[]}}from(o){return this.config.from=o,this}createJoin(o){return(s,a)=>{const u=uc(s);if(typeof u=="string"&&this.config.joins.some(d=>d.alias===u))throw new Error(`Alias "${u}" is already used in this query`);if(typeof a=="function"){const d=this.config.from?W(s,Bt)?s[le.Symbol.Columns]:W(s,zt)?s._.selectedFields:W(s,ba)?s[dt].selectedFields:void 0:void 0;a=a(new Proxy(this.config.table[le.Symbol.Columns],new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),d&&new Proxy(d,new gt({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:a,table:s,joinType:o,alias:u}),this}}where(o){return this.config.where=o,this}orderBy(...o){if(typeof o[0]=="function"){const s=o[0](new Proxy(this.config.table[le.Symbol.Columns],new gt({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),a=Array.isArray(s)?s:[s];this.config.orderBy=a}else{const s=o;this.config.orderBy=s}return this}limit(o){return this.config.limit=o,this}returning(o=this.config.table[Bt.Symbol.Columns]){return this.config.returning=Di(o),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){const{typings:o,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(o=!0){return this.session[o?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:Ri(this.config.table)})}prepare(){return this._prepare(!1)}async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}x(eT,Nv,"SQLiteUpdate");var Rv,Mv,Dv;const Ls=class Ls extends(Dv=he,Mv=j,Rv=Symbol.toStringTag,Dv){constructor(o){super(Ls.buildEmbeddedCount(o.source,o.filters).queryChunks);x(this,"sql");x(this,Rv,"SQLiteCountBuilderAsync");x(this,"session");this.params=o,this.session=o.session,this.sql=Ls.buildCount(o.source,o.filters)}static buildEmbeddedCount(o,s){return I`(select count(*) from ${o}${I.raw(" where ").if(s)}${s})`}static buildCount(o,s){return I`select count(*) from ${o}${I.raw(" where ").if(s)}${s}`}then(o,s){return Promise.resolve(this.session.count(this.sql)).then(o,s)}catch(o){return this.then(void 0,o)}finally(o){return this.then(s=>(o==null||o(),s),s=>{throw o==null||o(),s})}};x(Ls,Mv,"SQLiteCountBuilderAsync");let vc=Ls;var Iv;Iv=j;class tT{constructor(e,o,s,a,u,d,h,y){this.mode=e,this.fullSchema=o,this.schema=s,this.tableNamesMap=a,this.table=u,this.tableConfig=d,this.dialect=h,this.session=y}findMany(e){return this.mode==="sync"?new Sc(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many"):new pa(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return this.mode==="sync"?new Sc(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first"):new pa(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}x(tT,Iv,"SQLiteAsyncRelationalQueryBuilder");var Lv,Uv;class pa extends(Uv=li,Lv=j,Uv){constructor(o,s,a,u,d,h,y,p,v){super();x(this,"mode");this.fullSchema=o,this.schema=s,this.tableNamesMap=a,this.table=u,this.tableConfig=d,this.dialect=h,this.session=y,this.config=p,this.mode=v}getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(o=!1){const{query:s,builtQuery:a}=this._toSQL();return this.session[o?"prepareOneTimeQuery":"prepareQuery"](a,void 0,this.mode==="first"?"get":"all",!0,(u,d)=>{const h=u.map(y=>dc(this.schema,this.tableConfig,y,s.selection,d));return this.mode==="first"?h[0]:h})}prepare(){return this._prepare(!1)}_toSQL(){const o=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),s=this.dialect.sqlToQuery(o.sql);return{query:o,builtQuery:s}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return this.mode==="first"?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}x(pa,Lv,"SQLiteAsyncRelationalQuery");var qv,Pv;class Sc extends(Pv=pa,qv=j,Pv){sync(){return this.executeRaw()}}x(Sc,qv,"SQLiteSyncRelationalQuery");var Bv,zv;class Ms extends(zv=li,Bv=j,zv){constructor(o,s,a,u,d){super();x(this,"config");this.execute=o,this.getSQL=s,this.dialect=u,this.mapBatchResult=d,this.config={action:a}}getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(o,s){return s?this.mapBatchResult(o):o}_prepare(){return this}isResponseInArrayMode(){return!1}}x(Ms,Bv,"SQLiteRaw");var Gv;Gv=j;class Oc{constructor(e,o,s,a){x(this,"query");x(this,"$with",(e,o)=>{const s=this;return{as:u=>(typeof u=="function"&&(u=u(new Hc(s.dialect))),new Proxy(new qc(u.getSQL(),o??("getSelectedFields"in u?u.getSelectedFields()??{}:{}),e,!0),new gt({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}});x(this,"$cache");this.resultKind=e,this.dialect=o,this.session=s,this._=a?{schema:a.schema,fullSchema:a.fullSchema,tableNamesMap:a.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};const u=this.query;if(this._.schema)for(const[d,h]of Object.entries(this._.schema))u[d]=new tT(e,a.fullSchema,this._.schema,this._.tableNamesMap,a.fullSchema[d],h,o,s);this.$cache={invalidate:async d=>{}}}$count(e,o){return new vc({source:e,filters:o,session:this.session})}with(...e){const o=this;function s(y){return new bn({fields:y??void 0,session:o.session,dialect:o.dialect,withList:e})}function a(y){return new bn({fields:y??void 0,session:o.session,dialect:o.dialect,withList:e,distinct:!0})}function u(y){return new yc(y,o.session,o.dialect,e)}function d(y){return new pc(y,o.session,o.dialect,e)}function h(y){return new hc(y,o.session,o.dialect,e)}return{select:s,selectDistinct:a,update:u,insert:d,delete:h}}select(e){return new bn({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new bn({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(e){return new yc(e,this.session,this.dialect)}insert(e){return new pc(e,this.session,this.dialect)}delete(e){return new hc(e,this.session,this.dialect)}run(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.run(o),()=>o,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(o)}all(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.all(o),()=>o,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(o)}get(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.get(o),()=>o,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(o)}values(e){const o=typeof e=="string"?I.raw(e):e.getSQL();return this.resultKind==="async"?new Ms(async()=>this.session.values(o),()=>o,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(o)}transaction(e,o){return this.session.transaction(e,o)}}x(Oc,Gv,"BaseSQLiteDatabase");var Hv;Hv=j;class nT{}x(nT,Hv,"Cache");var Ov,Vv;class Vc extends(Vv=nT,Ov=j,Vv){strategy(){return"all"}async get(e){}async put(e,o,s,a){}async onMutate(e){}}x(Vc,Ov,"NoopCache");async function Ep(i,e){const o=`${i}-${JSON.stringify(e)}`,a=new TextEncoder().encode(o),u=await crypto.subtle.digest("SHA-256",a);return[...new Uint8Array(u)].map(y=>y.toString(16).padStart(2,"0")).join("")}var kv,Fv;class iT extends(Fv=li,kv=j,Fv){constructor(e){super(),this.resultCb=e}async execute(){return this.resultCb()}sync(){return this.resultCb()}}x(iT,kv,"ExecuteResultSync");var Qv;Qv=j;class oT{constructor(e,o,s,a,u,d){x(this,"joinsNotNullableMap");var h;this.mode=e,this.executeMethod=o,this.query=s,this.cache=a,this.queryMetadata=u,this.cacheConfig=d,a&&a.strategy()==="all"&&d===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),(h=this.cacheConfig)!=null&&h.enable||(this.cacheConfig=void 0)}async queryWithCache(e,o,s){if(this.cache===void 0||W(this.cache,Vc)||this.queryMetadata===void 0)try{return await s()}catch(a){throw new oi(e,o,a)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await s()}catch(a){throw new oi(e,o,a)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{const[a]=await Promise.all([s(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return a}catch(a){throw new oi(e,o,a)}if(!this.cacheConfig)try{return await s()}catch(a){throw new oi(e,o,a)}if(this.queryMetadata.type==="select"){const a=await this.cache.get(this.cacheConfig.tag??await Ep(e,o),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(a===void 0){let u;try{u=await s()}catch(d){throw new oi(e,o,d)}return await this.cache.put(this.cacheConfig.tag??await Ep(e,o),u,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),u}return a}try{return await s()}catch(a){throw new oi(e,o,a)}}getQuery(){return this.query}mapRunResult(e,o){return e}mapAllResult(e,o){throw new Error("Not implemented")}mapGetResult(e,o){throw new Error("Not implemented")}execute(e){return this.mode==="async"?this[this.executeMethod](e):new iT(()=>this[this.executeMethod](e))}mapResult(e,o){switch(this.executeMethod){case"run":return this.mapRunResult(e,o);case"all":return this.mapAllResult(e,o);case"get":return this.mapGetResult(e,o)}}}x(oT,Qv,"PreparedQuery");var Jv;Jv=j;class sT{constructor(e){this.dialect=e}prepareOneTimeQuery(e,o,s,a,u,d,h){return this.prepareQuery(e,o,s,a,u,d,h)}run(e){const o=this.dialect.sqlToQuery(e);try{return this.prepareOneTimeQuery(o,void 0,"run",!1).run()}catch(s){throw new Na({cause:s,message:`Failed to run the query '${o.sql}'`})}}extractRawRunValueFromBatchResult(e){return e}all(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).all()}extractRawAllValueFromBatchResult(e){throw new Error("Not implemented")}get(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).get()}extractRawGetValueFromBatchResult(e){throw new Error("Not implemented")}values(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).values()}async count(e){return(await this.values(e))[0][0]}extractRawValuesValueFromBatchResult(e){throw new Error("Not implemented")}}x(sT,Jv,"SQLiteSession");var Yv,$v;class lT extends($v=Oc,Yv=j,$v){constructor(e,o,s,a,u=0){super(e,o,s,a),this.schema=a,this.nestedIndex=u}rollback(){throw new KS}}x(lT,Yv,"SQLiteTransaction");var Kv,Xv;class aT extends(Xv=sT,Kv=j,Xv){constructor(o,s,a,u,d={}){super(s);x(this,"logger");x(this,"cache");this.client=o,this.schema=a,this.batchCLient=u,this.logger=d.logger??new aS,this.cache=d.cache??new Vc}prepareQuery(o,s,a,u,d,h,y){return new rT(this.client,o,this.logger,this.cache,h,y,s,a,u,d)}async batch(o){const s=[],a=[];for(const d of o){const h=d._prepare(),y=h.getQuery();s.push(h),a.push({sql:y.sql,params:y.params,method:y.method})}return(await this.batchCLient(a)).map((d,h)=>s[h].mapResult(d,!0))}async transaction(o,s){const a=new Tc("async",this.dialect,this,this.schema);await this.run(I.raw(`begin${s!=null&&s.behavior?" "+s.behavior:""}`));try{const u=await o(a);return await this.run(I`commit`),u}catch(u){throw await this.run(I`rollback`),u}}extractRawAllValueFromBatchResult(o){return o.rows}extractRawGetValueFromBatchResult(o){return o.rows[0]}extractRawValuesValueFromBatchResult(o){return o.rows}}x(aT,Kv,"SQLiteRemoteSession");var Zv,Wv;const _a=class _a extends(Wv=lT,Zv=j,Wv){async transaction(e){const o=`sp${this.nestedIndex}`,s=new _a("async",this.dialect,this.session,this.schema,this.nestedIndex+1);await this.session.run(I.raw(`savepoint ${o}`));try{const a=await e(s);return await this.session.run(I.raw(`release savepoint ${o}`)),a}catch(a){throw await this.session.run(I.raw(`rollback to savepoint ${o}`)),a}}};x(_a,Zv,"SQLiteProxyTransaction");let Tc=_a;var jv,eS;class rT extends(eS=oT,jv=j,eS){constructor(o,s,a,u,d,h,y,p,v,S){super("async",p,s,u,d,h);x(this,"method");this.client=o,this.logger=a,this.fields=y,this._isResponseInArrayMode=v,this.customResultMapper=S,this.customResultMapper=S,this.method=p}getQuery(){return{...this.query,method:this.method}}async run(o){const s=oa(this.query.params,o??{});return this.logger.logQuery(this.query.sql,s),await this.queryWithCache(this.query.sql,s,async()=>await this.client(this.query.sql,s,"run"))}mapAllResult(o,s){return s&&(o=o.rows),!this.fields&&!this.customResultMapper?o:this.customResultMapper?this.customResultMapper(o):o.map(a=>vp(this.fields,a,this.joinsNotNullableMap))}async all(o){const{query:s,logger:a,client:u}=this,d=oa(s.params,o??{});a.logQuery(s.sql,d);const{rows:h}=await this.queryWithCache(s.sql,d,async()=>await u(s.sql,d,"all"));return this.mapAllResult(h)}async get(o){const{query:s,logger:a,client:u}=this,d=oa(s.params,o??{});a.logQuery(s.sql,d);const h=await this.queryWithCache(s.sql,d,async()=>await u(s.sql,d,"get"));return this.mapGetResult(h.rows)}mapGetResult(o,s){s&&(o=o.rows);const a=o;if(!this.fields&&!this.customResultMapper)return a;if(a)return this.customResultMapper?this.customResultMapper([o]):vp(this.fields,a,this.joinsNotNullableMap)}async values(o){const s=oa(this.query.params,o??{});return this.logger.logQuery(this.query.sql,s),(await this.queryWithCache(this.query.sql,s,async()=>await this.client(this.query.sql,s,"values"))).rows}isResponseInArrayMode(){return this._isResponseInArrayMode}}x(rT,jv,"SQLiteProxyPreparedQuery");var tS,nS;class uT extends(nS=Oc,tS=j,nS){async batch(e){return this.session.batch(e)}}x(uT,tS,"SqliteRemoteDatabase");function Cp(i,e,o){const s=new ZS({casing:o==null?void 0:o.casing});let a,u,d,h={};e&&(typeof e=="function"?(d=e,h={}):(d=void 0,h=e),h.logger===!0?a=new lS:h.logger!==!1&&(a=h.logger,u=h.cache));let y;if(h.schema){const S=CA(h.schema,xA);y={fullSchema:h.schema,schema:S.tables,tableNamesMap:S.tableNamesMap}}const p=new aT(i,s,y,d,{logger:a,cache:u}),v=new uT("async",s,p,y);return v.$cache=u,v.$cache&&(v.$cache.invalidate=u==null?void 0:u.onMutate),v}const VA=YS("fragments",{id:Kt("id").primaryKey(),date:Kt("date").notNull(),content:Kt("content").notNull(),timestamp:zc("timestamp").notNull(),tags:Kt("tags"),images:Kt("images")}),kA=YS("diary_entries",{date:Kt("date").primaryKey(),title:Kt("title").notNull(),content:Kt("content").notNull(),mood:Kt("mood").notNull(),reflection:Kt("reflection").notNull(),tags:Kt("tags").notNull(),createdAt:zc("created_at").$defaultFn(()=>Date.now())}),_p=Object.freeze(Object.defineProperty({__proto__:null,diaryEntries:kA,fragments:VA},Symbol.toStringTag,{value:"Module"})),FA=`
CREATE TABLE IF NOT EXISTS fragments (
  id TEXT PRIMARY KEY,
  date TEXT NOT NULL,
  content TEXT NOT NULL,
  timestamp INTEGER NOT NULL,
  tags TEXT,
  images TEXT
);

CREATE TABLE IF NOT EXISTS diary_entries (
  date TEXT PRIMARY KEY,
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  mood TEXT NOT NULL,
  reflection TEXT NOT NULL,
  tags TEXT NOT NULL,
  created_at INTEGER
);

CREATE INDEX IF NOT EXISTS idx_fragments_date ON fragments(date);
CREATE INDEX IF NOT EXISTS idx_fragments_timestamp ON fragments(timestamp);
`;let sa=null,bs=null;const Ap=()=>{const i=globalThis.crypto;if(i&&typeof i.randomUUID=="function")return i.randomUUID();const e=new Uint8Array(16),o=i&&typeof i.getRandomValues=="function"?i.getRandomValues.bind(i):null;if(o)o(e);else for(let a=0;a<e.length;a++)e[a]=Math.random()*256|0;e[6]=e[6]&15|64,e[8]=e[8]&63|128;const s=Array.from(e,a=>a.toString(16).padStart(2,"0"));return`${s.slice(0,4).join("")}-${s.slice(4,6).join("")}-${s.slice(6,8).join("")}-${s.slice(8,10).join("")}-${s.slice(10).join("")}`},cT=async()=>{if(sa)return sa;if(bs)return bs;bs=(async()=>{if(ca.isNativePlatform()){console.log("Initializing Native SQLite Database...");const u=await new k_(F_).createConnection("nimo_db",!1,"no-encryption",1,!1);await u.open();const d=FA.split(";").map(y=>y.trim()).filter(Boolean);for(const y of d)await u.run(y,[]);const h=Cp(async(y,p,v)=>{try{return v==="run"?(await u.run(y,p),{rows:[]}):{rows:(await u.query(y,p)).values||[]}}catch(S){throw console.error("Native DB Error:",S),S}},{schema:_p});return h.backendType="Native SQLite",h}console.log("Initializing Web SQLite Database (Worker with OPFS)...");const i=new Worker(new URL("/notes/assets/worker-X4tzu9Hw.js",import.meta.url),{type:"module"}),e=await new Promise((a,u)=>{const d=Ap(),h=setTimeout(()=>{u(new Error("Worker initialization timeout"))},3e4),y=p=>{p.data.id===d&&p.data.type==="init_result"&&(clearTimeout(h),i.removeEventListener("message",y),p.data.success?a(p.data.backend||"Unknown"):u(new Error(p.data.error)))};i.addEventListener("message",y),i.postMessage({id:d,type:"init"})});console.log("Worker initialized with backend:",e);const o=async(a,u,d)=>{const h=Ap();return new Promise((y,p)=>{const v=setTimeout(()=>{p(new Error("Query timeout"))},3e4),S=E=>{E.data.id===h&&(clearTimeout(v),i.removeEventListener("message",S),E.data.success?y(E.data.data):p(new Error(E.data.error)))};i.addEventListener("message",S),i.postMessage({id:h,sql:a,params:u,method:d})})},s=Cp(async(a,u,d)=>{try{const h=await o(a,u,d);return console.log("[drizzleProxy] Worker returned:",h),Array.isArray(h)&&h.length>0&&console.log("[drizzleProxy] First row:",h[0]),{rows:Array.isArray(h)?h:h?[h]:[]}}catch(h){return console.error("Error from worker:",h),{rows:[]}}},{schema:_p});return s.execute=async({sql:a,args:u})=>{const d=await o(a,u||[],"all");return{rows:Array.isArray(d)?d:[]}},s.backendType=e,s})();try{return sa=await bs,sa}catch(i){throw bs=null,i}};let Ao=null;const QA=async()=>(Ao||(Ao=await cT()),Ao),tn=async()=>(Ao||(Ao=await cT()),Ao),fT=async i=>{const o=await(await tn()).execute({sql:"SELECT id, date, content, timestamp, tags, images FROM fragments WHERE date = ? ORDER BY timestamp",args:[i]});return console.log("[getFragmentsByDate] Raw results from DB:",o),o.rows&&o.rows.length>0&&console.log("[getFragmentsByDate] First row:",o.rows[0]),(o.rows||[]).map(s=>({id:s.id,content:s.content,timestamp:s.timestamp,tags:s.tags?JSON.parse(s.tags):[],images:s.images?JSON.parse(s.images):[]}))},Ec=async(i,e)=>{await(await tn()).execute({sql:"INSERT INTO fragments (id, date, content, timestamp, tags, images) VALUES (?, ?, ?, ?, ?, ?)",args:[e.id,i,e.content,e.timestamp,e.tags?JSON.stringify(e.tags):null,e.images?JSON.stringify(e.images):null]})},JA=async(i,e,o,s)=>{await(await tn()).execute({sql:"UPDATE fragments SET content = ?, tags = ?, images = ? WHERE id = ?",args:[e,JSON.stringify(o),s?JSON.stringify(s):null,i]})},YA=async i=>{await(await tn()).execute({sql:"DELETE FROM fragments WHERE id = ?",args:[i]})},dT=async i=>{const o=await(await tn()).execute({sql:"SELECT title, content, mood, reflection, tags FROM diary_entries WHERE date = ?",args:[i]});if(!o.rows||o.rows.length===0)return null;const s=o.rows[0];return{title:s.title,content:s.content,mood:s.mood,reflection:s.reflection,tags:JSON.parse(s.tags)}},Ds=async(i,e)=>{await(await tn()).execute({sql:`INSERT OR REPLACE INTO diary_entries (date, title, content, mood, reflection, tags, created_at) 
              VALUES (?, ?, ?, ?, ?, ?, ?)`,args:[i,e.title,e.content,e.mood,e.reflection,JSON.stringify(e.tags),Date.now()]})},mT=async()=>{const i=await tn(),e=await i.execute({sql:"SELECT DISTINCT date FROM fragments"}),o=await i.execute({sql:"SELECT date FROM diary_entries"}),s=new Set([...(e.rows||[]).map(a=>a.date),...(o.rows||[]).map(a=>a.date)]);return Array.from(s).sort().reverse()},$A=async()=>{await tn();const i={},e=await mT();for(const o of e){const s=await fT(o),a=await dT(o);i[o]={fragments:s,diaryEntry:a}}return i},KA=async i=>{const e=await tn();await e.execute({sql:"DELETE FROM fragments WHERE date = ?",args:[i]}),await e.execute({sql:"DELETE FROM diary_entries WHERE date = ?",args:[i]})},XA=async i=>{const e=await tn(),o=`%${i.toLowerCase()}%`;return((await e.execute({sql:`SELECT id, date, content, timestamp, tags, images FROM fragments 
              WHERE LOWER(content) LIKE ? OR LOWER(tags) LIKE ? 
              ORDER BY timestamp DESC`,args:[o,o]})).rows||[]).map(a=>({date:a.date,fragment:{id:a.id,content:a.content,timestamp:a.timestamp,tags:a.tags?JSON.parse(a.tags):[],images:a.images?JSON.parse(a.images):[]}}))},ZA=async i=>{const e=await tn(),o=`%${i.toLowerCase()}%`;return((await e.execute({sql:`SELECT date, title, content, mood, reflection, tags FROM diary_entries 
              WHERE LOWER(title) LIKE ? OR LOWER(content) LIKE ? OR LOWER(mood) LIKE ? 
                 OR LOWER(reflection) LIKE ? OR LOWER(tags) LIKE ? 
              ORDER BY date DESC`,args:[o,o,o,o,o]})).rows||[]).map(a=>({date:a.date,entry:{title:a.title,content:a.content,mood:a.mood,reflection:a.reflection,tags:JSON.parse(a.tags)}}))};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let WA,jA;function ew(){return{geminiUrl:WA,vertexUrl:jA}}function tw(i,e,o,s){var a,u;if(!(i!=null&&i.baseUrl)){const d=ew();return e?(a=d.vertexUrl)!==null&&a!==void 0?a:o:(u=d.geminiUrl)!==null&&u!==void 0?u:s}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dn{}function se(i,e){const o=/\{([^}]+)\}/g;return i.replace(o,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const u=e[a];return u!=null?String(u):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(i,e,o){for(let u=0;u<e.length-1;u++){const d=e[u];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in i))if(Array.isArray(o))i[h]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(i[h])){const y=i[h];if(Array.isArray(o))for(let p=0;p<y.length;p++){const v=y[p];f(v,e.slice(u+1),o[p])}else for(const p of y)f(p,e.slice(u+1),o)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in i||(i[h]=[{}]);const y=i[h];f(y[0],e.slice(u+1),o);return}(!i[d]||typeof i[d]!="object")&&(i[d]={}),i=i[d]}const s=e[e.length-1],a=i[s];if(a!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===a)return;if(typeof a=="object"&&typeof o=="object"&&a!==null&&o!==null)Object.assign(a,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(i,o):i[s]=o}function c(i,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let s=0;s<e.length;s++){if(typeof i!="object"||i===null)return o;const a=e[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(u in i){const d=i[u];return Array.isArray(d)?d.map(h=>c(h,e.slice(s+1),o)):o}else return o}else i=i[a]}return i}catch(s){if(s instanceof TypeError)return o;throw s}}function nw(i,e){for(const[o,s]of Object.entries(e)){const a=o.split("."),u=s.split("."),d=new Set;let h=-1;for(let y=0;y<a.length;y++)if(a[y]==="*"){h=y;break}if(h!==-1&&u.length>h)for(let y=h;y<u.length;y++){const p=u[y];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&d.add(p)}Cc(i,a,u,0,d)}}function Cc(i,e,o,s,a){if(s>=e.length||typeof i!="object"||i===null)return;const u=e[s];if(u.endsWith("[]")){const d=u.slice(0,-2),h=i;if(d in h&&Array.isArray(h[d]))for(const y of h[d])Cc(y,e,o,s+1,a)}else if(u==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const d=i,h=Object.keys(d).filter(p=>!p.startsWith("_")&&!a.has(p)),y={};for(const p of h)y[p]=d[p];for(const[p,v]of Object.entries(y)){const S=[];for(const E of o.slice(s))E==="*"?S.push(p):S.push(E);f(d,S,v)}for(const p of h)delete d[p]}}else{const d=i;u in d&&Cc(d[u],e,o,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kc(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iw(i){const e={},o=c(i,["operationName"]);o!=null&&f(e,["operationName"],o);const s=c(i,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function ow(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response","generateVideoResponse"]);return d!=null&&f(e,["response"],lw(d)),e}function sw(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],aw(d)),e}function lw(i){const e={},o=c(i,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>rw(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function aw(i){const e={},o=c(i,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>uw(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function rw(i){const e={},o=c(i,["video"]);return o!=null&&f(e,["video"],pw(o)),e}function uw(i){const e={},o=c(i,["_self"]);return o!=null&&f(e,["video"],gw(o)),e}function cw(i){const e={},o=c(i,["operationName"]);return o!=null&&f(e,["_url","operationName"],o),e}function fw(i){const e={},o=c(i,["operationName"]);return o!=null&&f(e,["_url","operationName"],o),e}function dw(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],mw(d)),e}function mw(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["parent"]);s!=null&&f(e,["parent"],s);const a=c(i,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function hT(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],hw(d)),e}function hw(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["parent"]);s!=null&&f(e,["parent"],s);const a=c(i,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function pw(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["uri"],o);const s=c(i,["encodedVideo"]);s!=null&&f(e,["videoBytes"],kc(s));const a=c(i,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function gw(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["uri"],o);const s=c(i,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],kc(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wp;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wp||(wp={}));var xp;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(xp||(xp={}));var Np;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Np||(Np={}));var yt;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(yt||(yt={}));var bp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(bp||(bp={}));var Rp;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Rp||(Rp={}));var Mp;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Mp||(Mp={}));var Dp;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Dp||(Dp={}));var Ip;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ip||(Ip={}));var Lp;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.HIGH="HIGH"})(Lp||(Lp={}));var Up;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Up||(Up={}));var qp;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(qp||(qp={}));var Pp;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Pp||(Pp={}));var Bp;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(Bp||(Bp={}));var zp;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(zp||(zp={}));var Gp;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gp||(Gp={}));var Hp;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Hp||(Hp={}));var Op;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Op||(Op={}));var Vp;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Vp||(Vp={}));var ga;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(ga||(ga={}));var kp;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kp||(kp={}));var Fp;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Fp||(Fp={}));var Qp;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qp||(Qp={}));var _c;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_c||(_c={}));var Jp;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Jp||(Jp={}));var Yp;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Yp||(Yp={}));var $p;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})($p||($p={}));var Kp;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Kp||(Kp={}));var Xp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Xp||(Xp={}));var Zp;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Zp||(Zp={}));var Wp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Wp||(Wp={}));var jp;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(jp||(jp={}));var eg;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(eg||(eg={}));var tg;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(tg||(tg={}));var ng;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ng||(ng={}));var ig;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ig||(ig={}));var og;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(og||(og={}));var sg;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sg||(sg={}));var lg;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(lg||(lg={}));var ag;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(ag||(ag={}));var rg;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(rg||(rg={}));var ug;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(ug||(ug={}));var cg;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cg||(cg={}));var fg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(fg||(fg={}));var dg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(dg||(dg={}));var mg;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(mg||(mg={}));var hg;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hg||(hg={}));var pg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(pg||(pg={}));var gg;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gg||(gg={}));var yg;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yg||(yg={}));var vg;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(vg||(vg={}));var Sg;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sg||(Sg={}));var Tg;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Tg||(Tg={}));var Eg;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Eg||(Eg={}));var _o;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(_o||(_o={}));class Ac{constructor(e){const o={};for(const s of e.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rs{get text(){var e,o,s,a,u,d,h,y;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const S=[];for(const E of(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[A,N]of Object.entries(E))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(N!==null||N!==void 0)&&S.push(A);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,p+=E.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,o,s,a,u,d,h,y;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const S of(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[E,A]of Object.entries(S))E!=="inlineData"&&(A!==null||A!==void 0)&&v.push(E);S.inlineData&&typeof S.inlineData.data=="string"&&(p+=atob(S.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,o,s,a,u,d,h,y;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,o,s,a,u,d,h,y,p;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,o,s,a,u,d,h,y,p;if(((a=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(h=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Cg{}class _g{}class yw{}class vw{}class Sw{}class Tw{}class Ag{}class wg{}class xg{}class Ew{}class ya{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new ya;let a;const u=e;return o?a=sw(u):a=ow(u),Object.assign(s,a),s}}class Ng{}class bg{}class Rg{}class Cw{}class _w{}class Aw{}class Fc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Fc,u=dw(e);return Object.assign(s,u),s}}class ww{}class xw{}class Nw{}class Mg{}class bw{get text(){var e,o,s;let a="",u=!1;const d=[];for(const h of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,p]of Object.entries(h))y!=="text"&&y!=="thought"&&p!==null&&d.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;u=!0,a+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?a:void 0}get data(){var e,o,s;let a="";const u=[];for(const d of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[h,y]of Object.entries(d))h!=="inlineData"&&y!==null&&u.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(a+=atob(d.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Rw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Qc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Qc,u=hT(e);return Object.assign(s,u),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Re(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function pT(i,e){const o=Re(i,e);return o?o.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}`:o.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${o}`:o:""}function gT(i){return Array.isArray(i)?i.map(e=>va(e)):[va(i)]}function va(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function yT(i){const e=va(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vT(i){const e=va(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dg(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function ST(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>Dg(e)):[Dg(i)]}function wc(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Ig(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Lg(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function mt(i){if(i==null)throw new Error("ContentUnion is required");return wc(i)?i:{role:"user",parts:ST(i)}}function Jc(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const s=mt(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(i.isVertexAI()){const o=mt(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>mt(o)):[mt(e)]}function Xt(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Ig(i)||Lg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mt(i)]}const e=[],o=[],s=wc(i[0]);for(const a of i){const u=wc(a);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(a);else{if(Ig(a)||Lg(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(a)}}return s||e.push({role:"user",parts:ST(o)}),e}function Mw(i,e){i.includes("null")&&(e.nullable=!0);const o=i.filter(s=>s!=="null");if(o.length===1)e.type=Object.values(yt).includes(o[0].toUpperCase())?o[0].toUpperCase():yt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of o)e.anyOf.push({type:Object.values(yt).includes(s.toUpperCase())?s.toUpperCase():yt.TYPE_UNSPECIFIED})}}function wo(i){const e={},o=["items"],s=["anyOf"],a=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=i.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,i=u[1]):u[1].type==="null"&&(e.nullable=!0,i=u[0])),i.type instanceof Array&&Mw(i.type,e);for(const[d,h]of Object.entries(i))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(yt).includes(h.toUpperCase())?h.toUpperCase():yt.TYPE_UNSPECIFIED}else if(o.includes(d))e[d]=wo(h);else if(s.includes(d)){const y=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}y.push(wo(p))}e[d]=y}else if(a.includes(d)){const y={};for(const[p,v]of Object.entries(h))y[p]=wo(v);e[d]=y}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Yc(i){return wo(i)}function $c(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Kc(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Ro(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=wo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=wo(e.response));return i}function Mo(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of i)e.push(o);return e}function Dw(i,e,o,s=1){const a=!e.startsWith(`${o}/`)&&e.split("/").length===s;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:a?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}/${e}`:e:a?`${o}/${e}`:e}function In(i,e){if(typeof e!="string")throw new Error("name must be a string");return Dw(i,e,"cachedContents")}function TT(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function ai(i){return kc(i)}function Iw(i){return i!=null&&typeof i=="object"&&"name"in i}function Lw(i){return i!=null&&typeof i=="object"&&"video"in i}function Uw(i){return i!=null&&typeof i=="object"&&"uri"in i}function ET(i){var e;let o;if(Iw(i)&&(o=i.name),!(Uw(i)&&(o=i.uri,o===void 0))&&!(Lw(i)&&(o=(e=i.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof i=="string"&&(o=i),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const a=o.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${o}`);o=a[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function CT(i,e){let o;return i.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function _T(i){for(const e of["models","tunedModels","publisherModels"])if(qw(i,e))return i[e];return[]}function qw(i,e){return i!==null&&typeof i=="object"&&e in i}function Pw(i,e={}){const o=i,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Bw(i,e={}){const o=[],s=new Set;for(const a of i){const u=a.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const d=Pw(a,e);d.functionDeclarations&&o.push(...d.functionDeclarations)}return{functionDeclarations:o}}function AT(i,e){let o;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,a=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(i.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function zw(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function wT(i){if(typeof i!="object"||i===null)return{};const e=i,o=e.inlinedResponses;if(typeof o!="object"||o===null)return i;const a=o.inlinedResponses;if(!Array.isArray(a)||a.length===0)return i;let u=!1;for(const d of a){if(typeof d!="object"||d===null)continue;const y=d.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function Do(i,e){const o=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function xT(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gw(i){const e={},o=c(i,["responsesFile"]);o!=null&&f(e,["fileName"],o);const s=c(i,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Sx(d))),f(e,["inlinedResponses"],u)}const a=c(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["inlinedEmbedContentResponses"],u)}return e}function Hw(i){const e={},o=c(i,["predictionsFormat"]);o!=null&&f(e,["format"],o);const s=c(i,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const a=c(i,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function Ow(i){const e={},o=c(i,["format"]);o!=null&&f(e,["predictionsFormat"],o);const s=c(i,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const a=c(i,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function aa(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["metadata","state"]);a!=null&&f(e,["state"],xT(a));const u=c(i,["metadata","createTime"]);u!=null&&f(e,["createTime"],u);const d=c(i,["metadata","endTime"]);d!=null&&f(e,["endTime"],d);const h=c(i,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const y=c(i,["metadata","model"]);y!=null&&f(e,["model"],y);const p=c(i,["metadata","output"]);return p!=null&&f(e,["dest"],Gw(wT(p))),e}function xc(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["state"]);a!=null&&f(e,["state"],xT(a));const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["createTime"]);d!=null&&f(e,["createTime"],d);const h=c(i,["startTime"]);h!=null&&f(e,["startTime"],h);const y=c(i,["endTime"]);y!=null&&f(e,["endTime"],y);const p=c(i,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=c(i,["model"]);v!=null&&f(e,["model"],v);const S=c(i,["inputConfig"]);S!=null&&f(e,["src"],Vw(S));const E=c(i,["outputConfig"]);E!=null&&f(e,["dest"],Hw(wT(E)));const A=c(i,["completionStats"]);return A!=null&&f(e,["completionStats"],A),e}function Vw(i){const e={},o=c(i,["instancesFormat"]);o!=null&&f(e,["format"],o);const s=c(i,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const a=c(i,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function kw(i,e){const o={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(e,["fileName"]);s!=null&&f(o,["fileName"],s);const a=c(e,["inlinedRequests"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>vx(i,d))),f(o,["requests","requests"],u)}return o}function Fw(i){const e={},o=c(i,["format"]);o!=null&&f(e,["instancesFormat"],o);const s=c(i,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const a=c(i,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Qw(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Jw(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function Yw(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function $w(i){const e={},o=c(i,["content"]);o!=null&&f(e,["content"],o);const s=c(i,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],Kw(s));const a=c(i,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const u=c(i,["finishReason"]);u!=null&&f(e,["finishReason"],u);const d=c(i,["avgLogprobs"]);d!=null&&f(e,["avgLogprobs"],d);const h=c(i,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const y=c(i,["index"]);y!=null&&f(e,["index"],y);const p=c(i,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=c(i,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["safetyRatings"],E)}const S=c(i,["urlContextMetadata"]);return S!=null&&f(e,["urlContextMetadata"],S),e}function Kw(i){const e={},o=c(i,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function NT(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>xx(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function Xw(i,e){const o={},s=c(i,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),c(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function Zw(i,e){const o={},s=c(i,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=c(i,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],Ow(zw(a))),o}function Ug(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["src"]);a!=null&&f(o,["batch","inputConfig"],kw(i,AT(i,a)));const u=c(e,["config"]);return u!=null&&Xw(u,o),o}function Ww(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["model"],Re(i,s));const a=c(e,["src"]);a!=null&&f(o,["inputConfig"],Fw(AT(i,a)));const u=c(e,["config"]);return u!=null&&Zw(u,o),o}function jw(i,e){const o={},s=c(i,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),o}function ex(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["src"]);a!=null&&f(o,["batch","inputConfig"],ax(i,a));const u=c(e,["config"]);return u!=null&&jw(u,o),o}function tx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function nx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function ix(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);return u!=null&&f(e,["error"],u),e}function ox(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);return u!=null&&f(e,["error"],u),e}function sx(i,e){const o={},s=c(e,["contents"]);if(s!=null){let u=Jc(i,s);Array.isArray(u)&&(u=u.map(d=>d)),f(o,["requests[]","request","content"],u)}const a=c(e,["config"]);return a!=null&&(f(o,["_self"],lx(a,o)),nw(o,{"requests[].*":"requests[].request.*"})),o}function lx(i,e){const o={},s=c(i,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=c(i,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const u=c(i,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function ax(i,e){const o={},s=c(e,["fileName"]);s!=null&&f(o,["file_name"],s);const a=c(e,["inlinedRequests"]);return a!=null&&f(o,["requests"],sx(i,a)),o}function rx(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function ux(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cx(i){const e={},o=c(i,["mode"]);o!=null&&f(e,["mode"],o);const s=c(i,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fx(i,e,o){const s={},a=c(e,["systemInstruction"]);o!==void 0&&a!=null&&f(o,["systemInstruction"],NT(mt(a)));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const h=c(e,["topK"]);h!=null&&f(s,["topK"],h);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const p=c(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const S=c(e,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const E=c(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const N=c(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const w=c(e,["seed"]);w!=null&&f(s,["seed"],w);const L=c(e,["responseMimeType"]);L!=null&&f(s,["responseMimeType"],L);const V=c(e,["responseSchema"]);V!=null&&f(s,["responseSchema"],Yc(V));const $=c(e,["responseJsonSchema"]);if($!=null&&f(s,["responseJsonSchema"],$),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=c(e,["safetySettings"]);if(o!==void 0&&U!=null){let te=U;Array.isArray(te)&&(te=te.map(ae=>Nx(ae))),f(o,["safetySettings"],te)}const k=c(e,["tools"]);if(o!==void 0&&k!=null){let te=Mo(k);Array.isArray(te)&&(te=te.map(ae=>Rx(Ro(ae)))),f(o,["tools"],te)}const ne=c(e,["toolConfig"]);if(o!==void 0&&ne!=null&&f(o,["toolConfig"],bx(ne)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=c(e,["cachedContent"]);o!==void 0&&ie!=null&&f(o,["cachedContent"],In(i,ie));const H=c(e,["responseModalities"]);H!=null&&f(s,["responseModalities"],H);const Q=c(e,["mediaResolution"]);Q!=null&&f(s,["mediaResolution"],Q);const z=c(e,["speechConfig"]);if(z!=null&&f(s,["speechConfig"],$c(z)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const X=c(e,["thinkingConfig"]);X!=null&&f(s,["thinkingConfig"],X);const Z=c(e,["imageConfig"]);return Z!=null&&f(s,["imageConfig"],yx(Z)),s}function dx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>$w(p))),f(e,["candidates"],y)}const a=c(i,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const u=c(i,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const d=c(i,["responseId"]);d!=null&&f(e,["responseId"],d);const h=c(i,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function mx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function hx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],Do(i,s)),o}function px(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function gx(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function yx(i){const e={},o=c(i,["aspectRatio"]);o!=null&&f(e,["aspectRatio"],o);const s=c(i,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vx(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["request","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let h=Xt(a);Array.isArray(h)&&(h=h.map(y=>NT(y))),f(o,["request","contents"],h)}const u=c(e,["metadata"]);u!=null&&f(o,["metadata"],u);const d=c(e,["config"]);return d!=null&&f(o,["request","generationConfig"],fx(i,d,c(o,["request"],{}))),o}function Sx(i){const e={},o=c(i,["response"]);o!=null&&f(e,["response"],dx(o));const s=c(i,["error"]);return s!=null&&f(e,["error"],s),e}function Tx(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),c(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function Ex(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const u=c(i,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),o}function Cx(i){const e={},o=c(i,["config"]);return o!=null&&Tx(o,e),e}function _x(i){const e={},o=c(i,["config"]);return o!=null&&Ex(o,e),e}function Ax(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["operations"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>aa(d))),f(e,["batchJobs"],u)}return e}function wx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["batchPredictionJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>xc(d))),f(e,["batchJobs"],u)}return e}function xx(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],rx(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],ux(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],Qw(y));const p=c(i,["text"]);p!=null&&f(e,["text"],p);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function Nx(i){const e={},o=c(i,["category"]);if(o!=null&&f(e,["category"],o),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(i,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function bx(i){const e={},o=c(i,["functionCallingConfig"]);o!=null&&f(e,["functionCallingConfig"],cx(o));const s=c(i,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function Rx(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],px(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],gx(y));const p=c(i,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mn;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Mn||(Mn={}));class Ui{constructor(e,o,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,s,a)}init(e,o,s){var a,u;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!s||Object.keys(s).length===0?d={config:{}}:typeof s=="object"?d=Object.assign({},s):d=s,d.config&&(d.config.pageToken=o.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(u=(a=d.config)===null||a===void 0?void 0:a.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mx extends Dn{constructor(e){super(),this.apiClient=e,this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)},this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o)}createInlinedGenerateContentRequest(e){const o=Ug(this.apiClient,e),s=o._url,a=se("{model}:batchGenerateContent",s),h=o.batch.inputConfig.requests,y=h.requests,p=[];for(const v of y){const S=Object.assign({},v);if(S.systemInstruction){const E=S.systemInstruction;delete S.systemInstruction;const A=S.request;A.systemInstruction=E,S.request=A}p.push(S)}return h.requests=p,delete o.config,delete o._url,delete o._query,{path:a,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const s=o?Object.assign({},o):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const u=this.getGcsUri(e),d=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${a}`;else if(d)s.dest=`${d}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Ww(this.apiClient,e);return h=se("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>xc(v))}else{const p=Ug(this.apiClient,e);return h=se("{model}:batchGenerateContent",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>aa(v))}}async createEmbeddingsInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ex(this.apiClient,e);return u=se("{model}:asyncBatchEmbedContent",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>aa(y))}}async get(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=hx(this.apiClient,e);return h=se("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>xc(v))}else{const p=mx(this.apiClient,e);return h=se("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>aa(v))}}async cancel(e){var o,s,a,u;let d="",h={};if(this.apiClient.isVertexAI()){const y=Yw(this.apiClient,e);d=se("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=Jw(this.apiClient,e);d=se("batches/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=_x(e);return h=se("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=wx(v),E=new Mg;return Object.assign(E,S),E})}else{const p=Cx(e);return h=se("batches",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Ax(v),E=new Mg;return Object.assign(E,S),E})}}async delete(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=nx(this.apiClient,e);return h=se("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>ox(v))}else{const p=tx(this.apiClient,e);return h=se("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>ix(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dx(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function qg(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>eN(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function Ix(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const u=c(i,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(i,["contents"]);if(e!==void 0&&d!=null){let v=Xt(d);Array.isArray(v)&&(v=v.map(S=>qg(S))),f(e,["contents"],v)}const h=c(i,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],qg(mt(h)));const y=c(i,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>nN(S))),f(e,["tools"],v)}const p=c(i,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],tN(p)),c(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function Lx(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const u=c(i,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(i,["contents"]);if(e!==void 0&&d!=null){let S=Xt(d);Array.isArray(S)&&(S=S.map(E=>E)),f(e,["contents"],S)}const h=c(i,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],mt(h));const y=c(i,["tools"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>iN(E))),f(e,["tools"],S)}const p=c(i,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const v=c(i,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),o}function Ux(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["model"],pT(i,s));const a=c(e,["config"]);return a!=null&&Ix(a,o),o}function qx(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["model"],pT(i,s));const a=c(e,["config"]);return a!=null&&Lx(a,o),o}function Px(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function Bx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function zx(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function Gx(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function Hx(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Ox(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Vx(i){const e={},o=c(i,["mode"]);o!=null&&f(e,["mode"],o);const s=c(i,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kx(i){const e={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(i,["description"]);o!=null&&f(e,["description"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const h=c(i,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Fx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function Qx(i,e){const o={},s=c(e,["name"]);return s!=null&&f(o,["_url","name"],In(i,s)),o}function Jx(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function Yx(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function $x(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function Kx(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function Xx(i){const e={},o=c(i,["config"]);return o!=null&&$x(o,e),e}function Zx(i){const e={},o=c(i,["config"]);return o!=null&&Kx(o,e),e}function Wx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["cachedContents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function jx(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["cachedContents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function eN(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],Hx(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],Ox(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],Dx(y));const p=c(i,["text"]);p!=null&&f(e,["text"],p);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function tN(i){const e={},o=c(i,["functionCallingConfig"]);o!=null&&f(e,["functionCallingConfig"],Vx(o));const s=c(i,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function nN(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],Jx(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],Yx(y));const p=c(i,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function iN(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(E=>kx(E))),f(e,["functionDeclarations"],S)}const s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=c(i,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const u=c(i,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=c(i,["codeExecution"]);d!=null&&f(e,["codeExecution"],d);const h=c(i,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const y=c(i,["googleMaps"]);y!=null&&f(e,["googleMaps"],y);const p=c(i,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const v=c(i,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function oN(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),o}function sN(i,e){const o={},s=c(i,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(i,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),o}function lN(i,e){const o={},s=c(e,["name"]);s!=null&&f(o,["_url","name"],In(i,s));const a=c(e,["config"]);return a!=null&&oN(a,o),o}function aN(i,e){const o={},s=c(e,["name"]);s!=null&&f(o,["_url","name"],In(i,s));const a=c(e,["config"]);return a!=null&&sN(a,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rN extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=qx(this.apiClient,e);return h=se("cachedContents",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const p=Ux(this.apiClient,e);return h=se("cachedContents",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async get(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Qx(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const p=Fx(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async delete(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Bx(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Gx(v),E=new bg;return Object.assign(E,S),E})}else{const p=Px(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=zx(v),E=new bg;return Object.assign(E,S),E})}}async update(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=aN(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const p=lN(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Zx(e);return h=se("cachedContents",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=jx(v),E=new Rg;return Object.assign(E,S),E})}else{const p=Xx(e);return h=se("cachedContents",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Wx(v),E=new Rg;return Object.assign(E,S),E})}}}function Pg(i){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&i[e],s=0;if(o)return o.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(i){return this instanceof ke?(this.v=i,this):new ke(i)}function xo(i,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(i,e||[]),a,u=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(A){return function(N){return Promise.resolve(N).then(A,S)}}function h(A,N){s[A]&&(a[A]=function(w){return new Promise(function(L,V){u.push([A,w,L,V])>1||y(A,w)})},N&&(a[A]=N(a[A])))}function y(A,N){try{p(s[A](N))}catch(w){E(u[0][3],w)}}function p(A){A.value instanceof ke?Promise.resolve(A.value.v).then(v,S):E(u[0][2],A)}function v(A){y("next",A)}function S(A){y("throw",A)}function E(A,N){A(N),u.shift(),u.length&&y(u[0][0],u[0][1])}}function Is(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],o;return e?e.call(i):(i=typeof Pg=="function"?Pg(i):i[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(u){o[u]=i[u]&&function(d){return new Promise(function(h,y){d=i[u](d),a(h,y,d.done,d.value)})}}function a(u,d,h,y){Promise.resolve(y).then(function(p){u({value:p,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const o=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:bT(o)}function bT(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function cN(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bg(i){if(i===void 0||i.length===0)return[];const e=[],o=i.length;let s=0;for(;s<o;)if(i[s].role==="user")e.push(i[s]),s++;else{const a=[];let u=!0;for(;s<o&&i[s].role==="model";)a.push(i[s]),u&&!bT(i[s])&&(u=!1),s++;u?e.push(...a):e.pop()}return e}class fN{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new dN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class dN{constructor(e,o,s,a={},u=[]){this.apiClient=e,this.modelsModule=o,this.model=s,this.config=a,this.history=u,this.sendPromise=Promise.resolve(),cN(u)}async sendMessage(e){var o;await this.sendPromise;const s=mt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,d,h;const y=await a,p=(d=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content,v=y.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let E=[];v!=null&&(E=(h=v.slice(S))!==null&&h!==void 0?h:[]);const A=p?[p]:[];this.recordHistory(s,A,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var o;await this.sendPromise;const s=mt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const u=await a;return this.processStreamResponse(u,s)}getHistory(e=!1){const o=e?Bg(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){var s,a;return xo(this,arguments,function*(){var d,h,y,p;const v=[];try{for(var S=!0,E=Is(e),A;A=yield ke(E.next()),d=A.done,!d;S=!0){p=A.value,S=!1;const N=p;if(uN(N)){const w=(a=(s=N.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content;w!==void 0&&v.push(w)}yield yield ke(N)}}catch(N){h={error:N}}finally{try{!S&&!d&&(y=E.return)&&(yield ke(y.call(E)))}finally{if(h)throw h.error}}this.recordHistory(o,v)})}recordHistory(e,o,s){let a=[];o.length>0&&o.every(u=>u.role!==void 0)?a=o:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Bg(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ma extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ma.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(i){const e={},o=c(i,["file"]);return o!=null&&f(e,["file"],o),e}function hN(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function pN(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","file"],ET(o)),e}function gN(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function yN(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","file"],ET(o)),e}function vN(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function SN(i){const e={},o=c(i,["config"]);return o!=null&&vN(o,e),e}function TN(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["files"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["files"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EN extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SN(e);return u=se("files",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const p=TN(y),v=new ww;return Object.assign(v,p),v})}}async createInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mN(e);return u=se("upload/v1beta/files",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const p=hN(y),v=new xw;return Object.assign(v,p),v})}}async get(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=yN(e);return u=se("files/{file}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pN(e);return u=se("files/{file}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const p=gN(y),v=new Nw;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ra(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function CN(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>zN(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function _N(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function AN(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wN(i){const e={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(i,["description"]);o!=null&&f(e,["description"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const h=c(i,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function xN(i){const e={},o=c(i,["modelSelectionConfig"]);o!=null&&f(e,["modelConfig"],o);const s=c(i,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=c(i,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const u=c(i,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const d=c(i,["enableAffectiveDialog"]);d!=null&&f(e,["enableAffectiveDialog"],d);const h=c(i,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const y=c(i,["logprobs"]);y!=null&&f(e,["logprobs"],y);const p=c(i,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=c(i,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const S=c(i,["presencePenalty"]);S!=null&&f(e,["presencePenalty"],S);const E=c(i,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const A=c(i,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const N=c(i,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const w=c(i,["responseSchema"]);w!=null&&f(e,["responseSchema"],w);const L=c(i,["routingConfig"]);L!=null&&f(e,["routingConfig"],L);const V=c(i,["seed"]);V!=null&&f(e,["seed"],V);const $=c(i,["speechConfig"]);$!=null&&f(e,["speechConfig"],RT($));const U=c(i,["stopSequences"]);U!=null&&f(e,["stopSequences"],U);const k=c(i,["temperature"]);k!=null&&f(e,["temperature"],k);const ne=c(i,["thinkingConfig"]);ne!=null&&f(e,["thinkingConfig"],ne);const ie=c(i,["topK"]);ie!=null&&f(e,["topK"],ie);const H=c(i,["topP"]);if(H!=null&&f(e,["topP"],H),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function NN(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function bN(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function RN(i,e){const o={},s=c(i,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=c(i,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const h=c(i,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const p=c(i,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=c(i,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","speechConfig"],Kc(S));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=c(i,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(i,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],CN(mt(N)));const w=c(i,["tools"]);if(e!==void 0&&w!=null){let ie=Mo(w);Array.isArray(ie)&&(ie=ie.map(H=>HN(Ro(H)))),f(e,["setup","tools"],ie)}const L=c(i,["sessionResumption"]);e!==void 0&&L!=null&&f(e,["setup","sessionResumption"],GN(L));const V=c(i,["inputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","inputAudioTranscription"],V);const $=c(i,["outputAudioTranscription"]);e!==void 0&&$!=null&&f(e,["setup","outputAudioTranscription"],$);const U=c(i,["realtimeInputConfig"]);e!==void 0&&U!=null&&f(e,["setup","realtimeInputConfig"],U);const k=c(i,["contextWindowCompression"]);e!==void 0&&k!=null&&f(e,["setup","contextWindowCompression"],k);const ne=c(i,["proactivity"]);return e!==void 0&&ne!=null&&f(e,["setup","proactivity"],ne),o}function MN(i,e){const o={},s=c(i,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],xN(s));const a=c(i,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const h=c(i,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const p=c(i,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=c(i,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","speechConfig"],RT(Kc(S)));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=c(i,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(i,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],mt(N));const w=c(i,["tools"]);if(e!==void 0&&w!=null){let ie=Mo(w);Array.isArray(ie)&&(ie=ie.map(H=>ON(Ro(H)))),f(e,["setup","tools"],ie)}const L=c(i,["sessionResumption"]);e!==void 0&&L!=null&&f(e,["setup","sessionResumption"],L);const V=c(i,["inputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","inputAudioTranscription"],V);const $=c(i,["outputAudioTranscription"]);e!==void 0&&$!=null&&f(e,["setup","outputAudioTranscription"],$);const U=c(i,["realtimeInputConfig"]);e!==void 0&&U!=null&&f(e,["setup","realtimeInputConfig"],U);const k=c(i,["contextWindowCompression"]);e!==void 0&&k!=null&&f(e,["setup","contextWindowCompression"],k);const ne=c(i,["proactivity"]);return e!==void 0&&ne!=null&&f(e,["setup","proactivity"],ne),o}function DN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["setup","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&f(o,["config"],RN(a,o)),o}function IN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["setup","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&f(o,["config"],MN(a,o)),o}function LN(i){const e={},o=c(i,["musicGenerationConfig"]);return o!=null&&f(e,["musicGenerationConfig"],o),e}function UN(i){const e={},o=c(i,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["weightedPrompts"],s)}return e}function qN(i){const e={},o=c(i,["media"]);if(o!=null){let p=gT(o);Array.isArray(p)&&(p=p.map(v=>ra(v))),f(e,["mediaChunks"],p)}const s=c(i,["audio"]);s!=null&&f(e,["audio"],ra(vT(s)));const a=c(i,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const u=c(i,["video"]);u!=null&&f(e,["video"],ra(yT(u)));const d=c(i,["text"]);d!=null&&f(e,["text"],d);const h=c(i,["activityStart"]);h!=null&&f(e,["activityStart"],h);const y=c(i,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function PN(i){const e={},o=c(i,["media"]);if(o!=null){let p=gT(o);Array.isArray(p)&&(p=p.map(v=>v)),f(e,["mediaChunks"],p)}const s=c(i,["audio"]);s!=null&&f(e,["audio"],vT(s));const a=c(i,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const u=c(i,["video"]);u!=null&&f(e,["video"],yT(u));const d=c(i,["text"]);d!=null&&f(e,["text"],d);const h=c(i,["activityStart"]);h!=null&&f(e,["activityStart"],h);const y=c(i,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function BN(i){const e={},o=c(i,["setupComplete"]);o!=null&&f(e,["setupComplete"],o);const s=c(i,["serverContent"]);s!=null&&f(e,["serverContent"],s);const a=c(i,["toolCall"]);a!=null&&f(e,["toolCall"],a);const u=c(i,["toolCallCancellation"]);u!=null&&f(e,["toolCallCancellation"],u);const d=c(i,["usageMetadata"]);d!=null&&f(e,["usageMetadata"],VN(d));const h=c(i,["goAway"]);h!=null&&f(e,["goAway"],h);const y=c(i,["sessionResumptionUpdate"]);return y!=null&&f(e,["sessionResumptionUpdate"],y),e}function zN(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],_N(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],AN(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],ra(y));const p=c(i,["text"]);p!=null&&f(e,["text"],p);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function GN(i){const e={},o=c(i,["handle"]);if(o!=null&&f(e,["handle"],o),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function RT(i){const e={},o=c(i,["languageCode"]);o!=null&&f(e,["languageCode"],o);const s=c(i,["voiceConfig"]);if(s!=null&&f(e,["voiceConfig"],s),c(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function HN(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],NN(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],bN(y));const p=c(i,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function ON(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(E=>wN(E))),f(e,["functionDeclarations"],S)}const s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=c(i,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const u=c(i,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=c(i,["codeExecution"]);d!=null&&f(e,["codeExecution"],d);const h=c(i,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const y=c(i,["googleMaps"]);y!=null&&f(e,["googleMaps"],y);const p=c(i,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const v=c(i,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function VN(i){const e={},o=c(i,["promptTokenCount"]);o!=null&&f(e,["promptTokenCount"],o);const s=c(i,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const a=c(i,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const u=c(i,["toolUsePromptTokenCount"]);u!=null&&f(e,["toolUsePromptTokenCount"],u);const d=c(i,["thoughtsTokenCount"]);d!=null&&f(e,["thoughtsTokenCount"],d);const h=c(i,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const y=c(i,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(N=>N)),f(e,["promptTokensDetails"],A)}const p=c(i,["cacheTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(N=>N)),f(e,["cacheTokensDetails"],A)}const v=c(i,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(N=>N)),f(e,["responseTokensDetails"],A)}const S=c(i,["toolUsePromptTokensDetails"]);if(S!=null){let A=S;Array.isArray(A)&&(A=A.map(N=>N)),f(e,["toolUsePromptTokensDetails"],A)}const E=c(i,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kN(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function FN(i){const e={},o=c(i,["content"]);o!=null&&f(e,["content"],o);const s=c(i,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],QN(s));const a=c(i,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const u=c(i,["finishReason"]);u!=null&&f(e,["finishReason"],u);const d=c(i,["avgLogprobs"]);d!=null&&f(e,["avgLogprobs"],d);const h=c(i,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const y=c(i,["index"]);y!=null&&f(e,["index"],y);const p=c(i,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=c(i,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["safetyRatings"],E)}const S=c(i,["urlContextMetadata"]);return S!=null&&f(e,["urlContextMetadata"],S),e}function QN(i){const e={},o=c(i,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function JN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let u=Xt(a);Array.isArray(u)&&(u=u.map(d=>d)),f(o,["contents"],u)}return o}function YN(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(e,["tokensInfo"],a)}return e}function $N(i){const e={},o=c(i,["values"]);o!=null&&f(e,["values"],o);const s=c(i,["statistics"]);return s!=null&&f(e,["statistics"],KN(s)),e}function KN(i){const e={},o=c(i,["truncated"]);o!=null&&f(e,["truncated"],o);const s=c(i,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function Da(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>o1(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function XN(i){const e={},o=c(i,["controlType"]);o!=null&&f(e,["controlType"],o);const s=c(i,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function ZN(i){const e={};if(c(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function WN(i,e){const o={},s=c(i,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],mt(s));const a=c(i,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>UT(h))),f(e,["tools"],d)}const u=c(i,["generationConfig"]);return e!==void 0&&u!=null&&f(e,["generationConfig"],kb(u)),o}function jN(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Xt(a);Array.isArray(d)&&(d=d.map(h=>Da(h))),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&ZN(u),o}function eb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Xt(a);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&WN(u,o),o}function tb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const a=c(i,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function nb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function ib(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function ob(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function sb(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function lb(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}function ab(i,e){const o={},s=c(i,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=c(i,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const u=c(i,["numberOfImages"]);e!==void 0&&u!=null&&f(e,["parameters","sampleCount"],u);const d=c(i,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const h=c(i,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const y=c(i,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const p=c(i,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=c(i,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const S=c(i,["includeSafetyAttributes"]);e!==void 0&&S!=null&&f(e,["parameters","includeSafetyAttributes"],S);const E=c(i,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=c(i,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const N=c(i,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const w=c(i,["outputCompressionQuality"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","compressionQuality"],w);const L=c(i,["addWatermark"]);e!==void 0&&L!=null&&f(e,["parameters","addWatermark"],L);const V=c(i,["labels"]);e!==void 0&&V!=null&&f(e,["labels"],V);const $=c(i,["editMode"]);e!==void 0&&$!=null&&f(e,["parameters","editMode"],$);const U=c(i,["baseSteps"]);return e!==void 0&&U!=null&&f(e,["parameters","editConfig","baseSteps"],U),o}function rb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>c1(y))),f(o,["instances[0]","referenceImages"],h)}const d=c(e,["config"]);return d!=null&&ab(d,o),o}function ub(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Ia(u))),f(e,["generatedImages"],a)}return e}function cb(i,e){const o={},s=c(i,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=c(i,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const u=c(i,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function fb(i,e){const o={},s=c(i,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const a=c(i,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const u=c(i,["outputDimensionality"]);e!==void 0&&u!=null&&f(e,["parameters","outputDimensionality"],u);const d=c(i,["mimeType"]);e!==void 0&&d!=null&&f(e,["instances[]","mimeType"],d);const h=c(i,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),o}function db(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let h=Jc(i,a);Array.isArray(h)&&(h=h.map(y=>y)),f(o,["requests[]","content"],h)}const u=c(e,["config"]);u!=null&&cb(u,o);const d=c(e,["model"]);return d!==void 0&&f(o,["requests[]","model"],Re(i,d)),o}function mb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Jc(i,a);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["instances[]","content"],d)}const u=c(e,["config"]);return u!=null&&fb(u,o),o}function hb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["embeddings"],u)}const a=c(i,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function pb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>$N(d))),f(e,["embeddings"],u)}const a=c(i,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function gb(i){const e={},o=c(i,["endpoint"]);o!=null&&f(e,["name"],o);const s=c(i,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function yb(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function vb(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Sb(i){const e={},o=c(i,["mode"]);o!=null&&f(e,["mode"],o);const s=c(i,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Tb(i){const e={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=c(i,["description"]);o!=null&&f(e,["description"],o);const s=c(i,["name"]);s!=null&&f(e,["name"],s);const a=c(i,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(i,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(i,["response"]);d!=null&&f(e,["response"],d);const h=c(i,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Eb(i,e,o){const s={},a=c(e,["systemInstruction"]);o!==void 0&&a!=null&&f(o,["systemInstruction"],Da(mt(a)));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const h=c(e,["topK"]);h!=null&&f(s,["topK"],h);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const p=c(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const S=c(e,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const E=c(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const N=c(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const w=c(e,["seed"]);w!=null&&f(s,["seed"],w);const L=c(e,["responseMimeType"]);L!=null&&f(s,["responseMimeType"],L);const V=c(e,["responseSchema"]);V!=null&&f(s,["responseSchema"],Yc(V));const $=c(e,["responseJsonSchema"]);if($!=null&&f(s,["responseJsonSchema"],$),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=c(e,["safetySettings"]);if(o!==void 0&&U!=null){let te=U;Array.isArray(te)&&(te=te.map(ae=>f1(ae))),f(o,["safetySettings"],te)}const k=c(e,["tools"]);if(o!==void 0&&k!=null){let te=Mo(k);Array.isArray(te)&&(te=te.map(ae=>v1(Ro(ae)))),f(o,["tools"],te)}const ne=c(e,["toolConfig"]);if(o!==void 0&&ne!=null&&f(o,["toolConfig"],y1(ne)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=c(e,["cachedContent"]);o!==void 0&&ie!=null&&f(o,["cachedContent"],In(i,ie));const H=c(e,["responseModalities"]);H!=null&&f(s,["responseModalities"],H);const Q=c(e,["mediaResolution"]);Q!=null&&f(s,["mediaResolution"],Q);const z=c(e,["speechConfig"]);if(z!=null&&f(s,["speechConfig"],$c(z)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const X=c(e,["thinkingConfig"]);X!=null&&f(s,["thinkingConfig"],X);const Z=c(e,["imageConfig"]);return Z!=null&&f(s,["imageConfig"],$b(Z)),s}function Cb(i,e,o){const s={},a=c(e,["systemInstruction"]);o!==void 0&&a!=null&&f(o,["systemInstruction"],mt(a));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const h=c(e,["topK"]);h!=null&&f(s,["topK"],h);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const p=c(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const S=c(e,["responseLogprobs"]);S!=null&&f(s,["responseLogprobs"],S);const E=c(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const N=c(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const w=c(e,["seed"]);w!=null&&f(s,["seed"],w);const L=c(e,["responseMimeType"]);L!=null&&f(s,["responseMimeType"],L);const V=c(e,["responseSchema"]);V!=null&&f(s,["responseSchema"],Yc(V));const $=c(e,["responseJsonSchema"]);$!=null&&f(s,["responseJsonSchema"],$);const U=c(e,["routingConfig"]);U!=null&&f(s,["routingConfig"],U);const k=c(e,["modelSelectionConfig"]);k!=null&&f(s,["modelConfig"],k);const ne=c(e,["safetySettings"]);if(o!==void 0&&ne!=null){let G=ne;Array.isArray(G)&&(G=G.map(ee=>ee)),f(o,["safetySettings"],G)}const ie=c(e,["tools"]);if(o!==void 0&&ie!=null){let G=Mo(ie);Array.isArray(G)&&(G=G.map(ee=>UT(Ro(ee)))),f(o,["tools"],G)}const H=c(e,["toolConfig"]);o!==void 0&&H!=null&&f(o,["toolConfig"],H);const Q=c(e,["labels"]);o!==void 0&&Q!=null&&f(o,["labels"],Q);const z=c(e,["cachedContent"]);o!==void 0&&z!=null&&f(o,["cachedContent"],In(i,z));const X=c(e,["responseModalities"]);X!=null&&f(s,["responseModalities"],X);const Z=c(e,["mediaResolution"]);Z!=null&&f(s,["mediaResolution"],Z);const te=c(e,["speechConfig"]);te!=null&&f(s,["speechConfig"],LT($c(te)));const ae=c(e,["audioTimestamp"]);ae!=null&&f(s,["audioTimestamp"],ae);const ge=c(e,["thinkingConfig"]);ge!=null&&f(s,["thinkingConfig"],ge);const Ie=c(e,["imageConfig"]);return Ie!=null&&f(s,["imageConfig"],Kb(Ie)),s}function zg(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Xt(a);Array.isArray(d)&&(d=d.map(h=>Da(h))),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&f(o,["generationConfig"],Eb(i,u,o)),o}function Gg(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["contents"]);if(a!=null){let d=Xt(a);Array.isArray(d)&&(d=d.map(h=>h)),f(o,["contents"],d)}const u=c(e,["config"]);return u!=null&&f(o,["generationConfig"],Cb(i,u,o)),o}function Hg(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>FN(p))),f(e,["candidates"],y)}const a=c(i,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const u=c(i,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const d=c(i,["responseId"]);d!=null&&f(e,["responseId"],d);const h=c(i,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function Og(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["candidates"],p)}const a=c(i,["createTime"]);a!=null&&f(e,["createTime"],a);const u=c(i,["modelVersion"]);u!=null&&f(e,["modelVersion"],u);const d=c(i,["promptFeedback"]);d!=null&&f(e,["promptFeedback"],d);const h=c(i,["responseId"]);h!=null&&f(e,["responseId"],h);const y=c(i,["usageMetadata"]);return y!=null&&f(e,["usageMetadata"],y),e}function _b(i,e){const o={};if(c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=c(i,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=c(i,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const u=c(i,["guidanceScale"]);if(e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&f(e,["parameters","safetySetting"],d);const h=c(i,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const y=c(i,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const p=c(i,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=c(i,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const S=c(i,["outputMimeType"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","mimeType"],S);const E=c(i,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),c(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=c(i,["imageSize"]);if(e!==void 0&&A!=null&&f(e,["parameters","sampleImageSize"],A),c(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Ab(i,e){const o={},s=c(i,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=c(i,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const u=c(i,["numberOfImages"]);e!==void 0&&u!=null&&f(e,["parameters","sampleCount"],u);const d=c(i,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const h=c(i,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const y=c(i,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const p=c(i,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=c(i,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const S=c(i,["includeSafetyAttributes"]);e!==void 0&&S!=null&&f(e,["parameters","includeSafetyAttributes"],S);const E=c(i,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=c(i,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const N=c(i,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const w=c(i,["outputCompressionQuality"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","compressionQuality"],w);const L=c(i,["addWatermark"]);e!==void 0&&L!=null&&f(e,["parameters","addWatermark"],L);const V=c(i,["labels"]);e!==void 0&&V!=null&&f(e,["labels"],V);const $=c(i,["imageSize"]);e!==void 0&&$!=null&&f(e,["parameters","sampleImageSize"],$);const U=c(i,["enhancePrompt"]);return e!==void 0&&U!=null&&f(e,["parameters","enhancePrompt"],U),o}function wb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["config"]);return u!=null&&_b(u,o),o}function xb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["config"]);return u!=null&&Ab(u,o),o}function Nb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Gb(d))),f(e,["generatedImages"],u)}const a=c(i,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],DT(a)),e}function bb(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Ia(d))),f(e,["generatedImages"],u)}const a=c(i,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],IT(a)),e}function Rb(i,e){const o={},s=c(i,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=c(i,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(i,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const d=c(i,["resolution"]);e!==void 0&&d!=null&&f(e,["parameters","resolution"],d);const h=c(i,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),c(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=c(i,["negativePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","negativePrompt"],y);const p=c(i,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),c(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=c(i,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],La(v));const S=c(i,["referenceImages"]);if(e!==void 0&&S!=null){let E=S;Array.isArray(E)&&(E=E.map(A=>D1(A))),f(e,["instances[0]","referenceImages"],E)}if(c(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function Mb(i,e){const o={},s=c(i,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=c(i,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const u=c(i,["fps"]);e!==void 0&&u!=null&&f(e,["parameters","fps"],u);const d=c(i,["durationSeconds"]);e!==void 0&&d!=null&&f(e,["parameters","durationSeconds"],d);const h=c(i,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const y=c(i,["aspectRatio"]);e!==void 0&&y!=null&&f(e,["parameters","aspectRatio"],y);const p=c(i,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=c(i,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const S=c(i,["pubsubTopic"]);e!==void 0&&S!=null&&f(e,["parameters","pubsubTopic"],S);const E=c(i,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const A=c(i,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const N=c(i,["generateAudio"]);e!==void 0&&N!=null&&f(e,["parameters","generateAudio"],N);const w=c(i,["lastFrame"]);e!==void 0&&w!=null&&f(e,["instances[0]","lastFrame"],nn(w));const L=c(i,["referenceImages"]);if(e!==void 0&&L!=null){let U=L;Array.isArray(U)&&(U=U.map(k=>I1(k))),f(e,["instances[0]","referenceImages"],U)}const V=c(i,["mask"]);e!==void 0&&V!=null&&f(e,["instances[0]","mask"],M1(V));const $=c(i,["compressionQuality"]);return e!==void 0&&$!=null&&f(e,["parameters","compressionQuality"],$),o}function Db(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response","generateVideoResponse"]);return d!=null&&f(e,["response"],qb(d)),e}function Ib(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],Pb(d)),e}function Lb(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["image"]);u!=null&&f(o,["instances[0]","image"],La(u));const d=c(e,["video"]);d!=null&&f(o,["instances[0]","video"],qT(d));const h=c(e,["source"]);h!=null&&Bb(h,o);const y=c(e,["config"]);return y!=null&&Rb(y,o),o}function Ub(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["prompt"]);a!=null&&f(o,["instances[0]","prompt"],a);const u=c(e,["image"]);u!=null&&f(o,["instances[0]","image"],nn(u));const d=c(e,["video"]);d!=null&&f(o,["instances[0]","video"],PT(d));const h=c(e,["source"]);h!=null&&zb(h,o);const y=c(e,["config"]);return y!=null&&Mb(y,o),o}function qb(i){const e={},o=c(i,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Ob(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function Pb(i){const e={},o=c(i,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Vb(d))),f(e,["generatedVideos"],u)}const s=c(i,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(i,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function Bb(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],La(a));const u=c(i,["video"]);return e!==void 0&&u!=null&&f(e,["instances[0]","video"],qT(u)),o}function zb(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],nn(a));const u=c(i,["video"]);return e!==void 0&&u!=null&&f(e,["instances[0]","video"],PT(u)),o}function Gb(i){const e={},o=c(i,["_self"]);o!=null&&f(e,["image"],Xb(o));const s=c(i,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=c(i,["_self"]);return a!=null&&f(e,["safetyAttributes"],DT(a)),e}function Ia(i){const e={},o=c(i,["_self"]);o!=null&&f(e,["image"],MT(o));const s=c(i,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=c(i,["_self"]);a!=null&&f(e,["safetyAttributes"],IT(a));const u=c(i,["prompt"]);return u!=null&&f(e,["enhancedPrompt"],u),e}function Hb(i){const e={},o=c(i,["_self"]);o!=null&&f(e,["mask"],MT(o));const s=c(i,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(e,["labels"],a)}return e}function Ob(i){const e={},o=c(i,["video"]);return o!=null&&f(e,["video"],b1(o)),e}function Vb(i){const e={},o=c(i,["_self"]);return o!=null&&f(e,["video"],R1(o)),e}function kb(i){const e={},o=c(i,["modelSelectionConfig"]);o!=null&&f(e,["modelConfig"],o);const s=c(i,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=c(i,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const u=c(i,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const d=c(i,["enableAffectiveDialog"]);d!=null&&f(e,["enableAffectiveDialog"],d);const h=c(i,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const y=c(i,["logprobs"]);y!=null&&f(e,["logprobs"],y);const p=c(i,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=c(i,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const S=c(i,["presencePenalty"]);S!=null&&f(e,["presencePenalty"],S);const E=c(i,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const A=c(i,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const N=c(i,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const w=c(i,["responseSchema"]);w!=null&&f(e,["responseSchema"],w);const L=c(i,["routingConfig"]);L!=null&&f(e,["routingConfig"],L);const V=c(i,["seed"]);V!=null&&f(e,["seed"],V);const $=c(i,["speechConfig"]);$!=null&&f(e,["speechConfig"],LT($));const U=c(i,["stopSequences"]);U!=null&&f(e,["stopSequences"],U);const k=c(i,["temperature"]);k!=null&&f(e,["temperature"],k);const ne=c(i,["thinkingConfig"]);ne!=null&&f(e,["thinkingConfig"],ne);const ie=c(i,["topK"]);ie!=null&&f(e,["topK"],ie);const H=c(i,["topP"]);if(H!=null&&f(e,["topP"],H),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Fb(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function Qb(i,e){const o={},s=c(e,["model"]);return s!=null&&f(o,["_url","name"],Re(i,s)),o}function Jb(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function Yb(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function $b(i){const e={},o=c(i,["aspectRatio"]);o!=null&&f(e,["aspectRatio"],o);const s=c(i,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Kb(i){const e={},o=c(i,["aspectRatio"]);o!=null&&f(e,["aspectRatio"],o);const s=c(i,["imageSize"]);s!=null&&f(e,["imageSize"],s);const a=c(i,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const u=c(i,["outputCompressionQuality"]);return u!=null&&f(e,["imageOutputOptions","compressionQuality"],u),e}function Xb(i){const e={},o=c(i,["bytesBase64Encoded"]);o!=null&&f(e,["imageBytes"],ai(o));const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function MT(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["gcsUri"],o);const s=c(i,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function La(i){const e={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(i,["imageBytes"]);o!=null&&f(e,["bytesBase64Encoded"],ai(o));const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function nn(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["gcsUri"],o);const s=c(i,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Zb(i,e,o){const s={},a=c(e,["pageSize"]);o!==void 0&&a!=null&&f(o,["_query","pageSize"],a);const u=c(e,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const d=c(e,["filter"]);o!==void 0&&d!=null&&f(o,["_query","filter"],d);const h=c(e,["queryBase"]);return o!==void 0&&h!=null&&f(o,["_url","models_url"],CT(i,h)),s}function Wb(i,e,o){const s={},a=c(e,["pageSize"]);o!==void 0&&a!=null&&f(o,["_query","pageSize"],a);const u=c(e,["pageToken"]);o!==void 0&&u!=null&&f(o,["_query","pageToken"],u);const d=c(e,["filter"]);o!==void 0&&d!=null&&f(o,["_query","filter"],d);const h=c(e,["queryBase"]);return o!==void 0&&h!=null&&f(o,["_url","models_url"],CT(i,h)),s}function jb(i,e){const o={},s=c(e,["config"]);return s!=null&&Zb(i,s,o),o}function e1(i,e){const o={},s=c(e,["config"]);return s!=null&&Wb(i,s,o),o}function t1(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["_self"]);if(a!=null){let u=_T(a);Array.isArray(u)&&(u=u.map(d=>Nc(d))),f(e,["models"],u)}return e}function n1(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["_self"]);if(a!=null){let u=_T(a);Array.isArray(u)&&(u=u.map(d=>bc(d))),f(e,["models"],u)}return e}function i1(i){const e={},o=c(i,["maskMode"]);o!=null&&f(e,["maskMode"],o);const s=c(i,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const a=c(i,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Nc(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);a!=null&&f(e,["description"],a);const u=c(i,["version"]);u!=null&&f(e,["version"],u);const d=c(i,["_self"]);d!=null&&f(e,["tunedModelInfo"],S1(d));const h=c(i,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const y=c(i,["outputTokenLimit"]);y!=null&&f(e,["outputTokenLimit"],y);const p=c(i,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const v=c(i,["temperature"]);v!=null&&f(e,["temperature"],v);const S=c(i,["maxTemperature"]);S!=null&&f(e,["maxTemperature"],S);const E=c(i,["topP"]);E!=null&&f(e,["topP"],E);const A=c(i,["topK"]);A!=null&&f(e,["topK"],A);const N=c(i,["thinking"]);return N!=null&&f(e,["thinking"],N),e}function bc(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["displayName"]);s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);a!=null&&f(e,["description"],a);const u=c(i,["versionId"]);u!=null&&f(e,["version"],u);const d=c(i,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(E=>gb(E))),f(e,["endpoints"],S)}const h=c(i,["labels"]);h!=null&&f(e,["labels"],h);const y=c(i,["_self"]);y!=null&&f(e,["tunedModelInfo"],T1(y));const p=c(i,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=c(i,["checkpoints"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>E)),f(e,["checkpoints"],S)}return e}function o1(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],yb(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],vb(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],kN(y));const p=c(i,["text"]);p!=null&&f(e,["text"],p);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function s1(i){const e={},o=c(i,["productImage"]);return o!=null&&f(e,["image"],nn(o)),e}function l1(i,e){const o={},s=c(i,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=c(i,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const u=c(i,["outputGcsUri"]);e!==void 0&&u!=null&&f(e,["parameters","storageUri"],u);const d=c(i,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const h=c(i,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const y=c(i,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const p=c(i,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const v=c(i,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const S=c(i,["outputCompressionQuality"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S);const E=c(i,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const A=c(i,["labels"]);return e!==void 0&&A!=null&&f(e,["labels"],A),o}function a1(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["source"]);a!=null&&u1(a,o);const u=c(e,["config"]);return u!=null&&l1(u,o),o}function r1(i){const e={},o=c(i,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Ia(a))),f(e,["generatedImages"],s)}return e}function u1(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],nn(a));const u=c(i,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>s1(h))),f(e,["instances[0]","productImages"],d)}return o}function c1(i){const e={},o=c(i,["referenceImage"]);o!=null&&f(e,["referenceImage"],nn(o));const s=c(i,["referenceId"]);s!=null&&f(e,["referenceId"],s);const a=c(i,["referenceType"]);a!=null&&f(e,["referenceType"],a);const u=c(i,["maskImageConfig"]);u!=null&&f(e,["maskImageConfig"],i1(u));const d=c(i,["controlImageConfig"]);d!=null&&f(e,["controlImageConfig"],XN(d));const h=c(i,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const y=c(i,["subjectImageConfig"]);return y!=null&&f(e,["subjectImageConfig"],y),e}function DT(i){const e={},o=c(i,["safetyAttributes","categories"]);o!=null&&f(e,["categories"],o);const s=c(i,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=c(i,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function IT(i){const e={},o=c(i,["safetyAttributes","categories"]);o!=null&&f(e,["categories"],o);const s=c(i,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=c(i,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function f1(i){const e={},o=c(i,["category"]);if(o!=null&&f(e,["category"],o),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(i,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function d1(i){const e={},o=c(i,["image"]);return o!=null&&f(e,["image"],nn(o)),e}function m1(i,e){const o={},s=c(i,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const a=c(i,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const u=c(i,["confidenceThreshold"]);e!==void 0&&u!=null&&f(e,["parameters","confidenceThreshold"],u);const d=c(i,["maskDilation"]);e!==void 0&&d!=null&&f(e,["parameters","maskDilation"],d);const h=c(i,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const y=c(i,["labels"]);return e!==void 0&&y!=null&&f(e,["labels"],y),o}function h1(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["source"]);a!=null&&g1(a,o);const u=c(e,["config"]);return u!=null&&m1(u,o),o}function p1(i){const e={},o=c(i,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Hb(a))),f(e,["generatedMasks"],s)}return e}function g1(i,e){const o={},s=c(i,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=c(i,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],nn(a));const u=c(i,["scribbleImage"]);return e!==void 0&&u!=null&&f(e,["instances[0]","scribble"],d1(u)),o}function LT(i){const e={},o=c(i,["languageCode"]);o!=null&&f(e,["languageCode"],o);const s=c(i,["voiceConfig"]);if(s!=null&&f(e,["voiceConfig"],s),c(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function y1(i){const e={},o=c(i,["functionCallingConfig"]);o!=null&&f(e,["functionCallingConfig"],Sb(o));const s=c(i,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function v1(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],Jb(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],Yb(y));const p=c(i,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function UT(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let S=o;Array.isArray(S)&&(S=S.map(E=>Tb(E))),f(e,["functionDeclarations"],S)}const s=c(i,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=c(i,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const u=c(i,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=c(i,["codeExecution"]);d!=null&&f(e,["codeExecution"],d);const h=c(i,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const y=c(i,["googleMaps"]);y!=null&&f(e,["googleMaps"],y);const p=c(i,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const v=c(i,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function S1(i){const e={},o=c(i,["baseModel"]);o!=null&&f(e,["baseModel"],o);const s=c(i,["createTime"]);s!=null&&f(e,["createTime"],s);const a=c(i,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function T1(i){const e={},o=c(i,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&f(e,["baseModel"],o);const s=c(i,["createTime"]);s!=null&&f(e,["createTime"],s);const a=c(i,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function E1(i,e){const o={},s=c(i,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const u=c(i,["defaultCheckpointId"]);return e!==void 0&&u!=null&&f(e,["defaultCheckpointId"],u),o}function C1(i,e){const o={},s=c(i,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=c(i,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const u=c(i,["defaultCheckpointId"]);return e!==void 0&&u!=null&&f(e,["defaultCheckpointId"],u),o}function _1(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","name"],Re(i,s));const a=c(e,["config"]);return a!=null&&E1(a,o),o}function A1(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&C1(a,o),o}function w1(i,e){const o={},s=c(i,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=c(i,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const u=c(i,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const d=c(i,["includeRaiReason"]);e!==void 0&&d!=null&&f(e,["parameters","includeRaiReason"],d);const h=c(i,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const y=c(i,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const p=c(i,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=c(i,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const S=c(i,["labels"]);e!==void 0&&S!=null&&f(e,["labels"],S);const E=c(i,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const A=c(i,["mode"]);return e!==void 0&&A!=null&&f(e,["parameters","mode"],A),o}function x1(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["_url","model"],Re(i,s));const a=c(e,["image"]);a!=null&&f(o,["instances[0]","image"],nn(a));const u=c(e,["upscaleFactor"]);u!=null&&f(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=c(e,["config"]);return d!=null&&w1(d,o),o}function N1(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Ia(u))),f(e,["generatedImages"],a)}return e}function b1(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["uri"],o);const s=c(i,["encodedVideo"]);s!=null&&f(e,["videoBytes"],ai(s));const a=c(i,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function R1(i){const e={},o=c(i,["gcsUri"]);o!=null&&f(e,["uri"],o);const s=c(i,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function M1(i){const e={},o=c(i,["image"]);o!=null&&f(e,["_self"],nn(o));const s=c(i,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function D1(i){const e={},o=c(i,["image"]);o!=null&&f(e,["image"],La(o));const s=c(i,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function I1(i){const e={},o=c(i,["image"]);o!=null&&f(e,["image"],nn(o));const s=c(i,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function qT(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["uri"],o);const s=c(i,["videoBytes"]);s!=null&&f(e,["encodedVideo"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function PT(i){const e={},o=c(i,["uri"]);o!=null&&f(e,["gcsUri"],o);const s=c(i,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],ai(s));const a=c(i,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L1="Content-Type",U1="X-Server-Timeout",q1="User-Agent",Rc="x-goog-api-client",P1="1.30.0",B1=`google-genai-sdk/${P1}`,z1="v1beta1",G1="v1beta",Vg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class H1{constructor(e){var o,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:z1,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:G1,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,s){const a=[this.getRequestUrlInternal(o)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,o,s);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))a.searchParams.append(d,String(h));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,a.toString(),e.abortSignal),this.unaryApiCall(a,u,e.httpMethod)}patchHttpOptions(e,o){const s=JSON.parse(JSON.stringify(e));for(const[a,u]of Object.entries(o))typeof u=="object"?s[a]=Object.assign(Object.assign({},s[a]),u):u!==void 0&&(s[a]=u);return s}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,o,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,a.toString(),e.abortSignal),this.streamApiCall(a,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,s,a){if(o&&o.timeout||a){const u=new AbortController,d=u.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const h=setTimeout(()=>u.abort(),o.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{u.abort()}),e.signal=d}return o&&o.extraBody!==null&&O1(e,o.extraBody),e.headers=await this.getHeadersInternal(o,s),e}async unaryApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async a=>(await kg(a),new Ac(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async a=>(await kg(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var o;return xo(this,arguments,function*(){const a=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),u=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:y}=yield ke(a.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=u.decode(y,{stream:!0});try{const S=JSON.parse(p);if("error"in S){const E=JSON.parse(JSON.stringify(S.error)),A=E.status,N=E.code,w=`got status: ${A}. ${JSON.stringify(S)}`;if(N>=400&&N<600)throw new Ma({message:w,status:N})}}catch(S){if(S.name==="ApiError")throw S}d+=p;let v=d.match(Vg);for(;v;){const S=v[1];try{const E=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new Ac(E)),d=d.slice(v[0].length),v=d.match(Vg)}catch(E){throw new Error(`exception parsing stream chunk ${S}. ${E}`)}}}}finally{a.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},o=B1+" "+this.clientOptions.userAgentExtra;return e[q1]=o,e[Rc]=o,e[L1]="application/json",e}async getHeadersInternal(e,o){const s=new Headers;if(e&&e.headers){for(const[a,u]of Object.entries(e.headers))s.append(a,u);e.timeout&&e.timeout>0&&s.append(U1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(e){var o;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(e,o){var s;const a={};o!=null&&(a.mimeType=o.mimeType,a.name=o.name,a.displayName=o.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);a.sizeBytes=String(d.size);const h=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const y={file:a},p=this.getFileName(e),v=se("upload/v1beta/files",y._url),S=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,p,y,o==null?void 0:o.httpOptions);return u.upload(e,S,this)}async uploadFileToFileSearchStore(e,o,s){var a;const u=this.clientOptions.uploader,d=await u.stat(o),h=String(d.size),y=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:d.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(o),S={};s!=null&&s.customMetadata&&(S.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(S.chunkingConfig=s.chunkingConfig);const E=await this.fetchUploadUrl(p,h,y,v,S,s==null?void 0:s.httpOptions);return u.uploadToFileSearchStore(o,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,s,a,u,d){var h;let y={};d?y=d:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const p=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:y});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function kg(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const o=i.status;let s;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=JSON.stringify(s);throw o>=400&&o<600?new Ma({message:a,status:o}):new Error(a)}}function O1(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof i.body=="string"&&i.body.length>0)try{const u=JSON.parse(i.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,d){const h=Object.assign({},u);for(const y in d)if(Object.prototype.hasOwnProperty.call(d,y)){const p=d[y],v=h[y];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[y]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[y]=p)}return h}const a=s(o,e);i.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V1="mcp_used/unknown";let k1=!1;function BT(i){for(const e of i)if(F1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return k1}function zT(i){var e;const o=(e=i[Rc])!==null&&e!==void 0?e:"";i[Rc]=(o+` ${V1}`).trimStart()}function F1(i){return i!==null&&typeof i=="object"&&i instanceof Xc}function Q1(i,e=100){return xo(this,arguments,function*(){let s,a=0;for(;a<e;){const u=yield ke(i.listTools({cursor:s}));for(const d of u.tools)yield yield ke(d),a++;if(!u.nextCursor)break;s=u.nextCursor}})}class Xc{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Xc(e,o)}async initialize(){var e,o,s,a;if(this.mcpTools.length>0)return;const u={},d=[];for(const v of this.mcpClients)try{for(var h=!0,y=(o=void 0,Is(Q1(v))),p;p=await y.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const S=a;d.push(S);const E=S.name;if(u[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);u[E]=v}}catch(S){o={error:S}}finally{try{!h&&!e&&(s=y.return)&&await s.call(y)}finally{if(o)throw o.error}}this.mcpTools=d,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),Bw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const d=await a.callTool({name:s.name,arguments:s.args},void 0,u);o.push({functionResponse:{name:s.name,response:d.isError?{error:d}:d}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function J1(i,e,o){const s=new Rw;let a;o.data instanceof Blob?a=JSON.parse(await o.data.text()):a=JSON.parse(o.data),Object.assign(s,a),e(s)}class Y1{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s}async connect(e){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),d=X1(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${a}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(U=>{p=U}),S=e.callbacks,E=function(){p({})},A=this.apiClient,N={onopen:E,onmessage:U=>{J1(A,S.onmessage,U)},onerror:(o=S==null?void 0:S.onerror)!==null&&o!==void 0?o:function(U){},onclose:(s=S==null?void 0:S.onclose)!==null&&s!==void 0?s:function(U){}},w=this.webSocketFactory.create(y,K1(d),N);w.connect(),await v;const $={setup:{model:Re(this.apiClient,e.model)}};return w.send(JSON.stringify($)),new $1(w,this.apiClient)}}class $1{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=UN(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=LN(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(_o.PLAY)}pause(){this.sendPlaybackControl(_o.PAUSE)}stop(){this.sendPlaybackControl(_o.STOP)}resetContext(){this.sendPlaybackControl(_o.RESET_CONTEXT)}close(){this.conn.close()}}function K1(i){const e={};return i.forEach((o,s)=>{e[s]=o}),e}function X1(i){const e=new Headers;for(const[o,s]of Object.entries(i))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function W1(i,e,o){const s=new bw;let a;o.data instanceof Blob?a=await o.data.text():o.data instanceof ArrayBuffer?a=new TextDecoder().decode(o.data):a=o.data;const u=JSON.parse(a);if(i.isVertexAI()){const d=BN(u);Object.assign(s,d)}else Object.assign(s,u);e(s)}class j1{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s,this.music=new Y1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,s,a,u,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const S=this.apiClient.getHeaders();e.config&&e.config.tools&&BT(e.config.tools)&&zT(S);const E=iR(S);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v);else{const z=this.apiClient.getApiKey();let X="BidiGenerateContent",Z="key";z!=null&&z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),X="BidiGenerateContentConstrained",Z="access_token"),v=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${X}?${Z}=${z}`}let A=()=>{};const N=new Promise(z=>{A=z}),w=e.callbacks,L=function(){var z;(z=w==null?void 0:w.onopen)===null||z===void 0||z.call(w),A({})},V=this.apiClient,$={onopen:L,onmessage:z=>{W1(V,w.onmessage,z)},onerror:(o=w==null?void 0:w.onerror)!==null&&o!==void 0?o:function(z){},onclose:(s=w==null?void 0:w.onclose)!==null&&s!==void 0?s:function(z){}},U=this.webSocketFactory.create(v,nR(E),$);U.connect(),await N;let k=Re(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){const z=this.apiClient.getProject(),X=this.apiClient.getLocation();k=`projects/${z}/locations/${X}/`+k}let ne={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ga.AUDIO]}:e.config.responseModalities=[ga.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ie=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],H=[];for(const z of ie)if(this.isCallableTool(z)){const X=z;H.push(await X.tool())}else H.push(z);H.length>0&&(e.config.tools=H);const Q={model:k,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ne=IN(this.apiClient,Q):ne=DN(this.apiClient,Q),delete ne.config,U.send(JSON.stringify(ne)),new tR(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const eR={turnComplete:!0};class tR{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=Xt(o.turns),e.isVertexAI()||(s=s.map(a=>Da(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(Z1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},eR),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:PN(e)}:o={realtimeInput:qN(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function nR(i){const e={};return i.forEach((o,s)=>{e[s]=o}),e}function iR(i){const e=new Headers;for(const[o,s]of Object.entries(i))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fg=10;function Qg(i){var e,o,s;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const d of(o=i==null?void 0:i.tools)!==null&&o!==void 0?o:[])if(No(d)){a=!0;break}if(!a)return!0;const u=(s=i==null?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function No(i){return"callTool"in i&&typeof i.callTool=="function"}function oR(i){var e,o,s;return(s=(o=(e=i.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(a=>No(a)))!==null&&s!==void 0?s:!1}function Jg(i){var e;const o=[];return!((e=i==null?void 0:i.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((s,a)=>{if(No(s))return;const u=s;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(a)}),o}function Yg(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sR extends Dn{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var s,a,u,d,h;const y=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!oR(o)||Qg(o.config))return await this.generateContentInternal(y);const p=Jg(o);if(p.length>0){const w=p.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let v,S;const E=Xt(y.contents),A=(u=(a=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&u!==void 0?u:Fg;let N=0;for(;N<A&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const w=v.candidates[0].content,L=[];for(const V of(h=(d=o.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(No(V)){const U=await V.callTool(v.functionCalls);L.push(...U)}N++,S={role:"user",parts:L},y.contents=Xt(y.contents),y.contents.push(w),y.contents.push(S),Yg(y.config)&&(E.push(w),E.push(S))}return Yg(y.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async o=>{var s,a,u,d,h;if(this.maybeMoveToResponseJsonSchem(o),Qg(o.config)){const S=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(S)}const y=Jg(o);if(y.length>0){const S=y.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(u=(a=(s=o==null?void 0:o.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,v=(h=(d=o==null?void 0:o.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var a;let u;const d=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((a=y==null?void 0:y.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?u=y==null?void 0:y.safetyAttributes:d.push(y);let h;return u?h={generatedImages:d,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async o=>{var s;const d={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((s=d.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Ui(Mn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const a={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async o=>{var s,a,u,d,h,y;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((a=o.video)===null||a===void 0)&&a.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((d=(u=o.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.uri&&(!((y=(h=o.source)===null||h===void 0?void 0:h.video)===null||y===void 0)&&y.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,s,a;const u=(o=e.config)===null||o===void 0?void 0:o.tools;if(!u)return e;const d=await Promise.all(u.map(async y=>No(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&BT(e.config.tools)){const y=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),zT(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var o,s,a;const u=new Map;for(const d of(s=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(No(d)){const h=d,y=await h.tool();for(const p of(a=y.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(u.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);u.set(p.name,h)}}return u}async processAfcStream(e){var o,s,a;const u=(a=(s=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Fg;let d=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(p,v,S){var E,A;return xo(this,arguments,function*(){for(var N,w,L,V;h<u;){d&&(h++,d=!1);const ne=yield ke(p.processParamsMaybeAddMcpUsage(S)),ie=yield ke(p.generateContentStreamInternal(ne)),H=[],Q=[];try{for(var $=!0,U=(w=void 0,Is(ie)),k;k=yield ke(U.next()),N=k.done,!N;$=!0){V=k.value,$=!1;const z=V;if(yield yield ke(z),z.candidates&&(!((E=z.candidates[0])===null||E===void 0)&&E.content)){Q.push(z.candidates[0].content);for(const X of(A=z.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(h<u&&X.functionCall){if(!X.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(X.functionCall.name)){const Z=yield ke(v.get(X.functionCall.name).callTool([X.functionCall]));H.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${X.functionCall.name}`)}}}}catch(z){w={error:z}}finally{try{!$&&!N&&(L=U.return)&&(yield ke(L.call(U)))}finally{if(w)throw w.error}}if(H.length>0){d=!0;const z=new Rs;z.candidates=[{content:{role:"user",parts:H}}],yield yield ke(z);const X=[];X.push(...Q),X.push({role:"user",parts:H});const Z=Xt(S.contents).concat(X);S.contents=Z}else break}})})(this,y,e)}async generateContentInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Gg(this.apiClient,e);return h=se("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Og(v),E=new Rs;return Object.assign(E,S),E})}else{const p=zg(this.apiClient,e);return h=se("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Hg(v),E=new Rs;return Object.assign(E,S),E})}}async generateContentStreamInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Gg(this.apiClient,e);return h=se("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),d.then(function(S){return xo(this,arguments,function*(){var E,A,N,w;try{for(var L=!0,V=Is(S),$;$=yield ke(V.next()),E=$.done,!E;L=!0){w=$.value,L=!1;const U=w,k=Og(yield ke(U.json()));k.sdkHttpResponse={headers:U.headers};const ne=new Rs;Object.assign(ne,k),yield yield ke(ne)}}catch(U){A={error:U}}finally{try{!L&&!E&&(N=V.return)&&(yield ke(N.call(V)))}finally{if(A)throw A.error}}})})}else{const p=zg(this.apiClient,e);return h=se("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),d.then(function(S){return xo(this,arguments,function*(){var E,A,N,w;try{for(var L=!0,V=Is(S),$;$=yield ke(V.next()),E=$.done,!E;L=!0){w=$.value,L=!1;const U=w,k=Hg(yield ke(U.json()));k.sdkHttpResponse={headers:U.headers};const ne=new Rs;Object.assign(ne,k),yield yield ke(ne)}}catch(U){A={error:U}}finally{try{!L&&!E&&(N=V.return)&&(yield ke(N.call(V)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=mb(this.apiClient,e);return h=se("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=pb(v),E=new Cg;return Object.assign(E,S),E})}else{const p=db(this.apiClient,e);return h=se("{model}:batchEmbedContents",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=hb(v),E=new Cg;return Object.assign(E,S),E})}}async generateImagesInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=xb(this.apiClient,e);return h=se("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=bb(v),E=new _g;return Object.assign(E,S),E})}else{const p=wb(this.apiClient,e);return h=se("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=Nb(v),E=new _g;return Object.assign(E,S),E})}}async editImageInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=rb(this.apiClient,e);return u=se("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const p=ub(y),v=new yw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=x1(this.apiClient,e);return u=se("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const p=N1(y),v=new vw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=a1(this.apiClient,e);return u=se("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const p=r1(y),v=new Sw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=h1(this.apiClient,e);return u=se("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const p=p1(y),v=new Tw;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Qb(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>bc(v))}else{const p=Fb(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>Nc(v))}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=e1(this.apiClient,e);return h=se("{models_url}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=n1(v),E=new Ag;return Object.assign(E,S),E})}else{const p=jb(this.apiClient,e);return h=se("{models_url}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=t1(v),E=new Ag;return Object.assign(E,S),E})}}async update(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=A1(this.apiClient,e);return h=se("{model}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>bc(v))}else{const p=_1(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>Nc(v))}}async delete(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=ob(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=lb(v),E=new wg;return Object.assign(E,S),E})}else{const p=ib(this.apiClient,e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=sb(v),E=new wg;return Object.assign(E,S),E})}}async countTokens(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=eb(this.apiClient,e);return h=se("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=nb(v),E=new xg;return Object.assign(E,S),E})}else{const p=jN(this.apiClient,e);return h=se("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=tb(v),E=new xg;return Object.assign(E,S),E})}}async computeTokens(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=JN(this.apiClient,e);return u=se("{model}:computeTokens",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const p=YN(y),v=new Ew;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Ub(this.apiClient,e);return h=se("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>{const S=Ib(v),E=new ya;return Object.assign(E,S),E})}else{const p=Lb(this.apiClient,e);return h=se("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>{const S=Db(v),E=new ya;return Object.assign(E,S),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lR extends Dn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:a,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=o.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:a,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=fw(e);return h=se("{operationName}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d}else{const p=cw(e);return h=se("{operationName}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=iw(e);return u=se("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aR(i){const e={},o=c(i,["data"]);if(o!=null&&f(e,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function rR(i){const e={},o=c(i,["parts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>yR(u))),f(e,["parts"],a)}const s=c(i,["role"]);return s!=null&&f(e,["role"],s),e}function uR(i,e,o){const s={},a=c(e,["expireTime"]);o!==void 0&&a!=null&&f(o,["expireTime"],a);const u=c(e,["newSessionExpireTime"]);o!==void 0&&u!=null&&f(o,["newSessionExpireTime"],u);const d=c(e,["uses"]);o!==void 0&&d!=null&&f(o,["uses"],d);const h=c(e,["liveConnectConstraints"]);o!==void 0&&h!=null&&f(o,["bidiGenerateContentSetup"],gR(i,h));const y=c(e,["lockAdditionalFields"]);return o!==void 0&&y!=null&&f(o,["fieldMask"],y),s}function cR(i,e){const o={},s=c(e,["config"]);return s!=null&&f(o,["config"],uR(i,s,o)),o}function fR(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&f(e,["fileUri"],o);const s=c(i,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function dR(i){const e={},o=c(i,["id"]);o!=null&&f(e,["id"],o);const s=c(i,["args"]);s!=null&&f(e,["args"],s);const a=c(i,["name"]);if(a!=null&&f(e,["name"],a),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mR(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&f(e,["enableWidget"],o),e}function hR(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&f(e,["timeRangeFilter"],o),e}function pR(i,e){const o={},s=c(i,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=c(i,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(i,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(i,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const h=c(i,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const y=c(i,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const p=c(i,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=c(i,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","speechConfig"],Kc(S));const E=c(i,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=c(i,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const N=c(i,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],rR(mt(N)));const w=c(i,["tools"]);if(e!==void 0&&w!=null){let ie=Mo(w);Array.isArray(ie)&&(ie=ie.map(H=>SR(Ro(H)))),f(e,["setup","tools"],ie)}const L=c(i,["sessionResumption"]);e!==void 0&&L!=null&&f(e,["setup","sessionResumption"],vR(L));const V=c(i,["inputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","inputAudioTranscription"],V);const $=c(i,["outputAudioTranscription"]);e!==void 0&&$!=null&&f(e,["setup","outputAudioTranscription"],$);const U=c(i,["realtimeInputConfig"]);e!==void 0&&U!=null&&f(e,["setup","realtimeInputConfig"],U);const k=c(i,["contextWindowCompression"]);e!==void 0&&k!=null&&f(e,["setup","contextWindowCompression"],k);const ne=c(i,["proactivity"]);return e!==void 0&&ne!=null&&f(e,["setup","proactivity"],ne),o}function gR(i,e){const o={},s=c(e,["model"]);s!=null&&f(o,["setup","model"],Re(i,s));const a=c(e,["config"]);return a!=null&&f(o,["config"],pR(a,o)),o}function yR(i){const e={},o=c(i,["mediaResolution"]);o!=null&&f(e,["mediaResolution"],o);const s=c(i,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(i,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(i,["fileData"]);u!=null&&f(e,["fileData"],fR(u));const d=c(i,["functionCall"]);d!=null&&f(e,["functionCall"],dR(d));const h=c(i,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const y=c(i,["inlineData"]);y!=null&&f(e,["inlineData"],aR(y));const p=c(i,["text"]);p!=null&&f(e,["text"],p);const v=c(i,["thought"]);v!=null&&f(e,["thought"],v);const S=c(i,["thoughtSignature"]);S!=null&&f(e,["thoughtSignature"],S);const E=c(i,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function vR(i){const e={},o=c(i,["handle"]);if(o!=null&&f(e,["handle"],o),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function SR(i){const e={},o=c(i,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(S=>S)),f(e,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=c(i,["computerUse"]);a!=null&&f(e,["computerUse"],a);const u=c(i,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const d=c(i,["codeExecution"]);if(d!=null&&f(e,["codeExecution"],d),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=c(i,["googleMaps"]);h!=null&&f(e,["googleMaps"],mR(h));const y=c(i,["googleSearch"]);y!=null&&f(e,["googleSearch"],hR(y));const p=c(i,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TR(i){const e=[];for(const o in i)if(Object.prototype.hasOwnProperty.call(i,o)){const s=i[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(u=>`${o}.${u}`);e.push(...a)}else e.push(o)}return e.join(",")}function ER(i,e){let o=null;const s=i.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(i.bidiGenerateContentSetup=u,o=u):delete i.bidiGenerateContentSetup}else s!==void 0&&delete i.bidiGenerateContentSetup;const a=i.fieldMask;if(o){const u=TR(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)u?i.fieldMask=u:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(p=>d.includes(p)?`generationConfig.${p}`:p));const y=[];u&&y.push(u),h.length>0&&y.push(...h),y.length>0?i.fieldMask=y.join(","):delete i.fieldMask}else delete i.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?i.fieldMask=a.join(","):delete i.fieldMask;return i}class CR extends Dn{constructor(e){super(),this.apiClient=e}async create(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=cR(this.apiClient,e);u=se("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const y=ER(h,e.config);return a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _R(i,e){const o={},s=c(i,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),o}function AR(i){const e={},o=c(i,["config"]);return o!=null&&_R(o,e),e}function wR(i,e){const o={},s=c(i,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),o}function xR(i){const e={},o=c(i,["name"]);o!=null&&f(e,["_url","name"],o);const s=c(i,["config"]);return s!=null&&wR(s,e),e}function NR(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","name"],o),e}function bR(i,e){const o={},s=c(i,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const a=c(i,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),o}function RR(i){const e={},o=c(i,["name"]);o!=null&&f(e,["name"],o);const s=c(i,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(i,["done"]);a!=null&&f(e,["done"],a);const u=c(i,["error"]);u!=null&&f(e,["error"],u);const d=c(i,["response"]);return d!=null&&f(e,["response"],DR(d)),e}function MR(i){const e={},o=c(i,["fileSearchStoreName"]);o!=null&&f(e,["_url","file_search_store_name"],o);const s=c(i,["fileName"]);s!=null&&f(e,["fileName"],s);const a=c(i,["config"]);return a!=null&&bR(a,e),e}function DR(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["parent"]);s!=null&&f(e,["parent"],s);const a=c(i,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function IR(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function LR(i){const e={},o=c(i,["config"]);return o!=null&&IR(o,e),e}function UR(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["fileSearchStores"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["fileSearchStores"],u)}return e}function qR(i,e){const o={},s=c(i,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const a=c(i,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const u=c(i,["customMetadata"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>y)),f(e,["customMetadata"],h)}const d=c(i,["chunkingConfig"]);return e!==void 0&&d!=null&&f(e,["chunkingConfig"],d),o}function PR(i){const e={},o=c(i,["fileSearchStoreName"]);o!=null&&f(e,["_url","file_search_store_name"],o);const s=c(i,["config"]);return s!=null&&qR(s,e),e}function BR(i){const e={},o=c(i,["sdkHttpResponse"]);return o!=null&&f(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zR(i,e){const o={},s=c(i,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),o}function GR(i){const e={},o=c(i,["name"]);o!=null&&f(e,["_url","name"],o);const s=c(i,["config"]);return s!=null&&zR(s,e),e}function HR(i){const e={},o=c(i,["name"]);return o!=null&&f(e,["_url","name"],o),e}function OR(i,e){const o={},s=c(i,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(i,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),o}function VR(i){const e={},o=c(i,["parent"]);o!=null&&f(e,["_url","parent"],o);const s=c(i,["config"]);return s!=null&&OR(s,e),e}function kR(i){const e={},o=c(i,["sdkHttpResponse"]);o!=null&&f(e,["sdkHttpResponse"],o);const s=c(i,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(i,["documents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FR extends Dn{constructor(e){super(),this.apiClient=e,this.list=async o=>new Ui(Mn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HR(e);return u=se("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var o,s;let a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=GR(e);a=se("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=VR(e);return u=se("{parent}/documents",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const p=kR(y),v=new Cw;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QR extends Dn{constructor(e,o=new FR(e)){super(),this.apiClient=e,this.documents=o,this.list=async(s={})=>new Ui(Mn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=AR(e);return u=se("fileSearchStores",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async get(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=NR(e);return u=se("{name}",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var o,s;let a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xR(e);a=se("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=LR(e);return u=se("fileSearchStores",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const p=UR(y),v=new _w;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=PR(e);return u=se("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const p=BR(y),v=new Aw;return Object.assign(v,p),v})}}async importFile(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MR(e);return u=se("{file_search_store_name}:importFile",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const p=RR(y),v=new Fc;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JR(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function YR(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function $R(i,e,o){const s={};if(c(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=c(i,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),c(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(i,["epochCount"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","epochCount"],u);const d=c(i,["learningRateMultiplier"]);if(d!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],d),c(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=c(i,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const y=c(i,["learningRate"]);if(e!==void 0&&y!=null&&f(e,["tuningTask","hyperparameters","learningRate"],y),c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function KR(i,e,o){const s={};let a=c(o,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const A=c(i,["validationDataset"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec"],$g(A))}else if(a==="PREFERENCE_TUNING"){const A=c(i,["validationDataset"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec"],$g(A))}const u=c(i,["tunedModelDisplayName"]);e!==void 0&&u!=null&&f(e,["tunedModelDisplayName"],u);const d=c(i,["description"]);e!==void 0&&d!=null&&f(e,["description"],d);let h=c(o,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=c(i,["epochCount"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(h==="PREFERENCE_TUNING"){const A=c(i,["epochCount"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let y=c(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const A=c(i,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(y==="PREFERENCE_TUNING"){const A=c(i,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let p=c(o,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=c(i,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(p==="PREFERENCE_TUNING"){const A=c(i,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=c(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=c(i,["adapterSize"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=c(i,["adapterSize"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(c(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=c(i,["labels"]);e!==void 0&&S!=null&&f(e,["labels"],S);const E=c(i,["beta"]);return e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function XR(i,e){const o={},s=c(i,["baseModel"]);s!=null&&f(o,["baseModel"],s);const a=c(i,["preTunedModel"]);a!=null&&f(o,["preTunedModel"],a);const u=c(i,["trainingDataset"]);u!=null&&aM(u);const d=c(i,["config"]);return d!=null&&$R(d,o),o}function ZR(i,e){const o={},s=c(i,["baseModel"]);s!=null&&f(o,["baseModel"],s);const a=c(i,["preTunedModel"]);a!=null&&f(o,["preTunedModel"],a);const u=c(i,["trainingDataset"]);u!=null&&rM(u,o,e);const d=c(i,["config"]);return d!=null&&KR(d,o,e),o}function WR(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function jR(i,e){const o={},s=c(i,["name"]);return s!=null&&f(o,["_url","name"],s),o}function eM(i,e,o){const s={},a=c(i,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(i,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function tM(i,e,o){const s={},a=c(i,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(i,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function nM(i,e){const o={},s=c(i,["config"]);return s!=null&&eM(s,o),o}function iM(i,e){const o={},s=c(i,["config"]);return s!=null&&tM(s,o),o}function oM(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["nextPageToken"]);a!=null&&f(o,["nextPageToken"],a);const u=c(i,["tunedModels"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>GT(h))),f(o,["tuningJobs"],d)}return o}function sM(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["nextPageToken"]);a!=null&&f(o,["nextPageToken"],a);const u=c(i,["tuningJobs"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>Mc(h))),f(o,["tuningJobs"],d)}return o}function lM(i,e){const o={},s=c(i,["name"]);s!=null&&f(o,["model"],s);const a=c(i,["name"]);return a!=null&&f(o,["endpoint"],a),o}function aM(i,e){const o={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(i,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(o,["examples","examples"],a)}return o}function rM(i,e,o){const s={};let a=c(o,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const d=c(i,["gcsUri"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(a==="PREFERENCE_TUNING"){const d=c(i,["gcsUri"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}let u=c(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const d=c(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(u==="PREFERENCE_TUNING"){const d=c(i,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}if(c(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function GT(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["name"]);a!=null&&f(o,["name"],a);const u=c(i,["state"]);u!=null&&f(o,["state"],TT(u));const d=c(i,["createTime"]);d!=null&&f(o,["createTime"],d);const h=c(i,["tuningTask","startTime"]);h!=null&&f(o,["startTime"],h);const y=c(i,["tuningTask","completeTime"]);y!=null&&f(o,["endTime"],y);const p=c(i,["updateTime"]);p!=null&&f(o,["updateTime"],p);const v=c(i,["description"]);v!=null&&f(o,["description"],v);const S=c(i,["baseModel"]);S!=null&&f(o,["baseModel"],S);const E=c(i,["_self"]);return E!=null&&f(o,["tunedModel"],lM(E)),o}function Mc(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["name"]);a!=null&&f(o,["name"],a);const u=c(i,["state"]);u!=null&&f(o,["state"],TT(u));const d=c(i,["createTime"]);d!=null&&f(o,["createTime"],d);const h=c(i,["startTime"]);h!=null&&f(o,["startTime"],h);const y=c(i,["endTime"]);y!=null&&f(o,["endTime"],y);const p=c(i,["updateTime"]);p!=null&&f(o,["updateTime"],p);const v=c(i,["error"]);v!=null&&f(o,["error"],v);const S=c(i,["description"]);S!=null&&f(o,["description"],S);const E=c(i,["baseModel"]);E!=null&&f(o,["baseModel"],E);const A=c(i,["tunedModel"]);A!=null&&f(o,["tunedModel"],A);const N=c(i,["preTunedModel"]);N!=null&&f(o,["preTunedModel"],N);const w=c(i,["supervisedTuningSpec"]);w!=null&&f(o,["supervisedTuningSpec"],w);const L=c(i,["preferenceOptimizationSpec"]);L!=null&&f(o,["preferenceOptimizationSpec"],L);const V=c(i,["tuningDataStats"]);V!=null&&f(o,["tuningDataStats"],V);const $=c(i,["encryptionSpec"]);$!=null&&f(o,["encryptionSpec"],$);const U=c(i,["partnerModelTuningSpec"]);U!=null&&f(o,["partnerModelTuningSpec"],U);const k=c(i,["customBaseModel"]);k!=null&&f(o,["customBaseModel"],k);const ne=c(i,["experiment"]);ne!=null&&f(o,["experiment"],ne);const ie=c(i,["labels"]);ie!=null&&f(o,["labels"],ie);const H=c(i,["outputUri"]);H!=null&&f(o,["outputUri"],H);const Q=c(i,["pipelineJob"]);Q!=null&&f(o,["pipelineJob"],Q);const z=c(i,["serviceAccount"]);z!=null&&f(o,["serviceAccount"],z);const X=c(i,["tunedModelDisplayName"]);X!=null&&f(o,["tunedModelDisplayName"],X);const Z=c(i,["veoTuningSpec"]);return Z!=null&&f(o,["veoTuningSpec"],Z),o}function uM(i,e){const o={},s=c(i,["sdkHttpResponse"]);s!=null&&f(o,["sdkHttpResponse"],s);const a=c(i,["name"]);a!=null&&f(o,["name"],a);const u=c(i,["metadata"]);u!=null&&f(o,["metadata"],u);const d=c(i,["done"]);d!=null&&f(o,["done"],d);const h=c(i,["error"]);return h!=null&&f(o,["error"],h),o}function $g(i,e){const o={},s=c(i,["gcsUri"]);s!=null&&f(o,["validationDatasetUri"],s);const a=c(i,["vertexDatasetResource"]);return a!=null&&f(o,["validationDatasetUri"],a),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cM extends Dn{constructor(e){super(),this.apiClient=e,this.get=async o=>await this.getInternal(o),this.list=async(o={})=>new Ui(Mn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const a={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:a});return u.baseModel=void 0,await this.tuneInternal(u)}else{const a=Object.assign({},o);return await this.tuneInternal(a)}else{const a=Object.assign({},o),u=await this.tuneMldevInternal(a);let d="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?d=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(d=u.name.split("/operations/")[0]),{name:d,state:_c.JOB_STATE_QUEUED}}}}async getInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=jR(e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>Mc(v))}else{const p=WR(e);return h=se("{name}",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>GT(v))}}async listInternal(e){var o,s,a,u;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=iM(e);return h=se("tuningJobs",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=sM(v),E=new Ng;return Object.assign(E,S),E})}else{const p=nM(e);return h=se("tunedModels",p._url),y=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(S=>{const E=S;return E.sdkHttpResponse={headers:v.headers},E})),d.then(v=>{const S=oM(v),E=new Ng;return Object.assign(E,S),E})}}async cancel(e){var o,s,a,u;let d="",h={};if(this.apiClient.isVertexAI()){const y=YR(e);d=se("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=JR(e);d=se("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async tuneInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const h=ZR(e,e);return u=se("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>Mc(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XR(e);return u=se("tunedModels",h._url),d=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>uM(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fM{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dM=1024*1024*8,mM=3,hM=1e3,pM=2,Sa="x-goog-upload-status";async function gM(i,e,o){var s;const a=await HT(i,e,o),u=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Sa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function yM(i,e,o){var s;const a=await HT(i,e,o),u=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Sa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=hT(u),h=new Qc;return Object.assign(h,d),h}async function HT(i,e,o){var s,a;let u=0,d=0,h=new Ac(new Response),y="upload";for(u=i.size;d<u;){const p=Math.min(dM,u-d),v=i.slice(d,d+p);d+p>=u&&(y+=", finalize");let S=0,E=hM;for(;S<mM&&(h=await o.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(d),"Content-Length":String(p)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Sa]));)S++,await SM(E),E=E*pM;if(d+=p,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Sa])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function vM(i){return{size:i.size,type:i.type}}function SM(i){return new Promise(e=>setTimeout(e,i))}class TM{async upload(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gM(e,o,s)}async uploadToFileSearchStore(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yM(e,o,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EM{create(e,o,s){return new CM(e,o,s)}}class CM{constructor(e,o,s){this.url=e,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kg="x-goog-api-key";class _M{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(Kg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Kg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AM="gl-node/";class wM{constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const s=tw(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const a=new _M(this.apiKey);this.apiClient=new H1({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:AM+"web",uploader:new TM,downloader:new fM}),this.models=new sR(this.apiClient),this.live=new j1(this.apiClient,a,new EM),this.batches=new Mx(this.apiClient),this.chats=new fN(this.models,this.apiClient),this.caches=new rN(this.apiClient),this.files=new EN(this.apiClient),this.operations=new lR(this.apiClient),this.authTokens=new CR(this.apiClient),this.tunings=new cM(this.apiClient),this.fileSearchStores=new QR(this.apiClient)}}const OT=()=>new wM({apiKey:"PLACEHOLDER_API_KEY"});async function xM(i,e,o,s){var v,S,E,A;const a=o.openaiApiKey;let u=(v=o.openaiBaseUrl)==null?void 0:v.trim();const d=o.openaiModel||"gemini-2.5-flash";if(!u)throw new Error("OpenAI Base URL is missing in settings. Please configure it (e.g., https://api.openai.com/v1).");/^https?:\/\//i.test(u)||(u=`https://${u}`),u=u.replace(/\/+$/,"");const h=`You are an empathetic, articulate, and observant writer. 
Your goal is to turn mundane notes into a meaningful narrative that feels personal and warm.
You MUST respond with a valid JSON object matching this schema:
${JSON.stringify(s,null,2)}
Do not wrap the JSON in markdown code blocks. Just return the raw JSON string.`;let y=i;e.length>0&&!0&&(y=[{type:"text",text:i},...e.map(N=>({type:"image_url",image_url:{url:N}}))]);try{const N=await fetch(`${u}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({model:d,messages:[{role:"system",content:h},{role:"user",content:y}],temperature:.7,response_format:{type:"json_object"}})});if(!N.ok){const $=await N.text();throw new Error(`OpenAI API Error: ${N.status} - ${$}`)}const L=(A=(E=(S=(await N.json()).choices)==null?void 0:S[0])==null?void 0:E.message)==null?void 0:A.content;if(!L)throw new Error("Empty response from OpenAI provider");const V=L.replace(/^```(?:json)?\s*/,"").replace(/\s*```$/,"").trim();return JSON.parse(V)}catch(N){throw console.error("OpenAI Generation Error:",N),N.name==="TypeError"&&N.message==="Failed to fetch"?new Error("Connection failed. Check your Base URL. If you are using a browser, ensure the API endpoint supports CORS."):N}}async function NM(i,e,o,s){var E;const a=s.openaiApiKey;let u=(E=s.openaiBaseUrl)==null?void 0:E.trim();if(!u)throw new Error("OpenAI Base URL is missing.");/^https?:\/\//i.test(u)||(u=`https://${u}`),u=u.replace(/\/+$/,"");const d=atob(i),h=new Array(d.length);for(let A=0;A<d.length;A++)h[A]=d.charCodeAt(A);const y=new Uint8Array(h),p=new Blob([y],{type:e}),v=new FormData,S=e.split("/")[1]||"webm";v.append("file",p,`recording.${S}`),v.append("model","whisper-1"),o==="zh"?v.append("language","zh"):v.append("language","en");try{const A=await fetch(`${u}/audio/transcriptions`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:v});if(!A.ok){const w=await A.text();throw new Error(`OpenAI Transcription Error: ${A.status} - ${w}`)}return(await A.json()).text||""}catch(A){throw console.error("OpenAI Transcription Error:",A),A.name==="TypeError"&&A.message==="Failed to fetch"?new Error("Connection failed during transcription. Check Base URL and CORS."):A}}const VT=async(i,e,o="default",s)=>{if(i.length===0)throw new Error("No fragments to summarize.");const a=i.map(N=>{const w=new Date(N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),L=N.tags&&N.tags.length>0?` [Tags: ${N.tags.join(", ")}]`:"";return`[${w}] ${N.content}${L}`}).join(`
`),u=[];i.forEach(N=>{N.images&&N.images.length>0&&u.push(...N.images)});const d=e==="zh"?"IMPORTANT: Write the entire response (title, content, mood, reflection, tags) in Simplified Chinese (Mandarin).":"Write in English.";let h="";o!=="default"&&(h=`ADOPT A SPECIFIC TONE: The user explicitly requested a "${o}" writing style. Ensure the vocabulary, sentence structure, and emotional weight reflect this specific persona/vibe.`);const y=`
    Here are my raw fragmented notes from today:
    
    ${a}
    
    ${u.length>0?`I have also attached ${u.length} images related to these notes. Please incorporate details from these images into the diary entry where relevant.`:""}

    Please weave these fragments into a cohesive, beautifully written, first-person diary entry.
    Infer the underlying mood and themes. 
    Add a title that captures the essence of the day.
    Include a short "reflection" that synthesizes a takeaway or philosophical thought based on the events.
    Extract 3-5 relevant keywords/tags.

    ${h}

    ${d}
  `,p={type:yt.OBJECT,properties:{title:{type:yt.STRING,description:"A creative title for the diary entry"},content:{type:yt.STRING,description:"The main body of the diary entry, rich in description and emotion."},mood:{type:yt.STRING,description:"One or two words describing the overall mood (e.g., Melancholic, Productive, Serene)"},reflection:{type:yt.STRING,description:"A profound or summarizing closing thought."},tags:{type:yt.ARRAY,items:{type:yt.STRING},description:"Key themes or topics from the day"}},required:["title","content","mood","reflection","tags"],propertyOrdering:["title","mood","content","reflection","tags"]};if(s&&s.provider==="openai")return xM(y,u,s,p);const v=OT();let S;const E=3,A=[{text:y}];u.forEach(N=>{const w=N.match(/^data:([^;]+);base64,(.+)$/);w&&A.push({inlineData:{mimeType:w[1],data:w[2]}})});for(let N=0;N<E;N++)try{const L=(await v.models.generateContent({model:"gemini-2.5-flash",contents:[{parts:A}],config:{responseMimeType:"application/json",responseSchema:p,systemInstruction:"You are an empathetic, articulate, and observant writer. Your goal is to turn mundane notes into a meaningful narrative that feels personal and warm."}})).text;if(!L)throw new Error("Empty response from AI");return JSON.parse(L)}catch(w){console.warn(`Attempt ${N+1} failed:`,w),S=w,N<E-1&&await new Promise(L=>setTimeout(L,1e3*Math.pow(2,N)))}throw console.error("Gemini Service Error after retries:",S),S},bM=async(i,e,o,s)=>{if(s&&s.provider==="openai")return NM(i,e,o,s);const a=OT(),u=o==="zh"?"Transcribe this audio directly into Simplified Chinese text. Do not add any explanations.":"Transcribe this audio directly into English text. Do not add any explanations.";try{return(await a.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:e,data:i}},{text:u}]}})).text||""}catch(d){throw console.error("Transcription Error:",d),d}},ri=Lc((i,e)=>({currentDate:new Date().toISOString().split("T")[0],currentDayData:{fragments:[],diaryEntry:null},allDates:[],searchQuery:"",searchResults:[],isGenerating:!1,selectedTone:"default",error:null,setCurrentDate:o=>i({currentDate:o}),setSearchQuery:o=>i({searchQuery:o}),setSelectedTone:o=>i({selectedTone:o}),setError:o=>i({error:o}),loadCurrentDayData:async()=>{try{const{currentDate:o}=e();console.log("[loadCurrentDayData] Loading for date:",o);const[s,a]=await Promise.all([fT(o),dT(o)]);console.log("[loadCurrentDayData] Loaded fragments:",s),console.log("[loadCurrentDayData] Fragment count:",s.length),s.length>0&&console.log("[loadCurrentDayData] First fragment:",s[0]),i({currentDayData:{fragments:s,diaryEntry:a}})}catch(o){console.error("Failed to load day data:",o),i({error:"Failed to load day data"})}},loadAllDates:async()=>{try{const o=await mT();i({allDates:o})}catch(o){console.error("Failed to load dates:",o),i({error:"Failed to load dates"})}},addFragment:async(o,s=[],a=[])=>{const u={id:crypto.randomUUID(),content:o,timestamp:Date.now(),tags:s,images:a};try{const{currentDate:d}=e();await Ec(d,u),await e().loadCurrentDayData(),await e().loadAllDates()}catch(d){console.error("Failed to add fragment:",d),i({error:"Failed to add fragment"})}},deleteFragment:async o=>{try{await YA(o),await e().loadCurrentDayData(),await e().loadAllDates()}catch(s){console.error("Failed to delete fragment:",s),i({error:"Failed to delete fragment"})}},updateFragment:async(o,s,a,u=[])=>{try{await JA(o,s,a,u),await e().loadCurrentDayData()}catch(d){console.error("Failed to update fragment:",d),i({error:"Failed to update fragment"})}},generateDiary:async(o,s)=>{const{currentDayData:a,currentDate:u,selectedTone:d}=e();if(a.fragments.length!==0){i({isGenerating:!0,error:null});try{const h=await VT(a.fragments,o,d,s);await Ds(u,h),await e().loadCurrentDayData()}catch(h){console.error(h),i({error:"Failed to generate diary entry"})}finally{i({isGenerating:!1})}}},updateDiaryEntry:async o=>{try{const{currentDate:s}=e();await Ds(s,o),await e().loadCurrentDayData()}catch(s){console.error("Failed to update entry:",s),i({error:"Failed to update entry"})}},clearDayData:async()=>{try{const{currentDate:o}=e();await KA(o),await e().loadCurrentDayData(),await e().loadAllDates()}catch(o){console.error("Failed to clear day:",o),i({error:"Failed to clear day data"})}},performSearch:async(o,s)=>{if(!o.trim()){i({searchResults:[]});return}try{const[a,u]=await Promise.all([XA(o),ZA(o)]),d=[],h=(y,p,v=40)=>{const S=y.toLowerCase().indexOf(p.toLowerCase());if(S===-1)return y.slice(0,100);const E=Math.max(0,S-v),A=Math.min(y.length,S+p.length+v);let N=y.slice(E,A);return E>0&&(N="..."+N),A<y.length&&(N=N+"..."),N};u.forEach(({date:y,entry:p})=>{const{title:v,content:S,mood:E,reflection:A,tags:N}=p,w=o.toLowerCase();v.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:v,matchField:s.titleLabel}):S.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:h(S,o),matchField:s.contentLabel}):E.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:E,matchField:s.moodLabel}):A.toLowerCase().includes(w)?d.push({date:y,type:"diary",preview:h(A,o),matchField:s.reflectionLabel}):N.some(L=>L.toLowerCase().includes(w))&&d.push({date:y,type:"diary",preview:N.join(", "),matchField:s.tagsLabel})}),a.forEach(({date:y,fragment:p})=>{var S;const v=o.toLowerCase();p.content.toLowerCase().includes(v)?d.push({date:y,type:"fragment",id:p.id,preview:h(p.content,o),matchField:s.fragment}):(S=p.tags)!=null&&S.some(E=>E.toLowerCase().includes(v))&&d.push({date:y,type:"fragment",id:p.id,preview:p.tags.join(", "),matchField:s.tagsLabel})}),i({searchResults:d})}catch(a){console.error("Search failed:",a),i({searchResults:[],error:"Search failed"})}},handleSearchResultSelect:o=>{i({currentDate:o,searchQuery:""}),e().loadCurrentDayData()},importData:async o=>{try{for(const[s,a]of Object.entries(o)){for(const u of a.fragments)await Ec(s,u);a.diaryEntry&&await Ds(s,a.diaryEntry)}await e().loadCurrentDayData(),await e().loadAllDates(),console.log("Import completed successfully")}catch(s){console.error("Failed to import data:",s),i({error:"Failed to import data"})}},exportAllData:async()=>{try{return await $A()}catch(o){throw console.error("Failed to export data:",o),o}}}));var Xe=(i=>(i.COMPOSING="COMPOSING",i.GENERATING="GENERATING",i.READING="READING",i.ERROR="ERROR",i.SEARCH="SEARCH",i))(Xe||{});const zs=Lc((i,e)=>({viewState:Xe.COMPOSING,isHistoryOpen:!1,isSettingsOpen:!1,showClearConfirm:!1,setViewState:o=>i({viewState:o}),setHistoryOpen:o=>i({isHistoryOpen:o}),setSettingsOpen:o=>i({isSettingsOpen:o}),setShowClearConfirm:o=>i({showClearConfirm:o}),openHistory:()=>i({isHistoryOpen:!0}),closeHistory:()=>i({isHistoryOpen:!1}),openSettings:()=>i({isSettingsOpen:!0}),closeSettings:()=>i({isSettingsOpen:!1}),showClearConfirmation:()=>i({showClearConfirm:!0}),hideClearConfirmation:()=>i({showClearConfirm:!1}),backToFragments:()=>i({viewState:Xe.COMPOSING}),setToComposing:()=>i({viewState:Xe.COMPOSING}),setToReading:()=>i({viewState:Xe.READING})}));function RM(i,e){let o;try{o=i()}catch{return}return{getItem:a=>{var u;const d=y=>y===null?null:JSON.parse(y,void 0),h=(u=o.getItem(a))!=null?u:null;return h instanceof Promise?h.then(d):d(h)},setItem:(a,u)=>o.setItem(a,JSON.stringify(u,void 0)),removeItem:a=>o.removeItem(a)}}const Dc=i=>e=>{try{const o=i(e);return o instanceof Promise?o:{then(s){return Dc(s)(o)},catch(s){return this}}}catch(o){return{then(s){return this},catch(s){return Dc(s)(o)}}}},MM=(i,e)=>(o,s,a)=>{let u={storage:RM(()=>localStorage),partialize:w=>w,version:0,merge:(w,L)=>({...L,...w}),...e},d=!1;const h=new Set,y=new Set;let p=u.storage;if(!p)return i((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...w)},s,a);const v=()=>{const w=u.partialize({...s()});return p.setItem(u.name,{state:w,version:u.version})},S=a.setState;a.setState=(w,L)=>(S(w,L),v());const E=i((...w)=>(o(...w),v()),s,a);a.getInitialState=()=>E;let A;const N=()=>{var w,L;if(!p)return;d=!1,h.forEach($=>{var U;return $((U=s())!=null?U:E)});const V=((L=u.onRehydrateStorage)==null?void 0:L.call(u,(w=s())!=null?w:E))||void 0;return Dc(p.getItem.bind(p))(u.name).then($=>{if($)if(typeof $.version=="number"&&$.version!==u.version){if(u.migrate){const U=u.migrate($.state,$.version);return U instanceof Promise?U.then(k=>[!0,k]):[!0,U]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,$.state];return[!1,void 0]}).then($=>{var U;const[k,ne]=$;if(A=u.merge(ne,(U=s())!=null?U:E),o(A,!0),k)return v()}).then(()=>{V==null||V(A,void 0),A=s(),d=!0,y.forEach($=>$(A))}).catch($=>{V==null||V(void 0,$)})};return a.persist={setOptions:w=>{u={...u,...w},w.storage&&(p=w.storage)},clearStorage:()=>{p==null||p.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>N(),hasHydrated:()=>d,onHydrate:w=>(h.add(w),()=>{h.delete(w)}),onFinishHydration:w=>(y.add(w),()=>{y.delete(w)})},u.skipHydration||N(),A||E},DM=MM,IM="https://api.302.ai/v1",LM="gemini-2.5-flash",UM="sk-Xc1xkQKZmbBk3TCP2njCcM1fuTsh9AcQMONlbZHhLjJbwHZ3",Io=Lc()(DM((i,e)=>({language:"en",apiConfig:{provider:"openai",openaiBaseUrl:IM,openaiApiKey:UM,openaiModel:LM},setLanguage:o=>{i({language:o})},setApiConfig:o=>{i({apiConfig:o})}}),{name:"nimo-settings",partialize:i=>({language:i.language,apiConfig:i.apiConfig})})),qM=()=>{const{language:i,setLanguage:e}=Io(),{searchQuery:o,setSearchQuery:s}=ri(),{openHistory:a,openSettings:u}=zs(),d=rn(i);return C.jsxs("header",{className:"py-4 md:py-6 px-4 md:px-8 max-w-4xl mx-auto w-full flex flex-wrap md:flex-nowrap justify-between items-center gap-4",children:[C.jsxs("div",{className:"flex items-center gap-4 select-none shrink-0",children:[C.jsx("button",{onClick:u,className:"text-gray-500 hover:text-indigo-600 transition-colors p-2 -ml-2 rounded-lg hover:bg-gray-100",title:d.settings,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),C.jsx("div",{className:"flex items-center gap-3",children:C.jsx("h1",{className:"text-2xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 tracking-tight",children:i==="zh"?"":"Nimo"})})]}),C.jsx("div",{className:"flex-grow order-3 md:order-2 w-full md:w-auto relative",children:C.jsxs("div",{className:"relative group",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 text-gray-400 group-focus-within:text-indigo-500 transition-colors",children:C.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),C.jsx("input",{type:"text",value:o,onChange:h=>s(h.target.value),placeholder:d.searchPlaceholder,className:"block w-full pl-10 pr-8 py-2 border border-gray-200 rounded-full leading-5 bg-gray-50 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 focus:bg-white transition-all duration-200 text-sm"}),o&&C.jsx("button",{onClick:()=>s(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",title:d.clearSearch,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:C.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})]})}),C.jsxs("div",{className:"flex items-center gap-2 shrink-0 order-2 md:order-3",children:[C.jsx("button",{onClick:()=>e(i==="en"?"zh":"en"),className:"text-xs font-medium px-3 py-1.5 rounded-full border border-gray-200 hover:bg-gray-100 text-gray-600 transition-colors",children:i==="en"?"":"English"}),C.jsx("button",{onClick:a,className:"text-gray-500 hover:text-indigo-600 transition-colors p-2 rounded-lg hover:bg-gray-100",title:d.viewHistory,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})})]})]})},kT=i=>{const e=i.getFullYear(),o=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${e}-${o}-${s}`},FT=()=>kT(new Date),Gs=(i,e="en")=>{const[o,s,a]=i.split("-").map(Number),u=new Date(o,s-1,a),d=new Date;d.setHours(0,0,0,0);const h=new Date(d);h.setDate(d.getDate()-1);const y=iS[e];if(u.getTime()===d.getTime())return y.today;if(u.getTime()===h.getTime())return y.yesterday;const p=e==="zh"?"zh-CN":"en-US";return u.toLocaleDateString(p,{weekday:"long",month:"short",day:"numeric"})},Xg=(i,e)=>{const[o,s,a]=i.split("-").map(Number),u=new Date(o,s-1,a);return u.setDate(u.getDate()+e),kT(u)},PM=({selectedDate:i,onSelect:e,maxDate:o,language:s,onClose:a})=>{const[u,d,h]=i.split("-").map(Number),[y,p]=me.useState(new Date(u,d-1,1)),v=s==="zh"?["","","","","","",""]:["Su","Mo","Tu","We","Th","Fr","Sa"],S=s==="zh"?["","","","","","","","","","","",""]:["January","February","March","April","May","June","July","August","September","October","November","December"],E=(Q,z)=>new Date(Q,z+1,0).getDate(),A=(Q,z)=>new Date(Q,z,1).getDay(),N=y.getFullYear(),w=y.getMonth(),L=E(N,w),V=A(N,w),$=Q=>`${N}-${String(w+1).padStart(2,"0")}-${String(Q).padStart(2,"0")}`===i,U=Q=>`${N}-${String(w+1).padStart(2,"0")}-${String(Q).padStart(2,"0")}`>o,k=Q=>{const z=new Date;return z.getDate()===Q&&z.getMonth()===w&&z.getFullYear()===N},ne=Q=>{Q.stopPropagation(),p(new Date(N,w-1,1))},ie=Q=>{Q.stopPropagation(),p(new Date(N,w+1,1))},H=Q=>{if(U(Q))return;const z=`${N}-${String(w+1).padStart(2,"0")}-${String(Q).padStart(2,"0")}`;e(z),a()};return C.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-2xl shadow-xl border border-gray-100 p-3 w-64 z-50 animate-in zoom-in-95 duration-200 select-none",onClick:Q=>Q.stopPropagation(),children:[C.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[C.jsx("button",{onClick:ne,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:C.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})}),C.jsxs("div",{className:"font-serif font-semibold text-sm text-gray-800",children:[S[w]," ",N]}),C.jsx("button",{onClick:ie,className:"p-1 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:C.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})})]}),C.jsx("div",{className:"grid grid-cols-7 mb-1",children:v.map(Q=>C.jsx("div",{className:"text-center text-[10px] font-medium text-gray-400 py-1",children:Q},Q))}),C.jsxs("div",{className:"grid grid-cols-7 gap-0.5",children:[Array.from({length:V}).map((Q,z)=>C.jsx("div",{},`empty-${z}`)),Array.from({length:L}).map((Q,z)=>{const X=z+1,Z=$(X),te=U(X),ae=k(X);return C.jsxs("button",{onClick:()=>H(X),disabled:te,className:`
                        h-8 w-8 rounded-full flex items-center justify-center text-xs transition-all relative mx-auto
                        ${Z?"bg-indigo-600 text-white shadow-sm font-bold":te?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}
                        ${ae&&!Z?"bg-indigo-50 text-indigo-700 font-semibold":""}
                    `,children:[X,ae&&!Z&&C.jsx("span",{className:"absolute bottom-1.5 left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-indigo-400 rounded-full"})]},X)})]}),C.jsx("div",{className:"mt-3 pt-2 border-t border-gray-50 flex justify-center",children:C.jsx("button",{onClick:()=>{const Q=new Date,z=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}-${String(Q.getDate()).padStart(2,"0")}`;e(z),a()},className:"text-xs font-medium text-indigo-500 hover:text-indigo-700 transition-colors",children:s==="zh"?"":"Jump to Today"})})]})},BM=({currentDate:i,onPrev:e,onNext:o,canGoNext:s,language:a,onDateSelect:u})=>{const d=FT(),[h,y]=me.useState(!1),p=me.useRef(null);return me.useEffect(()=>{const v=S=>{p.current&&!p.current.contains(S.target)&&y(!1)};return h&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[h]),C.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 mb-4 select-none relative z-20",children:[C.jsx("button",{onClick:e,className:"p-1.5 text-gray-400 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-all focus:outline-none focus:ring-2 focus:ring-gray-200 shrink-0 active:scale-95","aria-label":"Previous day",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-4 h-4",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),C.jsxs("div",{ref:p,className:`
            relative group flex items-center justify-center gap-2 px-4 py-1.5 rounded-full transition-all text-center cursor-pointer border border-transparent min-w-[160px]
            ${h?"bg-white shadow-sm border-indigo-100 text-indigo-600":"hover:bg-white/60 hover:shadow-sm text-gray-700"}
        `,onClick:()=>y(!h),children:[C.jsxs("div",{className:"flex items-center gap-2 relative z-0",children:[C.jsx("h2",{className:"text-xl font-serif font-semibold whitespace-nowrap",children:Gs(i,a)}),C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:`w-3.5 h-3.5 transition-transform duration-200 ${h?"rotate-180":"text-gray-400 group-hover:text-indigo-600"}`,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),h&&C.jsx(PM,{selectedDate:i,maxDate:d,onSelect:u,language:a,onClose:()=>y(!1)})]}),C.jsx("button",{onClick:o,disabled:!s,className:`p-1.5 rounded-full transition-all focus:outline-none focus:ring-2 focus:ring-gray-200 shrink-0 active:scale-95 ${s?"text-gray-400 hover:text-gray-900 hover:bg-gray-100":"text-gray-200 cursor-not-allowed"}`,"aria-label":"Next day",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-4 h-4",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})},zM=({isOpen:i,onClose:e,dates:o,onSelectDate:s,activeDate:a,language:u})=>{const d=rn(u);return i?C.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[C.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity",onClick:e}),C.jsxs("div",{className:"relative w-full max-w-sm bg-white shadow-2xl h-full overflow-y-auto slide-in-from-right duration-300 flex flex-col","data-state":"open",children:[C.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-white sticky top-0 z-10",children:[C.jsx("h2",{className:"font-serif text-xl font-semibold text-gray-800",children:d.historyTitle}),C.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-700 rounded-full hover:bg-gray-100",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-3",children:[o.length===0&&C.jsx("p",{className:"text-center text-gray-400 py-8",children:d.noEntries}),o.map(h=>{const y=h===a;return C.jsxs("button",{onClick:()=>{s(h),e()},className:`w-full text-left p-4 rounded-xl transition-all border ${y?"bg-indigo-50 border-indigo-200 shadow-sm ring-1 ring-indigo-200":"bg-white border-gray-100 hover:border-gray-200 hover:shadow-sm"}`,children:[C.jsxs("div",{className:"flex justify-between items-start mb-1",children:[C.jsx("span",{className:`font-semibold ${y?"text-indigo-900":"text-gray-700"}`,children:Gs(h,u)}),C.jsx("span",{className:"text-xs text-gray-400 font-mono",children:h})]}),C.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Click to view"})]},h)})]})]})]}):null},GM=({isOpen:i,onClose:e,onExportData:o,onImport:s,language:a,apiConfig:u,onSaveConfig:d})=>{const h=rn(a),y=me.useRef(null),[p,v]=me.useState("idle"),[S,E]=me.useState(u),[A,N]=me.useState(!1);if(me.useEffect(()=>{i&&(E(u),N(!1),v("idle"))},[i,u]),!i)return null;const w=()=>{d(S),N(!0),setTimeout(()=>N(!1),3e3)},L=async()=>{try{const U=await o(),k=JSON.stringify(U,null,2),ne=new Blob([k],{type:"application/json"}),ie=URL.createObjectURL(ne),H=document.createElement("a");H.href=ie,H.download=`fragment-diary-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H)}catch(U){console.error("Export failed:",U),alert("Export failed. Please try again.")}},V=async()=>{try{const U=await o();let k=`# Fragment to Diary Export
Generated on ${new Date().toLocaleDateString()}

`;Object.keys(U).sort().reverse().forEach(z=>{const X=U[z],Z=X.diaryEntry,te=X.fragments;(!te||te.length===0)&&!Z||(k+=`## ${z}

`,Z&&(k+=`### ${h.diaryCreated}: ${Z.title}
`,k+=`**${h.moodLabel}:** ${Z.mood} | **${h.tagsLabel}:** ${Z.tags.join(", ")}

`,k+=`${Z.content}

`,k+=`> *${h.reflectionLabel}: ${Z.reflection}*

`),te&&te.length>0&&(k+=`### ${h.fragments}
`,[...te].sort((ge,Ie)=>ge.timestamp-Ie.timestamp).forEach(ge=>{let G=`- **${new Date(ge.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}**: ${ge.content}`;ge.tags&&ge.tags.length>0&&(G+=` _(#${ge.tags.join(", #")})_`),k+=`${G}
`}),k+=`
`),k+=`---

`)});const ie=new Blob([k],{type:"text/markdown"}),H=URL.createObjectURL(ie),Q=document.createElement("a");Q.href=H,Q.download=`fragment-diary-export-${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)}catch(U){console.error("Export failed:",U),alert("Export failed. Please try again.")}},$=U=>{var ie;const k=(ie=U.target.files)==null?void 0:ie[0];if(!k)return;const ne=new FileReader;ne.onload=H=>{var Q;try{const z=(Q=H.target)==null?void 0:Q.result,X=JSON.parse(z);typeof X=="object"&&X!==null&&!Array.isArray(X)&&Object.values(X).every(ae=>ae&&Array.isArray(ae.fragments)&&(ae.diaryEntry===null||typeof ae.diaryEntry=="object"))?(s(X),v("success"),setTimeout(()=>v("idle"),3e3)):v("error")}catch(z){console.error(z),v("error")}},ne.readAsText(k),U.target.value=""};return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm fade-in duration-200","data-state":"open",children:C.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative zoom-in-95 max-h-[90vh] overflow-y-auto custom-scrollbar","data-state":"open",children:[C.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4 sticky top-0 bg-white z-10",children:[C.jsx("h2",{className:"text-xl font-serif font-semibold text-gray-800",children:h.settings}),C.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:h.aiConfig}),C.jsxs("div",{className:"p-5 border border-gray-100 rounded-xl bg-gray-50/50 space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.provider}),C.jsxs("select",{value:S.provider,onChange:U=>E({...S,provider:U.target.value}),className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",children:[C.jsx("option",{value:"gemini",children:h.gemini}),C.jsx("option",{value:"openai",children:h.openai})]})]}),S.provider==="openai"&&C.jsxs("div",{className:"space-y-3 fade-in slide-in-from-top","data-state":"open",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.baseUrl}),C.jsx("input",{type:"text",value:S.openaiBaseUrl,onChange:U=>E({...S,openaiBaseUrl:U.target.value}),placeholder:"https://api.openai.com/v1",className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"}),C.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Example: https://api.openai.com/v1 (Ensure CORS is enabled if connecting from browser)"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.apiKey}),C.jsx("input",{type:"password",value:S.openaiApiKey,onChange:U=>E({...S,openaiApiKey:U.target.value}),placeholder:"sk-...",className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:h.modelName}),C.jsx("input",{type:"text",value:S.openaiModel,onChange:U=>E({...S,openaiModel:U.target.value}),placeholder:"gpt-3.5-turbo",className:"w-full p-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"})]})]}),C.jsxs("div",{className:"pt-2 flex items-center justify-between",children:[C.jsx("button",{onClick:w,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors shadow-sm shadow-indigo-200",children:h.saveConfig}),A&&C.jsxs("span",{className:"text-xs text-green-600 font-medium flex items-center gap-1 fade-in","data-state":"open",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),h.configSaved]})]})]})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:h.exportData}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl hover:border-indigo-100 transition-colors flex items-center justify-between group",children:[C.jsxs("div",{className:"mr-4",children:[C.jsx("div",{className:"font-semibold text-gray-700 mb-1",children:h.json}),C.jsx("div",{className:"text-xs text-gray-500",children:h.exportJsonDesc})]}),C.jsxs("button",{onClick:L,className:"shrink-0 bg-gray-50 text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),h.exportButton]})]}),C.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl hover:border-indigo-100 transition-colors flex items-center justify-between group",children:[C.jsxs("div",{className:"mr-4",children:[C.jsx("div",{className:"font-semibold text-gray-700 mb-1",children:h.markdown}),C.jsx("div",{className:"text-xs text-gray-500",children:h.exportMdDesc})]}),C.jsxs("button",{onClick:V,className:"shrink-0 bg-gray-50 text-gray-600 hover:bg-indigo-600 hover:text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),h.exportButton]})]})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:h.importData}),C.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[C.jsx("div",{className:"text-sm text-gray-600 mb-4",children:h.importDesc}),C.jsx("input",{type:"file",ref:y,onChange:$,accept:".json",className:"hidden"}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("button",{onClick:()=>{var U;return(U=y.current)==null?void 0:U.click()},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors shadow-sm shadow-indigo-200",children:h.importButton}),p==="success"&&C.jsxs("span",{className:"text-xs text-green-600 font-medium flex items-center gap-1 fade-in","data-state":"open",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),h.importSuccess]}),p==="error"&&C.jsx("span",{className:"text-xs text-red-500 font-medium fade-in","data-state":"open",children:h.importError})]})]})]})]})})},HM=()=>{const[i,e]=me.useState(null),[o,s]=me.useState(!1),[a,u]=me.useState(!1),[d,h]=me.useState(!1),[y,p]=me.useState(!1);return me.useEffect(()=>{p((()=>{const U=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(U)})());const N=U=>{U.preventDefault(),e(U)},w=()=>{s(!0),e(null)},L=()=>{u(!navigator.onLine)},V=()=>{(window.matchMedia("(display-mode: standalone)").matches||"standalone"in window.navigator&&window.navigator.standalone)&&s(!0)},$=()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/notes/sw.js").then(k=>{k.addEventListener("updatefound",()=>{const ne=k.installing;ne&&ne.addEventListener("statechange",()=>{ne.state==="installed"&&h(!0)})})}).catch(k=>{console.error("Service worker registration failed:",k)})};return window.addEventListener("beforeinstallprompt",N),window.addEventListener("appinstalled",w),window.addEventListener("online",L),window.addEventListener("offline",L),V(),L(),$(),()=>{window.removeEventListener("beforeinstallprompt",N),window.removeEventListener("appinstalled",w),window.removeEventListener("online",L),window.removeEventListener("offline",L)}},[]),{installPrompt:i,isInstalled:o,isOffline:a,updateAvailable:d,isIOS:y,installApp:()=>{i&&(i.prompt(),i.userChoice.then(A=>{A.outcome==="accepted"?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),e(null)}))},dismissInstallPrompt:()=>{e(null)},refreshApp:()=>{d&&"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(A=>{A&&A.waiting&&(A.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}}},OM=()=>{const{installPrompt:i,isInstalled:e,isOffline:o,updateAvailable:s,isIOS:a,installApp:u,dismissInstallPrompt:d,refreshApp:h}=HM(),[y,p]=me.useState(!1),[v,S]=me.useState(!1);me.useEffect(()=>{if(a&&!e){const A=localStorage.getItem("iosInstallPromptDismissed"),N=A?parseInt(A,10):0,w=Date.now();if(!A||w-N>10080*60*1e3){p(!0),setTimeout(()=>S(!0),100);const L=setTimeout(()=>{E()},2e4);return()=>clearTimeout(L)}}},[a,e]);const E=()=>{S(!1),setTimeout(()=>{p(!1),localStorage.setItem("iosInstallPromptDismissed",Date.now().toString())},500)};return e?null:C.jsxs(C.Fragment,{children:[i&&C.jsxs("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-w-sm z-50 animate-fade-in-up",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Install Nimo"}),C.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close",children:""})]}),C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Get the full app experience with offline access and faster performance."}),C.jsx("button",{onClick:()=>u(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded transition-colors",children:"Install App"})]}),y&&C.jsxs("div",{className:`fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 transition-opacity duration-500 ${v?"opacity-100":"opacity-0"}`,children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Install Nimo"}),C.jsx("button",{onClick:E,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close",children:""})]}),C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"To install this app on your iPhone/iPad:"}),C.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300 mb-2",children:[C.jsx("span",{className:"mr-2 text-xl",children:"1."}),C.jsxs("span",{children:["Tap the ",C.jsx("strong",{children:"Share"})," button ",C.jsx("span",{className:"inline-block mx-1",children:""})]})]}),C.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[C.jsx("span",{className:"mr-2 text-xl",children:"2."}),C.jsxs("span",{children:["Select ",C.jsx("strong",{children:"Add to Home Screen"})," ",C.jsx("span",{className:"inline-block mx-1",children:""})]})]})]}),s&&C.jsxs("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg max-w-sm z-50 animate-fade-in-up",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h3",{className:"font-semibold",children:"Update Available"}),C.jsx("button",{onClick:()=>h(),className:"text-white hover:text-gray-200","aria-label":"Close",children:""})]}),C.jsx("p",{className:"text-sm mb-3",children:"A new version of Nimo is available with improvements and bug fixes."}),C.jsx("button",{onClick:()=>h(),className:"w-full bg-white text-blue-600 hover:bg-gray-100 font-medium py-2 px-4 rounded transition-colors",children:"Update Now"})]}),o&&C.jsx("div",{className:"fixed bottom-4 left-4 bg-yellow-600 text-white p-3 rounded-lg shadow-lg z-50 animate-fade-in-up",children:C.jsxs("div",{className:"flex items-center",children:[C.jsx("span",{className:"mr-2",children:""}),C.jsx("span",{className:"text-sm font-medium",children:"You're offline. Some features may be limited."})]})})]})},QT="nimo_db_migrated",ua="fragment_diary_db",VM=()=>localStorage.getItem(QT)==="true"?!1:localStorage.getItem(ua)!==null,kM=async()=>{try{console.log("[Migration] Starting migration from localStorage...");const i=localStorage.getItem(ua);if(!i)return console.log("[Migration] No data to migrate"),{success:!0,migratedCount:0};const e=JSON.parse(i),o=Object.keys(e);console.log(`[Migration] Found ${o.length} dates to migrate`);let s=0,a=0;for(const u of o){const d=e[u];if(d.fragments&&d.fragments.length>0)for(const h of d.fragments)await Ec(u,h),s++;d.diaryEntry&&(await Ds(u,d.diaryEntry),a++)}return console.log(`[Migration] Migrated ${s} fragments and ${a} diary entries`),localStorage.setItem(QT,"true"),localStorage.setItem(ua+"_backup",i),localStorage.removeItem(ua),console.log("[Migration] Migration completed successfully"),{success:!0,migratedCount:s+a}}catch(i){return console.error("[Migration] Migration failed:",i),{success:!1,error:i.message}}},FM=()=>{const{loadCurrentDayData:i,loadAllDates:e,currentDate:o}=ri();me.useEffect(()=>{(async()=>{try{if(await QA(),VM()){console.log("Migration needed, starting...");const a=await kM();a.success?console.log(`Migration successful: ${a.migratedCount} items migrated`):console.error("Migration failed:",a.error)}await i(),await e()}catch(a){console.error("Failed to initialize database:",a)}})()},[i,e]),me.useEffect(()=>{i()},[o,i])},QM=()=>{const{currentDayData:i,searchQuery:e}=ri(),{viewState:o,setViewState:s}=zs();me.useEffect(()=>{if(e.trim()){o!==Xe.SEARCH&&s(Xe.SEARCH);return}i.diaryEntry&&o===Xe.GENERATING?s(Xe.READING):!i.diaryEntry&&o===Xe.READING&&s(Xe.COMPOSING)},[i.diaryEntry,e,s])},JM=({results:i,query:e,onSelect:o,language:s})=>{const a=rn(s);return i.length===0?C.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 fade-in","data-state":"open",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 mb-4 text-gray-200",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),C.jsxs("p",{className:"text-lg font-medium text-gray-500",children:[a.noResultsFound,' "',e,'"']})]}):C.jsxs("div",{className:"fade-in duration-500 pb-12","data-state":"open",children:[C.jsxs("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:C.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})}),a.searchResults," (",i.length,")"]}),C.jsx("div",{className:"space-y-4",children:i.map((u,d)=>C.jsxs("button",{onClick:()=>o(u.date),className:"w-full text-left bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md hover:border-indigo-200 transition-all group",children:[C.jsxs("div",{className:"flex justify-between items-start mb-2",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-indigo-600 font-semibold text-sm group-hover:underline",children:Gs(u.date,s)}),C.jsx("span",{className:"text-xs text-gray-400",children:u.date})]}),C.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-medium uppercase tracking-wider ${u.type==="diary"?"bg-purple-50 text-purple-700":"bg-gray-100 text-gray-600"}`,children:u.type==="diary"?a.diaryCreated:a.fragment})]}),C.jsxs("div",{className:"mb-2",children:[C.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase mr-2",children:[u.matchField,":"]}),C.jsx("span",{className:"text-gray-800 font-medium text-sm font-serif",children:u.preview})]}),C.jsxs("div",{className:"text-xs text-gray-400 italic flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[C.jsx("span",{children:"Go to entry"}),C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:C.jsx("path",{fillRule:"evenodd",d:"M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z",clipRule:"evenodd"})})]})]},`${u.date}-${d}`))})]})},YM=()=>{const{searchResults:i,searchQuery:e,handleSearchResultSelect:o}=ri(),{language:s}=Io();return C.jsx(JM,{results:i,query:e,onSelect:o,language:s})},$M=({language:i,apiConfig:e,onTranscriptionComplete:o,onError:s})=>{const[a,u]=me.useState(!1),[d,h]=me.useState(!1),y=me.useRef(null),p=me.useRef([]),v=me.useCallback(async N=>{h(!0);try{const w=new FileReader;w.readAsDataURL(N),w.onloadend=async()=>{try{const V=w.result.split(",")[1],$=await bM(V,"audio/webm",i,e);$&&o($)}catch(L){console.error("Transcription failed",L),s==null||s("Transcription failed. Please try again.")}finally{h(!1)}}}catch(w){console.error("Audio processing failed",w),h(!1),s==null||s("Audio processing failed. Please try again.")}},[i,e,o,s]),S=me.useCallback(async()=>{try{const N=await navigator.mediaDevices.getUserMedia({audio:!0}),w=new MediaRecorder(N);y.current=w,p.current=[],w.ondataavailable=L=>{L.data.size>0&&p.current.push(L.data)},w.onstop=async()=>{const L=new Blob(p.current,{type:"audio/webm"});N.getTracks().forEach(V=>V.stop()),await v(L)},w.start(),u(!0)}catch(N){console.error("Error accessing microphone:",N),s==null||s("Could not access microphone. Please check permissions.")}},[v,s]),E=me.useCallback(()=>{y.current&&a&&(y.current.stop(),u(!1))},[a]),A=me.useCallback(()=>{y.current&&a&&(y.current.stop(),u(!1))},[a]);return{isRecording:a,isTranscribing:d,startRecording:S,stopRecording:E,cleanup:A}},To="fragment_diary_draft",KM=({onAdd:i,language:e,apiConfig:o})=>{const[s,a]=me.useState(""),[u,d]=me.useState(""),[h,y]=me.useState(!1),[p,v]=me.useState(!1),[S,E]=me.useState([]),A=me.useRef(null),N=rn(e),{isRecording:w,isTranscribing:L,startRecording:V,stopRecording:$}=$M({language:e,apiConfig:o,onTranscriptionComplete:z=>{a(X=>X?`${X} ${z}`:z)},onError:z=>{alert(z)}});me.useEffect(()=>{const z=localStorage.getItem(To);if(z)try{const X=JSON.parse(z);(X.text&&X.text.trim()||X.tags&&X.tags.trim()||X.images&&X.images.length>0)&&v(!0)}catch(X){console.error("Failed to parse draft",X)}},[]),me.useEffect(()=>{if(p&&!s&&!u&&S.length===0)return;if(p&&(s||u||S.length>0)&&v(!1),s.trim()||u.trim()||S.length>0){const X={text:s,tags:u,images:S};localStorage.setItem(To,JSON.stringify(X))}else p||localStorage.removeItem(To)},[s,u,S,p]);const U=()=>{const z=localStorage.getItem(To);if(z)try{const X=JSON.parse(z);a(X.text||""),d(X.tags||""),E(X.images||[]),X.tags&&X.tags.trim()&&y(!0),v(!1)}catch{}},k=()=>{localStorage.removeItem(To),v(!1)},ne=z=>{const X=z.target.files;X&&Array.from(X).forEach(Z=>{const te=new FileReader;te.onloadend=()=>{E(ae=>[...ae,te.result])},te.readAsDataURL(Z)}),A.current&&(A.current.value="")},ie=z=>{E(X=>X.filter((Z,te)=>te!==z))},H=me.useCallback(z=>{if(z.preventDefault(),s.trim()||S.length>0){const X=u.split(",").map(Z=>Z.trim()).filter(Z=>Z.length>0);i(s,X,S),a(""),d(""),E([]),y(!1),localStorage.removeItem(To)}},[s,u,S,i]),Q=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),H(z))};return C.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 mb-8 transition-shadow focus-within:shadow-md overflow-hidden",children:[p&&C.jsxs("div",{className:"px-4 py-2 bg-indigo-50 border-b border-indigo-100 flex items-center justify-between fade-in slide-in-from-top","data-state":"open",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 text-indigo-600",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.25a.75.75 0 00-1.5 0v2.5h-2.5a.75.75 0 000 1.5h3.25a.75.75 0 00.75-.75v-3.25z",clipRule:"evenodd"})}),C.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:N.unsavedDraft})]}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx("button",{onClick:U,className:"text-xs font-bold text-indigo-600 hover:text-indigo-800 hover:underline",children:N.restore}),C.jsx("button",{onClick:k,className:"text-xs text-gray-400 hover:text-gray-600 hover:underline",children:N.discard})]})]}),C.jsxs("form",{onSubmit:H,className:"flex flex-col",children:[C.jsx("textarea",{value:s,onChange:z=>a(z.target.value),onKeyDown:Q,placeholder:L?N.transcribing:N.placeholder,disabled:L,className:`w-full min-h-[100px] p-4 text-gray-700 placeholder-gray-400 bg-transparent outline-none resize-none font-sans text-base ${L?"animate-pulse":""}`,rows:3}),S.length>0&&C.jsx("div",{className:"px-4 pb-4 flex flex-wrap gap-2",children:S.map((z,X)=>C.jsxs("div",{className:"relative group",children:[C.jsx("img",{src:z,alt:"preview",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),C.jsx("button",{type:"button",onClick:()=>ie(X),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:C.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})]},X))}),h&&C.jsx("div",{className:"px-4 pb-2 fade-in slide-in-from-top duration-200","data-state":"open",children:C.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-md px-2 border border-gray-200 focus-within:ring-2 focus-within:ring-indigo-100 focus-within:border-indigo-300 transition-all",children:[C.jsx("span",{className:"text-gray-400 text-sm",children:"#"}),C.jsx("input",{type:"text",value:u,onChange:z=>d(z.target.value),onKeyDown:Q,placeholder:N.fragmentTagPlaceholder,className:"w-full py-2 bg-transparent border-none outline-none text-sm text-gray-600 placeholder-gray-400"})]})}),C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50/50 border-t border-gray-50",children:[C.jsxs("div",{className:"flex-1 flex items-center gap-3 min-h-[24px]",children:[C.jsx("button",{type:"button",onClick:()=>y(!h),className:`text-gray-400 hover:text-indigo-600 transition-colors p-1 rounded-md hover:bg-indigo-50 ${h?"text-indigo-600 bg-indigo-50":""}`,title:"Add tags",children:C.jsx("span",{className:"font-bold text-lg",children:"#"})}),C.jsx("button",{type:"button",onClick:()=>{var z;return(z=A.current)==null?void 0:z.click()},className:"text-gray-400 hover:text-indigo-600 transition-colors p-1 rounded-md hover:bg-indigo-50",title:"Add image",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:C.jsx("path",{fillRule:"evenodd",d:"M1 5.25A2.25 2.25 0 013.25 3h13.5A2.25 2.25 0 0119 5.25v9.5A2.25 2.25 0 0116.75 17H3.25A2.25 2.25 0 011 14.75v-9.5zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 00.75-.75v-2.69l-2.22-2.219a.75.75 0 00-1.06 0l-1.91 1.909.47.47a.75.75 0 11-1.06 1.06L6.53 8.091a.75.75 0 00-1.06 0l-2.97 2.97zM12 7a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})}),C.jsx("input",{type:"file",ref:A,onChange:ne,className:"hidden",accept:"image/*",multiple:!0}),L&&C.jsx("span",{className:"text-xs text-indigo-500 font-medium animate-pulse bg-indigo-50 px-3 py-1 rounded-full",children:N.transcribing})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("button",{type:"button",onClick:w?$:V,disabled:L,className:`p-2 rounded-full transition-all flex items-center justify-center w-10 h-10 ${w?"bg-red-500 hover:bg-red-600 text-white animate-pulse shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-500 hover:text-indigo-600"}`,title:w?N.stopRecording:N.startRecording,children:w?C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:C.jsx("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-9a3 3 0 01-3-3v-9z",clipRule:"evenodd"})}):C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:[C.jsx("path",{d:"M8.25 4.5a3.75 3.75 0 117.5 0v8.25a3.75 3.75 0 11-7.5 0V4.5z"}),C.jsx("path",{d:"M6 10.5a.75.75 0 01.75.75v1.5a5.25 5.25 0 1010.5 0v-1.5a.75.75 0 011.5 0v1.5a6.751 6.751 0 01-6 6.709v2.291h3a.75.75 0 010 1.5h-7.5a.75.75 0 010-1.5h3v-2.291a6.751 6.751 0 01-6-6.709v-1.5A.75.75 0 016 10.5z"})]})}),C.jsx("button",{type:"submit",disabled:!s.trim()&&S.length===0||w||L,className:`p-2 rounded-full transition-all flex items-center justify-center w-10 h-10 shadow-sm ${!s.trim()&&S.length===0||w||L?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200"}`,"aria-label":N.addNote,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]})]})]})]})},XM=({fragments:i,onDelete:e,onUpdate:o,language:s})=>{const a=me.useRef(null),[u,d]=me.useState(null),[h,y]=me.useState(null),[p,v]=me.useState(null),[S,E]=me.useState(""),[A,N]=me.useState(""),[w,L]=me.useState([]),V=rn(s);me.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[i.length]);const $=me.useMemo(()=>{const Z=new Set;return i.forEach(te=>{var ae;return(ae=te.tags)==null?void 0:ae.forEach(ge=>Z.add(ge))}),Array.from(Z).sort()},[i]),U=me.useMemo(()=>{let Z=i;return h&&(Z=i.filter(te=>{var ae;return(ae=te.tags)==null?void 0:ae.includes(h)})),[...Z].sort((te,ae)=>ae.timestamp-te.timestamp)},[i,h]),k=Z=>{d(Z)},ne=()=>{u&&(e(u),d(null))},ie=()=>{d(null)},H=Z=>{var te;v(Z.id),E(Z.content),N(((te=Z.tags)==null?void 0:te.join(", "))||""),L(Z.images||[])},Q=()=>{if(p&&(S.trim()||w.length>0)){const Z=A.split(",").map(te=>te.trim()).filter(te=>te.length>0);o(p,S,Z,w),v(null)}},z=()=>{v(null),E(""),N(""),L([])},X=Z=>{L(te=>te.filter((ae,ge)=>ge!==Z))};return i.length===0?C.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12 mb-3 opacity-50",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),C.jsx("p",{children:V.noNotes})]}):C.jsxs("div",{className:"flex-grow flex flex-col relative mb-6",children:[$.length>0&&C.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 px-1 fade-in slide-in-from-top duration-300","data-state":"open",children:[C.jsx("button",{onClick:()=>y(null),className:`px-3 py-1 rounded-full text-xs font-medium transition-all ${h===null?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:V.filterAll}),$.map(Z=>C.jsxs("button",{onClick:()=>y(h===Z?null:Z),className:`px-3 py-1 rounded-full text-xs font-medium transition-all border ${h===Z?"bg-indigo-100 text-indigo-700 border-indigo-200 shadow-sm":"bg-white text-gray-500 border-gray-200 hover:border-indigo-200 hover:text-indigo-600"}`,children:["#",Z]},Z))]}),C.jsxs("div",{className:"relative flex-grow",children:[C.jsx("div",{className:"absolute left-[19px] md:left-[50%] top-0 bottom-0 w-3.5 -translate-x-1/2 z-0 flex items-center justify-center",children:C.jsx("div",{className:"w-0.5 h-full bg-gray-200"})}),C.jsx("div",{ref:a,className:"space-y-6 relative z-10 max-h-[60vh] overflow-y-auto pr-2 scroll-smooth py-4",children:U.length===0?C.jsxs("div",{className:"text-center py-8 text-gray-400 text-sm italic bg-white/50 rounded-lg",children:["No fragments found with tag #",h]}):U.map((Z,te)=>{const ge=new Date(Z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ie=p===Z.id,G=te%2===0;return C.jsxs("div",{className:`flex md:flex-row flex-col items-start md:items-center group ${G?"md:flex-row-reverse":""}`,children:[C.jsx("div",{className:`md:w-1/2 w-full flex ${G?"md:justify-start md:pl-20":"md:justify-end md:pr-20"} pl-10 md:px-0 mb-1 md:mb-0`,children:C.jsx("span",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider font-sans md:text-sm",children:ge})}),C.jsx("div",{className:"absolute left-[19px] md:left-[50%] w-3.5 h-3.5 bg-gradient-to-br from-indigo-500 to-purple-600 border-2 border-white rounded-full -translate-x-1/2 shadow-md shadow-indigo-200 z-20 mt-1.5 md:mt-0 ring-2 ring-indigo-50"}),C.jsx("div",{className:`md:w-1/2 w-full pl-10 ${G?"md:pr-10 md:pl-0":"md:pl-10"}`,children:Ie?C.jsxs("div",{className:"relative bg-white p-4 rounded-xl border-2 border-indigo-100 shadow-md z-20",children:[C.jsx("textarea",{value:S,onChange:ee=>E(ee.target.value),className:"w-full text-sm text-gray-700 border-none outline-none resize-none bg-transparent mb-3 font-sans md:text-base",rows:3,autoFocus:!0,placeholder:"Edit note..."}),w.length>0&&C.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:w.map((ee,fe)=>C.jsxs("div",{className:"relative group",children:[C.jsx("img",{src:ee,alt:"edit",className:"w-16 h-16 object-cover rounded-md border border-gray-200"}),C.jsx("button",{onClick:()=>X(fe),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:C.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})]},fe))}),C.jsxs("div",{className:"flex items-center gap-2 mb-3 bg-gray-50 rounded px-2 border border-gray-100",children:[C.jsx("span",{className:"text-gray-400 text-sm",children:"#"}),C.jsx("input",{value:A,onChange:ee=>N(ee.target.value),className:"w-full py-1 bg-transparent text-sm text-gray-600 outline-none",placeholder:V.fragmentTagPlaceholder})]}),C.jsxs("div",{className:"flex justify-end gap-2 border-t border-gray-50 pt-2",children:[C.jsx("button",{onClick:z,className:"text-xs font-medium px-3 py-1.5 rounded text-gray-500 hover:bg-gray-100",children:V.cancel}),C.jsx("button",{onClick:Q,className:"text-xs font-medium px-3 py-1.5 rounded bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm",children:V.save})]})]}):C.jsxs("div",{className:"relative bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group-hover:border-indigo-100",children:[C.jsx("p",{className:"text-gray-700 leading-relaxed text-sm md:text-base",children:Z.content}),Z.images&&Z.images.length>0&&C.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Z.images.map((ee,fe)=>C.jsx("img",{src:ee,alt:"fragment",className:"w-full max-w-[200px] h-auto object-cover rounded-lg border border-gray-100"},fe))}),Z.tags&&Z.tags.length>0&&C.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Z.tags.map((ee,fe)=>C.jsxs("span",{className:"text-xs text-indigo-500 bg-indigo-50 px-2 py-1 rounded-md md:text-sm",children:["#",ee]},fe))}),C.jsxs("div",{className:"absolute -top-4 right-3 flex items-center opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out translate-y-1 group-hover:translate-y-0 bg-white shadow-lg shadow-gray-200/50 border border-gray-100 rounded-full overflow-hidden z-10 hover:shadow-xl hover:shadow-gray-300/60",children:[C.jsx("button",{onClick:()=>H(Z),className:"p-2.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors border-r border-gray-100/50",title:V.edit,children:C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[C.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),C.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})}),C.jsx("button",{onClick:()=>k(Z.id),className:"p-2.5 text-gray-400 hover:text-red-500 hover:bg-red-50/50 transition-colors",title:V.deleteNote,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:C.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})})]})]})})]},Z.id)})})]}),u&&C.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-white/80 backdrop-blur-sm rounded-xl fade-in duration-200","data-state":"open",children:C.jsxs("div",{className:"bg-white border border-gray-200 shadow-xl rounded-xl p-6 max-w-xs w-full transform scale-100",children:[C.jsx("h3",{className:"text-lg font-serif font-semibold text-gray-800 mb-2",children:V.deleteConfirmTitle}),C.jsx("p",{className:"text-sm text-gray-500 mb-6",children:V.deleteConfirmMessage}),C.jsxs("div",{className:"flex justify-end gap-3",children:[C.jsx("button",{onClick:ie,className:"text-sm font-medium text-gray-600 hover:bg-gray-50 px-4 py-2 rounded-lg transition-colors",children:V.cancel}),C.jsx("button",{onClick:ne,className:"text-sm font-medium bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 shadow-sm shadow-red-200 transition-colors",children:V.confirmDelete})]})]})})]})},ZM=()=>{const i=ri(),e=zs(),o=Io(),{currentDayData:s,currentDate:a,selectedTone:u,addFragment:d,deleteFragment:h,updateFragment:y,setSelectedTone:p,setError:v,loadCurrentDayData:S}=i,{setViewState:E,setShowClearConfirm:A}=e,{language:N,apiConfig:w}=o,L=rn(N),V=async()=>{if(s.fragments.length!==0){E(Xe.GENERATING),v(null);try{const U=await VT(s.fragments,N,u,w);await Ds(a,U),await S(),E(Xe.READING)}catch(U){console.error(U),v(L.failedError),E(Xe.COMPOSING)}}},$=()=>{A(!0)};return C.jsxs("div",{className:"fade-in duration-500","data-state":"open",children:[C.jsx(KM,{onAdd:d,language:N,apiConfig:w}),C.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[C.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:L.timeline}),s.fragments.length>0&&C.jsx("button",{onClick:$,className:"text-xs text-gray-400 hover:text-red-500 underline transition-colors",children:L.clearDay})]}),C.jsx(XM,{fragments:s.fragments,onDelete:h,onUpdate:y,language:N}),C.jsx("div",{className:"sticky bottom-6 mt-8 flex flex-col items-center z-30 pointer-events-none",children:C.jsxs("div",{className:"pointer-events-auto flex flex-col items-center gap-3",children:[s.fragments.length>0&&C.jsxs("div",{className:"bg-white/90 backdrop-blur-sm p-1.5 rounded-full shadow-sm border border-indigo-100 flex items-center gap-2 fade-in slide-in-from-top","data-state":"open",children:[C.jsxs("div",{className:"px-2 flex items-center gap-1 text-xs font-medium text-gray-400",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:C.jsx("path",{fillRule:"evenodd",d:"M10 2c-1.716 0-3.408.106-5.07.31C3.806 2.45 3 3.414 3 4.517V17.25a.75.75 0 001.075.676L10 15.082l5.925 2.844A.75.75 0 0017 17.25V4.517c0-1.103-.806-2.068-1.93-2.207A41.403 41.403 0 0010 2z",clipRule:"evenodd"})}),L.toneLabel]}),C.jsx("select",{value:u,onChange:U=>p(U.target.value),className:"bg-gray-50 text-sm border-0 rounded-full py-1 pl-3 pr-8 focus:ring-2 focus:ring-indigo-500 text-gray-700 cursor-pointer hover:bg-gray-100 transition-colors font-medium",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundSize:"1.5em 1.5em",backgroundRepeat:"no-repeat",appearance:"none"},children:Object.entries(L.tones).map(([U,k])=>C.jsx("option",{value:U,children:k},U))})]}),C.jsxs("button",{onClick:V,disabled:s.fragments.length===0,className:`
                group relative inline-flex items-center justify-center overflow-hidden rounded-full p-4 px-8 font-medium text-white shadow-2xl transition-all duration-300 focus:outline-none
                ${s.fragments.length===0?"bg-gray-300 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800 hover:scale-105 hover:shadow-indigo-500/20"}
              `,children:[C.jsx("span",{className:"mr-2",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})})}),C.jsx("span",{children:s.diaryEntry?L.regenerateButton:L.weaveButton})]})]})}),s.diaryEntry&&C.jsx("div",{className:"text-center mt-2",children:C.jsx("button",{onClick:()=>E(Xe.READING),className:"text-sm text-indigo-600 hover:underline",children:L.cancelView})})]})},WM=({entry:i,onBack:e,onUpdate:o,language:s})=>{const a=rn(s),u=s==="zh"?"zh-CN":"en-US",d=new Date().toLocaleDateString(u,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),[h,y]=me.useState(!1),[p,v]=me.useState(i),[S,E]=me.useState(i.tags.join(", "));me.useEffect(()=>{v(i),E(i.tags.join(", "))},[i]);const A=()=>{const w={...p,tags:S.split(",").map(L=>L.trim()).filter(L=>L.length>0)};o(w),y(!1)},N=()=>{v(i),E(i.tags.join(", ")),y(!1)};return C.jsxs("div",{className:"fade-in max-w-3xl mx-auto pb-20","data-state":"open",children:[C.jsxs("div",{className:"bg-paper border border-stone-100 shadow-xl rounded-sm p-8 md:p-12 relative overflow-hidden transition-all",children:[C.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 opacity-30"}),C.jsx("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:h?C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:N,className:"text-xs font-medium px-3 py-1.5 rounded text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:a.cancel}),C.jsx("button",{onClick:A,className:"text-xs font-medium px-3 py-1.5 rounded bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm",children:a.save})]}):C.jsx("button",{onClick:()=>y(!0),className:"p-2 text-gray-400 hover:text-indigo-600 rounded-full hover:bg-indigo-50 transition-colors",title:a.edit,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})})}),h?C.jsxs("div",{className:"space-y-6 mt-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.moodLabel}),C.jsx("input",{type:"text",value:p.mood,onChange:w=>v({...p,mood:w.target.value}),className:"w-full p-2 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-sans text-sm"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.titleLabel}),C.jsx("input",{type:"text",value:p.title,onChange:w=>v({...p,title:w.target.value}),className:"w-full p-2 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-serif text-xl"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.contentLabel}),C.jsx("textarea",{value:p.content,onChange:w=>v({...p,content:w.target.value}),rows:10,className:"w-full p-3 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-serif text-base leading-relaxed"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.reflectionLabel}),C.jsx("textarea",{value:p.reflection,onChange:w=>v({...p,reflection:w.target.value}),rows:3,className:"w-full p-3 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-serif italic text-gray-600"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1",children:a.tagsLabel}),C.jsx("input",{type:"text",value:S,onChange:w=>E(w.target.value),className:"w-full p-2 border border-gray-200 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none font-sans text-sm"})]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"mb-8 text-center mt-4",children:[C.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-indigo-50 text-indigo-600 text-xs font-medium uppercase tracking-wider mb-4",children:i.mood}),C.jsx("h2",{className:"font-serif text-3xl md:text-4xl text-gray-900 mb-2 leading-tight",children:i.title}),C.jsx("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm font-sans",children:C.jsx("span",{children:d})})]}),C.jsx("div",{className:"prose prose-stone prose-lg max-w-none font-serif leading-loose text-gray-800 first-letter:text-5xl first-letter:font-serif first-letter:float-left first-letter:mr-2 first-letter:mt-[-4px] text-justify",children:i.content.split(`
`).map((w,L)=>w.trim()&&C.jsx("p",{className:"mb-4",children:w},L))}),C.jsxs("div",{className:"mt-10 pt-8 border-t border-gray-200",children:[C.jsx("h3",{className:"text-sm font-sans font-bold text-gray-400 uppercase tracking-widest mb-3",children:a.reflectionLabel}),C.jsxs("p",{className:"font-serif italic text-gray-600 text-lg bg-gray-50 p-6 rounded-r-lg border-l-4 border-indigo-300",children:['"',i.reflection,'"']})]}),C.jsx("div",{className:"mt-8 flex flex-wrap gap-2",children:i.tags.map(w=>C.jsxs("span",{className:"text-xs text-gray-500 px-2 py-1 border border-gray-200 rounded hover:bg-gray-50 cursor-default",children:["#",w]},w))})]})]}),C.jsx("div",{className:"mt-8 text-center",children:C.jsxs("button",{onClick:e,className:"text-gray-500 hover:text-gray-900 text-sm font-medium flex items-center justify-center gap-2 mx-auto transition-colors",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),a.backToFragments]})})]})},jM=()=>{const{currentDayData:i,updateDiaryEntry:e}=ri(),{backToFragments:o}=zs(),{language:s}=Io();return i.diaryEntry?C.jsx(WM,{entry:i.diaryEntry,onBack:o,onUpdate:e,language:s}):null},eD=()=>{const{currentDate:i}=ri(),{language:e}=Io(),o=rn(e);return C.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] animate-pulse",children:[C.jsxs("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-6 relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-indigo-100 animate-[spin_3s_linear_infinite]"}),C.jsx("div",{className:"bg-white w-14 h-14 rounded-full z-10 flex items-center justify-center",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-indigo-500",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})})]}),C.jsx("h3",{className:"text-xl font-serif font-medium text-gray-800 mb-2",children:o.writingStory}),C.jsxs("p",{className:"text-gray-400 text-sm",children:[o.analyzing," ",Gs(i,e)]})]})};function tD(){const i=ri(),e=zs(),o=Io(),{currentDate:s,allDates:a,searchQuery:u,error:d,setCurrentDate:h,performSearch:y,importData:p,clearDayData:v,exportAllData:S}=i,{viewState:E,isHistoryOpen:A,isSettingsOpen:N,showClearConfirm:w,setViewState:L,setHistoryOpen:V,setSettingsOpen:$,setShowClearConfirm:U}=e,{language:k,apiConfig:ne,setApiConfig:ie}=o,H=me.useMemo(()=>rn(k),[k]);FM(),QM(),Eo.useEffect(()=>{y(u,H)},[u,H,y]);const Q=async ge=>{await p(ge)},z=ge=>{ie(ge)},X=()=>{h(Xg(s,-1))},Z=()=>{h(Xg(s,1))},te=async()=>{await v(),L(Xe.COMPOSING),U(!1)},ae=s===FT();return C.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans text-gray-900 pb-10",children:[C.jsx(qM,{}),C.jsx(OM,{}),C.jsx(zM,{isOpen:A,onClose:()=>V(!1),dates:a,activeDate:s,onSelectDate:ge=>{h(ge),V(!1)},language:k}),C.jsx(GM,{isOpen:N,onClose:()=>$(!1),onExportData:S,onImport:Q,language:k,apiConfig:ne,onSaveConfig:z}),C.jsxs("main",{className:"max-w-2xl mx-auto px-4",children:[E!==Xe.SEARCH&&C.jsx(BM,{currentDate:s,onPrev:X,onNext:Z,canGoNext:!ae,language:k,onDateSelect:h}),d&&C.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm flex items-center gap-2 animate-pulse",children:C.jsx("span",{children:d})}),E===Xe.SEARCH&&C.jsx(YM,{}),E===Xe.COMPOSING&&C.jsx(ZM,{}),E===Xe.GENERATING&&C.jsx(eD,{}),E===Xe.READING&&C.jsx(jM,{}),w&&C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm fade-in duration-200","data-state":"open",children:C.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-6 transform scale-100 zoom-in-95","data-state":"open",children:[C.jsx("h3",{className:"text-lg font-serif font-semibold text-gray-800 mb-2",children:"Clear Today's Data?"}),C.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[H.clearConfirm," ",Gs(s,k),"?"]}),C.jsxs("div",{className:"flex justify-end gap-3",children:[C.jsx("button",{onClick:()=>U(!1),className:"text-sm font-medium text-gray-600 hover:bg-gray-50 px-4 py-2 rounded-lg transition-colors",children:H.cancel}),C.jsx("button",{onClick:te,className:"text-sm font-medium bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 shadow-sm shadow-red-200 transition-colors",children:H.confirmDelete})]})]})})]})]})}const Zg=document.getElementById("root");Zg&&N_.createRoot(Zg).render(C.jsx(Eo.StrictMode,{children:C.jsx(tD,{})}));export{oS as W};
